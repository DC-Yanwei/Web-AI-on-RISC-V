var __webpack_modules__={"./node_modules/@huggingface/jinja/dist/index.js":(e,t,r)=>{r.r(t),r.d(t,{Environment:()=>se,Interpreter:()=>ae,Template:()=>de,parse:()=>z,tokenize:()=>c});var o=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),n=class{constructor(e,t){this.value=e,this.type=t}};function s(e){return/\w/.test(e)}function a(e){return/[0-9]/.test(e)}var i=[["{%",o.OpenStatement],["%}",o.CloseStatement],["{{",o.OpenExpression],["}}",o.CloseExpression],["(",o.OpenParen],[")",o.CloseParen],["{",o.OpenCurlyBracket],["}",o.CloseCurlyBracket],["[",o.OpenSquareBracket],["]",o.CloseSquareBracket],[",",o.Comma],[".",o.Dot],[":",o.Colon],["|",o.Pipe],["<=",o.ComparisonBinaryOperator],[">=",o.ComparisonBinaryOperator],["==",o.ComparisonBinaryOperator],["!=",o.ComparisonBinaryOperator],["<",o.ComparisonBinaryOperator],[">",o.ComparisonBinaryOperator],["+",o.AdditiveBinaryOperator],["-",o.AdditiveBinaryOperator],["~",o.AdditiveBinaryOperator],["*",o.MultiplicativeBinaryOperator],["/",o.MultiplicativeBinaryOperator],["%",o.MultiplicativeBinaryOperator],["=",o.Equals]],l=new Map([["n","\n"],["t","\t"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function c(e,t={}){const r=[],c=function(e,t={}){return e.endsWith("\n")&&(e=e.slice(0,-1)),t.lstrip_blocks&&(e=e.replace(/^[ \t]*({[#%-])/gm,"$1")),t.trim_blocks&&(e=e.replace(/([#%-]})\n/g,"$1")),e.replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{").replace(/-#}\s*/g,"#}").replace(/\s*{#-/g,"{#").replace(/{%\s*(end)?generation\s*%}/gs,"")}(e,t);let _=0,p=0;const u=e=>{let t="";for(;e(c[_]);){if("\\"===c[_]){if(++_,_>=c.length)throw new SyntaxError("Unexpected end of input");const e=c[_++],r=l.get(e);if(void 0===r)throw new SyntaxError(`Unexpected escaped character: ${e}`);t+=r;continue}if(t+=c[_++],_>=c.length)throw new SyntaxError("Unexpected end of input")}return t};e:for(;_<c.length;){const e=r.at(-1)?.type;if(void 0===e||e===o.CloseStatement||e===o.CloseExpression||e===o.Comment){let e="";for(;_<c.length&&("{"!==c[_]||"%"!==c[_+1]&&"{"!==c[_+1]&&"#"!==c[_+1]);)e+=c[_++];if(e.length>0){r.push(new n(e,o.Text));continue}}if("{"===c[_]&&"#"===c[_+1]){_+=2;let e="";for(;"#"!==c[_]||"}"!==c[_+1];){if(_+2>=c.length)throw new SyntaxError("Missing end of comment tag");e+=c[_++]}r.push(new n(e,o.Comment)),_+=2;continue}u(e=>/\s/.test(e));const t=c[_];if("-"===t||"+"===t){const e=r.at(-1)?.type;if(e===o.Text||void 0===e)throw new SyntaxError(`Unexpected character: ${t}`);switch(e){case o.Identifier:case o.NumericLiteral:case o.StringLiteral:case o.CloseParen:case o.CloseSquareBracket:break;default:{++_;const e=u(a);r.push(new n(`${t}${e}`,e.length>0?o.NumericLiteral:o.UnaryOperator));continue}}}for(const[e,t]of i){if("}}"===e&&p>0)continue;if(c.slice(_,_+e.length)===e){r.push(new n(e,t)),t===o.OpenExpression?p=0:t===o.OpenCurlyBracket?++p:t===o.CloseCurlyBracket&&--p,_+=e.length;continue e}}if("'"===t||'"'===t){++_;const e=u(e=>e!==t);r.push(new n(e,o.StringLiteral)),++_;continue}if(a(t)){let e=u(a);if("."===c[_]&&a(c[_+1])){++_;e=`${e}.${u(a)}`}r.push(new n(e,o.NumericLiteral));continue}if(s(t)){const e=u(s);r.push(new n(e,o.Identifier));continue}throw new SyntaxError(`Unexpected character: ${t}`)}return r}var _=class{type="Statement"},p=class extends _{constructor(e){super(),this.body=e}type="Program"},u=class extends _{constructor(e,t,r){super(),this.test=e,this.body=t,this.alternate=r}type="If"},d=class extends _{constructor(e,t,r,o){super(),this.loopvar=e,this.iterable=t,this.body=r,this.defaultBlock=o}type="For"},h=class extends _{type="Break"},f=class extends _{type="Continue"},m=class extends _{constructor(e,t,r){super(),this.assignee=e,this.value=t,this.body=r}type="Set"},g=class extends _{constructor(e,t,r){super(),this.name=e,this.args=t,this.body=r}type="Macro"},b=class extends _{constructor(e){super(),this.value=e}type="Comment"},w=class extends _{type="Expression"},x=class extends w{constructor(e,t,r){super(),this.object=e,this.property=t,this.computed=r}type="MemberExpression"},y=class extends w{constructor(e,t){super(),this.callee=e,this.args=t}type="CallExpression"},M=class extends w{constructor(e){super(),this.value=e}type="Identifier"},T=class extends w{constructor(e){super(),this.value=e}type="Literal"},k=class extends T{type="IntegerLiteral"},v=class extends T{type="FloatLiteral"},P=class extends T{type="StringLiteral"},S=class extends T{type="ArrayLiteral"},F=class extends T{type="TupleLiteral"},C=class extends T{type="ObjectLiteral"},E=class extends w{constructor(e,t,r){super(),this.operator=e,this.left=t,this.right=r}type="BinaryExpression"},A=class extends w{constructor(e,t){super(),this.operand=e,this.filter=t}type="FilterExpression"},I=class extends _{constructor(e,t){super(),this.filter=e,this.body=t}type="FilterStatement"},O=class extends w{constructor(e,t){super(),this.lhs=e,this.test=t}type="SelectExpression"},L=class extends w{constructor(e,t,r){super(),this.operand=e,this.negate=t,this.test=r}type="TestExpression"},D=class extends w{constructor(e,t){super(),this.operator=e,this.argument=t}type="UnaryExpression"},N=class extends w{constructor(e=void 0,t=void 0,r=void 0){super(),this.start=e,this.stop=t,this.step=r}type="SliceExpression"},B=class extends w{constructor(e,t){super(),this.key=e,this.value=t}type="KeywordArgumentExpression"},$=class extends w{constructor(e){super(),this.argument=e}type="SpreadExpression"},V=class extends _{constructor(e,t,r){super(),this.call=e,this.callerArgs=t,this.body=r}type="CallStatement"},j=class extends w{constructor(e,t,r){super(),this.condition=e,this.trueExpr=t,this.falseExpr=r}type="Ternary"};function z(e){const t=new p([]);let r=0;function s(t,o){const n=e[r++];if(!n||n.type!==t)throw new Error(`Parser Error: ${o}. ${n.type} !== ${t}.`);return n}function a(e){if(!_(e))throw new SyntaxError(`Expected ${e}`);++r}function i(){switch(e[r].type){case o.Comment:return new b(e[r++].value);case o.Text:return new P(s(o.Text,"Expected text token").value);case o.OpenStatement:return function(){if(s(o.OpenStatement,"Expected opening statement token"),e[r].type!==o.Identifier)throw new SyntaxError(`Unknown statement, got ${e[r].type}`);const t=e[r].value;let n;switch(t){case"set":++r,n=function(){const e=T();let t=null;const n=[];if(l(o.Equals))++r,t=T();else{for(s(o.CloseStatement,"Expected %} token");!c("endset");)n.push(i());s(o.OpenStatement,"Expected {% token"),a("endset")}return s(o.CloseStatement,"Expected closing statement token"),new m(e,t,n)}();break;case"if":++r,n=w(),s(o.OpenStatement,"Expected {% token"),a("endif"),s(o.CloseStatement,"Expected %} token");break;case"macro":++r,n=function(){const e=K();if("Identifier"!==e.type)throw new SyntaxError("Expected identifier following macro statement");const t=X();s(o.CloseStatement,"Expected closing statement token");const r=[];for(;!c("endmacro");)r.push(i());return new g(e,t,r)}(),s(o.OpenStatement,"Expected {% token"),a("endmacro"),s(o.CloseStatement,"Expected %} token");break;case"for":++r,n=function(){const e=T(!0);if(!(e instanceof M||e instanceof F))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${e.type} instead`);if(!_("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++r;const t=z();s(o.CloseStatement,"Expected closing statement token");const n=[];for(;!c("endfor","else");)n.push(i());const a=[];if(c("else"))for(++r,++r,s(o.CloseStatement,"Expected closing statement token");!c("endfor");)a.push(i());return new d(e,t,n,a)}(),s(o.OpenStatement,"Expected {% token"),a("endfor"),s(o.CloseStatement,"Expected %} token");break;case"call":{++r;let e=null;l(o.OpenParen)&&(e=X());const t=K();if("Identifier"!==t.type)throw new SyntaxError("Expected identifier following call statement");const _=X();s(o.CloseStatement,"Expected closing statement token");const p=[];for(;!c("endcall");)p.push(i());s(o.OpenStatement,"Expected '{%'"),a("endcall"),s(o.CloseStatement,"Expected closing statement token");const u=new y(t,_);n=new V(u,e,p);break}case"break":++r,s(o.CloseStatement,"Expected closing statement token"),n=new h;break;case"continue":++r,s(o.CloseStatement,"Expected closing statement token"),n=new f;break;case"filter":{++r;let e=K();e instanceof M&&l(o.OpenParen)&&(e=H(e)),s(o.CloseStatement,"Expected closing statement token");const t=[];for(;!c("endfilter");)t.push(i());s(o.OpenStatement,"Expected '{%'"),a("endfilter"),s(o.CloseStatement,"Expected '%}'"),n=new I(e,t);break}default:throw new SyntaxError(`Unknown statement type: ${t}`)}return n}();case o.OpenExpression:return function(){s(o.OpenExpression,"Expected opening expression token");const e=z();return s(o.CloseExpression,"Expected closing expression token"),e}();default:throw new SyntaxError(`Unexpected token type: ${e[r].type}`)}}function l(...t){return r+t.length<=e.length&&t.every((t,o)=>t===e[r+o].type)}function c(...t){return e[r]?.type===o.OpenStatement&&e[r+1]?.type===o.Identifier&&t.includes(e[r+1]?.value)}function _(...t){return r+t.length<=e.length&&t.every((t,o)=>"Identifier"===e[r+o].type&&t===e[r+o].value)}function w(){const e=z();s(o.CloseStatement,"Expected closing statement token");const t=[],n=[];for(;!c("elif","else","endif");)t.push(i());if(c("elif")){++r,++r;const e=w();n.push(e)}else if(c("else"))for(++r,++r,s(o.CloseStatement,"Expected closing statement token");!c("endif");)n.push(i());return new u(e,t,n)}function T(e=!1){const t=e?K:z,n=[t()],s=l(o.Comma);for(;s&&(++r,n.push(t()),l(o.Comma)););return s?new F(n):n[0]}function z(){return R()}function R(){const e=G();if(_("if")){++r;const t=G();if(_("else")){++r;const o=R();return new j(t,e,o)}return new O(e,t)}return e}function G(){let t=U();for(;_("or");){const o=e[r];++r;const n=U();t=new E(o,t,n)}return t}function U(){let t=q();for(;_("and");){const o=e[r];++r;const n=q();t=new E(o,t,n)}return t}function q(){let t;for(;_("not");){const o=e[r];++r;const n=q();t=new D(o,n)}return t??function(){let t=W();for(;;){let s;if(_("not","in"))s=new n("not in",o.Identifier),r+=2;else if(_("in"))s=e[r++];else{if(!l(o.ComparisonBinaryOperator))break;s=e[r++]}const a=W();t=new E(s,t,a)}return t}()}function W(){let t=J();for(;l(o.AdditiveBinaryOperator);){const o=e[r];++r;const n=J();t=new E(o,t,n)}return t}function H(e){let t=new y(e,X());return t=Y(t),l(o.OpenParen)&&(t=H(t)),t}function X(){s(o.OpenParen,"Expected opening parenthesis for arguments list");const t=function(){const t=[];for(;!l(o.CloseParen);){let n;if(e[r].type===o.MultiplicativeBinaryOperator&&"*"===e[r].value){++r;const e=z();n=new $(e)}else if(n=z(),l(o.Equals)){if(++r,!(n instanceof M))throw new SyntaxError("Expected identifier for keyword argument");const e=z();n=new B(n,e)}t.push(n),l(o.Comma)&&++r}return t}();return s(o.CloseParen,"Expected closing parenthesis for arguments list"),t}function Q(){const e=[];let t=!1;for(;!l(o.CloseSquareBracket);)l(o.Colon)?(e.push(void 0),++r,t=!0):(e.push(z()),l(o.Colon)&&(++r,t=!0));if(0===e.length)throw new SyntaxError("Expected at least one argument for member/slice expression");if(t){if(e.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new N(...e)}return e[0]}function Y(t){for(;l(o.Dot)||l(o.OpenSquareBracket);){const n=e[r];let a;++r;const i=n.type===o.OpenSquareBracket;if(i)a=Q(),s(o.CloseSquareBracket,"Expected closing square bracket");else if(a=K(),"Identifier"!==a.type)throw new SyntaxError("Expected identifier following dot operator");t=new x(t,a,i)}return t}function J(){let t=Z();for(;l(o.MultiplicativeBinaryOperator);){const o=e[r++],n=Z();t=new E(o,t,n)}return t}function Z(){let e=function(){let e=function(){const e=Y(K());return l(o.OpenParen)?H(e):e}();for(;l(o.Pipe);){++r;let t=K();if(!(t instanceof M))throw new SyntaxError("Expected identifier for the filter");l(o.OpenParen)&&(t=H(t)),e=new A(e,t)}return e}();for(;_("is");){++r;const t=_("not");t&&++r;const o=K();if(!(o instanceof M))throw new SyntaxError("Expected identifier for the test");e=new L(e,t,o)}return e}function K(){const t=e[r++];switch(t.type){case o.NumericLiteral:{const e=t.value;return e.includes(".")?new v(Number(e)):new k(Number(e))}case o.StringLiteral:{let n=t.value;for(;l(o.StringLiteral);)n+=e[r++].value;return new P(n)}case o.Identifier:return new M(t.value);case o.OpenParen:{const e=T();return s(o.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),e}case o.OpenSquareBracket:{const e=[];for(;!l(o.CloseSquareBracket);)e.push(z()),l(o.Comma)&&++r;return++r,new S(e)}case o.OpenCurlyBracket:{const e=new Map;for(;!l(o.CloseCurlyBracket);){const t=z();s(o.Colon,"Expected colon between key and value in object literal");const n=z();e.set(t,n),l(o.Comma)&&++r}return++r,new C(e)}default:throw new SyntaxError(`Unexpected token: ${t.type}`)}}for(;r<e.length;)t.body.push(i());return t}function R(e,t,r=1){void 0===t&&(t=e,e=0);const o=[];for(let n=e;n<t;n+=r)o.push(n);return o}function G(e,t,r,o=1){const n=Math.sign(o);n>=0?(t=(t??=0)<0?Math.max(e.length+t,0):Math.min(t,e.length),r=(r??=e.length)<0?Math.max(e.length+r,0):Math.min(r,e.length)):(t=(t??=e.length-1)<0?Math.max(e.length+t,-1):Math.min(t,e.length-1),r=(r??=-1)<-1?Math.max(e.length+r,-1):Math.min(r,e.length-1));const s=[];for(let a=t;n*a<n*r;a+=o)s.push(e[a]);return s}function U(e){return function(e,t){const r=new Intl.DateTimeFormat(void 0,{month:"long"}),o=new Intl.DateTimeFormat(void 0,{month:"short"}),n=e=>e<10?"0"+e:e.toString();return t.replace(/%[YmdbBHM%]/g,t=>{switch(t){case"%Y":return e.getFullYear().toString();case"%m":return n(e.getMonth()+1);case"%d":return n(e.getDate());case"%b":return o.format(e);case"%B":return r.format(e);case"%H":return n(e.getHours());case"%M":return n(e.getMinutes());case"%%":return"%";default:return t}})}(new Date,e)}var q=class extends Error{},W=class extends Error{},H=class{type="RuntimeValue";value;builtins=new Map;constructor(e=void 0){this.value=e}__bool__(){return new J(!!this.value)}toString(){return String(this.value)}},X=class extends H{type="IntegerValue"},Q=class extends H{type="FloatValue";toString(){return this.value%1==0?this.value.toFixed(1):this.value.toString()}},Y=class extends H{type="StringValue";builtins=new Map([["upper",new re(()=>new Y(this.value.toUpperCase()))],["lower",new re(()=>new Y(this.value.toLowerCase()))],["strip",new re(()=>new Y(this.value.trim()))],["title",new re(()=>new Y(this.value.replace(/\b\w/g,e=>e.toUpperCase())))],["capitalize",new re(()=>new Y(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new X(this.value.length)],["rstrip",new re(()=>new Y(this.value.trimEnd()))],["lstrip",new re(()=>new Y(this.value.trimStart()))],["startswith",new re(e=>{if(0===e.length)throw new Error("startswith() requires at least one argument");const t=e[0];if(t instanceof Y)return new J(this.value.startsWith(t.value));if(t instanceof ee){for(const e of t.value){if(!(e instanceof Y))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(e.value))return new J(!0)}return new J(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new re(e=>{if(0===e.length)throw new Error("endswith() requires at least one argument");const t=e[0];if(t instanceof Y)return new J(this.value.endsWith(t.value));if(t instanceof ee){for(const e of t.value){if(!(e instanceof Y))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(e.value))return new J(!0)}return new J(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new re(e=>{const t=e[0]??new oe;if(!(t instanceof Y||t instanceof oe))throw new Error("sep argument must be a string or null");const r=e[1]??new X(-1);if(!(r instanceof X))throw new Error("maxsplit argument must be a number");let o=[];if(t instanceof oe){const e=this.value.trimStart();for(const{0:t,index:n}of e.matchAll(/\S+/g)){if(-1!==r.value&&o.length>=r.value&&void 0!==n){o.push(t+e.slice(n+t.length));break}o.push(t)}}else{if(""===t.value)throw new Error("empty separator");o=this.value.split(t.value),-1!==r.value&&o.length>r.value&&o.push(o.splice(r.value).join(t.value))}return new ee(o.map(e=>new Y(e)))})],["replace",new re(e=>{if(e.length<2)throw new Error("replace() requires at least two arguments");const t=e[0],r=e[1];if(!(t instanceof Y&&r instanceof Y))throw new Error("replace() arguments must be strings");let o;if(o=e.length>2?"KeywordArgumentsValue"===e[2].type?e[2].value.get("count")??new oe:e[2]:new oe,!(o instanceof X||o instanceof oe))throw new Error("replace() count argument must be a number or null");return new Y(function(e,t,r,o){if(0===o)return e;let n=null==o||o<0?1/0:o;const s=0===t.length?new RegExp("(?=)","gu"):new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gu");return e.replaceAll(s,e=>n>0?(--n,r):e)}(this.value,t.value,r.value,o.value))})]])},J=class extends H{type="BooleanValue"},Z=class extends H{type="ObjectValue";__bool__(){return new J(this.value.size>0)}builtins=new Map([["get",new re(([e,t])=>{if(!(e instanceof Y))throw new Error(`Object key must be a string: got ${e.type}`);return this.value.get(e.value)??t??new oe})],["items",new re(()=>this.items())],["keys",new re(()=>this.keys())],["values",new re(()=>this.values())]]);items(){return new ee(Array.from(this.value.entries()).map(([e,t])=>new ee([new Y(e),t])))}keys(){return new ee(Array.from(this.value.keys()).map(e=>new Y(e)))}values(){return new ee(Array.from(this.value.values()))}},K=class extends Z{type="KeywordArgumentsValue"},ee=class extends H{type="ArrayValue";builtins=new Map([["length",new X(this.value.length)]]);__bool__(){return new J(this.value.length>0)}},te=class extends ee{type="TupleValue"},re=class extends H{type="FunctionValue"},oe=class extends H{type="NullValue"},ne=class extends H{type="UndefinedValue"},se=class{constructor(e){this.parent=e}variables=new Map([["namespace",new re(e=>{if(0===e.length)return new Z(new Map);if(1!==e.length||!(e[0]instanceof Z))throw new Error("`namespace` expects either zero arguments or a single object argument");return e[0]})]]);tests=new Map([["boolean",e=>"BooleanValue"===e.type],["callable",e=>e instanceof re],["odd",e=>{if(!(e instanceof X))throw new Error(`cannot odd on ${e.type}`);return e.value%2!=0}],["even",e=>{if(!(e instanceof X))throw new Error(`cannot even on ${e.type}`);return e.value%2==0}],["false",e=>"BooleanValue"===e.type&&!e.value],["true",e=>"BooleanValue"===e.type&&e.value],["none",e=>"NullValue"===e.type],["string",e=>"StringValue"===e.type],["number",e=>e instanceof X||e instanceof Q],["integer",e=>e instanceof X],["iterable",e=>"ArrayValue"===e.type||"StringValue"===e.type],["mapping",e=>"ObjectValue"===e.type],["lower",e=>{const t=e.value;return"StringValue"===e.type&&t===t.toLowerCase()}],["upper",e=>{const t=e.value;return"StringValue"===e.type&&t===t.toUpperCase()}],["none",e=>"NullValue"===e.type],["defined",e=>"UndefinedValue"!==e.type],["undefined",e=>"UndefinedValue"===e.type],["equalto",(e,t)=>e.value===t.value],["eq",(e,t)=>e.value===t.value]]);set(e,t){return this.declareVariable(e,ie(t))}declareVariable(e,t){if(this.variables.has(e))throw new SyntaxError(`Variable already declared: ${e}`);return this.variables.set(e,t),t}setVariable(e,t){return this.variables.set(e,t),t}resolve(e){if(this.variables.has(e))return this;if(this.parent)return this.parent.resolve(e);throw new Error(`Unknown variable: ${e}`)}lookupVariable(e){try{return this.resolve(e).variables.get(e)??new ne}catch{return new ne}}};var ae=class{global;constructor(e){this.global=e??new se}run(e){return this.evaluate(e,this.global)}evaluateBinaryExpression(e,t){const r=this.evaluate(e.left,t);switch(e.operator.value){case"and":return r.__bool__().value?this.evaluate(e.right,t):r;case"or":return r.__bool__().value?r:this.evaluate(e.right,t)}const o=this.evaluate(e.right,t);switch(e.operator.value){case"==":return new J(r.value==o.value);case"!=":return new J(r.value!=o.value)}if(r instanceof ne||o instanceof ne){if(o instanceof ne&&["in","not in"].includes(e.operator.value))return new J("not in"===e.operator.value);throw new Error(`Cannot perform operation ${e.operator.value} on undefined values`)}if(r instanceof oe||o instanceof oe)throw new Error("Cannot perform operation on null values");if("~"===e.operator.value)return new Y(r.value.toString()+o.value.toString());if((r instanceof X||r instanceof Q)&&(o instanceof X||o instanceof Q)){const t=r.value,n=o.value;switch(e.operator.value){case"+":case"-":case"*":{const s="+"===e.operator.value?t+n:"-"===e.operator.value?t-n:t*n;return r instanceof Q||o instanceof Q?new Q(s):new X(s)}case"/":return new Q(t/n);case"%":{const e=t%n;return r instanceof Q||o instanceof Q?new Q(e):new X(e)}case"<":return new J(t<n);case">":return new J(t>n);case">=":return new J(t>=n);case"<=":return new J(t<=n)}}else if(r instanceof ee&&o instanceof ee){if("+"===e.operator.value)return new ee(r.value.concat(o.value))}else if(o instanceof ee){const t=void 0!==o.value.find(e=>e.value===r.value);switch(e.operator.value){case"in":return new J(t);case"not in":return new J(!t)}}if((r instanceof Y||o instanceof Y)&&"+"===e.operator.value)return new Y(r.value.toString()+o.value.toString());if(r instanceof Y&&o instanceof Y)switch(e.operator.value){case"in":return new J(o.value.includes(r.value));case"not in":return new J(!o.value.includes(r.value))}if(r instanceof Y&&o instanceof Z)switch(e.operator.value){case"in":return new J(o.value.has(r.value));case"not in":return new J(!o.value.has(r.value))}throw new SyntaxError(`Unknown operator "${e.operator.value}" between ${r.type} and ${o.type}`)}evaluateArguments(e,t){const r=[],o=new Map;for(const n of e)if("SpreadExpression"===n.type){const e=n,o=this.evaluate(e.argument,t);if(!(o instanceof ee))throw new Error(`Cannot unpack non-iterable type: ${o.type}`);for(const e of o.value)r.push(e)}else if("KeywordArgumentExpression"===n.type){const e=n;o.set(e.key.value,this.evaluate(e.value,t))}else{if(o.size>0)throw new Error("Positional arguments must come before keyword arguments");r.push(this.evaluate(n,t))}return[r,o]}applyFilter(e,t,r){if("Identifier"===t.type){const o=t;if("tojson"===o.value)return new Y(le(e));if(e instanceof ee)switch(o.value){case"list":return e;case"first":return e.value[0];case"last":return e.value[e.value.length-1];case"length":return new X(e.value.length);case"reverse":return new ee(e.value.reverse());case"sort":return new ee(e.value.sort((e,t)=>{if(e.type!==t.type)throw new Error(`Cannot compare different types: ${e.type} and ${t.type}`);switch(e.type){case"IntegerValue":case"FloatValue":return e.value-t.value;case"StringValue":return e.value.localeCompare(t.value);default:throw new Error(`Cannot compare type: ${e.type}`)}}));case"join":return new Y(e.value.map(e=>e.value).join(""));case"string":return new Y(le(e));case"unique":{const t=new Set,r=[];for(const o of e.value)t.has(o.value)||(t.add(o.value),r.push(o));return new ee(r)}default:throw new Error(`Unknown ArrayValue filter: ${o.value}`)}else if(e instanceof Y)switch(o.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const t=e.builtins.get(o.value);if(t instanceof re)return t.value([],r);if(t instanceof X)return t;throw new Error(`Unknown StringValue filter: ${o.value}`)}case"trim":return new Y(e.value.trim());case"indent":return new Y(e.value.split("\n").map((e,t)=>0===t||0===e.length?e:"    "+e).join("\n"));case"join":case"string":return e;case"int":{const t=parseInt(e.value,10);return new X(isNaN(t)?0:t)}case"float":{const t=parseFloat(e.value);return new Q(isNaN(t)?0:t)}default:throw new Error(`Unknown StringValue filter: ${o.value}`)}else if(e instanceof X||e instanceof Q)switch(o.value){case"abs":return e instanceof X?new X(Math.abs(e.value)):new Q(Math.abs(e.value));case"int":return new X(Math.floor(e.value));case"float":return new Q(e.value);default:throw new Error(`Unknown NumericValue filter: ${o.value}`)}else if(e instanceof Z)switch(o.value){case"items":return new ee(Array.from(e.value.entries()).map(([e,t])=>new ee([new Y(e),t])));case"length":return new X(e.value.size);default:throw new Error(`Unknown ObjectValue filter: ${o.value}`)}else if(e instanceof J)switch(o.value){case"bool":return new J(e.value);case"int":return new X(e.value?1:0);case"float":return new Q(e.value?1:0);case"string":return new Y(e.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${o.value}`)}throw new Error(`Cannot apply filter "${o.value}" to type: ${e.type}`)}if("CallExpression"===t.type){const o=t;if("Identifier"!==o.callee.type)throw new Error(`Unknown filter: ${o.callee.type}`);const n=o.callee.value;if("tojson"===n){const[,t]=this.evaluateArguments(o.args,r),n=t.get("indent")??new oe;if(!(n instanceof X||n instanceof oe))throw new Error("If set, indent must be a number");return new Y(le(e,n.value))}if("join"===n){let t;if(e instanceof Y)t=Array.from(e.value);else{if(!(e instanceof ee))throw new Error(`Cannot apply filter "${n}" to type: ${e.type}`);t=e.value.map(e=>e.value)}const[s,a]=this.evaluateArguments(o.args,r),i=s.at(0)??a.get("separator")??new Y("");if(!(i instanceof Y))throw new Error("separator must be a string");return new Y(t.join(i.value))}if("int"===n||"float"===n){const[t,s]=this.evaluateArguments(o.args,r),a=t.at(0)??s.get("default")??("int"===n?new X(0):new Q(0));if(e instanceof Y){const t="int"===n?parseInt(e.value,10):parseFloat(e.value);return isNaN(t)?a:"int"===n?new X(t):new Q(t)}if(e instanceof X||e instanceof Q)return e;if(e instanceof J)return"int"===n?new X(e.value?1:0):new Q(e.value?1:0);throw new Error(`Cannot apply filter "${n}" to type: ${e.type}`)}if("default"===n){const[t,n]=this.evaluateArguments(o.args,r),s=t[0]??new Y(""),a=t[1]??n.get("boolean")??new J(!1);if(!(a instanceof J))throw new Error("`default` filter flag must be a boolean");return e instanceof ne||a.value&&!e.__bool__().value?s:e}if(e instanceof ee){switch(n){case"selectattr":case"rejectattr":{const t="selectattr"===n;if(e.value.some(e=>!(e instanceof Z)))throw new Error(`\`${n}\` can only be applied to array of objects`);if(o.args.some(e=>"StringLiteral"!==e.type))throw new Error(`arguments of \`${n}\` must be strings`);const[s,a,i]=o.args.map(e=>this.evaluate(e,r));let l;if(a){const e=r.tests.get(a.value);if(!e)throw new Error(`Unknown test: ${a.value}`);l=e}else l=(...e)=>e[0].__bool__().value;const c=e.value.filter(e=>{const r=e.value.get(s.value),o=!!r&&l(r,i);return t?o:!o});return new ee(c)}case"map":{const[,t]=this.evaluateArguments(o.args,r);if(t.has("attribute")){const r=t.get("attribute");if(!(r instanceof Y))throw new Error("attribute must be a string");const o=t.get("default"),n=e.value.map(e=>{if(!(e instanceof Z))throw new Error("items in map must be an object");return e.value.get(r.value)??o??new ne});return new ee(n)}throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${n}`)}if(e instanceof Y){switch(n){case"indent":{const[t,n]=this.evaluateArguments(o.args,r),s=t.at(0)??n.get("width")??new X(4);if(!(s instanceof X))throw new Error("width must be a number");const a=t.at(1)??n.get("first")??new J(!1),i=t.at(2)??n.get("blank")??new J(!1),l=e.value.split("\n"),c=" ".repeat(s.value),_=l.map((e,t)=>!a.value&&0===t||!i.value&&0===e.length?e:c+e);return new Y(_.join("\n"))}case"replace":{const t=e.builtins.get("replace");if(!(t instanceof re))throw new Error("replace filter not available");const[n,s]=this.evaluateArguments(o.args,r);return t.value([...n,new K(s)],r)}}throw new Error(`Unknown StringValue filter: ${n}`)}throw new Error(`Cannot apply filter "${n}" to type: ${e.type}`)}throw new Error(`Unknown filter: ${t.type}`)}evaluateFilterExpression(e,t){const r=this.evaluate(e.operand,t);return this.applyFilter(r,e.filter,t)}evaluateTestExpression(e,t){const r=this.evaluate(e.operand,t),o=t.tests.get(e.test.value);if(!o)throw new Error(`Unknown test: ${e.test.value}`);const n=o(r);return new J(e.negate?!n:n)}evaluateSelectExpression(e,t){return this.evaluate(e.test,t).__bool__().value?this.evaluate(e.lhs,t):new ne}evaluateUnaryExpression(e,t){const r=this.evaluate(e.argument,t);if("not"===e.operator.value)return new J(!r.value);throw new SyntaxError(`Unknown operator: ${e.operator.value}`)}evaluateTernaryExpression(e,t){return this.evaluate(e.condition,t).__bool__().value?this.evaluate(e.trueExpr,t):this.evaluate(e.falseExpr,t)}evalProgram(e,t){return this.evaluateBlock(e.body,t)}evaluateBlock(e,t){let r="";for(const o of e){const e=this.evaluate(o,t);"NullValue"!==e.type&&"UndefinedValue"!==e.type&&(r+=e.toString())}return new Y(r)}evaluateIdentifier(e,t){return t.lookupVariable(e.value)}evaluateCallExpression(e,t){const[r,o]=this.evaluateArguments(e.args,t);o.size>0&&r.push(new K(o));const n=this.evaluate(e.callee,t);if("FunctionValue"!==n.type)throw new Error(`Cannot call something that is not a function: got ${n.type}`);return n.value(r,t)}evaluateSliceExpression(e,t,r){if(!(e instanceof ee||e instanceof Y))throw new Error("Slice object must be an array or string");const o=this.evaluate(t.start,r),n=this.evaluate(t.stop,r),s=this.evaluate(t.step,r);if(!(o instanceof X||o instanceof ne))throw new Error("Slice start must be numeric or undefined");if(!(n instanceof X||n instanceof ne))throw new Error("Slice stop must be numeric or undefined");if(!(s instanceof X||s instanceof ne))throw new Error("Slice step must be numeric or undefined");return e instanceof ee?new ee(G(e.value,o.value,n.value,s.value)):new Y(G(Array.from(e.value),o.value,n.value,s.value).join(""))}evaluateMemberExpression(e,t){const r=this.evaluate(e.object,t);let o,n;if(e.computed){if("SliceExpression"===e.property.type)return this.evaluateSliceExpression(r,e.property,t);o=this.evaluate(e.property,t)}else o=new Y(e.property.value);if(r instanceof Z){if(!(o instanceof Y))throw new Error(`Cannot access property with non-string: got ${o.type}`);n=r.value.get(o.value)??r.builtins.get(o.value)}else if(r instanceof ee||r instanceof Y)if(o instanceof X)n=r.value.at(o.value),r instanceof Y&&(n=new Y(r.value.at(o.value)));else{if(!(o instanceof Y))throw new Error(`Cannot access property with non-string/non-number: got ${o.type}`);n=r.builtins.get(o.value)}else{if(!(o instanceof Y))throw new Error(`Cannot access property with non-string: got ${o.type}`);n=r.builtins.get(o.value)}return n instanceof H?n:new ne}evaluateSet(e,t){const r=e.value?this.evaluate(e.value,t):this.evaluateBlock(e.body,t);if("Identifier"===e.assignee.type){const o=e.assignee.value;t.setVariable(o,r)}else if("TupleLiteral"===e.assignee.type){const o=e.assignee;if(!(r instanceof ee))throw new Error(`Cannot unpack non-iterable type in set: ${r.type}`);const n=r.value;if(n.length!==o.value.length)throw new Error(`Too ${o.value.length>n.length?"few":"many"} items to unpack in set`);for(let e=0;e<o.value.length;++e){const r=o.value[e];if("Identifier"!==r.type)throw new Error(`Cannot unpack to non-identifier in set: ${r.type}`);t.setVariable(r.value,n[e])}}else{if("MemberExpression"!==e.assignee.type)throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(e.assignee)}`);{const o=e.assignee,n=this.evaluate(o.object,t);if(!(n instanceof Z))throw new Error("Cannot assign to member of non-object");if("Identifier"!==o.property.type)throw new Error("Cannot assign to member with non-identifier property");n.value.set(o.property.value,r)}}return new oe}evaluateIf(e,t){const r=this.evaluate(e.test,t);return this.evaluateBlock(r.__bool__().value?e.body:e.alternate,t)}evaluateFor(e,t){const r=new se(t);let o,n;if("SelectExpression"===e.iterable.type){const t=e.iterable;n=this.evaluate(t.lhs,r),o=t.test}else n=this.evaluate(e.iterable,r);if(!(n instanceof ee||n instanceof Z))throw new Error(`Expected iterable or object type in for loop: got ${n.type}`);n instanceof Z&&(n=n.keys());const s=[],a=[];for(let t=0;t<n.value.length;++t){const i=new se(r),l=n.value[t];let c;if("Identifier"===e.loopvar.type)c=t=>t.setVariable(e.loopvar.value,l);else{if("TupleLiteral"!==e.loopvar.type)throw new Error(`Invalid loop variable(s): ${e.loopvar.type}`);{const t=e.loopvar;if("ArrayValue"!==l.type)throw new Error(`Cannot unpack non-iterable type: ${l.type}`);const r=l;if(t.value.length!==r.value.length)throw new Error(`Too ${t.value.length>r.value.length?"few":"many"} items to unpack`);c=e=>{for(let o=0;o<t.value.length;++o){if("Identifier"!==t.value[o].type)throw new Error(`Cannot unpack non-identifier type: ${t.value[o].type}`);e.setVariable(t.value[o].value,r.value[o])}}}}if(o){c(i);if(!this.evaluate(o,i).__bool__().value)continue}s.push(l),a.push(c)}let i="",l=!0;for(let t=0;t<s.length;++t){const o=new Map([["index",new X(t+1)],["index0",new X(t)],["revindex",new X(s.length-t)],["revindex0",new X(s.length-t-1)],["first",new J(0===t)],["last",new J(t===s.length-1)],["length",new X(s.length)],["previtem",t>0?s[t-1]:new ne],["nextitem",t<s.length-1?s[t+1]:new ne]]);r.setVariable("loop",new Z(o)),a[t](r);try{i+=this.evaluateBlock(e.body,r).value}catch(e){if(e instanceof W)continue;if(e instanceof q)break;throw e}l=!1}if(l){i+=this.evaluateBlock(e.defaultBlock,r).value}return new Y(i)}evaluateMacro(e,t){return t.setVariable(e.name.value,new re((t,r)=>{const o=new se(r);let n;t=t.slice(),"KeywordArgumentsValue"===t.at(-1)?.type&&(n=t.pop());for(let r=0;r<e.args.length;++r){const s=e.args[r],a=t[r];if("Identifier"===s.type){const e=s;if(!a)throw new Error(`Missing positional argument: ${e.value}`);o.setVariable(e.value,a)}else{if("KeywordArgumentExpression"!==s.type)throw new Error(`Unknown argument type: ${s.type}`);{const e=s,t=a??n?.value.get(e.key.value)??this.evaluate(e.value,o);o.setVariable(e.key.value,t)}}}return this.evaluateBlock(e.body,o)})),new oe}evaluateCallStatement(e,t){const r=new re((t,r)=>{const o=new se(r);if(e.callerArgs)for(let r=0;r<e.callerArgs.length;++r){const n=e.callerArgs[r];if("Identifier"!==n.type)throw new Error(`Caller parameter must be an identifier, got ${n.type}`);o.setVariable(n.value,t[r]??new ne)}return this.evaluateBlock(e.body,o)}),[o,n]=this.evaluateArguments(e.call.args,t);o.push(new K(n));const s=this.evaluate(e.call.callee,t);if("FunctionValue"!==s.type)throw new Error(`Cannot call something that is not a function: got ${s.type}`);const a=new se(t);return a.setVariable("caller",r),s.value(o,a)}evaluateFilterStatement(e,t){const r=this.evaluateBlock(e.body,t);return this.applyFilter(r,e.filter,t)}evaluate(e,t){if(!e)return new ne;switch(e.type){case"Program":return this.evalProgram(e,t);case"Set":return this.evaluateSet(e,t);case"If":return this.evaluateIf(e,t);case"For":return this.evaluateFor(e,t);case"Macro":return this.evaluateMacro(e,t);case"CallStatement":return this.evaluateCallStatement(e,t);case"Break":throw new q;case"Continue":throw new W;case"IntegerLiteral":return new X(e.value);case"FloatLiteral":return new Q(e.value);case"StringLiteral":return new Y(e.value);case"ArrayLiteral":return new ee(e.value.map(e=>this.evaluate(e,t)));case"TupleLiteral":return new te(e.value.map(e=>this.evaluate(e,t)));case"ObjectLiteral":{const r=new Map;for(const[o,n]of e.value){const e=this.evaluate(o,t);if(!(e instanceof Y))throw new Error(`Object keys must be strings: got ${e.type}`);r.set(e.value,this.evaluate(n,t))}return new Z(r)}case"Identifier":return this.evaluateIdentifier(e,t);case"CallExpression":return this.evaluateCallExpression(e,t);case"MemberExpression":return this.evaluateMemberExpression(e,t);case"UnaryExpression":return this.evaluateUnaryExpression(e,t);case"BinaryExpression":return this.evaluateBinaryExpression(e,t);case"FilterExpression":return this.evaluateFilterExpression(e,t);case"FilterStatement":return this.evaluateFilterStatement(e,t);case"TestExpression":return this.evaluateTestExpression(e,t);case"SelectExpression":return this.evaluateSelectExpression(e,t);case"Ternary":return this.evaluateTernaryExpression(e,t);case"Comment":return new oe;default:throw new SyntaxError(`Unknown node type: ${e.type}`)}}};function ie(e){switch(typeof e){case"number":return Number.isInteger(e)?new X(e):new Q(e);case"string":return new Y(e);case"boolean":return new J(e);case"undefined":return new ne;case"object":return null===e?new oe:Array.isArray(e)?new ee(e.map(ie)):new Z(new Map(Object.entries(e).map(([e,t])=>[e,ie(t)])));case"function":return new re((t,r)=>ie(e(...t.map(e=>e.value))??null));default:throw new Error(`Cannot convert to runtime value: ${e}`)}}function le(e,t,r){const o=r??0;switch(e.type){case"NullValue":case"UndefinedValue":return"null";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(e.value);case"ArrayValue":case"ObjectValue":{const r=t?" ".repeat(t):"",n="\n"+r.repeat(o),s=n+r;if("ArrayValue"===e.type){const r=e.value.map(e=>le(e,t,o+1));return t?`[${s}${r.join(`,${s}`)}${n}]`:`[${r.join(", ")}]`}{const r=Array.from(e.value.entries()).map(([e,r])=>{const n=`"${e}": ${le(r,t,o+1)}`;return t?`${s}${n}`:n});return t?`{${r.join(",")}${n}}`:`{${r.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${e.type}`)}}var ce="\n";function _e(...e){return"{%- "+e.join(" ")+" -%}"}function pe(e,t,r){return e.map(e=>function(e,t,r){const o=r.repeat(t);switch(e.type){case"Program":return pe(e.body,t,r);case"If":return function(e,t,r){const o=r.repeat(t),n=[];let s=e;for(;s&&(n.push({test:s.test,body:s.body}),1===s.alternate.length&&"If"===s.alternate[0].type);)s=s.alternate[0];let a=o+_e("if",ue(n[0].test))+ce+pe(n[0].body,t+1,r);for(let e=1;e<n.length;++e)a+=ce+o+_e("elif",ue(n[e].test))+ce+pe(n[e].body,t+1,r);s&&s.alternate.length>0&&(a+=ce+o+_e("else")+ce+pe(s.alternate,t+1,r));return a+=ce+o+_e("endif"),a}(e,t,r);case"For":return function(e,t,r){const o=r.repeat(t);let n="";if("SelectExpression"===e.iterable.type){const t=e.iterable;n=`${ue(t.lhs)} if ${ue(t.test)}`}else n=ue(e.iterable);let s=o+_e("for",ue(e.loopvar),"in",n)+ce+pe(e.body,t+1,r);e.defaultBlock.length>0&&(s+=ce+o+_e("else")+ce+pe(e.defaultBlock,t+1,r));return s+=ce+o+_e("endfor"),s}(e,t,r);case"Set":return function(e,t,r){const o=r.repeat(t),n=ue(e.assignee),s=e.value?ue(e.value):"",a=o+_e("set",`${n}${e.value?" = "+s:""}`);if(0===e.body.length)return a;return a+ce+pe(e.body,t+1,r)+ce+o+_e("endset")}(e,t,r);case"Macro":return function(e,t,r){const o=r.repeat(t),n=e.args.map(ue).join(", ");return o+_e("macro",`${e.name.value}(${n})`)+ce+pe(e.body,t+1,r)+ce+o+_e("endmacro")}(e,t,r);case"Break":return o+_e("break");case"Continue":return o+_e("continue");case"CallStatement":return function(e,t,r){const o=r.repeat(t),n=e.callerArgs&&e.callerArgs.length>0?`(${e.callerArgs.map(ue).join(", ")})`:"",s=ue(e.call);let a=o+_e(`call${n}`,s)+ce;return a+=pe(e.body,t+1,r)+ce,a+=o+_e("endcall"),a}(e,t,r);case"FilterStatement":return function(e,t,r){const o=r.repeat(t),n="Identifier"===e.filter.type?e.filter.value:ue(e.filter);let s=o+_e("filter",n)+ce;return s+=pe(e.body,t+1,r)+ce,s+=o+_e("endfilter"),s}(e,t,r);case"Comment":return o+"{# "+e.value+" #}";default:return o+"{{- "+ue(e)+" -}}"}}(e,t,r)).join(ce)}function ue(e,t=-1){switch(e.type){case"SpreadExpression":return`*${ue(e.argument)}`;case"Identifier":return e.value;case"IntegerLiteral":case"FloatLiteral":return`${e.value}`;case"StringLiteral":return JSON.stringify(e.value);case"BinaryExpression":{const r=e,o=function(e){switch(e.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return"and"===e.operator.value?1:"in"===e.operator.value||"not in"===e.operator.value?2:0}return 0}(r),n=ue(r.left,o),s=ue(r.right,o+1),a=`${n} ${r.operator.value} ${s}`;return o<t?`(${a})`:a}case"UnaryExpression":{const t=e;return t.operator.value+("not"===t.operator.value?" ":"")+ue(t.argument,1/0)}case"CallExpression":{const t=e,r=t.args.map(ue).join(", ");return`${ue(t.callee)}(${r})`}case"MemberExpression":{const t=e;let r=ue(t.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(t.object.type)||(r=`(${r})`);let o=ue(t.property);return t.computed||"Identifier"===t.property.type||(o=`(${o})`),t.computed?`${r}[${o}]`:`${r}.${o}`}case"FilterExpression":{const t=e,r=ue(t.operand,1/0);return"CallExpression"===t.filter.type?`${r} | ${ue(t.filter)}`:`${r} | ${t.filter.value}`}case"SelectExpression":{const t=e;return`${ue(t.lhs)} if ${ue(t.test)}`}case"TestExpression":{const t=e;return`${ue(t.operand)} is${t.negate?" not":""} ${t.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const t=e.value.map(ue),r="ArrayLiteral"===e.type?"[]":"()";return`${r[0]}${t.join(", ")}${r[1]}`}case"ObjectLiteral":return`{${Array.from(e.value.entries()).map(([e,t])=>`${ue(e)}: ${ue(t)}`).join(", ")}}`;case"SliceExpression":{const t=e;return`${t.start?ue(t.start):""}:${t.stop?ue(t.stop):""}${t.step?`:${ue(t.step)}`:""}`}case"KeywordArgumentExpression":{const t=e;return`${t.key.value}=${ue(t.value)}`}case"Ternary":{const r=e,o=`${ue(r.trueExpr)} if ${ue(r.condition,0)} else ${ue(r.falseExpr)}`;return t>-1?`(${o})`:o}default:throw new Error(`Unknown expression type: ${e.type}`)}}var de=class{parsed;constructor(e){const t=c(e,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=z(t)}render(e){const t=new se;if(function(e){e.set("false",!1),e.set("true",!0),e.set("none",null),e.set("raise_exception",e=>{throw new Error(e)}),e.set("range",R),e.set("strftime_now",U),e.set("True",!0),e.set("False",!1),e.set("None",null)}(t),e)for(const[r,o]of Object.entries(e))t.set(r,o);return new ae(t).run(this.parsed).value}format(e){return function(e,t="\t"){const r="number"==typeof t?" ".repeat(t):t;return pe(e.body,0,r).replace(/\n$/,"")}(this.parsed,e?.indent||"\t")}}},"./node_modules/onnxruntime-common/dist/esm/backend-impl.js":(e,t,r)=>{r.r(t),r.d(t,{registerBackend:()=>s,resolveBackendAndExecutionProviders:()=>i});const o=new Map,n=[],s=(e,t,r)=>{if(t&&"function"==typeof t.init&&"function"==typeof t.createInferenceSessionHandler){const s=o.get(e);if(void 0===s)o.set(e,{backend:t,priority:r});else{if(s.priority>r)return;if(s.priority===r&&s.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){const t=n.indexOf(e);-1!==t&&n.splice(t,1);for(let t=0;t<n.length;t++)if(o.get(n[t]).priority<=r)return void n.splice(t,0,e);n.push(e)}return}throw new TypeError("not a valid backend")},a=async e=>{const t=o.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{const r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(e){return r||(t.error=`${e}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},i=async e=>{const t=e.executionProviders||[],r=t.map(e=>"string"==typeof e?e:e.name),o=0===r.length?n:r;let s;const i=[],l=new Set;for(const e of o){const t=await a(e);"string"==typeof t?i.push({name:e,err:t}):(s||(s=t),s===t&&l.add(e))}if(!s)throw new Error(`no available backend found. ERR: ${i.map(e=>`[${e.name}] ${e.err}`).join(", ")}`);for(const{name:e,err:t}of i)r.includes(e)&&console.warn(`removing requested execution provider "${e}" from session options because it is not available: ${t}`);const c=t.filter(e=>l.has("string"==typeof e?e:e.name));return[s,new Proxy(e,{get:(e,t)=>"executionProviders"===t?c:Reflect.get(e,t)})]}},"./node_modules/onnxruntime-common/dist/esm/backend.js":(e,t,r)=>{r.r(t),r.d(t,{registerBackend:()=>o.registerBackend});var o=r("./node_modules/onnxruntime-common/dist/esm/backend-impl.js")},"./node_modules/onnxruntime-common/dist/esm/env-impl.js":(e,t,r)=>{r.r(t),r.d(t,{env:()=>s});var o=r("./node_modules/onnxruntime-common/dist/esm/version.js");let n="warning";const s={wasm:{},webgl:{},webgpu:{},versions:{common:o.version},set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error(`Unsupported logging level: ${e}`);n=e}},get logLevel(){return n}};Object.defineProperty(s,"logLevel",{enumerable:!0})},"./node_modules/onnxruntime-common/dist/esm/env.js":(e,t,r)=>{r.r(t),r.d(t,{env:()=>o});const o=r("./node_modules/onnxruntime-common/dist/esm/env-impl.js").env},"./node_modules/onnxruntime-common/dist/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{InferenceSession:()=>s.InferenceSession,TRACE:()=>i.TRACE,TRACE_FUNC_BEGIN:()=>i.TRACE_FUNC_BEGIN,TRACE_FUNC_END:()=>i.TRACE_FUNC_END,Tensor:()=>a.Tensor,env:()=>n.env,registerBackend:()=>o.registerBackend});var o=r("./node_modules/onnxruntime-common/dist/esm/backend.js"),n=r("./node_modules/onnxruntime-common/dist/esm/env.js"),s=r("./node_modules/onnxruntime-common/dist/esm/inference-session.js"),a=r("./node_modules/onnxruntime-common/dist/esm/tensor.js"),i=(r("./node_modules/onnxruntime-common/dist/esm/tensor-conversion.js"),r("./node_modules/onnxruntime-common/dist/esm/tensor-factory.js"),r("./node_modules/onnxruntime-common/dist/esm/trace.js"));r("./node_modules/onnxruntime-common/dist/esm/onnx-model.js"),r("./node_modules/onnxruntime-common/dist/esm/onnx-value.js")},"./node_modules/onnxruntime-common/dist/esm/inference-session-impl.js":(e,t,r)=>{r.r(t),r.d(t,{InferenceSession:()=>a});var o=r("./node_modules/onnxruntime-common/dist/esm/backend-impl.js"),n=r("./node_modules/onnxruntime-common/dist/esm/tensor.js"),s=r("./node_modules/onnxruntime-common/dist/esm/trace.js");class a{constructor(e){this.handler=e}async run(e,t,r){(0,s.TRACE_FUNC_BEGIN)();const o={};let a={};if("object"!=typeof e||null===e||e instanceof n.Tensor||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let i=!0;if("object"==typeof t){if(null===t)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof n.Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw new TypeError("'fetches' cannot be an empty array.");i=!1;for(const e of t){if("string"!=typeof e)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(e))throw new RangeError(`'fetches' contains invalid output name: ${e}.`);o[e]=null}if("object"==typeof r&&null!==r)a=r;else if(void 0!==r)throw new TypeError("'options' must be an object.")}else{let e=!1;const s=Object.getOwnPropertyNames(t);for(const r of this.outputNames)if(-1!==s.indexOf(r)){const s=t[r];(null===s||s instanceof n.Tensor)&&(e=!0,i=!1,o[r]=s)}if(e){if("object"==typeof r&&null!==r)a=r;else if(void 0!==r)throw new TypeError("'options' must be an object.")}else a=t}}else if(void 0!==t)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const t of this.inputNames)if(void 0===e[t])throw new Error(`input '${t}' is missing in 'feeds'.`);if(i)for(const e of this.outputNames)o[e]=null;const l=await this.handler.run(e,o,a),c={};for(const e in l)if(Object.hasOwnProperty.call(l,e)){const t=l[e];t instanceof n.Tensor?c[e]=t:c[e]=new n.Tensor(t.type,t.data,t.dims)}return(0,s.TRACE_FUNC_END)(),c}async release(){return this.handler.dispose()}static async create(e,t,r,n){let i;(0,s.TRACE_FUNC_BEGIN)();let l={};if("string"==typeof e){if(i=e,"object"==typeof t&&null!==t)l=t;else if(void 0!==t)throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(i=e,"object"==typeof t&&null!==t)l=t;else if(void 0!==t)throw new TypeError("'options' must be an object.")}else{if(!(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const o=e;let s=0,a=e.byteLength;if("object"==typeof t&&null!==t)l=t;else if("number"==typeof t){if(s=t,!Number.isSafeInteger(s))throw new RangeError("'byteOffset' must be an integer.");if(s<0||s>=o.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${o.byteLength}).`);if(a=e.byteLength-s,"number"==typeof r){if(a=r,!Number.isSafeInteger(a))throw new RangeError("'byteLength' must be an integer.");if(a<=0||s+a>o.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${o.byteLength-s}].`);if("object"==typeof n&&null!==n)l=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else if(void 0!==r)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==t)throw new TypeError("'options' must be an object.");i=new Uint8Array(o,s,a)}}const[c,_]=await(0,o.resolveBackendAndExecutionProviders)(l),p=await c.createInferenceSessionHandler(i,_);return(0,s.TRACE_FUNC_END)(),new a(p)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}},"./node_modules/onnxruntime-common/dist/esm/inference-session.js":(e,t,r)=>{r.r(t),r.d(t,{InferenceSession:()=>o});const o=r("./node_modules/onnxruntime-common/dist/esm/inference-session-impl.js").InferenceSession},"./node_modules/onnxruntime-common/dist/esm/onnx-model.js":(e,t,r)=>{r.r(t)},"./node_modules/onnxruntime-common/dist/esm/onnx-value.js":(e,t,r)=>{r.r(t)},"./node_modules/onnxruntime-common/dist/esm/tensor-conversion-impl.js":(e,t,r)=>{r.r(t),r.d(t,{tensorToDataURL:()=>o,tensorToImageData:()=>n});const o=(e,t)=>{const r="undefined"!=typeof document?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];const o=r.getContext("2d");if(null!=o){let n,s;void 0!==t?.tensorLayout&&"NHWC"===t.tensorLayout?(n=e.dims[2],s=e.dims[3]):(n=e.dims[3],s=e.dims[2]);const a=void 0!==t?.format?t.format:"RGB",i=t?.norm;let l,c;void 0===i||void 0===i.mean?l=[255,255,255,255]:"number"==typeof i.mean?l=[i.mean,i.mean,i.mean,i.mean]:(l=[i.mean[0],i.mean[1],i.mean[2],0],void 0!==i.mean[3]&&(l[3]=i.mean[3])),void 0===i||void 0===i.bias?c=[0,0,0,0]:"number"==typeof i.bias?c=[i.bias,i.bias,i.bias,i.bias]:(c=[i.bias[0],i.bias[1],i.bias[2],0],void 0!==i.bias[3]&&(c[3]=i.bias[3]));const _=s*n;let p=0,u=_,d=2*_,h=-1;"RGBA"===a?(p=0,u=_,d=2*_,h=3*_):"RGB"===a?(p=0,u=_,d=2*_):"RBG"===a&&(p=0,d=_,u=2*_);for(let t=0;t<s;t++)for(let r=0;r<n;r++){const n=(e.data[p++]-c[0])*l[0],s=(e.data[u++]-c[1])*l[1],a=(e.data[d++]-c[2])*l[2],i=-1===h?255:(e.data[h++]-c[3])*l[3];o.fillStyle="rgba("+n+","+s+","+a+","+i+")",o.fillRect(r,t,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}throw new Error("Can not access image data")},n=(e,t)=>{const r="undefined"!=typeof document?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");let o;if(null==r)throw new Error("Can not access image data");{let n,s,a;void 0!==t?.tensorLayout&&"NHWC"===t.tensorLayout?(n=e.dims[2],s=e.dims[1],a=e.dims[3]):(n=e.dims[3],s=e.dims[2],a=e.dims[1]);const i=void 0!==t&&void 0!==t.format?t.format:"RGB",l=t?.norm;let c,_;void 0===l||void 0===l.mean?c=[255,255,255,255]:"number"==typeof l.mean?c=[l.mean,l.mean,l.mean,l.mean]:(c=[l.mean[0],l.mean[1],l.mean[2],255],void 0!==l.mean[3]&&(c[3]=l.mean[3])),void 0===l||void 0===l.bias?_=[0,0,0,0]:"number"==typeof l.bias?_=[l.bias,l.bias,l.bias,l.bias]:(_=[l.bias[0],l.bias[1],l.bias[2],0],void 0!==l.bias[3]&&(_[3]=l.bias[3]));const p=s*n;if(void 0!==t&&(void 0!==t.format&&4===a&&"RGBA"!==t.format||3===a&&"RGB"!==t.format&&"BGR"!==t.format))throw new Error("Tensor format doesn't match input tensor dims");const u=4;let d=0,h=1,f=2,m=3,g=0,b=p,w=2*p,x=-1;"RGBA"===i?(g=0,b=p,w=2*p,x=3*p):"RGB"===i?(g=0,b=p,w=2*p):"RBG"===i&&(g=0,w=p,b=2*p),o=r.createImageData(n,s);for(let t=0;t<s*n;d+=u,h+=u,f+=u,m+=u,t++)o.data[d]=(e.data[g++]-_[0])*c[0],o.data[h]=(e.data[b++]-_[1])*c[1],o.data[f]=(e.data[w++]-_[2])*c[2],o.data[m]=-1===x?255:(e.data[x++]-_[3])*c[3]}return o}},"./node_modules/onnxruntime-common/dist/esm/tensor-conversion.js":(e,t,r)=>{r.r(t)},"./node_modules/onnxruntime-common/dist/esm/tensor-factory-impl.js":(e,t,r)=>{r.r(t),r.d(t,{bufferToTensor:()=>n,tensorFromGpuBuffer:()=>i,tensorFromImage:()=>s,tensorFromMLTensor:()=>l,tensorFromPinnedBuffer:()=>c,tensorFromTexture:()=>a});var o=r("./node_modules/onnxruntime-common/dist/esm/tensor-impl.js");const n=(e,t)=>{if(void 0===e)throw new Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw new Error("Image height and width must be defined");if("NHWC"===t.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");const{height:r,width:n}=t,s=t.norm??{mean:255,bias:0};let a,i;a="number"==typeof s.mean?[s.mean,s.mean,s.mean,s.mean]:[s.mean[0],s.mean[1],s.mean[2],s.mean[3]??255],i="number"==typeof s.bias?[s.bias,s.bias,s.bias,s.bias]:[s.bias[0],s.bias[1],s.bias[2],s.bias[3]??0];const l=void 0!==t.format?t.format:"RGBA",c=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",_=r*n,p="RGBA"===c?new Float32Array(4*_):new Float32Array(3*_);let u=4,d=0,h=1,f=2,m=3,g=0,b=_,w=2*_,x=-1;"RGB"===l&&(u=3,d=0,h=1,f=2,m=-1),"RGBA"===c?x=3*_:"RBG"===c?(g=0,w=_,b=2*_):"BGR"===c&&(w=0,b=_,g=2*_);for(let t=0;t<_;t++,d+=u,f+=u,h+=u,m+=u)p[g++]=(e[d]+i[0])/a[0],p[b++]=(e[h]+i[1])/a[1],p[w++]=(e[f]+i[2])/a[2],-1!==x&&-1!==m&&(p[x++]=(e[m]+i[3])/a[3]);return"RGBA"===c?new o.Tensor("float32",p,[1,4,r,n]):new o.Tensor("float32",p,[1,3,r,n])},s=async(e,t)=>{const r="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,o="undefined"!=typeof ImageData&&e instanceof ImageData,s="undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap,a="string"==typeof e;let i,l=t??{};const c=()=>{if("undefined"!=typeof document)return document.createElement("canvas");if("undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},_=e=>"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas?e.getContext("2d"):null;if(r){const r=c();r.width=e.width,r.height=e.height;const o=_(r);if(null==o)throw new Error("Can not access image data");{let r=e.height,n=e.width;if(void 0!==t&&void 0!==t.resizedHeight&&void 0!==t.resizedWidth&&(r=t.resizedHeight,n=t.resizedWidth),void 0!==t){if(l=t,void 0!==t.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");l.tensorFormat="RGBA",l.height=r,l.width=n}else l.tensorFormat="RGBA",l.height=r,l.width=n;o.drawImage(e,0,0),i=o.getImageData(0,0,n,r).data}}else{if(!o){if(s){if(void 0===t)throw new Error("Please provide image config with format for Imagebitmap");const r=c();r.width=e.width,r.height=e.height;const o=_(r);if(null!=o){const t=e.height,r=e.width;return o.drawImage(e,0,0,r,t),i=o.getImageData(0,0,r,t).data,l.height=t,l.width=r,n(i,l)}throw new Error("Can not access image data")}if(a)return new Promise((t,r)=>{const o=c(),s=_(o);if(!e||!s)return r();const a=new Image;a.crossOrigin="Anonymous",a.src=e,a.onload=()=>{o.width=a.width,o.height=a.height,s.drawImage(a,0,0,o.width,o.height);const e=s.getImageData(0,0,o.width,o.height);l.height=o.height,l.width=o.width,t(n(e.data,l))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{let r,o;if(void 0!==t&&void 0!==t.resizedWidth&&void 0!==t.resizedHeight?(r=t.resizedHeight,o=t.resizedWidth):(r=e.height,o=e.width),void 0!==t&&(l=t),l.format="RGBA",l.height=r,l.width=o,void 0!==t){const t=c();t.width=o,t.height=r;const n=_(t);if(null==n)throw new Error("Can not access image data");n.putImageData(e,0,0),i=n.getImageData(0,0,o,r).data}else i=e.data}}if(void 0!==i)return n(i,l);throw new Error("Input data provided is not supported - aborted tensor creation")},a=(e,t)=>{const{width:r,height:n,download:s,dispose:a}=t,i=[1,n,r,4];return new o.Tensor({location:"texture",type:"float32",texture:e,dims:i,download:s,dispose:a})},i=(e,t)=>{const{dataType:r,dims:n,download:s,dispose:a}=t;return new o.Tensor({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:s,dispose:a})},l=(e,t)=>{const{dataType:r,dims:n,download:s,dispose:a}=t;return new o.Tensor({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:s,dispose:a})},c=(e,t,r)=>new o.Tensor({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]})},"./node_modules/onnxruntime-common/dist/esm/tensor-factory.js":(e,t,r)=>{r.r(t)},"./node_modules/onnxruntime-common/dist/esm/tensor-impl-type-mapping.js":(e,t,r)=>{r.r(t),r.d(t,{NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP:()=>n,NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP:()=>o,checkTypedArray:()=>a});const o=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),n=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let s=!1;const a=()=>{if(!s){s=!0;const e="undefined"!=typeof BigInt64Array&&BigInt64Array.from,t="undefined"!=typeof BigUint64Array&&BigUint64Array.from,r=globalThis.Float16Array,a=void 0!==r&&r.from;e&&(o.set("int64",BigInt64Array),n.set(BigInt64Array,"int64")),t&&(o.set("uint64",BigUint64Array),n.set(BigUint64Array,"uint64")),a?(o.set("float16",r),n.set(r,"float16")):o.set("float16",Uint16Array)}}},"./node_modules/onnxruntime-common/dist/esm/tensor-impl.js":(e,t,r)=>{r.r(t),r.d(t,{Tensor:()=>i});var o=r("./node_modules/onnxruntime-common/dist/esm/tensor-conversion-impl.js"),n=r("./node_modules/onnxruntime-common/dist/esm/tensor-factory-impl.js"),s=r("./node_modules/onnxruntime-common/dist/esm/tensor-impl-type-mapping.js"),a=r("./node_modules/onnxruntime-common/dist/esm/tensor-utils-impl.js");class i{constructor(e,t,r){let o,n;if((0,s.checkTypedArray)(),"object"==typeof e&&"location"in e)switch(this.dataLocation=e.location,o=e.type,n=e.dims,e.location){case"cpu-pinned":{const t=s.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(o);if(!t)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(e.data instanceof t))throw new TypeError(`buffer should be of type ${t.name}`);this.cpuData=e.data;break}case"texture":if("float32"!==o)throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break;case"gpu-buffer":if("float32"!==o&&"float16"!==o&&"int32"!==o&&"int64"!==o&&"uint32"!==o&&"uint8"!==o&&"bool"!==o&&"uint4"!==o&&"int4"!==o)throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break;case"ml-tensor":if("float32"!==o&&"float16"!==o&&"int32"!==o&&"int64"!==o&&"uint32"!==o&&"uint64"!==o&&"int8"!==o&&"uint8"!==o&&"bool"!==o&&"uint4"!==o&&"int4"!==o)throw new TypeError(`unsupported type "${o}" to create tensor from MLTensor`);this.mlTensorData=e.mlTensor,this.downloader=e.download,this.disposer=e.dispose;break;default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let a,i;if("string"==typeof e)if(o=e,i=r,"string"===e){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");a=t}else{const r=s.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(void 0===r)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if("float16"===e&&r===Uint16Array||"uint4"===e||"int4"===e)throw new TypeError(`Creating a ${e} tensor from number array is not supported. Please use ${r.name} as data.`);a="uint64"===e||"int64"===e?r.from(t,BigInt):r.from(t)}else if(t instanceof r)a=t;else if(t instanceof Uint8ClampedArray){if("uint8"!==e)throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");a=Uint8Array.from(t)}else{if(!("float16"===e&&t instanceof Uint16Array&&r!==Uint16Array))throw new TypeError(`A ${o} tensor's data must be type of ${r}`);a=new globalThis.Float16Array(t.buffer,t.byteOffset,t.length)}}else if(i=t,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const t=typeof e[0];if("string"===t)o="string",a=e;else{if("boolean"!==t)throw new TypeError(`Invalid element type of data array: ${t}.`);o="bool",a=Uint8Array.from(e)}}else if(e instanceof Uint8ClampedArray)o="uint8",a=Uint8Array.from(e);else{const t=s.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(void 0===t)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);o=t,a=e}if(void 0===i)i=[a.length];else if(!Array.isArray(i))throw new TypeError("A tensor's dims must be a number array");n=i,this.cpuData=a,this.dataLocation="cpu"}const i=(0,a.calculateSize)(n);if(this.cpuData&&i!==this.cpuData.length&&("uint4"!==o&&"int4"!==o||Math.ceil(i/2)!==this.cpuData.length))throw new Error(`Tensor's size(${i}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=n,this.size=i}static async fromImage(e,t){return(0,n.tensorFromImage)(e,t)}static fromTexture(e,t){return(0,n.tensorFromTexture)(e,t)}static fromGpuBuffer(e,t){return(0,n.tensorFromGpuBuffer)(e,t)}static fromMLTensor(e,t){return(0,n.tensorFromMLTensor)(e,t)}static fromPinnedBuffer(e,t,r){return(0,n.tensorFromPinnedBuffer)(e,t,r)}toDataURL(e){return(0,o.tensorToDataURL)(this,e)}toImageData(e){return(0,o.tensorToImageData)(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if("none"===this.dataLocation)throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return(0,a.tensorReshape)(this,e)}}},"./node_modules/onnxruntime-common/dist/esm/tensor-utils-impl.js":(e,t,r)=>{r.r(t),r.d(t,{calculateSize:()=>n,tensorReshape:()=>s});var o=r("./node_modules/onnxruntime-common/dist/esm/tensor-impl.js");const n=e=>{let t=1;for(let r=0;r<e.length;r++){const o=e[r];if("number"!=typeof o||!Number.isSafeInteger(o))throw new TypeError(`dims[${r}] must be an integer, got: ${o}`);if(o<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${o}`);t*=o}return t},s=(e,t)=>{switch(e.location){case"cpu":return new o.Tensor(e.type,e.data,t);case"cpu-pinned":return new o.Tensor({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new o.Tensor({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new o.Tensor({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new o.Tensor({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}},"./node_modules/onnxruntime-common/dist/esm/tensor.js":(e,t,r)=>{r.r(t),r.d(t,{Tensor:()=>o});const o=r("./node_modules/onnxruntime-common/dist/esm/tensor-impl.js").Tensor},"./node_modules/onnxruntime-common/dist/esm/trace.js":(e,t,r)=>{r.r(t),r.d(t,{TRACE:()=>n,TRACE_FUNC_BEGIN:()=>a,TRACE_FUNC_END:()=>i});var o=r("./node_modules/onnxruntime-common/dist/esm/env-impl.js");const n=(e,t)=>{(void 0===o.env.trace?o.env.wasm.trace:o.env.trace)&&console.timeStamp(`${e}::ORT::${t}`)},s=(e,t)=>{const r=(new Error).stack?.split(/\r\n|\r|\n/g)||[];let o=!1;for(let s=0;s<r.length;s++){if(o&&!r[s].includes("TRACE_FUNC")){let o=`FUNC_${e}::${r[s].trim().split(" ")[1]}`;return t&&(o+=`::${t}`),void n("CPU",o)}r[s].includes("TRACE_FUNC")&&(o=!0)}},a=e=>{(void 0===o.env.trace?o.env.wasm.trace:o.env.trace)&&s("BEGIN",e)},i=e=>{(void 0===o.env.trace?o.env.wasm.trace:o.env.trace)&&s("END",e)}},"./node_modules/onnxruntime-common/dist/esm/version.js":(e,t,r)=>{r.r(t),r.d(t,{version:()=>o});const o="1.21.0"},"./node_modules/onnxruntime-web/dist/esm/ort.min.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{InferenceSession:()=>Pd,TRACE:()=>ls,TRACE_FUNC_BEGIN:()=>lr,TRACE_FUNC_END:()=>fr,Tensor:()=>Me,TrainingSession:()=>Dd,default:()=>jO,env:()=>Z,registerBackend:()=>Pr});var vd=Object.create,Pn=Object.defineProperty,_d=Object.getOwnPropertyDescriptor,Od=Object.getOwnPropertyNames,Id=Object.getPrototypeOf,Sd=Object.prototype.hasOwnProperty,L=(e,t)=>()=>(e&&(t=e(e=0)),t),me=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Sr=(e,t)=>{for(var r in t)Pn(e,r,{get:t[r],enumerable:!0})},Va=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of Od(t))!Sd.call(e,n)&&n!==r&&Pn(e,n,{get:()=>t[n],enumerable:!(o=_d(t,n))||o.enumerable});return e},Ar=(e,t,r)=>(r=null!=e?vd(Id(e)):{},Va(!t&&e&&e.__esModule?r:Pn(r,"default",{value:e,enumerable:!0}),e)),ar=e=>Va(Pn({},"__esModule",{value:!0}),e),En,sr,Pr,Ad,Dn,Ln=L(()=>{En=new Map,sr=[],Pr=(e,t,r)=>{if(t&&"function"==typeof t.init&&"function"==typeof t.createInferenceSessionHandler){let o=En.get(e);if(void 0===o)En.set(e,{backend:t,priority:r});else{if(o.priority>r)return;if(o.priority===r&&o.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){let t=sr.indexOf(e);-1!==t&&sr.splice(t,1);for(let t=0;t<sr.length;t++)if(En.get(sr[t]).priority<=r)return void sr.splice(t,0,e);sr.push(e)}return}throw new TypeError("not a valid backend")},Ad=async e=>{let t=En.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(e){return r||(t.error=`${e}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},Dn=async e=>{let t,r=e.executionProviders||[],o=r.map(e=>"string"==typeof e?e:e.name),n=0===o.length?sr:o,s=[],a=new Set;for(let e of n){let r=await Ad(e);"string"==typeof r?s.push({name:e,err:r}):(t||(t=r),t===r&&a.add(e))}if(!t)throw new Error(`no available backend found. ERR: ${s.map(e=>`[${e.name}] ${e.err}`).join(", ")}`);for(let{name:e,err:t}of s)o.includes(e)&&console.warn(`removing requested execution provider "${e}" from session options because it is not available: ${t}`);let i=r.filter(e=>a.has("string"==typeof e?e:e.name));return[t,new Proxy(e,{get:(e,t)=>"executionProviders"===t?i:Reflect.get(e,t)})]}}),Wa=L(()=>{Ln()}),Ha,qa=L(()=>{Ha="1.18.0"}),ja,ut,Vo=L(()=>{qa(),ja="warning",ut={wasm:{},webgl:{},webgpu:{},versions:{common:Ha},set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error(`Unsupported logging level: ${e}`);ja=e}},get logLevel(){return ja}},Object.defineProperty(ut,"logLevel",{enumerable:!0})}),Z,Ya=L(()=>{Vo(),Z=ut}),Xa,Ka,Ja=L(()=>{Xa=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];let o=r.getContext("2d");if(null!=o){let n,s;void 0!==t?.tensorLayout&&"NHWC"===t.tensorLayout?(n=e.dims[2],s=e.dims[3]):(n=e.dims[3],s=e.dims[2]);let a,i,l=void 0!==t?.format?t.format:"RGB",c=t?.norm;void 0===c||void 0===c.mean?a=[255,255,255,255]:"number"==typeof c.mean?a=[c.mean,c.mean,c.mean,c.mean]:(a=[c.mean[0],c.mean[1],c.mean[2],0],void 0!==c.mean[3]&&(a[3]=c.mean[3])),void 0===c||void 0===c.bias?i=[0,0,0,0]:"number"==typeof c.bias?i=[c.bias,c.bias,c.bias,c.bias]:(i=[c.bias[0],c.bias[1],c.bias[2],0],void 0!==c.bias[3]&&(i[3]=c.bias[3]));let _=s*n,p=0,u=_,d=2*_,h=-1;"RGBA"===l?(p=0,u=_,d=2*_,h=3*_):"RGB"===l?(p=0,u=_,d=2*_):"RBG"===l&&(p=0,d=_,u=2*_);for(let t=0;t<s;t++)for(let r=0;r<n;r++){let n=(e.data[p++]-i[0])*a[0],s=(e.data[u++]-i[1])*a[1],l=(e.data[d++]-i[2])*a[2],c=-1===h?255:(e.data[h++]-i[3])*a[3];o.fillStyle="rgba("+n+","+s+","+l+","+c+")",o.fillRect(r,t,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}throw new Error("Can not access image data")},Ka=(e,t)=>{let r,o=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");if(null==o)throw new Error("Can not access image data");{let n,s,a;void 0!==t?.tensorLayout&&"NHWC"===t.tensorLayout?(n=e.dims[2],s=e.dims[1],a=e.dims[3]):(n=e.dims[3],s=e.dims[2],a=e.dims[1]);let i,l,c=void 0!==t&&void 0!==t.format?t.format:"RGB",_=t?.norm;void 0===_||void 0===_.mean?i=[255,255,255,255]:"number"==typeof _.mean?i=[_.mean,_.mean,_.mean,_.mean]:(i=[_.mean[0],_.mean[1],_.mean[2],255],void 0!==_.mean[3]&&(i[3]=_.mean[3])),void 0===_||void 0===_.bias?l=[0,0,0,0]:"number"==typeof _.bias?l=[_.bias,_.bias,_.bias,_.bias]:(l=[_.bias[0],_.bias[1],_.bias[2],0],void 0!==_.bias[3]&&(l[3]=_.bias[3]));let p=s*n;if(void 0!==t&&(void 0!==t.format&&4===a&&"RGBA"!==t.format||3===a&&"RGB"!==t.format&&"BGR"!==t.format))throw new Error("Tensor format doesn't match input tensor dims");let u=4,d=0,h=1,f=2,m=3,g=0,b=p,w=2*p,x=-1;"RGBA"===c?(g=0,b=p,w=2*p,x=3*p):"RGB"===c?(g=0,b=p,w=2*p):"RBG"===c&&(g=0,w=p,b=2*p),r=o.createImageData(n,s);for(let t=0;t<s*n;d+=u,h+=u,f+=u,m+=u,t++)r.data[d]=(e.data[g++]-l[0])*i[0],r.data[h]=(e.data[b++]-l[1])*i[1],r.data[f]=(e.data[w++]-l[2])*i[2],r.data[m]=-1===x?255:(e.data[x++]-l[3])*i[3]}return r}}),Wo,Za,Qa,es,ts,rs=L(()=>{Cn(),Wo=(e,t)=>{if(void 0===e)throw new Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw new Error("Image height and width must be defined");if("NHWC"===t.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");let r,o,{height:n,width:s}=t,a=t.norm??{mean:255,bias:0};r="number"==typeof a.mean?[a.mean,a.mean,a.mean,a.mean]:[a.mean[0],a.mean[1],a.mean[2],a.mean[3]??255],o="number"==typeof a.bias?[a.bias,a.bias,a.bias,a.bias]:[a.bias[0],a.bias[1],a.bias[2],a.bias[3]??0];let i=void 0!==t.format?t.format:"RGBA",l=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",c=n*s,_="RGBA"===l?new Float32Array(4*c):new Float32Array(3*c),p=4,u=0,d=1,h=2,f=3,m=0,g=c,b=2*c,w=-1;"RGB"===i&&(p=3,u=0,d=1,h=2,f=-1),"RGBA"===l?w=3*c:"RBG"===l?(m=0,b=c,g=2*c):"BGR"===l&&(b=0,g=c,m=2*c);for(let t=0;t<c;t++,u+=p,h+=p,d+=p,f+=p)_[m++]=(e[u]+o[0])/r[0],_[g++]=(e[d]+o[1])/r[1],_[b++]=(e[h]+o[2])/r[2],-1!==w&&-1!==f&&(_[w++]=(e[f]+o[3])/r[3]);return new Je("float32",_,"RGBA"===l?[1,4,n,s]:[1,3,n,s])},Za=async(e,t)=>{let r,o=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,s=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,a="string"==typeof e,i=t??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},c=e=>e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas?e.getContext("2d"):null;if(o){let o=l();o.width=e.width,o.height=e.height;let n=c(o);if(null==n)throw new Error("Can not access image data");{let o=e.height,s=e.width;if(void 0!==t&&void 0!==t.resizedHeight&&void 0!==t.resizedWidth&&(o=t.resizedHeight,s=t.resizedWidth),void 0!==t){if(i=t,void 0!==t.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");i.tensorFormat="RGBA",i.height=o,i.width=s}else i.tensorFormat="RGBA",i.height=o,i.width=s;n.drawImage(e,0,0),r=n.getImageData(0,0,s,o).data}}else{if(!n){if(s){if(void 0===t)throw new Error("Please provide image config with format for Imagebitmap");let o=l();o.width=e.width,o.height=e.height;let n=c(o);if(null!=n){let t=e.height,o=e.width;return n.drawImage(e,0,0,o,t),r=n.getImageData(0,0,o,t).data,i.height=t,i.width=o,Wo(r,i)}throw new Error("Can not access image data")}if(a)return new Promise((t,r)=>{let o=l(),n=c(o);if(!e||!n)return r();let s=new Image;s.crossOrigin="Anonymous",s.src=e,s.onload=()=>{o.width=s.width,o.height=s.height,n.drawImage(s,0,0,o.width,o.height);let e=n.getImageData(0,0,o.width,o.height);i.height=o.height,i.width=o.width,t(Wo(e.data,i))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{let o,n;if(void 0!==t&&void 0!==t.resizedWidth&&void 0!==t.resizedHeight?(o=t.resizedHeight,n=t.resizedWidth):(o=e.height,n=e.width),void 0!==t&&(i=t),i.format="RGBA",i.height=o,i.width=n,void 0!==t){let t=l();t.width=n,t.height=o;let s=c(t);if(null==s)throw new Error("Can not access image data");s.putImageData(e,0,0),r=s.getImageData(0,0,n,o).data}else r=e.data}}if(void 0!==r)return Wo(r,i);throw new Error("Input data provided is not supported - aborted tensor creation")},Qa=(e,t)=>{let{width:r,height:o,download:n,dispose:s}=t;return new Je({location:"texture",type:"float32",texture:e,dims:[1,o,r,4],download:n,dispose:s})},es=(e,t)=>{let{dataType:r,dims:o,download:n,dispose:s}=t;return new Je({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:o,download:n,dispose:s})},ts=(e,t,r)=>new Je({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]})}),ur,Qr,ns,os,is=L(()=>{ur=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ns=!1,os=()=>{if(!ns){ns=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=typeof Float16Array<"u"&&Float16Array.from;e&&(ur.set("int64",BigInt64Array),Qr.set(BigInt64Array,"int64")),t&&(ur.set("uint64",BigUint64Array),Qr.set(BigUint64Array,"uint64")),r?(ur.set("float16",Float16Array),Qr.set(Float16Array,"float16")):ur.set("float16",Uint16Array)}}}),as,ss,us=L(()=>{Cn(),as=e=>{let t=1;for(let r=0;r<e.length;r++){let o=e[r];if("number"!=typeof o||!Number.isSafeInteger(o))throw new TypeError(`dims[${r}] must be an integer, got: ${o}`);if(o<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${o}`);t*=o}return t},ss=(e,t)=>{switch(e.location){case"cpu":return new Je(e.type,e.data,t);case"cpu-pinned":return new Je({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Je({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Je({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),Je,Cn=L(()=>{Ja(),rs(),is(),us(),Je=class{constructor(e,t,r){let o,n;if(os(),"object"==typeof e&&"location"in e)switch(this.dataLocation=e.location,o=e.type,n=e.dims,e.location){case"cpu-pinned":{let t=ur.get(o);if(!t)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(e.data instanceof t))throw new TypeError(`buffer should be of type ${t.name}`);this.cpuData=e.data;break}case"texture":if("float32"!==o)throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break;case"gpu-buffer":if("float32"!==o&&"float16"!==o&&"int32"!==o&&"int64"!==o&&"uint32"!==o&&"uint8"!==o&&"bool"!==o)throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break;default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let s,a;if("string"==typeof e)if(o=e,a=r,"string"===e){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");s=t}else{let r=ur.get(e);if(void 0===r)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if("float16"===e&&r===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");s="uint64"===e||"int64"===e?r.from(t,BigInt):r.from(t)}else{if(!(t instanceof r))throw new TypeError(`A ${o} tensor's data must be type of ${r}`);s=t}}else if(a=t,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");let t=typeof e[0];if("string"===t)o="string",s=e;else{if("boolean"!==t)throw new TypeError(`Invalid element type of data array: ${t}.`);o="bool",s=Uint8Array.from(e)}}else{let t=Qr.get(e.constructor);if(void 0===t)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);o=t,s=e}if(void 0===a)a=[s.length];else if(!Array.isArray(a))throw new TypeError("A tensor's dims must be a number array");n=a,this.cpuData=s,this.dataLocation="cpu"}let s=as(n);if(this.cpuData&&s!==this.cpuData.length)throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=n,this.size=s}static async fromImage(e,t){return Za(e,t)}static fromTexture(e,t){return Qa(e,t)}static fromGpuBuffer(e,t){return es(e,t)}static fromPinnedBuffer(e,t,r){return ts(e,t,r)}toDataURL(e){return Xa(this,e)}toImageData(e){return Ka(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if("none"===this.dataLocation)throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ss(this,e)}}}),Me,Fn=L(()=>{Cn(),Me=Je}),ls,fs,lr,fr,Ho=L(()=>{Vo(),ls=(e,t)=>{(typeof ut.trace>"u"?!ut.wasm.trace:!ut.trace)||console.timeStamp(`${e}::ORT::${t}`)},fs=(e,t)=>{let r=(new Error).stack?.split(/\r\n|\r|\n/g)||[],o=!1;for(let n=0;n<r.length;n++){if(o&&!r[n].includes("TRACE_FUNC")){let o=`FUNC_${e}::${r[n].trim().split(" ")[1]}`;return t&&(o+=`::${t}`),void ls("CPU",o)}r[n].includes("TRACE_FUNC")&&(o=!0)}},lr=e=>{(typeof ut.trace>"u"?!ut.wasm.trace:!ut.trace)||fs("BEGIN",e)},fr=e=>{(typeof ut.trace>"u"?!ut.wasm.trace:!ut.trace)||fs("END",e)}}),$n,cs=L(()=>{Ln(),Fn(),Ho(),$n=class e{constructor(e){this.handler=e}async run(e,t,r){lr();let o={},n={};if("object"!=typeof e||null===e||e instanceof Me||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let s=!0;if("object"==typeof t){if(null===t)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw new TypeError("'fetches' cannot be an empty array.");s=!1;for(let e of t){if("string"!=typeof e)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(e))throw new RangeError(`'fetches' contains invalid output name: ${e}.`);o[e]=null}if("object"==typeof r&&null!==r)n=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else{let e=!1,a=Object.getOwnPropertyNames(t);for(let r of this.outputNames)if(-1!==a.indexOf(r)){let n=t[r];(null===n||n instanceof Me)&&(e=!0,s=!1,o[r]=n)}if(e){if("object"==typeof r&&null!==r)n=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else n=t}}else if(typeof t<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let t of this.inputNames)if(typeof e[t]>"u")throw new Error(`input '${t}' is missing in 'feeds'.`);if(s)for(let e of this.outputNames)o[e]=null;let a=await this.handler.run(e,o,n),i={};for(let e in a)if(Object.hasOwnProperty.call(a,e)){let t=a[e];i[e]=t instanceof Me?t:new Me(t.type,t.data,t.dims)}return fr(),i}async release(){return this.handler.dispose()}static async create(t,r,o,n){lr();let s,a={};if("string"==typeof t){if(s=t,"object"==typeof r&&null!==r)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,"object"==typeof r&&null!==r)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else{if(!(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{let e=t,i=0,l=t.byteLength;if("object"==typeof r&&null!==r)a=r;else if("number"==typeof r){if(i=r,!Number.isSafeInteger(i))throw new RangeError("'byteOffset' must be an integer.");if(i<0||i>=e.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${e.byteLength}).`);if(l=t.byteLength-i,"number"==typeof o){if(l=o,!Number.isSafeInteger(l))throw new RangeError("'byteLength' must be an integer.");if(l<=0||i+l>e.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${e.byteLength-i}].`);if("object"==typeof n&&null!==n)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(typeof o<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(e,i,l)}}let[i,l]=await Dn(a),c=await i.createInferenceSessionHandler(s,l);return fr(),new e(c)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Pd,ps=L(()=>{cs(),Pd=$n}),ds=L(()=>{}),hs=L(()=>{}),ms=L(()=>{}),bs=L(()=>{}),Ed,kn,gs=L(()=>{Ln(),Fn(),Ed="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",kn=class e{constructor(e,t,r){this.handler=e,this.hasOptimizerModel=t,this.hasEvalModel=r}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(t,r){let o=t.evalModel||"",n=t.optimizerModel||"",s=r||{},[a,i]=await Dn(s);if(a.createTrainingSessionHandler){let r=await a.createTrainingSessionHandler(t.checkpointState,t.trainModel,o,n,i);return new e(r,!!t.optimizerModel,!!t.evalModel)}throw new Error(Ed)}typeNarrowingForRunStep(e,t,r,o,n){let s={},a={};if("object"!=typeof r||null===r||r instanceof Me||Array.isArray(r))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let i=!0;if("object"==typeof o){if(null===o)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(0===o.length)throw new TypeError("'fetches' cannot be an empty array.");i=!1;for(let e of o){if("string"!=typeof e)throw new TypeError("'fetches' must be a string array or an object.");if(-1===t.indexOf(e))throw new RangeError(`'fetches' contains invalid output name: ${e}.`);s[e]=null}if("object"==typeof n&&null!==n)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let e=!1,r=Object.getOwnPropertyNames(o);for(let n of t)if(-1!==r.indexOf(n)){let t=o[n];(null===t||t instanceof Me)&&(e=!0,i=!1,s[n]=t)}if(e){if("object"==typeof n&&null!==n)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let t of e)if(typeof r[t]>"u")throw new Error(`input '${t}' is missing in 'feeds'.`);if(i)for(let e of t)s[e]=null;return[s,a]}convertHandlerReturnTypeToMapOfTensors(e){let t={};for(let r in e)if(Object.hasOwnProperty.call(e,r)){let o=e[r];t[r]=o instanceof Me?o:new Me(o.type,o.data,o.dims)}return t}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(e,t,r){let[o,n]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,t,r),s=await this.handler.runTrainStep(e,o,n);return this.convertHandlerReturnTypeToMapOfTensors(s)}async runOptimizerStep(e){if(!this.hasOptimizerModel)throw new Error("This TrainingSession has no OptimizerModel loaded.");await this.handler.runOptimizerStep(e||{})}async runEvalStep(e,t,r){if(this.hasEvalModel){let[o,n]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,t,r),s=await this.handler.runEvalStep(e,o,n);return this.convertHandlerReturnTypeToMapOfTensors(s)}throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(e=!0){return this.handler.getParametersSize(e)}async loadParametersBuffer(e,t=!0){let r=await this.getParametersSize(t);if(e.length!==4*r)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,t)}async getContiguousParameters(e=!0){return this.handler.getContiguousParameters(e)}async release(){return this.handler.dispose()}}}),Dd,ys=L(()=>{gs(),Dd=kn}),qo={};Sr(qo,{InferenceSession:()=>Pd,TRACE:()=>ls,TRACE_FUNC_BEGIN:()=>lr,TRACE_FUNC_END:()=>fr,Tensor:()=>Me,TrainingSession:()=>Dd,env:()=>Z,registerBackend:()=>Pr});var Ot=L(()=>{Wa(),Ya(),ps(),Fn(),ds(),hs(),Ho(),ms(),bs(),ys()});function Xt(e,t,r,o){if(void 0===t)return Cd(e);if(void 0===r)Bn(e,t,1);else if("number"==typeof r&&void 0===o)Bn(e,t,r);else if("string"==typeof r&&void 0===o)Bn(e,r,1,t);else{if("string"!=typeof r||"number"!=typeof o)throw new TypeError("input is valid");Bn(e,r,o,t)}}function Cd(e){return{verbose:Xt.verbose.bind(null,e),info:Xt.info.bind(null,e),warning:Xt.warning.bind(null,e),error:Xt.error.bind(null,e),fatal:Xt.fatal.bind(null,e)}}function Bn(e,t,r,o){let n=en[o||""]||en[""];xs[e]<xs[n.minimalSeverity]||(n.logDateTime&&(t=`${(new Date).toISOString()}|${t}`),n.logSourceLocation,Ld[n.provider].log(e,t,o))}var jo,Yo,xs,Ld,ws,en,ce,Rn,Mn,Gn,Nn,lt=L(()=>{jo=class{log(e,t,r){}},Yo=class{log(e,t,r){console.log(`${this.color(e)} ${r?"[35m"+r+"[0m ":""}${t}`)}color(e){switch(e){case"verbose":return"[34;40mv[0m";case"info":return"[32mi[0m";case"warning":return"[30;43mw[0m";case"error":return"[31;40me[0m";case"fatal":return"[101mf[0m";default:throw new Error(`unsupported severity: ${e}`)}}},xs={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ld={none:new jo,console:new Yo},en={"":ws={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1}},(e=>{function t(e){en={},r("",e||{})}function r(e,r){if("*"===e)t(r);else{let t=en[e]||ws;en[e]={provider:r.provider||t.provider,minimalSeverity:r.minimalSeverity||t.minimalSeverity,logDateTime:void 0===r.logDateTime?t.logDateTime:r.logDateTime,logSourceLocation:void 0===r.logSourceLocation?t.logSourceLocation:r.logSourceLocation}}}e.verbose=function(t,r){e("verbose",t,r)},e.info=function(t,r){e("info",t,r)},e.warning=function(t,r){e("warning",t,r)},e.error=function(t,r){e("error",t,r)},e.fatal=function(t,r){e("fatal",t,r)},e.reset=t,e.set=r,e.setWithEnv=function(e){let t={};e.logLevel&&(t.minimalSeverity=e.logLevel),r("",t)}})(Xt||={}),ce=Xt,Rn=class{constructor(e,t,r,o,n,s){this.category=e,this.name=t,this.startTime=r,this.endCallback=o,this.timer=n,this.ctx=s}async end(){return this.endCallback(this)}async checkTimer(){if(void 0===this.ctx||void 0===this.timer)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Mn=class{constructor(e,t,r,o){this.category=e,this.name=t,this.startTime=r,this.endTime=o}},Gn=class{constructor(e,t,r){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===e?1e4:e,this._flushBatchSize=void 0===t?10:t,this._flushIntervalInMilliseconds=void 0===r?5e3:r}static create(e){return void 0===e?new this:new this(e.maxNumberEvents,e.flushBatchSize,e.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Nn(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(e,t,r,o){let n=this._started?this.begin(e,t,o):void 0,s=!1,a=r();if(a&&"function"==typeof a.then)return s=!0,new Promise((e,t)=>{a.then(async t=>{n&&await n.end(),e(t)},async e=>{n&&await n.end(),t(e)})});if(!s&&n){let e=n.end();if(e&&"function"==typeof e.then)return new Promise((t,r)=>{e.then(()=>{t(a)},e=>{r(e)})})}return a}begin(e,t,r){if(!this._started)throw new Error("profiler is not started yet");if(void 0===r){let r=Nn();return this.flush(r),new Rn(e,t,r,e=>this.endSync(e))}{let o=r.beginTimer();return new Rn(e,t,0,async e=>this.end(e),o,r)}}async end(e){let t=await e.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn(e.category,e.name,e.startTime,t)),this.flush(t))}endSync(e){let t=Nn();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn(e.category,e.name,e.startTime,t)),this.flush(t))}logOneEvent(e){ce.verbose(`Profiler.${e.category}`,`${(e.endTime-e.startTime).toFixed(2)}ms on event '${e.name}' at ${e.endTime.toFixed(2)}`)}flush(e){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||e-this._flushTime>=this._flushIntervalInMilliseconds){for(let e=this._flushPointer;this._flushPointer<e+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Nn()}}get started(){return this._started}},Nn=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function vs(e,t,r){for(let o of r){let r=o[0],n=o[1],s=o[2],a=o[3],i=o[4];if(e.opType===r)for(let e of t)if((e.domain===n||"ai.onnx"===e.domain&&""===n)&&Fd(e.version,s))return{opImpl:a,opInit:i}}throw new TypeError(`cannot resolve operator '${e.opType}' with opsets: ${t.map(e=>`${e.domain||"ai.onnx"} v${e.version}`).join(", ")}`)}function Fd(e,t){if(t.endsWith("+")){let r=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(r)&&r<=e}if(2===t.split("-").length){let r=t.split("-"),o=Number.parseInt(r[0],10),n=Number.parseInt(r[1],10);return!isNaN(o)&&!isNaN(n)&&o<=e&&e<=n}return Number.parseInt(t,10)===e}var _s=L(()=>{}),Os=me(e=>{e.__esModule=!0;var t=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var r=t.toString();return t&&(t instanceof e||e.validator.test(r))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();e.Guid=t});function be(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function Xe(e){return!0===(e&&e.__isLong__)}function Is(e){var t=Math.clz32(e&-e);return e?31-t:t}function cr(e,t){var r,o,n;return t?(n=0<=(e>>>=0)&&e<256)&&(o=As[e])?o:(r=le(e,0,!0),n&&(As[e]=r),r):(n=-128<=(e|=0)&&e<128)&&(o=Ss[e])?o:(r=le(e,e<0?-1:0,!1),n&&(Ss[e]=r),r)}function ct(e,t){if(isNaN(e))return t?zt:It;if(t){if(e<0)return zt;if(e>=Ls)return $s}else{if(e<=-Es)return nt;if(e+1>=Es)return Fs}return e<0?ct(-e,t).neg():le(e%Dr|0,e/Dr|0,t)}function le(e,t,r){return new be(e,t,r)}function Jo(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?zt:It;if((r=r||10)<2||36<r)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return Jo(e.substring(1),t,r).neg();for(var n=ct(Un(r,8)),s=It,a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+i),r);if(i<8){var c=ct(Un(r,i));s=s.mul(c).add(ct(l))}else s=(s=s.mul(n)).add(ct(l))}return s.unsigned=t,s}function St(e,t){return"number"==typeof e?ct(e,t):"string"==typeof e?Jo(e,t):le(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}var ft,Ss,As,Un,Ps,kd,Dr,Ls,Es,Ds,It,zt,Er,Cs,Ko,Fs,$s,nt,B,Vt,Zo=L(()=>{ft=null;try{ft=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=Xe,Ss={},As={},be.fromInt=cr,be.fromNumber=ct,be.fromBits=le,Un=Math.pow,be.fromString=Jo,be.fromValue=St,Es=(Ls=(Dr=(Ps=65536)*Ps)*Dr)/2,Ds=cr(kd=1<<24),It=cr(0),be.ZERO=It,zt=cr(0,!0),be.UZERO=zt,Er=cr(1),be.ONE=Er,Cs=cr(1,!0),be.UONE=Cs,Ko=cr(-1),be.NEG_ONE=Ko,Fs=le(-1,2147483647,!1),be.MAX_VALUE=Fs,$s=le(-1,-1,!0),be.MAX_UNSIGNED_VALUE=$s,nt=le(0,-2147483648,!1),be.MIN_VALUE=nt,(B=be.prototype).toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*Dr+(this.low>>>0):this.high*Dr+(this.low>>>0)},B.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(nt)){var t=ct(e),r=this.div(t),o=r.mul(t).sub(this);return r.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=ct(Un(e,6),this.unsigned),s=this,a="";;){var i=s.div(n),l=(s.sub(i.mul(n)).toInt()>>>0).toString(e);if((s=i).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},B.isZero=function(){return 0===this.high&&0===this.low},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return!(1&~this.low)},B.isEven=function(){return!(1&this.low)},B.equals=function(e){return Xe(e)||(e=St(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},B.eq=B.equals,B.notEquals=function(e){return!this.eq(e)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(e){return this.comp(e)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(e){return this.comp(e)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(e){return this.comp(e)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(e){return this.comp(e)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(e){if(Xe(e)||(e=St(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(nt)?nt:this.not().add(Er)},B.neg=B.negate,B.add=function(e){Xe(e)||(e=St(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,n=65535&this.low,s=e.high>>>16,a=65535&e.high,i=e.low>>>16,l=0,c=0,_=0,p=0;return _+=(p+=n+(65535&e.low))>>>16,c+=(_+=o+i)>>>16,l+=(c+=r+a)>>>16,l+=t+s,le((_&=65535)<<16|(p&=65535),(l&=65535)<<16|(c&=65535),this.unsigned)},B.subtract=function(e){return Xe(e)||(e=St(e)),this.add(e.neg())},B.sub=B.subtract,B.multiply=function(e){if(this.isZero())return this;if(Xe(e)||(e=St(e)),ft)return le(ft.mul(this.low,this.high,e.low,e.high),ft.get_high(),this.unsigned);if(e.isZero())return this.unsigned?zt:It;if(this.eq(nt))return e.isOdd()?nt:It;if(e.eq(nt))return this.isOdd()?nt:It;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Ds)&&e.lt(Ds))return ct(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,n=65535&this.low,s=e.high>>>16,a=65535&e.high,i=e.low>>>16,l=65535&e.low,c=0,_=0,p=0,u=0;return p+=(u+=n*l)>>>16,_+=(p+=o*l)>>>16,p&=65535,_+=(p+=n*i)>>>16,c+=(_+=r*l)>>>16,_&=65535,c+=(_+=o*i)>>>16,_&=65535,c+=(_+=n*a)>>>16,c+=t*l+r*i+o*a+n*s,le((p&=65535)<<16|(u&=65535),(c&=65535)<<16|(_&=65535),this.unsigned)},B.mul=B.multiply,B.divide=function(e){if(Xe(e)||(e=St(e)),e.isZero())throw Error("division by zero");var t,r,o;if(ft)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?le((this.unsigned?ft.div_u:ft.div_s)(this.low,this.high,e.low,e.high),ft.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?zt:It;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return zt;if(e.gt(this.shru(1)))return Cs;o=zt}else{if(this.eq(nt))return e.eq(Er)||e.eq(Ko)?nt:e.eq(nt)?Er:(t=this.shr(1).div(e).shl(1)).eq(It)?e.isNegative()?Er:Ko:(r=this.sub(e.mul(t)),o=t.add(r.div(e)));if(e.eq(nt))return this.unsigned?zt:It;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=It}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var n=Math.ceil(Math.log(t)/Math.LN2),s=n<=48?1:Un(2,n-48),a=ct(t),i=a.mul(e);i.isNegative()||i.gt(r);)i=(a=ct(t-=s,this.unsigned)).mul(e);a.isZero()&&(a=Er),o=o.add(a),r=r.sub(i)}return o},B.div=B.divide,B.modulo=function(e){return Xe(e)||(e=St(e)),ft?le((this.unsigned?ft.rem_u:ft.rem_s)(this.low,this.high,e.low,e.high),ft.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return le(~this.low,~this.high,this.unsigned)},B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},B.clz=B.countLeadingZeros,B.countTrailingZeros=function(){return this.low?Is(this.low):Is(this.high)+32},B.ctz=B.countTrailingZeros,B.and=function(e){return Xe(e)||(e=St(e)),le(this.low&e.low,this.high&e.high,this.unsigned)},B.or=function(e){return Xe(e)||(e=St(e)),le(this.low|e.low,this.high|e.high,this.unsigned)},B.xor=function(e){return Xe(e)||(e=St(e)),le(this.low^e.low,this.high^e.high,this.unsigned)},B.shiftLeft=function(e){return Xe(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?le(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):le(0,this.low<<e-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(e){return Xe(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):le(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(e){return Xe(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):le(32===e?this.high:this.high>>>e-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.rotateLeft=function(e){var t;return Xe(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?le(this.high,this.low,this.unsigned):e<32?(t=32-e,le(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),le(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},B.rotl=B.rotateLeft,B.rotateRight=function(e){var t;return Xe(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?le(this.high,this.low,this.unsigned):e<32?(t=32-e,le(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),le(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},B.rotr=B.rotateRight,B.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},B.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},B.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},be.fromBytes=function(e,t,r){return r?be.fromBytesLE(e,t):be.fromBytesBE(e,t)},be.fromBytesLE=function(e,t){return new be(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},be.fromBytesBE=function(e,t){return new be(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},Vt=be}),_,zn=L(()=>{_={},_.Table,_.SIZEOF_SHORT=2,_.SIZEOF_INT=4,_.FILE_IDENTIFIER_LENGTH=4,_.SIZE_PREFIX_LENGTH=4,_.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_.int32=new Int32Array(2),_.float32=new Float32Array(_.int32.buffer),_.float64=new Float64Array(_.int32.buffer),_.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],_.Long=function(e,t){this.low=0|e,this.high=0|t},_.Long.create=function(e,t){return 0==e&&0==t?_.Long.ZERO:new _.Long(e,t)},_.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},_.Long.prototype.equals=function(e){return this.low==e.low&&this.high==e.high},_.Long.ZERO=new _.Long(0,0),_.Builder=function(e){if(e)var t=e;else t=1024;this.bb=_.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.forceDefaults=function(e){this.force_defaults=e},_.Builder.prototype.dataBuffer=function(){return this.bb},_.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_.Builder.prototype.prep=function(e,t){e>this.minalign&&(this.minalign=e);for(var r=1+~(this.bb.capacity()-this.space+t)&e-1;this.space<r+e+t;){var o=this.bb.capacity();this.bb=_.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(r)},_.Builder.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0)},_.Builder.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e)},_.Builder.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},_.Builder.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},_.Builder.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},_.Builder.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},_.Builder.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},_.Builder.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},_.Builder.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},_.Builder.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},_.Builder.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},_.Builder.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},_.Builder.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},_.Builder.prototype.addFieldInt8=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt8(t),this.slot(e))},_.Builder.prototype.addFieldInt16=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt16(t),this.slot(e))},_.Builder.prototype.addFieldInt32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt32(t),this.slot(e))},_.Builder.prototype.addFieldInt64=function(e,t,r){(this.force_defaults||!t.equals(r))&&(this.addInt64(t),this.slot(e))},_.Builder.prototype.addFieldFloat32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat32(t),this.slot(e))},_.Builder.prototype.addFieldFloat64=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat64(t),this.slot(e))},_.Builder.prototype.addFieldOffset=function(e,t,r){(this.force_defaults||t!=r)&&(this.addOffset(t),this.slot(e))},_.Builder.prototype.addFieldStruct=function(e,t,r){t!=r&&(this.nested(t),this.slot(e))},_.Builder.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_.Builder.prototype.slot=function(e){this.vtable[e]=this.offset()},_.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_.Builder.growByteBuffer=function(e){var t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=t<<1,o=_.ByteBuffer.allocate(r);return o.setPosition(r-t),o.bytes().set(e.bytes(),r-t),o},_.Builder.prototype.addOffset=function(e){this.prep(_.SIZEOF_INT,0),this.writeInt32(this.offset()-e+_.SIZEOF_INT)},_.Builder.prototype.startObject=function(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()},_.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0&&0==this.vtable[t];t--);for(var r=t+1;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);var o=(r+2)*_.SIZEOF_SHORT;this.addInt16(o);var n=0,s=this.space;e:for(t=0;t<this.vtables.length;t++){var a=this.bb.capacity()-this.vtables[t];if(o==this.bb.readInt16(a)){for(var i=_.SIZEOF_SHORT;i<o;i+=_.SIZEOF_SHORT)if(this.bb.readInt16(s+i)!=this.bb.readInt16(a+i))continue e;n=this.vtables[t];break}}return n?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,n-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},_.Builder.prototype.finish=function(e,t,r){var o=r?_.SIZE_PREFIX_LENGTH:0;if(t){var n=t;if(this.prep(this.minalign,_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH+o),n.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var s=_.FILE_IDENTIFIER_LENGTH-1;s>=0;s--)this.writeInt8(n.charCodeAt(s))}this.prep(this.minalign,_.SIZEOF_INT+o),this.addOffset(e),o&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_.Builder.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0)},_.Builder.prototype.requiredField=function(e,t){var r=this.bb.capacity()-e,o=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(o+t)))throw new Error("FlatBuffers: field "+t+" must be set")},_.Builder.prototype.startVector=function(e,t,r){this.notNested(),this.vector_num_elems=t,this.prep(_.SIZEOF_INT,e*t),this.prep(r,e*t)},_.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_.Builder.prototype.createString=function(e){if(e instanceof Uint8Array)var t=e;else{t=[];for(var r=0;r<e.length;){var o,n=e.charCodeAt(r++);if(n<55296||n>=56320)o=n;else o=(n<<10)+e.charCodeAt(r++)+-56613888;o<128?t.push(o):(o<2048?t.push(o>>6&31|192):(o<65536?t.push(o>>12&15|224):t.push(o>>18&7|240,o>>12&63|128),t.push(o>>6&63|128)),t.push(63&o|128))}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);r=0;for(var s=this.space,a=this.bb.bytes();r<t.length;r++)a[s++]=t[r];return this.endVector()},_.Builder.prototype.createLong=function(e,t){return _.Long.create(e,t)},_.ByteBuffer=function(e){this.bytes_=e,this.position_=0},_.ByteBuffer.allocate=function(e){return new _.ByteBuffer(new Uint8Array(e))},_.ByteBuffer.prototype.clear=function(){this.position_=0},_.ByteBuffer.prototype.bytes=function(){return this.bytes_},_.ByteBuffer.prototype.position=function(){return this.position_},_.ByteBuffer.prototype.setPosition=function(e){this.position_=e},_.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_.ByteBuffer.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},_.ByteBuffer.prototype.readUint8=function(e){return this.bytes_[e]},_.ByteBuffer.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},_.ByteBuffer.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},_.ByteBuffer.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},_.ByteBuffer.prototype.readUint32=function(e){return this.readInt32(e)>>>0},_.ByteBuffer.prototype.readInt64=function(e){return new _.Long(this.readInt32(e),this.readInt32(e+4))},_.ByteBuffer.prototype.readUint64=function(e){return new _.Long(this.readUint32(e),this.readUint32(e+4))},_.ByteBuffer.prototype.readFloat32=function(e){return _.int32[0]=this.readInt32(e),_.float32[0]},_.ByteBuffer.prototype.readFloat64=function(e){return _.int32[_.isLittleEndian?0:1]=this.readInt32(e),_.int32[_.isLittleEndian?1:0]=this.readInt32(e+4),_.float64[0]},_.ByteBuffer.prototype.writeInt8=function(e,t){this.bytes_[e]=t},_.ByteBuffer.prototype.writeUint8=function(e,t){this.bytes_[e]=t},_.ByteBuffer.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},_.ByteBuffer.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},_.ByteBuffer.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},_.ByteBuffer.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},_.ByteBuffer.prototype.writeInt64=function(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high)},_.ByteBuffer.prototype.writeUint64=function(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high)},_.ByteBuffer.prototype.writeFloat32=function(e,t){_.float32[0]=t,this.writeInt32(e,_.int32[0])},_.ByteBuffer.prototype.writeFloat64=function(e,t){_.float64[0]=t,this.writeInt32(e,_.int32[_.isLittleEndian?0:1]),this.writeInt32(e+4,_.int32[_.isLittleEndian?1:0])},_.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<_.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+_.SIZEOF_INT+t));return e},_.ByteBuffer.prototype.__offset=function(e,t){var r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0},_.ByteBuffer.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e},_.ByteBuffer.prototype.__string=function(e,t){e+=this.readInt32(e);var r=this.readInt32(e),o="",n=0;if(e+=_.SIZEOF_INT,t===_.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+r);for(;n<r;){var s,a=this.readUint8(e+n++);if(a<192)s=a;else{var i=this.readUint8(e+n++);if(a<224)s=(31&a)<<6|63&i;else{var l=this.readUint8(e+n++);if(a<240)s=(15&a)<<12|(63&i)<<6|63&l;else s=(7&a)<<18|(63&i)<<12|(63&l)<<6|63&this.readUint8(e+n++)}}s<65536?o+=String.fromCharCode(s):(s-=65536,o+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return o},_.ByteBuffer.prototype.__indirect=function(e){return e+this.readInt32(e)},_.ByteBuffer.prototype.__vector=function(e){return e+this.readInt32(e)+_.SIZEOF_INT},_.ByteBuffer.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},_.ByteBuffer.prototype.__has_identifier=function(e){if(e.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var t=0;t<_.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position_+_.SIZEOF_INT+t))return!1;return!0},_.ByteBuffer.prototype.createLong=function(e,t){return _.Long.create(e,t)}}),V,tn=L(()=>{zn(),(e=>{let t;(e=>{let t;(e=>{let t;var r;(r=t=e.AttributeType||={})[r.UNDEFINED=0]="UNDEFINED",r[r.FLOAT=1]="FLOAT",r[r.INT=2]="INT",r[r.STRING=3]="STRING",r[r.TENSOR=4]="TENSOR",r[r.GRAPH=5]="GRAPH",r[r.FLOATS=6]="FLOATS",r[r.INTS=7]="INTS",r[r.STRINGS=8]="STRINGS",r[r.TENSORS=9]="TENSORS",r[r.GRAPHS=10]="GRAPHS",r[r.SPARSE_TENSOR=11]="SPARSE_TENSOR",r[r.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(e=>{let t;var r;(r=t=e.DimensionValueType||={})[r.UNKNOWN=0]="UNKNOWN",r[r.VALUE=1]="VALUE",r[r.PARAM=2]="PARAM"})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(e=>{let t;var r;(r=t=e.TensorDataType||={})[r.UNDEFINED=0]="UNDEFINED",r[r.FLOAT=1]="FLOAT",r[r.UINT8=2]="UINT8",r[r.INT8=3]="INT8",r[r.UINT16=4]="UINT16",r[r.INT16=5]="INT16",r[r.INT32=6]="INT32",r[r.INT64=7]="INT64",r[r.STRING=8]="STRING",r[r.BOOL=9]="BOOL",r[r.FLOAT16=10]="FLOAT16",r[r.DOUBLE=11]="DOUBLE",r[r.UINT32=12]="UINT32",r[r.UINT64=13]="UINT64",r[r.COMPLEX64=14]="COMPLEX64",r[r.COMPLEX128=15]="COMPLEX128",r[r.BFLOAT16=16]="BFLOAT16",r[r.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",r[r.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",r[r.FLOAT8E5M2=19]="FLOAT8E5M2",r[r.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(e=>{let t;var r;(r=t=e.NodeType||={})[r.Primitive=0]="Primitive",r[r.Fused=1]="Fused"})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(e=>{let t;var r;(r=t=e.TypeInfoValue||={})[r.NONE=0]="NONE",r[r.tensor_type=1]="tensor_type",r[r.sequence_type=2]="sequence_type",r[r.map_type=3]="map_type"})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsShape(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsShape(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}dim(t,r){let o=this.bb.__offset(this.bb_pos,4);return o?(r||new e.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}dimLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}static startShape(e){e.startObject(1)}static addDim(e,t){e.addFieldOffset(0,t,0)}static createDimVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startDimVector(e,t){e.startVector(4,t,4)}static endShape(e){return e.endObject()}static createShape(e,t){return r.startShape(e),r.addDim(e,t),r.endShape(e)}}t.Shape=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDimension(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDimension(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}value(t){let r=this.bb.__offset(this.bb_pos,4);return r?(t||new e.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}denotation(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startDimension(e){e.startObject(2)}static addValue(e,t){e.addFieldOffset(0,t,0)}static addDenotation(e,t){e.addFieldOffset(1,t,0)}static endDimension(e){return e.endObject()}static createDimension(e,t,o){return r.startDimension(e),r.addValue(e,t),r.addDenotation(e,o),r.endDimension(e)}}t.Dimension=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(e=>{class t{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDimensionValue(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDimensionValue(e,r){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}dimType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):0}dimValue(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}dimParam(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}static startDimensionValue(e){e.startObject(3)}static addDimType(e,t){e.addFieldInt8(0,t,0)}static addDimValue(e,t){e.addFieldInt64(1,t,e.createLong(0,0))}static addDimParam(e,t){e.addFieldOffset(2,t,0)}static endDimensionValue(e){return e.endObject()}static createDimensionValue(e,r,o,n){return t.startDimensionValue(e),t.addDimType(e,r),t.addDimValue(e,o),t.addDimParam(e,n),t.endDimensionValue(e)}}e.DimensionValue=t})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTensorTypeAndShape(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensorTypeAndShape(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}elemType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}shape(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startTensorTypeAndShape(e){e.startObject(2)}static addElemType(e,t){e.addFieldInt32(0,t,0)}static addShape(e,t){e.addFieldOffset(1,t,0)}static endTensorTypeAndShape(e){return e.endObject()}static createTensorTypeAndShape(e,t,o){return r.startTensorTypeAndShape(e),r.addElemType(e,t),r.addShape(e,o),r.endTensorTypeAndShape(e)}}t.TensorTypeAndShape=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMapType(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMapType(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}keyType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}valueType(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startMapType(e){e.startObject(2)}static addKeyType(e,t){e.addFieldInt32(0,t,0)}static addValueType(e,t){e.addFieldOffset(1,t,0)}static endMapType(e){return e.endObject()}static createMapType(e,t,o){return r.startMapType(e),r.addKeyType(e,t),r.addValueType(e,o),r.endMapType(e)}}t.MapType=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSequenceType(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSequenceType(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}elemType(t){let r=this.bb.__offset(this.bb_pos,4);return r?(t||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startSequenceType(e){e.startObject(1)}static addElemType(e,t){e.addFieldOffset(0,t,0)}static endSequenceType(e){return e.endObject()}static createSequenceType(e,t){return r.startSequenceType(e),r.addElemType(e,t),r.endSequenceType(e)}}t.SequenceType=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(t=e.fbs||={}).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(e,t,r,o){return e.prep(4,12),e.writeInt32(o),e.writeInt32(r),e.writeInt32(t),e.offset()}}})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNodeEdge(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNodeEdge(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}nodeIndex(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb_pos+e):0}inputEdges(t,r){let o=this.bb.__offset(this.bb_pos,6);return o?(r||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+o)+12*t,this.bb):null}inputEdgesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}outputEdges(t,r){let o=this.bb.__offset(this.bb_pos,8);return o?(r||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+o)+12*t,this.bb):null}outputEdgesLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startNodeEdge(e){e.startObject(3)}static addNodeIndex(e,t){e.addFieldInt32(0,t,0)}static addInputEdges(e,t){e.addFieldOffset(1,t,0)}static startInputEdgesVector(e,t){e.startVector(12,t,4)}static addOutputEdges(e,t){e.addFieldOffset(2,t,0)}static startOutputEdgesVector(e,t){e.startVector(12,t,4)}static endNodeEdge(e){return e.endObject()}static createNodeEdge(e,t,o,n){return r.startNodeEdge(e),r.addNodeIndex(e,t),r.addInputEdges(e,o),r.addOutputEdges(e,n),r.endNodeEdge(e)}}t.NodeEdge=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNode(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNode(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}docString(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}domain(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}sinceVersion(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0}index(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint32(this.bb_pos+e):0}opType(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):0}executionProviderType(e){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__string(this.bb_pos+t,e):null}inputs(e,t){let r=this.bb.__offset(this.bb_pos,20);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}inputsLength(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0}outputs(e,t){let r=this.bb.__offset(this.bb_pos,22);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}outputsLength(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0}attributes(t,r){let o=this.bb.__offset(this.bb_pos,24);return o?(r||new e.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}attributesLength(){let e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0}inputArgCounts(e){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}inputArgCountsLength(){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__vector_len(this.bb_pos+e):0}inputArgCountsArray(){let e=this.bb.__offset(this.bb_pos,26);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}implicitInputs(e,t){let r=this.bb.__offset(this.bb_pos,28);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}implicitInputsLength(){let e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__vector_len(this.bb_pos+e):0}static startNode(e){e.startObject(13)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDocString(e,t){e.addFieldOffset(1,t,0)}static addDomain(e,t){e.addFieldOffset(2,t,0)}static addSinceVersion(e,t){e.addFieldInt32(3,t,0)}static addIndex(e,t){e.addFieldInt32(4,t,0)}static addOpType(e,t){e.addFieldOffset(5,t,0)}static addType(e,t){e.addFieldInt32(6,t,0)}static addExecutionProviderType(e,t){e.addFieldOffset(7,t,0)}static addInputs(e,t){e.addFieldOffset(8,t,0)}static createInputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startInputsVector(e,t){e.startVector(4,t,4)}static addOutputs(e,t){e.addFieldOffset(9,t,0)}static createOutputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startOutputsVector(e,t){e.startVector(4,t,4)}static addAttributes(e,t){e.addFieldOffset(10,t,0)}static createAttributesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startAttributesVector(e,t){e.startVector(4,t,4)}static addInputArgCounts(e,t){e.addFieldOffset(11,t,0)}static createInputArgCountsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}static startInputArgCountsVector(e,t){e.startVector(4,t,4)}static addImplicitInputs(e,t){e.addFieldOffset(12,t,0)}static createImplicitInputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startImplicitInputsVector(e,t){e.startVector(4,t,4)}static endNode(e){return e.endObject()}static createNode(e,t,o,n,s,a,i,l,c,_,p,u,d,h){return r.startNode(e),r.addName(e,t),r.addDocString(e,o),r.addDomain(e,n),r.addSinceVersion(e,s),r.addIndex(e,a),r.addOpType(e,i),r.addType(e,l),r.addExecutionProviderType(e,c),r.addInputs(e,_),r.addOutputs(e,p),r.addAttributes(e,u),r.addInputArgCounts(e,d),r.addImplicitInputs(e,h),r.endNode(e)}}t.Node=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsValueInfo(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsValueInfo(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}docString(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}type(t){let r=this.bb.__offset(this.bb_pos,8);return r?(t||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startValueInfo(e){e.startObject(3)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDocString(e,t){e.addFieldOffset(1,t,0)}static addType(e,t){e.addFieldOffset(2,t,0)}static endValueInfo(e){return e.endObject()}static createValueInfo(e,t,o,n){return r.startValueInfo(e),r.addName(e,t),r.addDocString(e,o),r.addType(e,n),r.endValueInfo(e)}}t.ValueInfo=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(e=>{class t{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTypeInfo(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTypeInfo(e,r){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}denotation(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}valueType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):0}value(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}static startTypeInfo(e){e.startObject(3)}static addDenotation(e,t){e.addFieldOffset(0,t,0)}static addValueType(e,t){e.addFieldInt8(1,t,0)}static addValue(e,t){e.addFieldOffset(2,t,0)}static endTypeInfo(e){return e.endObject()}static createTypeInfo(e,r,o,n){return t.startTypeInfo(e),t.addDenotation(e,r),t.addValueType(e,o),t.addValue(e,n),t.endTypeInfo(e)}}e.TypeInfo=t})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(e=>{class t{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsOperatorSetId(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsOperatorSetId(e,r){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}domain(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}version(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}static startOperatorSetId(e){e.startObject(2)}static addDomain(e,t){e.addFieldOffset(0,t,0)}static addVersion(e,t){e.addFieldInt64(1,t,e.createLong(0,0))}static endOperatorSetId(e){return e.endObject()}static createOperatorSetId(e,r,o){return t.startOperatorSetId(e),t.addDomain(e,r),t.addVersion(e,o),t.endOperatorSetId(e)}}e.OperatorSetId=t})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(e=>{class t{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTensor(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensor(e,r){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}docString(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}dims(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}dimsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}dataType(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0}rawData(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}rawDataLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}rawDataArray(){let e=this.bb.__offset(this.bb_pos,12);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}stringData(e,t){let r=this.bb.__offset(this.bb_pos,14);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}stringDataLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}static startTensor(e){e.startObject(6)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDocString(e,t){e.addFieldOffset(1,t,0)}static addDims(e,t){e.addFieldOffset(2,t,0)}static createDimsVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startDimsVector(e,t){e.startVector(8,t,8)}static addDataType(e,t){e.addFieldInt32(3,t,0)}static addRawData(e,t){e.addFieldOffset(4,t,0)}static createRawDataVector(e,t){e.startVector(1,t.length,1);for(let r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector()}static startRawDataVector(e,t){e.startVector(1,t,1)}static addStringData(e,t){e.addFieldOffset(5,t,0)}static createStringDataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startStringDataVector(e,t){e.startVector(4,t,4)}static endTensor(e){return e.endObject()}static createTensor(e,r,o,n,s,a,i){return t.startTensor(e),t.addName(e,r),t.addDocString(e,o),t.addDims(e,n),t.addDataType(e,s),t.addRawData(e,a),t.addStringData(e,i),t.endTensor(e)}}e.Tensor=t})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSparseTensor(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseTensor(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}values(t){let r=this.bb.__offset(this.bb_pos,4);return r?(t||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}indices(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}dims(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}dimsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSparseTensor(e){e.startObject(3)}static addValues(e,t){e.addFieldOffset(0,t,0)}static addIndices(e,t){e.addFieldOffset(1,t,0)}static addDims(e,t){e.addFieldOffset(2,t,0)}static createDimsVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startDimsVector(e,t){e.startVector(8,t,8)}static endSparseTensor(e){return e.endObject()}static createSparseTensor(e,t,o,n){return r.startSparseTensor(e),r.addValues(e,t),r.addIndices(e,o),r.addDims(e,n),r.endSparseTensor(e)}}t.SparseTensor=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsAttribute(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsAttribute(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}docString(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}type(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0}f(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):0}i(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}s(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}t(t){let r=this.bb.__offset(this.bb_pos,16);return r?(t||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}g(t){let r=this.bb.__offset(this.bb_pos,18);return r?(t||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}floats(e){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+4*e):0}floatsLength(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0}floatsArray(){let e=this.bb.__offset(this.bb_pos,20);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}ints(e){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}intsLength(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0}strings(e,t){let r=this.bb.__offset(this.bb_pos,24);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}stringsLength(){let e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0}tensors(t,r){let o=this.bb.__offset(this.bb_pos,26);return o?(r||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}tensorsLength(){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__vector_len(this.bb_pos+e):0}graphs(t,r){let o=this.bb.__offset(this.bb_pos,28);return o?(r||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}graphsLength(){let e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__vector_len(this.bb_pos+e):0}static startAttribute(e){e.startObject(13)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDocString(e,t){e.addFieldOffset(1,t,0)}static addType(e,t){e.addFieldInt32(2,t,0)}static addF(e,t){e.addFieldFloat32(3,t,0)}static addI(e,t){e.addFieldInt64(4,t,e.createLong(0,0))}static addS(e,t){e.addFieldOffset(5,t,0)}static addT(e,t){e.addFieldOffset(6,t,0)}static addG(e,t){e.addFieldOffset(7,t,0)}static addFloats(e,t){e.addFieldOffset(8,t,0)}static createFloatsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addFloat32(t[r]);return e.endVector()}static startFloatsVector(e,t){e.startVector(4,t,4)}static addInts(e,t){e.addFieldOffset(9,t,0)}static createIntsVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startIntsVector(e,t){e.startVector(8,t,8)}static addStrings(e,t){e.addFieldOffset(10,t,0)}static createStringsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startStringsVector(e,t){e.startVector(4,t,4)}static addTensors(e,t){e.addFieldOffset(11,t,0)}static createTensorsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startTensorsVector(e,t){e.startVector(4,t,4)}static addGraphs(e,t){e.addFieldOffset(12,t,0)}static createGraphsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startGraphsVector(e,t){e.startVector(4,t,4)}static endAttribute(e){return e.endObject()}static createAttribute(e,t,o,n,s,a,i,l,c,_,p,u,d,h){return r.startAttribute(e),r.addName(e,t),r.addDocString(e,o),r.addType(e,n),r.addF(e,s),r.addI(e,a),r.addS(e,i),r.addT(e,l),r.addG(e,c),r.addFloats(e,_),r.addInts(e,p),r.addStrings(e,u),r.addTensors(e,d),r.addGraphs(e,h),r.endAttribute(e)}}t.Attribute=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsGraph(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGraph(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}initializers(t,r){let o=this.bb.__offset(this.bb_pos,4);return o?(r||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}initializersLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}nodeArgs(t,r){let o=this.bb.__offset(this.bb_pos,6);return o?(r||new e.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}nodeArgsLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}nodes(t,r){let o=this.bb.__offset(this.bb_pos,8);return o?(r||new e.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}nodesLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}maxNodeIndex(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb_pos+e):0}nodeEdges(t,r){let o=this.bb.__offset(this.bb_pos,12);return o?(r||new e.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}nodeEdgesLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}inputs(e,t){let r=this.bb.__offset(this.bb_pos,14);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}inputsLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}outputs(e,t){let r=this.bb.__offset(this.bb_pos,16);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}outputsLength(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}sparseInitializers(t,r){let o=this.bb.__offset(this.bb_pos,18);return o?(r||new e.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}sparseInitializersLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static startGraph(e){e.startObject(8)}static addInitializers(e,t){e.addFieldOffset(0,t,0)}static createInitializersVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startInitializersVector(e,t){e.startVector(4,t,4)}static addNodeArgs(e,t){e.addFieldOffset(1,t,0)}static createNodeArgsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startNodeArgsVector(e,t){e.startVector(4,t,4)}static addNodes(e,t){e.addFieldOffset(2,t,0)}static createNodesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startNodesVector(e,t){e.startVector(4,t,4)}static addMaxNodeIndex(e,t){e.addFieldInt32(3,t,0)}static addNodeEdges(e,t){e.addFieldOffset(4,t,0)}static createNodeEdgesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startNodeEdgesVector(e,t){e.startVector(4,t,4)}static addInputs(e,t){e.addFieldOffset(5,t,0)}static createInputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startInputsVector(e,t){e.startVector(4,t,4)}static addOutputs(e,t){e.addFieldOffset(6,t,0)}static createOutputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startOutputsVector(e,t){e.startVector(4,t,4)}static addSparseInitializers(e,t){e.addFieldOffset(7,t,0)}static createSparseInitializersVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startSparseInitializersVector(e,t){e.startVector(4,t,4)}static endGraph(e){return e.endObject()}static createGraph(e,t,o,n,s,a,i,l,c){return r.startGraph(e),r.addInitializers(e,t),r.addNodeArgs(e,o),r.addNodes(e,n),r.addMaxNodeIndex(e,s),r.addNodeEdges(e,a),r.addInputs(e,i),r.addOutputs(e,l),r.addSparseInitializers(e,c),r.endGraph(e)}}t.Graph=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsModel(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsModel(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}irVersion(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}opsetImport(t,r){let o=this.bb.__offset(this.bb_pos,6);return o?(r||new e.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}opsetImportLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}producerName(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}producerVersion(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}domain(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}modelVersion(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}docString(e){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__string(this.bb_pos+t,e):null}graph(t){let r=this.bb.__offset(this.bb_pos,18);return r?(t||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}graphDocString(e){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__string(this.bb_pos+t,e):null}static startModel(e){e.startObject(9)}static addIrVersion(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addOpsetImport(e,t){e.addFieldOffset(1,t,0)}static createOpsetImportVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startOpsetImportVector(e,t){e.startVector(4,t,4)}static addProducerName(e,t){e.addFieldOffset(2,t,0)}static addProducerVersion(e,t){e.addFieldOffset(3,t,0)}static addDomain(e,t){e.addFieldOffset(4,t,0)}static addModelVersion(e,t){e.addFieldInt64(5,t,e.createLong(0,0))}static addDocString(e,t){e.addFieldOffset(6,t,0)}static addGraph(e,t){e.addFieldOffset(7,t,0)}static addGraphDocString(e,t){e.addFieldOffset(8,t,0)}static endModel(e){return e.endObject()}static createModel(e,t,o,n,s,a,i,l,c,_){return r.startModel(e),r.addIrVersion(e,t),r.addOpsetImport(e,o),r.addProducerName(e,n),r.addProducerVersion(e,s),r.addDomain(e,a),r.addModelVersion(e,i),r.addDocString(e,l),r.addGraph(e,c),r.addGraphDocString(e,_),r.endModel(e)}}t.Model=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(e=>{let t;(e=>{class t{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKernelCreateInfos(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKernelCreateInfos(e,r){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}nodeIndices(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}nodeIndicesLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}nodeIndicesArray(){let e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}kernelDefHashes(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}kernelDefHashesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}static startKernelCreateInfos(e){e.startObject(2)}static addNodeIndices(e,t){e.addFieldOffset(0,t,0)}static createNodeIndicesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}static startNodeIndicesVector(e,t){e.startVector(4,t,4)}static addKernelDefHashes(e,t){e.addFieldOffset(1,t,0)}static createKernelDefHashesVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startKernelDefHashesVector(e,t){e.startVector(8,t,8)}static endKernelCreateInfos(e){return e.endObject()}static createKernelCreateInfos(e,r,o){return t.startKernelCreateInfos(e),t.addNodeIndices(e,r),t.addKernelDefHashes(e,o),t.endKernelCreateInfos(e)}}e.KernelCreateInfos=t})(t=e.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSubGraphSessionState(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSubGraphSessionState(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}graphId(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}sessionState(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startSubGraphSessionState(e){e.startObject(2)}static addGraphId(e,t){e.addFieldOffset(0,t,0)}static addSessionState(e,t){e.addFieldOffset(1,t,0)}static endSubGraphSessionState(e){let t=e.endObject();return e.requiredField(t,4),t}static createSubGraphSessionState(e,t,o){return r.startSubGraphSessionState(e),r.addGraphId(e,t),r.addSessionState(e,o),r.endSubGraphSessionState(e)}}t.SubGraphSessionState=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSessionState(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSessionState(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}kernels(t){let r=this.bb.__offset(this.bb_pos,4);return r?(t||new e.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}subGraphSessionStates(t,r){let o=this.bb.__offset(this.bb_pos,6);return o?(r||new e.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}subGraphSessionStatesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSessionState(e){e.startObject(2)}static addKernels(e,t){e.addFieldOffset(0,t,0)}static addSubGraphSessionStates(e,t){e.addFieldOffset(1,t,0)}static createSubGraphSessionStatesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startSubGraphSessionStatesVector(e,t){e.startVector(4,t,4)}static endSessionState(e){return e.endObject()}static createSessionState(e,t,o){return r.startSessionState(e),r.addKernels(e,t),r.addSubGraphSessionStates(e,o),r.endSessionState(e)}}t.SessionState=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={}),(e=>{let t;(t=>{let r;(t=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInferenceSession(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInferenceSession(e,t){return e.setPosition(e.position()+_.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static bufferHasIdentifier(e){return e.__has_identifier("ORTM")}ortVersion(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}model(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}sessionState(t){let r=this.bb.__offset(this.bb_pos,8);return r?(t||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startInferenceSession(e){e.startObject(3)}static addOrtVersion(e,t){e.addFieldOffset(0,t,0)}static addModel(e,t){e.addFieldOffset(1,t,0)}static addSessionState(e,t){e.addFieldOffset(2,t,0)}static endInferenceSession(e){return e.endObject()}static finishInferenceSessionBuffer(e,t){e.finish(t,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(e,t){e.finish(t,"ORTM",!0)}static createInferenceSession(e,t,o,n){return r.startInferenceSession(e),r.addOrtVersion(e,t),r.addModel(e,o),r.addSessionState(e,n),r.endInferenceSession(e)}}t.InferenceSession=r})(r=t.fbs||={})})(t=e.experimental||={})})(V||={})}),Bs=me((e,t)=>{t.exports=function(e,t){for(var r=new Array(arguments.length-1),o=0,n=2,s=!0;n<arguments.length;)r[o++]=arguments[n++];return new Promise(function(n,a){r[o]=function(e){if(s)if(s=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,a(e))}})}}),Gs=me(e=>{var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};var r,o=new Array(64),n=new Array(123);for(r=0;r<64;)n[o[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;t.encode=function(e,t,r){for(var n,s=null,a=[],i=0,l=0;t<r;){var c=e[t++];switch(l){case 0:a[i++]=o[c>>2],n=(3&c)<<4,l=1;break;case 1:a[i++]=o[n|c>>4],n=(15&c)<<2,l=2;break;case 2:a[i++]=o[n|c>>6],a[i++]=o[63&c],l=0}i>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),i=0)}return l&&(a[i++]=o[n],a[i++]=61,1===l&&(a[i++]=61)),s?(i&&s.push(String.fromCharCode.apply(String,a.slice(0,i))),s.join("")):String.fromCharCode.apply(String,a.slice(0,i))};var s="invalid encoding";t.decode=function(e,t,r){for(var o,a=r,i=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&i>1)break;if(void 0===(c=n[c]))throw Error(s);switch(i){case 0:o=c,i=1;break;case 1:t[r++]=o<<2|(48&c)>>4,o=c,i=2;break;case 2:t[r++]=(15&o)<<4|(60&c)>>2,o=c,i=3;break;case 3:t[r++]=(3&o)<<6|c,i=0}}if(1===i)throw Error(s);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}),zs=me((e,t)=>{function r(){this._listeners={}}t.exports=r,r.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,r)}return this}}),Xs=me((e,t)=>{function r(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),o=128===r[3];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3]}function s(e,o,n){t[0]=e,o[n]=r[3],o[n+1]=r[2],o[n+2]=r[1],o[n+3]=r[0]}function a(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],t[0]}function i(e,o){return r[3]=e[o],r[2]=e[o+1],r[1]=e[o+2],r[0]=e[o+3],t[0]}e.writeFloatLE=o?n:s,e.writeFloatBE=o?s:n,e.readFloatLE=o?a:i,e.readFloatBE=o?i:a}():function(){function t(e,t,r,o){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,o);else if(isNaN(t))e(2143289344,r,o);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,o);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,o);else{var s=Math.floor(Math.log(t)/Math.LN2);e((n<<31|s+127<<23|8388607&Math.round(t*Math.pow(2,-s)*8388608))>>>0,r,o)}}function r(e,t,r){var o=e(t,r),n=2*(o>>31)+1,s=o>>>23&255,a=8388607&o;return 255===s?a?NaN:n*(1/0):0===s?1401298464324817e-60*n*a:n*Math.pow(2,s-150)*(a+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,n),e.readFloatLE=r.bind(null,s),e.readFloatBE=r.bind(null,a)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),o=128===r[7];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3],o[n+4]=r[4],o[n+5]=r[5],o[n+6]=r[6],o[n+7]=r[7]}function s(e,o,n){t[0]=e,o[n]=r[7],o[n+1]=r[6],o[n+2]=r[5],o[n+3]=r[4],o[n+4]=r[3],o[n+5]=r[2],o[n+6]=r[1],o[n+7]=r[0]}function a(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],r[4]=e[o+4],r[5]=e[o+5],r[6]=e[o+6],r[7]=e[o+7],t[0]}function i(e,o){return r[7]=e[o],r[6]=e[o+1],r[5]=e[o+2],r[4]=e[o+3],r[3]=e[o+4],r[2]=e[o+5],r[1]=e[o+6],r[0]=e[o+7],t[0]}e.writeDoubleLE=o?n:s,e.writeDoubleBE=o?s:n,e.readDoubleLE=o?a:i,e.readDoubleBE=o?i:a}():function(){function t(e,t,r,o,n,s){var a=o<0?1:0;if(a&&(o=-o),0===o)e(0,n,s+t),e(1/o>0?0:2147483648,n,s+r);else if(isNaN(o))e(0,n,s+t),e(2146959360,n,s+r);else if(o>17976931348623157e292)e(0,n,s+t),e((a<<31|2146435072)>>>0,n,s+r);else{var i;if(o<22250738585072014e-324)e((i=o/5e-324)>>>0,n,s+t),e((a<<31|i/4294967296)>>>0,n,s+r);else{var l=Math.floor(Math.log(o)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(i=o*Math.pow(2,-l))>>>0,n,s+t),e((a<<31|l+1023<<20|1048576*i&1048575)>>>0,n,s+r)}}}function r(e,t,r,o,n){var s=e(o,n+t),a=e(o,n+r),i=2*(a>>31)+1,l=a>>>20&2047,c=4294967296*(1048575&a)+s;return 2047===l?c?NaN:i*(1/0):0===l?5e-324*i*c:i*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=r.bind(null,s,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function o(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=r(r)}),Ks=me((exports,module)=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire}),Zs=me(e=>{var t=e;t.length=function(e){for(var t=0,r=0,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(o+1))?(++o,t+=4):t+=3;return t},t.read=function(e,t,r){if(r-t<1)return"";for(var o,n=null,s=[],a=0;t<r;)(o=e[t++])<128?s[a++]=o:o>191&&o<224?s[a++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[a++]=55296+(o>>10),s[a++]=56320+(1023&o)):s[a++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),a=0);return n?(a&&n.push(String.fromCharCode.apply(String,s.slice(0,a))),n.join("")):String.fromCharCode.apply(String,s.slice(0,a))},t.write=function(e,t,r){for(var o,n,s=r,a=0;a<e.length;++a)(o=e.charCodeAt(a))<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&56320==(64512&(n=e.charCodeAt(a+1)))?(o=65536+((1023&o)<<10)+(1023&n),++a,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128);return r-s}}),eu=me((e,t)=>{t.exports=function(e,t,r){var o=r||8192,n=o>>>1,s=null,a=o;return function(r){if(r<1||r>n)return e(r);a+r>o&&(s=e(o),a=0);var i=t.call(s,a,a+=r);return 7&a&&(a=1+(7|a)),i}}}),ru=me((e,t)=>{t.exports=o;var r=Jt();function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=o.zero=new o(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var s=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return n;var t=e<0;t&&(e=-e);var r=e>>>0,s=(e-r)/4294967296>>>0;return t&&(s=~s>>>0,r=~r>>>0,++r>4294967295&&(r=0,++s>4294967295&&(s=0))),new o(r,s)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(r.isString(e)){if(!r.Long)return o.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):n},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===s?n:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}}),Jt=me(e=>{var t=e;function r(e,t,r){for(var o=Object.keys(t),n=0;n<o.length;++n)(void 0===e[o[n]]||!r)&&(e[o[n]]=t[o[n]]);return e}function o(e){function t(e,o){if(!(this instanceof t))return new t(e,o);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),o&&r(this,o)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}t.asPromise=Bs(),t.base64=Gs(),t.EventEmitter=zs(),t.float=Xs(),t.inquire=Ks(),t.utf8=Zs(),t.pool=eu(),t.LongBits=ru(),t.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),t.global=t.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var o=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(o.lo,o.hi,r):o.toNumber(!!r)},t.merge=r,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=o,t.ProtocolError=o("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}),si=me((e,t)=>{t.exports=_;var r,o=Jt(),n=o.LongBits,s=o.base64,a=o.utf8;function i(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function l(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function _(){this.len=0,this.head=new i(l,0,0),this.tail=this.head,this.states=null}var p=function(){return o.Buffer?function(){return(_.create=function(){return new r})()}:function(){return new _}};function u(e,t,r){t[r]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function f(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}_.create=p(),_.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(_.alloc=o.pool(_.alloc,o.Array.prototype.subarray)),_.prototype._push=function(e,t,r){return this.tail=this.tail.next=new i(e,t,r),this.len+=t,this},d.prototype=Object.create(i.prototype),d.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},_.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},_.prototype.int32=function(e){return e<0?this._push(h,10,n.fromNumber(e)):this.uint32(e)},_.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},_.prototype.uint64=function(e){var t=n.from(e);return this._push(h,t.length(),t)},_.prototype.int64=_.prototype.uint64,_.prototype.sint64=function(e){var t=n.from(e).zzEncode();return this._push(h,t.length(),t)},_.prototype.bool=function(e){return this._push(u,1,e?1:0)},_.prototype.fixed32=function(e){return this._push(f,4,e>>>0)},_.prototype.sfixed32=_.prototype.fixed32,_.prototype.fixed64=function(e){var t=n.from(e);return this._push(f,4,t.lo)._push(f,4,t.hi)},_.prototype.sfixed64=_.prototype.fixed64,_.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},_.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var m=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};_.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(u,1,0);if(o.isString(e)){var r=_.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},_.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(u,1,0)},_.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new i(l,0,0),this.len=0,this},_.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new i(l,0,0),this.len=0),this},_.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},_.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},_._configure=function(e){r=e,_.create=p(),r._configure()}}),cu=me((e,t)=>{t.exports=n;var r=si();(n.prototype=Object.create(r.prototype)).constructor=n;var o=Jt();function n(){r.call(this)}function s(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}n._configure=function(){n.alloc=o._Buffer_allocUnsafe,n.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},n.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(n.writeBytesBuffer,t,e),this},n.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},n._configure()}),fi=me((e,t)=>{t.exports=i;var r,o=Jt(),n=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function i(e){this.buf=e,this.pos=0,this.len=e.length}var l,c=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new i(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new i(e);throw Error("illegal buffer")},_=function(){return o.Buffer?function(e){return(i.create=function(e){return o.Buffer.isBuffer(e)?new r(e):c(e)})(e)}:c};function p(){var e=new n(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function u(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new n(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}i.create=_(),i.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,i.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),i.prototype.int32=function(){return 0|this.uint32()},i.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},i.prototype.bool=function(){return 0!==this.uint32()},i.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return u(this.buf,this.pos+=4)},i.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|u(this.buf,this.pos+=4)},i.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},i.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},i.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=o.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},i.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},i.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},i.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},i._configure=function(e){r=e,i.create=_(),r._configure();var t=o.Long?"toLong":"toNumber";o.merge(i.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return d.call(this)[t](!0)},sfixed64:function(){return d.call(this)[t](!1)}})}}),xu=me((e,t)=>{t.exports=n;var r=fi();(n.prototype=Object.create(r.prototype)).constructor=n;var o=Jt();function n(e){r.call(this,e)}n._configure=function(){o.Buffer&&(n.prototype._slice=o.Buffer.prototype.slice)},n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},n._configure()}),vu=me((e,t)=>{t.exports=o;var r=Jt();function o(e,t,o){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!o}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,o,n,s,a){if(!s)throw TypeError("request must be specified");var i=this;if(!a)return r.asPromise(e,i,t,o,n,s);if(i.rpcImpl)try{return i.rpcImpl(t,o[i.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,r){if(e)return i.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof n))try{r=n[i.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return i.emit("error",e,t),a(e)}return i.emit("data",r,t),a(null,r)}i.end(!0)})}catch(e){return i.emit("error",e,t),void setTimeout(function(){a(e)},0)}else setTimeout(function(){a(Error("already ended"))},0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Ou=me(e=>{e.Service=vu()}),Su=me((e,t)=>{t.exports={}}),Eu=me(e=>{var t=e;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=si(),t.BufferWriter=cu(),t.Reader=fi(),t.BufferReader=xu(),t.util=Jt(),t.rpc=Ou(),t.roots=Su(),t.configure=r,r()}),Lu=me((e,t)=>{t.exports=Eu()}),Cr=me((e,t)=>{var r,o,n,s=Lu(),a=s.Reader,i=s.Writer,l=s.util,c=s.roots.default||(s.roots.default={});c.onnx=((n={}).Version=(r={},(o=Object.create(r))[r[0]="_START_VERSION"]=0,o[r[1]="IR_VERSION_2017_10_10"]=1,o[r[2]="IR_VERSION_2017_10_30"]=2,o[r[3]="IR_VERSION_2017_11_3"]=3,o[r[4]="IR_VERSION_2019_1_22"]=4,o[r[5]="IR_VERSION_2019_3_18"]=5,o[r[6]="IR_VERSION_2019_9_19"]=6,o[r[7]="IR_VERSION_2020_5_8"]=7,o[r[8]="IR_VERSION_2021_7_30"]=8,o[r[9]="IR_VERSION"]=9,o),n.AttributeProto=function(){function e(e){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.refAttrName="",e.prototype.docString="",e.prototype.type=0,e.prototype.f=0,e.prototype.i=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.s=l.newBuffer([]),e.prototype.t=null,e.prototype.g=null,e.prototype.sparseTensor=null,e.prototype.tp=null,e.prototype.floats=l.emptyArray,e.prototype.ints=l.emptyArray,e.prototype.strings=l.emptyArray,e.prototype.tensors=l.emptyArray,e.prototype.graphs=l.emptyArray,e.prototype.sparseTensors=l.emptyArray,e.prototype.typeProtos=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.f&&Object.hasOwnProperty.call(e,"f")&&t.uint32(21).float(e.f),null!=e.i&&Object.hasOwnProperty.call(e,"i")&&t.uint32(24).int64(e.i),null!=e.s&&Object.hasOwnProperty.call(e,"s")&&t.uint32(34).bytes(e.s),null!=e.t&&Object.hasOwnProperty.call(e,"t")&&c.onnx.TensorProto.encode(e.t,t.uint32(42).fork()).ldelim(),null!=e.g&&Object.hasOwnProperty.call(e,"g")&&c.onnx.GraphProto.encode(e.g,t.uint32(50).fork()).ldelim(),null!=e.floats&&e.floats.length){t.uint32(58).fork();for(var r=0;r<e.floats.length;++r)t.float(e.floats[r]);t.ldelim()}if(null!=e.ints&&e.ints.length){for(t.uint32(66).fork(),r=0;r<e.ints.length;++r)t.int64(e.ints[r]);t.ldelim()}if(null!=e.strings&&e.strings.length)for(r=0;r<e.strings.length;++r)t.uint32(74).bytes(e.strings[r]);if(null!=e.tensors&&e.tensors.length)for(r=0;r<e.tensors.length;++r)c.onnx.TensorProto.encode(e.tensors[r],t.uint32(82).fork()).ldelim();if(null!=e.graphs&&e.graphs.length)for(r=0;r<e.graphs.length;++r)c.onnx.GraphProto.encode(e.graphs[r],t.uint32(90).fork()).ldelim();if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(106).string(e.docString),null!=e.tp&&Object.hasOwnProperty.call(e,"tp")&&c.onnx.TypeProto.encode(e.tp,t.uint32(114).fork()).ldelim(),null!=e.typeProtos&&e.typeProtos.length)for(r=0;r<e.typeProtos.length;++r)c.onnx.TypeProto.encode(e.typeProtos[r],t.uint32(122).fork()).ldelim();if(null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(160).int32(e.type),null!=e.refAttrName&&Object.hasOwnProperty.call(e,"refAttrName")&&t.uint32(170).string(e.refAttrName),null!=e.sparseTensor&&Object.hasOwnProperty.call(e,"sparseTensor")&&c.onnx.SparseTensorProto.encode(e.sparseTensor,t.uint32(178).fork()).ldelim(),null!=e.sparseTensors&&e.sparseTensors.length)for(r=0;r<e.sparseTensors.length;++r)c.onnx.SparseTensorProto.encode(e.sparseTensors[r],t.uint32(186).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.AttributeProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.name=e.string();break;case 21:o.refAttrName=e.string();break;case 13:o.docString=e.string();break;case 20:o.type=e.int32();break;case 2:o.f=e.float();break;case 3:o.i=e.int64();break;case 4:o.s=e.bytes();break;case 5:o.t=c.onnx.TensorProto.decode(e,e.uint32());break;case 6:o.g=c.onnx.GraphProto.decode(e,e.uint32());break;case 22:o.sparseTensor=c.onnx.SparseTensorProto.decode(e,e.uint32());break;case 14:o.tp=c.onnx.TypeProto.decode(e,e.uint32());break;case 7:if(o.floats&&o.floats.length||(o.floats=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.floats.push(e.float());else o.floats.push(e.float());break;case 8:if(o.ints&&o.ints.length||(o.ints=[]),2==(7&n))for(s=e.uint32()+e.pos;e.pos<s;)o.ints.push(e.int64());else o.ints.push(e.int64());break;case 9:o.strings&&o.strings.length||(o.strings=[]),o.strings.push(e.bytes());break;case 10:o.tensors&&o.tensors.length||(o.tensors=[]),o.tensors.push(c.onnx.TensorProto.decode(e,e.uint32()));break;case 11:o.graphs&&o.graphs.length||(o.graphs=[]),o.graphs.push(c.onnx.GraphProto.decode(e,e.uint32()));break;case 23:o.sparseTensors&&o.sparseTensors.length||(o.sparseTensors=[]),o.sparseTensors.push(c.onnx.SparseTensorProto.decode(e,e.uint32()));break;case 15:o.typeProtos&&o.typeProtos.length||(o.typeProtos=[]),o.typeProtos.push(c.onnx.TypeProto.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!l.isString(e.name))return"name: string expected";if(null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&!l.isString(e.refAttrName))return"refAttrName: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!l.isString(e.docString))return"docString: string expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(null!=e.f&&e.hasOwnProperty("f")&&"number"!=typeof e.f)return"f: number expected";if(null!=e.i&&e.hasOwnProperty("i")&&!l.isInteger(e.i)&&!(e.i&&l.isInteger(e.i.low)&&l.isInteger(e.i.high)))return"i: integer|Long expected";if(null!=e.s&&e.hasOwnProperty("s")&&!(e.s&&"number"==typeof e.s.length||l.isString(e.s)))return"s: buffer expected";if(null!=e.t&&e.hasOwnProperty("t")&&(r=c.onnx.TensorProto.verify(e.t)))return"t."+r;if(null!=e.g&&e.hasOwnProperty("g")&&(r=c.onnx.GraphProto.verify(e.g)))return"g."+r;if(null!=e.sparseTensor&&e.hasOwnProperty("sparseTensor")&&(r=c.onnx.SparseTensorProto.verify(e.sparseTensor)))return"sparseTensor."+r;if(null!=e.tp&&e.hasOwnProperty("tp")&&(r=c.onnx.TypeProto.verify(e.tp)))return"tp."+r;if(null!=e.floats&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var t=0;t<e.floats.length;++t)if("number"!=typeof e.floats[t])return"floats: number[] expected"}if(null!=e.ints&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(t=0;t<e.ints.length;++t)if(!(l.isInteger(e.ints[t])||e.ints[t]&&l.isInteger(e.ints[t].low)&&l.isInteger(e.ints[t].high)))return"ints: integer|Long[] expected"}if(null!=e.strings&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(t=0;t<e.strings.length;++t)if(!(e.strings[t]&&"number"==typeof e.strings[t].length||l.isString(e.strings[t])))return"strings: buffer[] expected"}if(null!=e.tensors&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(t=0;t<e.tensors.length;++t)if(r=c.onnx.TensorProto.verify(e.tensors[t]))return"tensors."+r}if(null!=e.graphs&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(t=0;t<e.graphs.length;++t)if(r=c.onnx.GraphProto.verify(e.graphs[t]))return"graphs."+r}if(null!=e.sparseTensors&&e.hasOwnProperty("sparseTensors")){if(!Array.isArray(e.sparseTensors))return"sparseTensors: array expected";for(t=0;t<e.sparseTensors.length;++t)if(r=c.onnx.SparseTensorProto.verify(e.sparseTensors[t]))return"sparseTensors."+r}if(null!=e.typeProtos&&e.hasOwnProperty("typeProtos")){if(!Array.isArray(e.typeProtos))return"typeProtos: array expected";for(t=0;t<e.typeProtos.length;++t){var r;if(r=c.onnx.TypeProto.verify(e.typeProtos[t]))return"typeProtos."+r}}return null},e.fromObject=function(e){if(e instanceof c.onnx.AttributeProto)return e;var t=new c.onnx.AttributeProto;switch(null!=e.name&&(t.name=String(e.name)),null!=e.refAttrName&&(t.refAttrName=String(e.refAttrName)),null!=e.docString&&(t.docString=String(e.docString)),e.type){default:if("number"==typeof e.type){t.type=e.type;break}break;case"UNDEFINED":case 0:t.type=0;break;case"FLOAT":case 1:t.type=1;break;case"INT":case 2:t.type=2;break;case"STRING":case 3:t.type=3;break;case"TENSOR":case 4:t.type=4;break;case"GRAPH":case 5:t.type=5;break;case"SPARSE_TENSOR":case 11:t.type=11;break;case"TYPE_PROTO":case 13:t.type=13;break;case"FLOATS":case 6:t.type=6;break;case"INTS":case 7:t.type=7;break;case"STRINGS":case 8:t.type=8;break;case"TENSORS":case 9:t.type=9;break;case"GRAPHS":case 10:t.type=10;break;case"SPARSE_TENSORS":case 12:t.type=12;break;case"TYPE_PROTOS":case 14:t.type=14}if(null!=e.f&&(t.f=Number(e.f)),null!=e.i&&(l.Long?(t.i=l.Long.fromValue(e.i)).unsigned=!1:"string"==typeof e.i?t.i=parseInt(e.i,10):"number"==typeof e.i?t.i=e.i:"object"==typeof e.i&&(t.i=new l.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),null!=e.s&&("string"==typeof e.s?l.base64.decode(e.s,t.s=l.newBuffer(l.base64.length(e.s)),0):e.s.length>=0&&(t.s=e.s)),null!=e.t){if("object"!=typeof e.t)throw TypeError(".onnx.AttributeProto.t: object expected");t.t=c.onnx.TensorProto.fromObject(e.t)}if(null!=e.g){if("object"!=typeof e.g)throw TypeError(".onnx.AttributeProto.g: object expected");t.g=c.onnx.GraphProto.fromObject(e.g)}if(null!=e.sparseTensor){if("object"!=typeof e.sparseTensor)throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");t.sparseTensor=c.onnx.SparseTensorProto.fromObject(e.sparseTensor)}if(null!=e.tp){if("object"!=typeof e.tp)throw TypeError(".onnx.AttributeProto.tp: object expected");t.tp=c.onnx.TypeProto.fromObject(e.tp)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");t.floats=[];for(var r=0;r<e.floats.length;++r)t.floats[r]=Number(e.floats[r])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(t.ints=[],r=0;r<e.ints.length;++r)l.Long?(t.ints[r]=l.Long.fromValue(e.ints[r])).unsigned=!1:"string"==typeof e.ints[r]?t.ints[r]=parseInt(e.ints[r],10):"number"==typeof e.ints[r]?t.ints[r]=e.ints[r]:"object"==typeof e.ints[r]&&(t.ints[r]=new l.LongBits(e.ints[r].low>>>0,e.ints[r].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(t.strings=[],r=0;r<e.strings.length;++r)"string"==typeof e.strings[r]?l.base64.decode(e.strings[r],t.strings[r]=l.newBuffer(l.base64.length(e.strings[r])),0):e.strings[r].length>=0&&(t.strings[r]=e.strings[r])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(t.tensors=[],r=0;r<e.tensors.length;++r){if("object"!=typeof e.tensors[r])throw TypeError(".onnx.AttributeProto.tensors: object expected");t.tensors[r]=c.onnx.TensorProto.fromObject(e.tensors[r])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(t.graphs=[],r=0;r<e.graphs.length;++r){if("object"!=typeof e.graphs[r])throw TypeError(".onnx.AttributeProto.graphs: object expected");t.graphs[r]=c.onnx.GraphProto.fromObject(e.graphs[r])}}if(e.sparseTensors){if(!Array.isArray(e.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");for(t.sparseTensors=[],r=0;r<e.sparseTensors.length;++r){if("object"!=typeof e.sparseTensors[r])throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");t.sparseTensors[r]=c.onnx.SparseTensorProto.fromObject(e.sparseTensors[r])}}if(e.typeProtos){if(!Array.isArray(e.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");for(t.typeProtos=[],r=0;r<e.typeProtos.length;++r){if("object"!=typeof e.typeProtos[r])throw TypeError(".onnx.AttributeProto.typeProtos: object expected");t.typeProtos[r]=c.onnx.TypeProto.fromObject(e.typeProtos[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.floats=[],r.ints=[],r.strings=[],r.tensors=[],r.graphs=[],r.typeProtos=[],r.sparseTensors=[]),t.defaults){if(r.name="",r.f=0,l.Long){var o=new l.Long(0,0,!1);r.i=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.i=t.longs===String?"0":0;t.bytes===String?r.s="":(r.s=[],t.bytes!==Array&&(r.s=l.newBuffer(r.s))),r.t=null,r.g=null,r.docString="",r.tp=null,r.type=t.enums===String?"UNDEFINED":0,r.refAttrName="",r.sparseTensor=null}if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.f&&e.hasOwnProperty("f")&&(r.f=t.json&&!isFinite(e.f)?String(e.f):e.f),null!=e.i&&e.hasOwnProperty("i")&&("number"==typeof e.i?r.i=t.longs===String?String(e.i):e.i:r.i=t.longs===String?l.Long.prototype.toString.call(e.i):t.longs===Number?new l.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),null!=e.s&&e.hasOwnProperty("s")&&(r.s=t.bytes===String?l.base64.encode(e.s,0,e.s.length):t.bytes===Array?Array.prototype.slice.call(e.s):e.s),null!=e.t&&e.hasOwnProperty("t")&&(r.t=c.onnx.TensorProto.toObject(e.t,t)),null!=e.g&&e.hasOwnProperty("g")&&(r.g=c.onnx.GraphProto.toObject(e.g,t)),e.floats&&e.floats.length){r.floats=[];for(var n=0;n<e.floats.length;++n)r.floats[n]=t.json&&!isFinite(e.floats[n])?String(e.floats[n]):e.floats[n]}if(e.ints&&e.ints.length)for(r.ints=[],n=0;n<e.ints.length;++n)"number"==typeof e.ints[n]?r.ints[n]=t.longs===String?String(e.ints[n]):e.ints[n]:r.ints[n]=t.longs===String?l.Long.prototype.toString.call(e.ints[n]):t.longs===Number?new l.LongBits(e.ints[n].low>>>0,e.ints[n].high>>>0).toNumber():e.ints[n];if(e.strings&&e.strings.length)for(r.strings=[],n=0;n<e.strings.length;++n)r.strings[n]=t.bytes===String?l.base64.encode(e.strings[n],0,e.strings[n].length):t.bytes===Array?Array.prototype.slice.call(e.strings[n]):e.strings[n];if(e.tensors&&e.tensors.length)for(r.tensors=[],n=0;n<e.tensors.length;++n)r.tensors[n]=c.onnx.TensorProto.toObject(e.tensors[n],t);if(e.graphs&&e.graphs.length)for(r.graphs=[],n=0;n<e.graphs.length;++n)r.graphs[n]=c.onnx.GraphProto.toObject(e.graphs[n],t);if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),null!=e.tp&&e.hasOwnProperty("tp")&&(r.tp=c.onnx.TypeProto.toObject(e.tp,t)),e.typeProtos&&e.typeProtos.length)for(r.typeProtos=[],n=0;n<e.typeProtos.length;++n)r.typeProtos[n]=c.onnx.TypeProto.toObject(e.typeProtos[n],t);if(null!=e.type&&e.hasOwnProperty("type")&&(r.type=t.enums===String?void 0===c.onnx.AttributeProto.AttributeType[e.type]?e.type:c.onnx.AttributeProto.AttributeType[e.type]:e.type),null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&(r.refAttrName=e.refAttrName),null!=e.sparseTensor&&e.hasOwnProperty("sparseTensor")&&(r.sparseTensor=c.onnx.SparseTensorProto.toObject(e.sparseTensor,t)),e.sparseTensors&&e.sparseTensors.length)for(r.sparseTensors=[],n=0;n<e.sparseTensors.length;++n)r.sparseTensors[n]=c.onnx.SparseTensorProto.toObject(e.sparseTensors[n],t);return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.AttributeProto"},e.AttributeType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="INT"]=2,t[e[3]="STRING"]=3,t[e[4]="TENSOR"]=4,t[e[5]="GRAPH"]=5,t[e[11]="SPARSE_TENSOR"]=11,t[e[13]="TYPE_PROTO"]=13,t[e[6]="FLOATS"]=6,t[e[7]="INTS"]=7,t[e[8]="STRINGS"]=8,t[e[9]="TENSORS"]=9,t[e[10]="GRAPHS"]=10,t[e[12]="SPARSE_TENSORS"]=12,t[e[14]="TYPE_PROTOS"]=14,t}(),e}(),n.ValueInfoProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.type=null,e.prototype.docString="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&c.onnx.TypeProto.encode(e.type,t.uint32(18).fork()).ldelim(),null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(26).string(e.docString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.ValueInfoProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.name=e.string();break;case 2:o.type=c.onnx.TypeProto.decode(e,e.uint32());break;case 3:o.docString=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!l.isString(e.name))return"name: string expected";if(null!=e.type&&e.hasOwnProperty("type")){var t=c.onnx.TypeProto.verify(e.type);if(t)return"type."+t}return null!=e.docString&&e.hasOwnProperty("docString")&&!l.isString(e.docString)?"docString: string expected":null},e.fromObject=function(e){if(e instanceof c.onnx.ValueInfoProto)return e;var t=new c.onnx.ValueInfoProto;if(null!=e.name&&(t.name=String(e.name)),null!=e.type){if("object"!=typeof e.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");t.type=c.onnx.TypeProto.fromObject(e.type)}return null!=e.docString&&(t.docString=String(e.docString)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.name="",r.type=null,r.docString=""),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.type&&e.hasOwnProperty("type")&&(r.type=c.onnx.TypeProto.toObject(e.type,t)),null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.ValueInfoProto"},e}(),n.NodeProto=function(){function e(e){if(this.input=[],this.output=[],this.attribute=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.input=l.emptyArray,e.prototype.output=l.emptyArray,e.prototype.name="",e.prototype.opType="",e.prototype.domain="",e.prototype.attribute=l.emptyArray,e.prototype.docString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.input&&e.input.length)for(var r=0;r<e.input.length;++r)t.uint32(10).string(e.input[r]);if(null!=e.output&&e.output.length)for(r=0;r<e.output.length;++r)t.uint32(18).string(e.output[r]);if(null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(26).string(e.name),null!=e.opType&&Object.hasOwnProperty.call(e,"opType")&&t.uint32(34).string(e.opType),null!=e.attribute&&e.attribute.length)for(r=0;r<e.attribute.length;++r)c.onnx.AttributeProto.encode(e.attribute[r],t.uint32(42).fork()).ldelim();return null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(50).string(e.docString),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(58).string(e.domain),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.NodeProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.input&&o.input.length||(o.input=[]),o.input.push(e.string());break;case 2:o.output&&o.output.length||(o.output=[]),o.output.push(e.string());break;case 3:o.name=e.string();break;case 4:o.opType=e.string();break;case 7:o.domain=e.string();break;case 5:o.attribute&&o.attribute.length||(o.attribute=[]),o.attribute.push(c.onnx.AttributeProto.decode(e,e.uint32()));break;case 6:o.docString=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!l.isString(e.input[t]))return"input: string[] expected"}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!l.isString(e.output[t]))return"output: string[] expected"}if(null!=e.name&&e.hasOwnProperty("name")&&!l.isString(e.name))return"name: string expected";if(null!=e.opType&&e.hasOwnProperty("opType")&&!l.isString(e.opType))return"opType: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!l.isString(e.domain))return"domain: string expected";if(null!=e.attribute&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t){var r=c.onnx.AttributeProto.verify(e.attribute[t]);if(r)return"attribute."+r}}return null!=e.docString&&e.hasOwnProperty("docString")&&!l.isString(e.docString)?"docString: string expected":null},e.fromObject=function(e){if(e instanceof c.onnx.NodeProto)return e;var t=new c.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");t.input=[];for(var r=0;r<e.input.length;++r)t.input[r]=String(e.input[r])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");for(t.output=[],r=0;r<e.output.length;++r)t.output[r]=String(e.output[r])}if(null!=e.name&&(t.name=String(e.name)),null!=e.opType&&(t.opType=String(e.opType)),null!=e.domain&&(t.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(t.attribute=[],r=0;r<e.attribute.length;++r){if("object"!=typeof e.attribute[r])throw TypeError(".onnx.NodeProto.attribute: object expected");t.attribute[r]=c.onnx.AttributeProto.fromObject(e.attribute[r])}}return null!=e.docString&&(t.docString=String(e.docString)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.input=[],r.output=[],r.attribute=[]),t.defaults&&(r.name="",r.opType="",r.docString="",r.domain=""),e.input&&e.input.length){r.input=[];for(var o=0;o<e.input.length;++o)r.input[o]=e.input[o]}if(e.output&&e.output.length)for(r.output=[],o=0;o<e.output.length;++o)r.output[o]=e.output[o];if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.opType&&e.hasOwnProperty("opType")&&(r.opType=e.opType),e.attribute&&e.attribute.length)for(r.attribute=[],o=0;o<e.attribute.length;++o)r.attribute[o]=c.onnx.AttributeProto.toObject(e.attribute[o],t);return null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.NodeProto"},e}(),n.TrainingInfoProto=function(){function e(e){if(this.initializationBinding=[],this.updateBinding=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.initialization=null,e.prototype.algorithm=null,e.prototype.initializationBinding=l.emptyArray,e.prototype.updateBinding=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.initialization&&Object.hasOwnProperty.call(e,"initialization")&&c.onnx.GraphProto.encode(e.initialization,t.uint32(10).fork()).ldelim(),null!=e.algorithm&&Object.hasOwnProperty.call(e,"algorithm")&&c.onnx.GraphProto.encode(e.algorithm,t.uint32(18).fork()).ldelim(),null!=e.initializationBinding&&e.initializationBinding.length)for(var r=0;r<e.initializationBinding.length;++r)c.onnx.StringStringEntryProto.encode(e.initializationBinding[r],t.uint32(26).fork()).ldelim();if(null!=e.updateBinding&&e.updateBinding.length)for(r=0;r<e.updateBinding.length;++r)c.onnx.StringStringEntryProto.encode(e.updateBinding[r],t.uint32(34).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TrainingInfoProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.initialization=c.onnx.GraphProto.decode(e,e.uint32());break;case 2:o.algorithm=c.onnx.GraphProto.decode(e,e.uint32());break;case 3:o.initializationBinding&&o.initializationBinding.length||(o.initializationBinding=[]),o.initializationBinding.push(c.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 4:o.updateBinding&&o.updateBinding.length||(o.updateBinding=[]),o.updateBinding.push(c.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.initialization&&e.hasOwnProperty("initialization")&&(r=c.onnx.GraphProto.verify(e.initialization)))return"initialization."+r;if(null!=e.algorithm&&e.hasOwnProperty("algorithm")&&(r=c.onnx.GraphProto.verify(e.algorithm)))return"algorithm."+r;if(null!=e.initializationBinding&&e.hasOwnProperty("initializationBinding")){if(!Array.isArray(e.initializationBinding))return"initializationBinding: array expected";for(var t=0;t<e.initializationBinding.length;++t)if(r=c.onnx.StringStringEntryProto.verify(e.initializationBinding[t]))return"initializationBinding."+r}if(null!=e.updateBinding&&e.hasOwnProperty("updateBinding")){if(!Array.isArray(e.updateBinding))return"updateBinding: array expected";for(t=0;t<e.updateBinding.length;++t){var r;if(r=c.onnx.StringStringEntryProto.verify(e.updateBinding[t]))return"updateBinding."+r}}return null},e.fromObject=function(e){if(e instanceof c.onnx.TrainingInfoProto)return e;var t=new c.onnx.TrainingInfoProto;if(null!=e.initialization){if("object"!=typeof e.initialization)throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");t.initialization=c.onnx.GraphProto.fromObject(e.initialization)}if(null!=e.algorithm){if("object"!=typeof e.algorithm)throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");t.algorithm=c.onnx.GraphProto.fromObject(e.algorithm)}if(e.initializationBinding){if(!Array.isArray(e.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");t.initializationBinding=[];for(var r=0;r<e.initializationBinding.length;++r){if("object"!=typeof e.initializationBinding[r])throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");t.initializationBinding[r]=c.onnx.StringStringEntryProto.fromObject(e.initializationBinding[r])}}if(e.updateBinding){if(!Array.isArray(e.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");for(t.updateBinding=[],r=0;r<e.updateBinding.length;++r){if("object"!=typeof e.updateBinding[r])throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");t.updateBinding[r]=c.onnx.StringStringEntryProto.fromObject(e.updateBinding[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.initializationBinding=[],r.updateBinding=[]),t.defaults&&(r.initialization=null,r.algorithm=null),null!=e.initialization&&e.hasOwnProperty("initialization")&&(r.initialization=c.onnx.GraphProto.toObject(e.initialization,t)),null!=e.algorithm&&e.hasOwnProperty("algorithm")&&(r.algorithm=c.onnx.GraphProto.toObject(e.algorithm,t)),e.initializationBinding&&e.initializationBinding.length){r.initializationBinding=[];for(var o=0;o<e.initializationBinding.length;++o)r.initializationBinding[o]=c.onnx.StringStringEntryProto.toObject(e.initializationBinding[o],t)}if(e.updateBinding&&e.updateBinding.length)for(r.updateBinding=[],o=0;o<e.updateBinding.length;++o)r.updateBinding[o]=c.onnx.StringStringEntryProto.toObject(e.updateBinding[o],t);return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TrainingInfoProto"},e}(),n.ModelProto=function(){function e(e){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.irVersion=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.opsetImport=l.emptyArray,e.prototype.producerName="",e.prototype.producerVersion="",e.prototype.domain="",e.prototype.modelVersion=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.docString="",e.prototype.graph=null,e.prototype.metadataProps=l.emptyArray,e.prototype.trainingInfo=l.emptyArray,e.prototype.functions=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.irVersion&&Object.hasOwnProperty.call(e,"irVersion")&&t.uint32(8).int64(e.irVersion),null!=e.producerName&&Object.hasOwnProperty.call(e,"producerName")&&t.uint32(18).string(e.producerName),null!=e.producerVersion&&Object.hasOwnProperty.call(e,"producerVersion")&&t.uint32(26).string(e.producerVersion),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(34).string(e.domain),null!=e.modelVersion&&Object.hasOwnProperty.call(e,"modelVersion")&&t.uint32(40).int64(e.modelVersion),null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(50).string(e.docString),null!=e.graph&&Object.hasOwnProperty.call(e,"graph")&&c.onnx.GraphProto.encode(e.graph,t.uint32(58).fork()).ldelim(),null!=e.opsetImport&&e.opsetImport.length)for(var r=0;r<e.opsetImport.length;++r)c.onnx.OperatorSetIdProto.encode(e.opsetImport[r],t.uint32(66).fork()).ldelim();if(null!=e.metadataProps&&e.metadataProps.length)for(r=0;r<e.metadataProps.length;++r)c.onnx.StringStringEntryProto.encode(e.metadataProps[r],t.uint32(114).fork()).ldelim();if(null!=e.trainingInfo&&e.trainingInfo.length)for(r=0;r<e.trainingInfo.length;++r)c.onnx.TrainingInfoProto.encode(e.trainingInfo[r],t.uint32(162).fork()).ldelim();if(null!=e.functions&&e.functions.length)for(r=0;r<e.functions.length;++r)c.onnx.FunctionProto.encode(e.functions[r],t.uint32(202).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.ModelProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.irVersion=e.int64();break;case 8:o.opsetImport&&o.opsetImport.length||(o.opsetImport=[]),o.opsetImport.push(c.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 2:o.producerName=e.string();break;case 3:o.producerVersion=e.string();break;case 4:o.domain=e.string();break;case 5:o.modelVersion=e.int64();break;case 6:o.docString=e.string();break;case 7:o.graph=c.onnx.GraphProto.decode(e,e.uint32());break;case 14:o.metadataProps&&o.metadataProps.length||(o.metadataProps=[]),o.metadataProps.push(c.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 20:o.trainingInfo&&o.trainingInfo.length||(o.trainingInfo=[]),o.trainingInfo.push(c.onnx.TrainingInfoProto.decode(e,e.uint32()));break;case 25:o.functions&&o.functions.length||(o.functions=[]),o.functions.push(c.onnx.FunctionProto.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&!l.isInteger(e.irVersion)&&!(e.irVersion&&l.isInteger(e.irVersion.low)&&l.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(null!=e.opsetImport&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var t=0;t<e.opsetImport.length;++t)if(r=c.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+r}if(null!=e.producerName&&e.hasOwnProperty("producerName")&&!l.isString(e.producerName))return"producerName: string expected";if(null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&!l.isString(e.producerVersion))return"producerVersion: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!l.isString(e.domain))return"domain: string expected";if(null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&!l.isInteger(e.modelVersion)&&!(e.modelVersion&&l.isInteger(e.modelVersion.low)&&l.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!l.isString(e.docString))return"docString: string expected";if(null!=e.graph&&e.hasOwnProperty("graph")&&(r=c.onnx.GraphProto.verify(e.graph)))return"graph."+r;if(null!=e.metadataProps&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(t=0;t<e.metadataProps.length;++t)if(r=c.onnx.StringStringEntryProto.verify(e.metadataProps[t]))return"metadataProps."+r}if(null!=e.trainingInfo&&e.hasOwnProperty("trainingInfo")){if(!Array.isArray(e.trainingInfo))return"trainingInfo: array expected";for(t=0;t<e.trainingInfo.length;++t)if(r=c.onnx.TrainingInfoProto.verify(e.trainingInfo[t]))return"trainingInfo."+r}if(null!=e.functions&&e.hasOwnProperty("functions")){if(!Array.isArray(e.functions))return"functions: array expected";for(t=0;t<e.functions.length;++t){var r;if(r=c.onnx.FunctionProto.verify(e.functions[t]))return"functions."+r}}return null},e.fromObject=function(e){if(e instanceof c.onnx.ModelProto)return e;var t=new c.onnx.ModelProto;if(null!=e.irVersion&&(l.Long?(t.irVersion=l.Long.fromValue(e.irVersion)).unsigned=!1:"string"==typeof e.irVersion?t.irVersion=parseInt(e.irVersion,10):"number"==typeof e.irVersion?t.irVersion=e.irVersion:"object"==typeof e.irVersion&&(t.irVersion=new l.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");t.opsetImport=[];for(var r=0;r<e.opsetImport.length;++r){if("object"!=typeof e.opsetImport[r])throw TypeError(".onnx.ModelProto.opsetImport: object expected");t.opsetImport[r]=c.onnx.OperatorSetIdProto.fromObject(e.opsetImport[r])}}if(null!=e.producerName&&(t.producerName=String(e.producerName)),null!=e.producerVersion&&(t.producerVersion=String(e.producerVersion)),null!=e.domain&&(t.domain=String(e.domain)),null!=e.modelVersion&&(l.Long?(t.modelVersion=l.Long.fromValue(e.modelVersion)).unsigned=!1:"string"==typeof e.modelVersion?t.modelVersion=parseInt(e.modelVersion,10):"number"==typeof e.modelVersion?t.modelVersion=e.modelVersion:"object"==typeof e.modelVersion&&(t.modelVersion=new l.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),null!=e.docString&&(t.docString=String(e.docString)),null!=e.graph){if("object"!=typeof e.graph)throw TypeError(".onnx.ModelProto.graph: object expected");t.graph=c.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(t.metadataProps=[],r=0;r<e.metadataProps.length;++r){if("object"!=typeof e.metadataProps[r])throw TypeError(".onnx.ModelProto.metadataProps: object expected");t.metadataProps[r]=c.onnx.StringStringEntryProto.fromObject(e.metadataProps[r])}}if(e.trainingInfo){if(!Array.isArray(e.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");for(t.trainingInfo=[],r=0;r<e.trainingInfo.length;++r){if("object"!=typeof e.trainingInfo[r])throw TypeError(".onnx.ModelProto.trainingInfo: object expected");t.trainingInfo[r]=c.onnx.TrainingInfoProto.fromObject(e.trainingInfo[r])}}if(e.functions){if(!Array.isArray(e.functions))throw TypeError(".onnx.ModelProto.functions: array expected");for(t.functions=[],r=0;r<e.functions.length;++r){if("object"!=typeof e.functions[r])throw TypeError(".onnx.ModelProto.functions: object expected");t.functions[r]=c.onnx.FunctionProto.fromObject(e.functions[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.opsetImport=[],r.metadataProps=[],r.trainingInfo=[],r.functions=[]),t.defaults){if(l.Long){var o=new l.Long(0,0,!1);r.irVersion=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.irVersion=t.longs===String?"0":0;r.producerName="",r.producerVersion="",r.domain="",l.Long?(o=new l.Long(0,0,!1),r.modelVersion=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.modelVersion=t.longs===String?"0":0,r.docString="",r.graph=null}if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&("number"==typeof e.irVersion?r.irVersion=t.longs===String?String(e.irVersion):e.irVersion:r.irVersion=t.longs===String?l.Long.prototype.toString.call(e.irVersion):t.longs===Number?new l.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),null!=e.producerName&&e.hasOwnProperty("producerName")&&(r.producerName=e.producerName),null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&(r.producerVersion=e.producerVersion),null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&("number"==typeof e.modelVersion?r.modelVersion=t.longs===String?String(e.modelVersion):e.modelVersion:r.modelVersion=t.longs===String?l.Long.prototype.toString.call(e.modelVersion):t.longs===Number?new l.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),null!=e.graph&&e.hasOwnProperty("graph")&&(r.graph=c.onnx.GraphProto.toObject(e.graph,t)),e.opsetImport&&e.opsetImport.length){r.opsetImport=[];for(var n=0;n<e.opsetImport.length;++n)r.opsetImport[n]=c.onnx.OperatorSetIdProto.toObject(e.opsetImport[n],t)}if(e.metadataProps&&e.metadataProps.length)for(r.metadataProps=[],n=0;n<e.metadataProps.length;++n)r.metadataProps[n]=c.onnx.StringStringEntryProto.toObject(e.metadataProps[n],t);if(e.trainingInfo&&e.trainingInfo.length)for(r.trainingInfo=[],n=0;n<e.trainingInfo.length;++n)r.trainingInfo[n]=c.onnx.TrainingInfoProto.toObject(e.trainingInfo[n],t);if(e.functions&&e.functions.length)for(r.functions=[],n=0;n<e.functions.length;++n)r.functions[n]=c.onnx.FunctionProto.toObject(e.functions[n],t);return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.ModelProto"},e}(),n.StringStringEntryProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.StringStringEntryProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.key=e.string();break;case 2:o.value=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!l.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!l.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof c.onnx.StringStringEntryProto)return e;var t=new c.onnx.StringStringEntryProto;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",r.value=""),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.StringStringEntryProto"},e}(),n.TensorAnnotation=function(){function e(e){if(this.quantParameterTensorNames=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tensorName="",e.prototype.quantParameterTensorNames=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.tensorName&&Object.hasOwnProperty.call(e,"tensorName")&&t.uint32(10).string(e.tensorName),null!=e.quantParameterTensorNames&&e.quantParameterTensorNames.length)for(var r=0;r<e.quantParameterTensorNames.length;++r)c.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[r],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TensorAnnotation;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.tensorName=e.string();break;case 2:o.quantParameterTensorNames&&o.quantParameterTensorNames.length||(o.quantParameterTensorNames=[]),o.quantParameterTensorNames.push(c.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.tensorName&&e.hasOwnProperty("tensorName")&&!l.isString(e.tensorName))return"tensorName: string expected";if(null!=e.quantParameterTensorNames&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var t=0;t<e.quantParameterTensorNames.length;++t){var r=c.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[t]);if(r)return"quantParameterTensorNames."+r}}return null},e.fromObject=function(e){if(e instanceof c.onnx.TensorAnnotation)return e;var t=new c.onnx.TensorAnnotation;if(null!=e.tensorName&&(t.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");t.quantParameterTensorNames=[];for(var r=0;r<e.quantParameterTensorNames.length;++r){if("object"!=typeof e.quantParameterTensorNames[r])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");t.quantParameterTensorNames[r]=c.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.quantParameterTensorNames=[]),t.defaults&&(r.tensorName=""),null!=e.tensorName&&e.hasOwnProperty("tensorName")&&(r.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){r.quantParameterTensorNames=[];for(var o=0;o<e.quantParameterTensorNames.length;++o)r.quantParameterTensorNames[o]=c.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorAnnotation"},e}(),n.GraphProto=function(){function e(e){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.node=l.emptyArray,e.prototype.name="",e.prototype.initializer=l.emptyArray,e.prototype.sparseInitializer=l.emptyArray,e.prototype.docString="",e.prototype.input=l.emptyArray,e.prototype.output=l.emptyArray,e.prototype.valueInfo=l.emptyArray,e.prototype.quantizationAnnotation=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.node&&e.node.length)for(var r=0;r<e.node.length;++r)c.onnx.NodeProto.encode(e.node[r],t.uint32(10).fork()).ldelim();if(null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.initializer&&e.initializer.length)for(r=0;r<e.initializer.length;++r)c.onnx.TensorProto.encode(e.initializer[r],t.uint32(42).fork()).ldelim();if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(82).string(e.docString),null!=e.input&&e.input.length)for(r=0;r<e.input.length;++r)c.onnx.ValueInfoProto.encode(e.input[r],t.uint32(90).fork()).ldelim();if(null!=e.output&&e.output.length)for(r=0;r<e.output.length;++r)c.onnx.ValueInfoProto.encode(e.output[r],t.uint32(98).fork()).ldelim();if(null!=e.valueInfo&&e.valueInfo.length)for(r=0;r<e.valueInfo.length;++r)c.onnx.ValueInfoProto.encode(e.valueInfo[r],t.uint32(106).fork()).ldelim();if(null!=e.quantizationAnnotation&&e.quantizationAnnotation.length)for(r=0;r<e.quantizationAnnotation.length;++r)c.onnx.TensorAnnotation.encode(e.quantizationAnnotation[r],t.uint32(114).fork()).ldelim();if(null!=e.sparseInitializer&&e.sparseInitializer.length)for(r=0;r<e.sparseInitializer.length;++r)c.onnx.SparseTensorProto.encode(e.sparseInitializer[r],t.uint32(122).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.GraphProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.node&&o.node.length||(o.node=[]),o.node.push(c.onnx.NodeProto.decode(e,e.uint32()));break;case 2:o.name=e.string();break;case 5:o.initializer&&o.initializer.length||(o.initializer=[]),o.initializer.push(c.onnx.TensorProto.decode(e,e.uint32()));break;case 15:o.sparseInitializer&&o.sparseInitializer.length||(o.sparseInitializer=[]),o.sparseInitializer.push(c.onnx.SparseTensorProto.decode(e,e.uint32()));break;case 10:o.docString=e.string();break;case 11:o.input&&o.input.length||(o.input=[]),o.input.push(c.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 12:o.output&&o.output.length||(o.output=[]),o.output.push(c.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 13:o.valueInfo&&o.valueInfo.length||(o.valueInfo=[]),o.valueInfo.push(c.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 14:o.quantizationAnnotation&&o.quantizationAnnotation.length||(o.quantizationAnnotation=[]),o.quantizationAnnotation.push(c.onnx.TensorAnnotation.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.node&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var t=0;t<e.node.length;++t)if(r=c.onnx.NodeProto.verify(e.node[t]))return"node."+r}if(null!=e.name&&e.hasOwnProperty("name")&&!l.isString(e.name))return"name: string expected";if(null!=e.initializer&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(t=0;t<e.initializer.length;++t)if(r=c.onnx.TensorProto.verify(e.initializer[t]))return"initializer."+r}if(null!=e.sparseInitializer&&e.hasOwnProperty("sparseInitializer")){if(!Array.isArray(e.sparseInitializer))return"sparseInitializer: array expected";for(t=0;t<e.sparseInitializer.length;++t)if(r=c.onnx.SparseTensorProto.verify(e.sparseInitializer[t]))return"sparseInitializer."+r}if(null!=e.docString&&e.hasOwnProperty("docString")&&!l.isString(e.docString))return"docString: string expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(t=0;t<e.input.length;++t)if(r=c.onnx.ValueInfoProto.verify(e.input[t]))return"input."+r}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(r=c.onnx.ValueInfoProto.verify(e.output[t]))return"output."+r}if(null!=e.valueInfo&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(t=0;t<e.valueInfo.length;++t)if(r=c.onnx.ValueInfoProto.verify(e.valueInfo[t]))return"valueInfo."+r}if(null!=e.quantizationAnnotation&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(t=0;t<e.quantizationAnnotation.length;++t){var r;if(r=c.onnx.TensorAnnotation.verify(e.quantizationAnnotation[t]))return"quantizationAnnotation."+r}}return null},e.fromObject=function(e){if(e instanceof c.onnx.GraphProto)return e;var t=new c.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");t.node=[];for(var r=0;r<e.node.length;++r){if("object"!=typeof e.node[r])throw TypeError(".onnx.GraphProto.node: object expected");t.node[r]=c.onnx.NodeProto.fromObject(e.node[r])}}if(null!=e.name&&(t.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(t.initializer=[],r=0;r<e.initializer.length;++r){if("object"!=typeof e.initializer[r])throw TypeError(".onnx.GraphProto.initializer: object expected");t.initializer[r]=c.onnx.TensorProto.fromObject(e.initializer[r])}}if(e.sparseInitializer){if(!Array.isArray(e.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");for(t.sparseInitializer=[],r=0;r<e.sparseInitializer.length;++r){if("object"!=typeof e.sparseInitializer[r])throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");t.sparseInitializer[r]=c.onnx.SparseTensorProto.fromObject(e.sparseInitializer[r])}}if(null!=e.docString&&(t.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");for(t.input=[],r=0;r<e.input.length;++r){if("object"!=typeof e.input[r])throw TypeError(".onnx.GraphProto.input: object expected");t.input[r]=c.onnx.ValueInfoProto.fromObject(e.input[r])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");for(t.output=[],r=0;r<e.output.length;++r){if("object"!=typeof e.output[r])throw TypeError(".onnx.GraphProto.output: object expected");t.output[r]=c.onnx.ValueInfoProto.fromObject(e.output[r])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(t.valueInfo=[],r=0;r<e.valueInfo.length;++r){if("object"!=typeof e.valueInfo[r])throw TypeError(".onnx.GraphProto.valueInfo: object expected");t.valueInfo[r]=c.onnx.ValueInfoProto.fromObject(e.valueInfo[r])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(t.quantizationAnnotation=[],r=0;r<e.quantizationAnnotation.length;++r){if("object"!=typeof e.quantizationAnnotation[r])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");t.quantizationAnnotation[r]=c.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.node=[],r.initializer=[],r.input=[],r.output=[],r.valueInfo=[],r.quantizationAnnotation=[],r.sparseInitializer=[]),t.defaults&&(r.name="",r.docString=""),e.node&&e.node.length){r.node=[];for(var o=0;o<e.node.length;++o)r.node[o]=c.onnx.NodeProto.toObject(e.node[o],t)}if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),e.initializer&&e.initializer.length)for(r.initializer=[],o=0;o<e.initializer.length;++o)r.initializer[o]=c.onnx.TensorProto.toObject(e.initializer[o],t);if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.input&&e.input.length)for(r.input=[],o=0;o<e.input.length;++o)r.input[o]=c.onnx.ValueInfoProto.toObject(e.input[o],t);if(e.output&&e.output.length)for(r.output=[],o=0;o<e.output.length;++o)r.output[o]=c.onnx.ValueInfoProto.toObject(e.output[o],t);if(e.valueInfo&&e.valueInfo.length)for(r.valueInfo=[],o=0;o<e.valueInfo.length;++o)r.valueInfo[o]=c.onnx.ValueInfoProto.toObject(e.valueInfo[o],t);if(e.quantizationAnnotation&&e.quantizationAnnotation.length)for(r.quantizationAnnotation=[],o=0;o<e.quantizationAnnotation.length;++o)r.quantizationAnnotation[o]=c.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[o],t);if(e.sparseInitializer&&e.sparseInitializer.length)for(r.sparseInitializer=[],o=0;o<e.sparseInitializer.length;++o)r.sparseInitializer[o]=c.onnx.SparseTensorProto.toObject(e.sparseInitializer[o],t);return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.GraphProto"},e}(),n.TensorProto=function(){function e(e){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dims=l.emptyArray,e.prototype.dataType=0,e.prototype.segment=null,e.prototype.floatData=l.emptyArray,e.prototype.int32Data=l.emptyArray,e.prototype.stringData=l.emptyArray,e.prototype.int64Data=l.emptyArray,e.prototype.name="",e.prototype.docString="",e.prototype.rawData=l.newBuffer([]),e.prototype.externalData=l.emptyArray,e.prototype.dataLocation=0,e.prototype.doubleData=l.emptyArray,e.prototype.uint64Data=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.dims&&e.dims.length){t.uint32(10).fork();for(var r=0;r<e.dims.length;++r)t.int64(e.dims[r]);t.ldelim()}if(null!=e.dataType&&Object.hasOwnProperty.call(e,"dataType")&&t.uint32(16).int32(e.dataType),null!=e.segment&&Object.hasOwnProperty.call(e,"segment")&&c.onnx.TensorProto.Segment.encode(e.segment,t.uint32(26).fork()).ldelim(),null!=e.floatData&&e.floatData.length){for(t.uint32(34).fork(),r=0;r<e.floatData.length;++r)t.float(e.floatData[r]);t.ldelim()}if(null!=e.int32Data&&e.int32Data.length){for(t.uint32(42).fork(),r=0;r<e.int32Data.length;++r)t.int32(e.int32Data[r]);t.ldelim()}if(null!=e.stringData&&e.stringData.length)for(r=0;r<e.stringData.length;++r)t.uint32(50).bytes(e.stringData[r]);if(null!=e.int64Data&&e.int64Data.length){for(t.uint32(58).fork(),r=0;r<e.int64Data.length;++r)t.int64(e.int64Data[r]);t.ldelim()}if(null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(66).string(e.name),null!=e.rawData&&Object.hasOwnProperty.call(e,"rawData")&&t.uint32(74).bytes(e.rawData),null!=e.doubleData&&e.doubleData.length){for(t.uint32(82).fork(),r=0;r<e.doubleData.length;++r)t.double(e.doubleData[r]);t.ldelim()}if(null!=e.uint64Data&&e.uint64Data.length){for(t.uint32(90).fork(),r=0;r<e.uint64Data.length;++r)t.uint64(e.uint64Data[r]);t.ldelim()}if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(98).string(e.docString),null!=e.externalData&&e.externalData.length)for(r=0;r<e.externalData.length;++r)c.onnx.StringStringEntryProto.encode(e.externalData[r],t.uint32(106).fork()).ldelim();return null!=e.dataLocation&&Object.hasOwnProperty.call(e,"dataLocation")&&t.uint32(112).int32(e.dataLocation),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TensorProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:if(o.dims&&o.dims.length||(o.dims=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.dims.push(e.int64());else o.dims.push(e.int64());break;case 2:o.dataType=e.int32();break;case 3:o.segment=c.onnx.TensorProto.Segment.decode(e,e.uint32());break;case 4:if(o.floatData&&o.floatData.length||(o.floatData=[]),2==(7&n))for(s=e.uint32()+e.pos;e.pos<s;)o.floatData.push(e.float());else o.floatData.push(e.float());break;case 5:if(o.int32Data&&o.int32Data.length||(o.int32Data=[]),2==(7&n))for(s=e.uint32()+e.pos;e.pos<s;)o.int32Data.push(e.int32());else o.int32Data.push(e.int32());break;case 6:o.stringData&&o.stringData.length||(o.stringData=[]),o.stringData.push(e.bytes());break;case 7:if(o.int64Data&&o.int64Data.length||(o.int64Data=[]),2==(7&n))for(s=e.uint32()+e.pos;e.pos<s;)o.int64Data.push(e.int64());else o.int64Data.push(e.int64());break;case 8:o.name=e.string();break;case 12:o.docString=e.string();break;case 9:o.rawData=e.bytes();break;case 13:o.externalData&&o.externalData.length||(o.externalData=[]),o.externalData.push(c.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 14:o.dataLocation=e.int32();break;case 10:if(o.doubleData&&o.doubleData.length||(o.doubleData=[]),2==(7&n))for(s=e.uint32()+e.pos;e.pos<s;)o.doubleData.push(e.double());else o.doubleData.push(e.double());break;case 11:if(o.uint64Data&&o.uint64Data.length||(o.uint64Data=[]),2==(7&n))for(s=e.uint32()+e.pos;e.pos<s;)o.uint64Data.push(e.uint64());else o.uint64Data.push(e.uint64());break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dims&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var t=0;t<e.dims.length;++t)if(!(l.isInteger(e.dims[t])||e.dims[t]&&l.isInteger(e.dims[t].low)&&l.isInteger(e.dims[t].high)))return"dims: integer|Long[] expected"}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&!l.isInteger(e.dataType))return"dataType: integer expected";if(null!=e.segment&&e.hasOwnProperty("segment")&&(r=c.onnx.TensorProto.Segment.verify(e.segment)))return"segment."+r;if(null!=e.floatData&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(t=0;t<e.floatData.length;++t)if("number"!=typeof e.floatData[t])return"floatData: number[] expected"}if(null!=e.int32Data&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(t=0;t<e.int32Data.length;++t)if(!l.isInteger(e.int32Data[t]))return"int32Data: integer[] expected"}if(null!=e.stringData&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(t=0;t<e.stringData.length;++t)if(!(e.stringData[t]&&"number"==typeof e.stringData[t].length||l.isString(e.stringData[t])))return"stringData: buffer[] expected"}if(null!=e.int64Data&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(t=0;t<e.int64Data.length;++t)if(!(l.isInteger(e.int64Data[t])||e.int64Data[t]&&l.isInteger(e.int64Data[t].low)&&l.isInteger(e.int64Data[t].high)))return"int64Data: integer|Long[] expected"}if(null!=e.name&&e.hasOwnProperty("name")&&!l.isString(e.name))return"name: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!l.isString(e.docString))return"docString: string expected";if(null!=e.rawData&&e.hasOwnProperty("rawData")&&!(e.rawData&&"number"==typeof e.rawData.length||l.isString(e.rawData)))return"rawData: buffer expected";if(null!=e.externalData&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(t=0;t<e.externalData.length;++t){var r;if(r=c.onnx.StringStringEntryProto.verify(e.externalData[t]))return"externalData."+r}}if(null!=e.dataLocation&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=e.doubleData&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(t=0;t<e.doubleData.length;++t)if("number"!=typeof e.doubleData[t])return"doubleData: number[] expected"}if(null!=e.uint64Data&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(t=0;t<e.uint64Data.length;++t)if(!(l.isInteger(e.uint64Data[t])||e.uint64Data[t]&&l.isInteger(e.uint64Data[t].low)&&l.isInteger(e.uint64Data[t].high)))return"uint64Data: integer|Long[] expected"}return null},e.fromObject=function(e){if(e instanceof c.onnx.TensorProto)return e;var t=new c.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");t.dims=[];for(var r=0;r<e.dims.length;++r)l.Long?(t.dims[r]=l.Long.fromValue(e.dims[r])).unsigned=!1:"string"==typeof e.dims[r]?t.dims[r]=parseInt(e.dims[r],10):"number"==typeof e.dims[r]?t.dims[r]=e.dims[r]:"object"==typeof e.dims[r]&&(t.dims[r]=new l.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber())}if(null!=e.dataType&&(t.dataType=0|e.dataType),null!=e.segment){if("object"!=typeof e.segment)throw TypeError(".onnx.TensorProto.segment: object expected");t.segment=c.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(t.floatData=[],r=0;r<e.floatData.length;++r)t.floatData[r]=Number(e.floatData[r])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(t.int32Data=[],r=0;r<e.int32Data.length;++r)t.int32Data[r]=0|e.int32Data[r]}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(t.stringData=[],r=0;r<e.stringData.length;++r)"string"==typeof e.stringData[r]?l.base64.decode(e.stringData[r],t.stringData[r]=l.newBuffer(l.base64.length(e.stringData[r])),0):e.stringData[r].length>=0&&(t.stringData[r]=e.stringData[r])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(t.int64Data=[],r=0;r<e.int64Data.length;++r)l.Long?(t.int64Data[r]=l.Long.fromValue(e.int64Data[r])).unsigned=!1:"string"==typeof e.int64Data[r]?t.int64Data[r]=parseInt(e.int64Data[r],10):"number"==typeof e.int64Data[r]?t.int64Data[r]=e.int64Data[r]:"object"==typeof e.int64Data[r]&&(t.int64Data[r]=new l.LongBits(e.int64Data[r].low>>>0,e.int64Data[r].high>>>0).toNumber())}if(null!=e.name&&(t.name=String(e.name)),null!=e.docString&&(t.docString=String(e.docString)),null!=e.rawData&&("string"==typeof e.rawData?l.base64.decode(e.rawData,t.rawData=l.newBuffer(l.base64.length(e.rawData)),0):e.rawData.length>=0&&(t.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(t.externalData=[],r=0;r<e.externalData.length;++r){if("object"!=typeof e.externalData[r])throw TypeError(".onnx.TensorProto.externalData: object expected");t.externalData[r]=c.onnx.StringStringEntryProto.fromObject(e.externalData[r])}}switch(e.dataLocation){default:if("number"==typeof e.dataLocation){t.dataLocation=e.dataLocation;break}break;case"DEFAULT":case 0:t.dataLocation=0;break;case"EXTERNAL":case 1:t.dataLocation=1}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(t.doubleData=[],r=0;r<e.doubleData.length;++r)t.doubleData[r]=Number(e.doubleData[r])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(t.uint64Data=[],r=0;r<e.uint64Data.length;++r)l.Long?(t.uint64Data[r]=l.Long.fromValue(e.uint64Data[r])).unsigned=!0:"string"==typeof e.uint64Data[r]?t.uint64Data[r]=parseInt(e.uint64Data[r],10):"number"==typeof e.uint64Data[r]?t.uint64Data[r]=e.uint64Data[r]:"object"==typeof e.uint64Data[r]&&(t.uint64Data[r]=new l.LongBits(e.uint64Data[r].low>>>0,e.uint64Data[r].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dims=[],r.floatData=[],r.int32Data=[],r.stringData=[],r.int64Data=[],r.doubleData=[],r.uint64Data=[],r.externalData=[]),t.defaults&&(r.dataType=0,r.segment=null,r.name="",t.bytes===String?r.rawData="":(r.rawData=[],t.bytes!==Array&&(r.rawData=l.newBuffer(r.rawData))),r.docString="",r.dataLocation=t.enums===String?"DEFAULT":0),e.dims&&e.dims.length){r.dims=[];for(var o=0;o<e.dims.length;++o)"number"==typeof e.dims[o]?r.dims[o]=t.longs===String?String(e.dims[o]):e.dims[o]:r.dims[o]=t.longs===String?l.Long.prototype.toString.call(e.dims[o]):t.longs===Number?new l.LongBits(e.dims[o].low>>>0,e.dims[o].high>>>0).toNumber():e.dims[o]}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&(r.dataType=e.dataType),null!=e.segment&&e.hasOwnProperty("segment")&&(r.segment=c.onnx.TensorProto.Segment.toObject(e.segment,t)),e.floatData&&e.floatData.length)for(r.floatData=[],o=0;o<e.floatData.length;++o)r.floatData[o]=t.json&&!isFinite(e.floatData[o])?String(e.floatData[o]):e.floatData[o];if(e.int32Data&&e.int32Data.length)for(r.int32Data=[],o=0;o<e.int32Data.length;++o)r.int32Data[o]=e.int32Data[o];if(e.stringData&&e.stringData.length)for(r.stringData=[],o=0;o<e.stringData.length;++o)r.stringData[o]=t.bytes===String?l.base64.encode(e.stringData[o],0,e.stringData[o].length):t.bytes===Array?Array.prototype.slice.call(e.stringData[o]):e.stringData[o];if(e.int64Data&&e.int64Data.length)for(r.int64Data=[],o=0;o<e.int64Data.length;++o)"number"==typeof e.int64Data[o]?r.int64Data[o]=t.longs===String?String(e.int64Data[o]):e.int64Data[o]:r.int64Data[o]=t.longs===String?l.Long.prototype.toString.call(e.int64Data[o]):t.longs===Number?new l.LongBits(e.int64Data[o].low>>>0,e.int64Data[o].high>>>0).toNumber():e.int64Data[o];if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.rawData&&e.hasOwnProperty("rawData")&&(r.rawData=t.bytes===String?l.base64.encode(e.rawData,0,e.rawData.length):t.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length)for(r.doubleData=[],o=0;o<e.doubleData.length;++o)r.doubleData[o]=t.json&&!isFinite(e.doubleData[o])?String(e.doubleData[o]):e.doubleData[o];if(e.uint64Data&&e.uint64Data.length)for(r.uint64Data=[],o=0;o<e.uint64Data.length;++o)"number"==typeof e.uint64Data[o]?r.uint64Data[o]=t.longs===String?String(e.uint64Data[o]):e.uint64Data[o]:r.uint64Data[o]=t.longs===String?l.Long.prototype.toString.call(e.uint64Data[o]):t.longs===Number?new l.LongBits(e.uint64Data[o].low>>>0,e.uint64Data[o].high>>>0).toNumber(!0):e.uint64Data[o];if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.externalData&&e.externalData.length)for(r.externalData=[],o=0;o<e.externalData.length;++o)r.externalData[o]=c.onnx.StringStringEntryProto.toObject(e.externalData[o],t);return null!=e.dataLocation&&e.hasOwnProperty("dataLocation")&&(r.dataLocation=t.enums===String?void 0===c.onnx.TensorProto.DataLocation[e.dataLocation]?e.dataLocation:c.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorProto"},e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="UINT8"]=2,t[e[3]="INT8"]=3,t[e[4]="UINT16"]=4,t[e[5]="INT16"]=5,t[e[6]="INT32"]=6,t[e[7]="INT64"]=7,t[e[8]="STRING"]=8,t[e[9]="BOOL"]=9,t[e[10]="FLOAT16"]=10,t[e[11]="DOUBLE"]=11,t[e[12]="UINT32"]=12,t[e[13]="UINT64"]=13,t[e[14]="COMPLEX64"]=14,t[e[15]="COMPLEX128"]=15,t[e[16]="BFLOAT16"]=16,t[e[17]="FLOAT8E4M3FN"]=17,t[e[18]="FLOAT8E4M3FNUZ"]=18,t[e[19]="FLOAT8E5M2"]=19,t[e[20]="FLOAT8E5M2FNUZ"]=20,t}(),e.Segment=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.begin=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.end=l.Long?l.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.begin&&Object.hasOwnProperty.call(e,"begin")&&t.uint32(8).int64(e.begin),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(16).int64(e.end),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TensorProto.Segment;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.begin=e.int64();break;case 2:o.end=e.int64();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null==e.begin||!e.hasOwnProperty("begin")||l.isInteger(e.begin)||e.begin&&l.isInteger(e.begin.low)&&l.isInteger(e.begin.high)?null==e.end||!e.hasOwnProperty("end")||l.isInteger(e.end)||e.end&&l.isInteger(e.end.low)&&l.isInteger(e.end.high)?null:"end: integer|Long expected":"begin: integer|Long expected"},e.fromObject=function(e){if(e instanceof c.onnx.TensorProto.Segment)return e;var t=new c.onnx.TensorProto.Segment;return null!=e.begin&&(l.Long?(t.begin=l.Long.fromValue(e.begin)).unsigned=!1:"string"==typeof e.begin?t.begin=parseInt(e.begin,10):"number"==typeof e.begin?t.begin=e.begin:"object"==typeof e.begin&&(t.begin=new l.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber())),null!=e.end&&(l.Long?(t.end=l.Long.fromValue(e.end)).unsigned=!1:"string"==typeof e.end?t.end=parseInt(e.end,10):"number"==typeof e.end?t.end=e.end:"object"==typeof e.end&&(t.end=new l.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(l.Long){var o=new l.Long(0,0,!1);r.begin=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.begin=t.longs===String?"0":0;l.Long?(o=new l.Long(0,0,!1),r.end=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.end=t.longs===String?"0":0}return null!=e.begin&&e.hasOwnProperty("begin")&&("number"==typeof e.begin?r.begin=t.longs===String?String(e.begin):e.begin:r.begin=t.longs===String?l.Long.prototype.toString.call(e.begin):t.longs===Number?new l.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber():e.begin),null!=e.end&&e.hasOwnProperty("end")&&("number"==typeof e.end?r.end=t.longs===String?String(e.end):e.end:r.end=t.longs===String?l.Long.prototype.toString.call(e.end):t.longs===Number?new l.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber():e.end),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorProto.Segment"},e}(),e.DataLocation=function(){var e={},t=Object.create(e);return t[e[0]="DEFAULT"]=0,t[e[1]="EXTERNAL"]=1,t}(),e}(),n.SparseTensorProto=function(){function e(e){if(this.dims=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.values=null,e.prototype.indices=null,e.prototype.dims=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.values&&Object.hasOwnProperty.call(e,"values")&&c.onnx.TensorProto.encode(e.values,t.uint32(10).fork()).ldelim(),null!=e.indices&&Object.hasOwnProperty.call(e,"indices")&&c.onnx.TensorProto.encode(e.indices,t.uint32(18).fork()).ldelim(),null!=e.dims&&e.dims.length){t.uint32(26).fork();for(var r=0;r<e.dims.length;++r)t.int64(e.dims[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.SparseTensorProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.values=c.onnx.TensorProto.decode(e,e.uint32());break;case 2:o.indices=c.onnx.TensorProto.decode(e,e.uint32());break;case 3:if(o.dims&&o.dims.length||(o.dims=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.dims.push(e.int64());else o.dims.push(e.int64());break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t;if(null!=e.values&&e.hasOwnProperty("values")&&(t=c.onnx.TensorProto.verify(e.values)))return"values."+t;if(null!=e.indices&&e.hasOwnProperty("indices")&&(t=c.onnx.TensorProto.verify(e.indices)))return"indices."+t;if(null!=e.dims&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var r=0;r<e.dims.length;++r)if(!(l.isInteger(e.dims[r])||e.dims[r]&&l.isInteger(e.dims[r].low)&&l.isInteger(e.dims[r].high)))return"dims: integer|Long[] expected"}return null},e.fromObject=function(e){if(e instanceof c.onnx.SparseTensorProto)return e;var t=new c.onnx.SparseTensorProto;if(null!=e.values){if("object"!=typeof e.values)throw TypeError(".onnx.SparseTensorProto.values: object expected");t.values=c.onnx.TensorProto.fromObject(e.values)}if(null!=e.indices){if("object"!=typeof e.indices)throw TypeError(".onnx.SparseTensorProto.indices: object expected");t.indices=c.onnx.TensorProto.fromObject(e.indices)}if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");t.dims=[];for(var r=0;r<e.dims.length;++r)l.Long?(t.dims[r]=l.Long.fromValue(e.dims[r])).unsigned=!1:"string"==typeof e.dims[r]?t.dims[r]=parseInt(e.dims[r],10):"number"==typeof e.dims[r]?t.dims[r]=e.dims[r]:"object"==typeof e.dims[r]&&(t.dims[r]=new l.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber())}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dims=[]),t.defaults&&(r.values=null,r.indices=null),null!=e.values&&e.hasOwnProperty("values")&&(r.values=c.onnx.TensorProto.toObject(e.values,t)),null!=e.indices&&e.hasOwnProperty("indices")&&(r.indices=c.onnx.TensorProto.toObject(e.indices,t)),e.dims&&e.dims.length){r.dims=[];for(var o=0;o<e.dims.length;++o)"number"==typeof e.dims[o]?r.dims[o]=t.longs===String?String(e.dims[o]):e.dims[o]:r.dims[o]=t.longs===String?l.Long.prototype.toString.call(e.dims[o]):t.longs===Number?new l.LongBits(e.dims[o].low>>>0,e.dims[o].high>>>0).toNumber():e.dims[o]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.SparseTensorProto"},e}(),n.TensorShapeProto=function(){function e(e){if(this.dim=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dim=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.dim&&e.dim.length)for(var r=0;r<e.dim.length;++r)c.onnx.TensorShapeProto.Dimension.encode(e.dim[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TensorShapeProto;e.pos<r;){var n=e.uint32();n>>>3==1?(o.dim&&o.dim.length||(o.dim=[]),o.dim.push(c.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()))):e.skipType(7&n)}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dim&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var t=0;t<e.dim.length;++t){var r=c.onnx.TensorShapeProto.Dimension.verify(e.dim[t]);if(r)return"dim."+r}}return null},e.fromObject=function(e){if(e instanceof c.onnx.TensorShapeProto)return e;var t=new c.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");t.dim=[];for(var r=0;r<e.dim.length;++r){if("object"!=typeof e.dim[r])throw TypeError(".onnx.TensorShapeProto.dim: object expected");t.dim[r]=c.onnx.TensorShapeProto.Dimension.fromObject(e.dim[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dim=[]),e.dim&&e.dim.length){r.dim=[];for(var o=0;o<e.dim.length;++o)r.dim[o]=c.onnx.TensorShapeProto.Dimension.toObject(e.dim[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto"},e.Dimension=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.dimValue=null,e.prototype.dimParam=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:l.oneOfGetter(t=["dimValue","dimParam"]),set:l.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.dimValue&&Object.hasOwnProperty.call(e,"dimValue")&&t.uint32(8).int64(e.dimValue),null!=e.dimParam&&Object.hasOwnProperty.call(e,"dimParam")&&t.uint32(18).string(e.dimParam),null!=e.denotation&&Object.hasOwnProperty.call(e,"denotation")&&t.uint32(26).string(e.denotation),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TensorShapeProto.Dimension;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.dimValue=e.int64();break;case 2:o.dimParam=e.string();break;case 3:o.denotation=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.dimValue&&e.hasOwnProperty("dimValue")&&(t.value=1,!(l.isInteger(e.dimValue)||e.dimValue&&l.isInteger(e.dimValue.low)&&l.isInteger(e.dimValue.high))))return"dimValue: integer|Long expected";if(null!=e.dimParam&&e.hasOwnProperty("dimParam")){if(1===t.value)return"value: multiple values";if(t.value=1,!l.isString(e.dimParam))return"dimParam: string expected"}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!l.isString(e.denotation)?"denotation: string expected":null},e.fromObject=function(e){if(e instanceof c.onnx.TensorShapeProto.Dimension)return e;var t=new c.onnx.TensorShapeProto.Dimension;return null!=e.dimValue&&(l.Long?(t.dimValue=l.Long.fromValue(e.dimValue)).unsigned=!1:"string"==typeof e.dimValue?t.dimValue=parseInt(e.dimValue,10):"number"==typeof e.dimValue?t.dimValue=e.dimValue:"object"==typeof e.dimValue&&(t.dimValue=new l.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber())),null!=e.dimParam&&(t.dimParam=String(e.dimParam)),null!=e.denotation&&(t.denotation=String(e.denotation)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.denotation=""),null!=e.dimValue&&e.hasOwnProperty("dimValue")&&("number"==typeof e.dimValue?r.dimValue=t.longs===String?String(e.dimValue):e.dimValue:r.dimValue=t.longs===String?l.Long.prototype.toString.call(e.dimValue):t.longs===Number?new l.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber():e.dimValue,t.oneofs&&(r.value="dimValue")),null!=e.dimParam&&e.hasOwnProperty("dimParam")&&(r.dimParam=e.dimParam,t.oneofs&&(r.value="dimParam")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(r.denotation=e.denotation),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto.Dimension"},e}(),e}(),n.TypeProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.tensorType=null,e.prototype.sequenceType=null,e.prototype.mapType=null,e.prototype.optionalType=null,e.prototype.sparseTensorType=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:l.oneOfGetter(t=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:l.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.tensorType&&Object.hasOwnProperty.call(e,"tensorType")&&c.onnx.TypeProto.Tensor.encode(e.tensorType,t.uint32(10).fork()).ldelim(),null!=e.sequenceType&&Object.hasOwnProperty.call(e,"sequenceType")&&c.onnx.TypeProto.Sequence.encode(e.sequenceType,t.uint32(34).fork()).ldelim(),null!=e.mapType&&Object.hasOwnProperty.call(e,"mapType")&&c.onnx.TypeProto.Map.encode(e.mapType,t.uint32(42).fork()).ldelim(),null!=e.denotation&&Object.hasOwnProperty.call(e,"denotation")&&t.uint32(50).string(e.denotation),null!=e.sparseTensorType&&Object.hasOwnProperty.call(e,"sparseTensorType")&&c.onnx.TypeProto.SparseTensor.encode(e.sparseTensorType,t.uint32(66).fork()).ldelim(),null!=e.optionalType&&Object.hasOwnProperty.call(e,"optionalType")&&c.onnx.TypeProto.Optional.encode(e.optionalType,t.uint32(74).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TypeProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.tensorType=c.onnx.TypeProto.Tensor.decode(e,e.uint32());break;case 4:o.sequenceType=c.onnx.TypeProto.Sequence.decode(e,e.uint32());break;case 5:o.mapType=c.onnx.TypeProto.Map.decode(e,e.uint32());break;case 9:o.optionalType=c.onnx.TypeProto.Optional.decode(e,e.uint32());break;case 8:o.sparseTensorType=c.onnx.TypeProto.SparseTensor.decode(e,e.uint32());break;case 6:o.denotation=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.tensorType&&e.hasOwnProperty("tensorType")&&(t.value=1,r=c.onnx.TypeProto.Tensor.verify(e.tensorType)))return"tensorType."+r;if(null!=e.sequenceType&&e.hasOwnProperty("sequenceType")){if(1===t.value)return"value: multiple values";if(t.value=1,r=c.onnx.TypeProto.Sequence.verify(e.sequenceType))return"sequenceType."+r}if(null!=e.mapType&&e.hasOwnProperty("mapType")){if(1===t.value)return"value: multiple values";if(t.value=1,r=c.onnx.TypeProto.Map.verify(e.mapType))return"mapType."+r}if(null!=e.optionalType&&e.hasOwnProperty("optionalType")){if(1===t.value)return"value: multiple values";if(t.value=1,r=c.onnx.TypeProto.Optional.verify(e.optionalType))return"optionalType."+r}if(null!=e.sparseTensorType&&e.hasOwnProperty("sparseTensorType")){if(1===t.value)return"value: multiple values";var r;if(t.value=1,r=c.onnx.TypeProto.SparseTensor.verify(e.sparseTensorType))return"sparseTensorType."+r}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!l.isString(e.denotation)?"denotation: string expected":null},e.fromObject=function(e){if(e instanceof c.onnx.TypeProto)return e;var t=new c.onnx.TypeProto;if(null!=e.tensorType){if("object"!=typeof e.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");t.tensorType=c.onnx.TypeProto.Tensor.fromObject(e.tensorType)}if(null!=e.sequenceType){if("object"!=typeof e.sequenceType)throw TypeError(".onnx.TypeProto.sequenceType: object expected");t.sequenceType=c.onnx.TypeProto.Sequence.fromObject(e.sequenceType)}if(null!=e.mapType){if("object"!=typeof e.mapType)throw TypeError(".onnx.TypeProto.mapType: object expected");t.mapType=c.onnx.TypeProto.Map.fromObject(e.mapType)}if(null!=e.optionalType){if("object"!=typeof e.optionalType)throw TypeError(".onnx.TypeProto.optionalType: object expected");t.optionalType=c.onnx.TypeProto.Optional.fromObject(e.optionalType)}if(null!=e.sparseTensorType){if("object"!=typeof e.sparseTensorType)throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");t.sparseTensorType=c.onnx.TypeProto.SparseTensor.fromObject(e.sparseTensorType)}return null!=e.denotation&&(t.denotation=String(e.denotation)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.denotation=""),null!=e.tensorType&&e.hasOwnProperty("tensorType")&&(r.tensorType=c.onnx.TypeProto.Tensor.toObject(e.tensorType,t),t.oneofs&&(r.value="tensorType")),null!=e.sequenceType&&e.hasOwnProperty("sequenceType")&&(r.sequenceType=c.onnx.TypeProto.Sequence.toObject(e.sequenceType,t),t.oneofs&&(r.value="sequenceType")),null!=e.mapType&&e.hasOwnProperty("mapType")&&(r.mapType=c.onnx.TypeProto.Map.toObject(e.mapType,t),t.oneofs&&(r.value="mapType")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(r.denotation=e.denotation),null!=e.sparseTensorType&&e.hasOwnProperty("sparseTensorType")&&(r.sparseTensorType=c.onnx.TypeProto.SparseTensor.toObject(e.sparseTensorType,t),t.oneofs&&(r.value="sparseTensorType")),null!=e.optionalType&&e.hasOwnProperty("optionalType")&&(r.optionalType=c.onnx.TypeProto.Optional.toObject(e.optionalType,t),t.oneofs&&(r.value="optionalType")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto"},e.Tensor=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&t.uint32(8).int32(e.elemType),null!=e.shape&&Object.hasOwnProperty.call(e,"shape")&&c.onnx.TensorShapeProto.encode(e.shape,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TypeProto.Tensor;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.elemType=e.int32();break;case 2:o.shape=c.onnx.TensorShapeProto.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")&&!l.isInteger(e.elemType))return"elemType: integer expected";if(null!=e.shape&&e.hasOwnProperty("shape")){var t=c.onnx.TensorShapeProto.verify(e.shape);if(t)return"shape."+t}return null},e.fromObject=function(e){if(e instanceof c.onnx.TypeProto.Tensor)return e;var t=new c.onnx.TypeProto.Tensor;if(null!=e.elemType&&(t.elemType=0|e.elemType),null!=e.shape){if("object"!=typeof e.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");t.shape=c.onnx.TensorShapeProto.fromObject(e.shape)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.elemType=0,r.shape=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(r.elemType=e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&(r.shape=c.onnx.TensorShapeProto.toObject(e.shape,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Tensor"},e}(),e.Sequence=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.elemType=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&c.onnx.TypeProto.encode(e.elemType,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TypeProto.Sequence;e.pos<r;){var n=e.uint32();n>>>3==1?o.elemType=c.onnx.TypeProto.decode(e,e.uint32()):e.skipType(7&n)}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")){var t=c.onnx.TypeProto.verify(e.elemType);if(t)return"elemType."+t}return null},e.fromObject=function(e){if(e instanceof c.onnx.TypeProto.Sequence)return e;var t=new c.onnx.TypeProto.Sequence;if(null!=e.elemType){if("object"!=typeof e.elemType)throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");t.elemType=c.onnx.TypeProto.fromObject(e.elemType)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.elemType=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(r.elemType=c.onnx.TypeProto.toObject(e.elemType,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Sequence"},e}(),e.Map=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.keyType=0,e.prototype.valueType=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.keyType&&Object.hasOwnProperty.call(e,"keyType")&&t.uint32(8).int32(e.keyType),null!=e.valueType&&Object.hasOwnProperty.call(e,"valueType")&&c.onnx.TypeProto.encode(e.valueType,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TypeProto.Map;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.keyType=e.int32();break;case 2:o.valueType=c.onnx.TypeProto.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.keyType&&e.hasOwnProperty("keyType")&&!l.isInteger(e.keyType))return"keyType: integer expected";if(null!=e.valueType&&e.hasOwnProperty("valueType")){var t=c.onnx.TypeProto.verify(e.valueType);if(t)return"valueType."+t}return null},e.fromObject=function(e){if(e instanceof c.onnx.TypeProto.Map)return e;var t=new c.onnx.TypeProto.Map;if(null!=e.keyType&&(t.keyType=0|e.keyType),null!=e.valueType){if("object"!=typeof e.valueType)throw TypeError(".onnx.TypeProto.Map.valueType: object expected");t.valueType=c.onnx.TypeProto.fromObject(e.valueType)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.keyType=0,r.valueType=null),null!=e.keyType&&e.hasOwnProperty("keyType")&&(r.keyType=e.keyType),null!=e.valueType&&e.hasOwnProperty("valueType")&&(r.valueType=c.onnx.TypeProto.toObject(e.valueType,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Map"},e}(),e.Optional=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.elemType=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&c.onnx.TypeProto.encode(e.elemType,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TypeProto.Optional;e.pos<r;){var n=e.uint32();n>>>3==1?o.elemType=c.onnx.TypeProto.decode(e,e.uint32()):e.skipType(7&n)}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")){var t=c.onnx.TypeProto.verify(e.elemType);if(t)return"elemType."+t}return null},e.fromObject=function(e){if(e instanceof c.onnx.TypeProto.Optional)return e;var t=new c.onnx.TypeProto.Optional;if(null!=e.elemType){if("object"!=typeof e.elemType)throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");t.elemType=c.onnx.TypeProto.fromObject(e.elemType)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.elemType=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(r.elemType=c.onnx.TypeProto.toObject(e.elemType,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Optional"},e}(),e.SparseTensor=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&t.uint32(8).int32(e.elemType),null!=e.shape&&Object.hasOwnProperty.call(e,"shape")&&c.onnx.TensorShapeProto.encode(e.shape,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.TypeProto.SparseTensor;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.elemType=e.int32();break;case 2:o.shape=c.onnx.TensorShapeProto.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")&&!l.isInteger(e.elemType))return"elemType: integer expected";if(null!=e.shape&&e.hasOwnProperty("shape")){var t=c.onnx.TensorShapeProto.verify(e.shape);if(t)return"shape."+t}return null},e.fromObject=function(e){if(e instanceof c.onnx.TypeProto.SparseTensor)return e;var t=new c.onnx.TypeProto.SparseTensor;if(null!=e.elemType&&(t.elemType=0|e.elemType),null!=e.shape){if("object"!=typeof e.shape)throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");t.shape=c.onnx.TensorShapeProto.fromObject(e.shape)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.elemType=0,r.shape=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(r.elemType=e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&(r.shape=c.onnx.TensorShapeProto.toObject(e.shape,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.SparseTensor"},e}(),e}(),n.OperatorSetIdProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.domain="",e.prototype.version=l.Long?l.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(10).string(e.domain),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(16).int64(e.version),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.OperatorSetIdProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.domain=e.string();break;case 2:o.version=e.int64();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.domain&&e.hasOwnProperty("domain")&&!l.isString(e.domain)?"domain: string expected":null==e.version||!e.hasOwnProperty("version")||l.isInteger(e.version)||e.version&&l.isInteger(e.version.low)&&l.isInteger(e.version.high)?null:"version: integer|Long expected"},e.fromObject=function(e){if(e instanceof c.onnx.OperatorSetIdProto)return e;var t=new c.onnx.OperatorSetIdProto;return null!=e.domain&&(t.domain=String(e.domain)),null!=e.version&&(l.Long?(t.version=l.Long.fromValue(e.version)).unsigned=!1:"string"==typeof e.version?t.version=parseInt(e.version,10):"number"==typeof e.version?t.version=e.version:"object"==typeof e.version&&(t.version=new l.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if(r.domain="",l.Long){var o=new l.Long(0,0,!1);r.version=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.version=t.longs===String?"0":0;return null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),null!=e.version&&e.hasOwnProperty("version")&&("number"==typeof e.version?r.version=t.longs===String?String(e.version):e.version:r.version=t.longs===String?l.Long.prototype.toString.call(e.version):t.longs===Number?new l.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.OperatorSetIdProto"},e}(),n.OperatorStatus=function(){var e={},t=Object.create(e);return t[e[0]="EXPERIMENTAL"]=0,t[e[1]="STABLE"]=1,t}(),n.FunctionProto=function(){function e(e){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.input=l.emptyArray,e.prototype.output=l.emptyArray,e.prototype.attribute=l.emptyArray,e.prototype.attributeProto=l.emptyArray,e.prototype.node=l.emptyArray,e.prototype.docString="",e.prototype.opsetImport=l.emptyArray,e.prototype.domain="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.input&&e.input.length)for(var r=0;r<e.input.length;++r)t.uint32(34).string(e.input[r]);if(null!=e.output&&e.output.length)for(r=0;r<e.output.length;++r)t.uint32(42).string(e.output[r]);if(null!=e.attribute&&e.attribute.length)for(r=0;r<e.attribute.length;++r)t.uint32(50).string(e.attribute[r]);if(null!=e.node&&e.node.length)for(r=0;r<e.node.length;++r)c.onnx.NodeProto.encode(e.node[r],t.uint32(58).fork()).ldelim();if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(66).string(e.docString),null!=e.opsetImport&&e.opsetImport.length)for(r=0;r<e.opsetImport.length;++r)c.onnx.OperatorSetIdProto.encode(e.opsetImport[r],t.uint32(74).fork()).ldelim();if(null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(82).string(e.domain),null!=e.attributeProto&&e.attributeProto.length)for(r=0;r<e.attributeProto.length;++r)c.onnx.AttributeProto.encode(e.attributeProto[r],t.uint32(90).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.onnx.FunctionProto;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.name=e.string();break;case 4:o.input&&o.input.length||(o.input=[]),o.input.push(e.string());break;case 5:o.output&&o.output.length||(o.output=[]),o.output.push(e.string());break;case 6:o.attribute&&o.attribute.length||(o.attribute=[]),o.attribute.push(e.string());break;case 11:o.attributeProto&&o.attributeProto.length||(o.attributeProto=[]),o.attributeProto.push(c.onnx.AttributeProto.decode(e,e.uint32()));break;case 7:o.node&&o.node.length||(o.node=[]),o.node.push(c.onnx.NodeProto.decode(e,e.uint32()));break;case 8:o.docString=e.string();break;case 9:o.opsetImport&&o.opsetImport.length||(o.opsetImport=[]),o.opsetImport.push(c.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 10:o.domain=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!l.isString(e.name))return"name: string expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!l.isString(e.input[t]))return"input: string[] expected"}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!l.isString(e.output[t]))return"output: string[] expected"}if(null!=e.attribute&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t)if(!l.isString(e.attribute[t]))return"attribute: string[] expected"}if(null!=e.attributeProto&&e.hasOwnProperty("attributeProto")){if(!Array.isArray(e.attributeProto))return"attributeProto: array expected";for(t=0;t<e.attributeProto.length;++t)if(r=c.onnx.AttributeProto.verify(e.attributeProto[t]))return"attributeProto."+r}if(null!=e.node&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(t=0;t<e.node.length;++t)if(r=c.onnx.NodeProto.verify(e.node[t]))return"node."+r}if(null!=e.docString&&e.hasOwnProperty("docString")&&!l.isString(e.docString))return"docString: string expected";if(null!=e.opsetImport&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(t=0;t<e.opsetImport.length;++t){var r;if(r=c.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+r}}return null!=e.domain&&e.hasOwnProperty("domain")&&!l.isString(e.domain)?"domain: string expected":null},e.fromObject=function(e){if(e instanceof c.onnx.FunctionProto)return e;var t=new c.onnx.FunctionProto;if(null!=e.name&&(t.name=String(e.name)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.FunctionProto.input: array expected");t.input=[];for(var r=0;r<e.input.length;++r)t.input[r]=String(e.input[r])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.FunctionProto.output: array expected");for(t.output=[],r=0;r<e.output.length;++r)t.output[r]=String(e.output[r])}if(e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");for(t.attribute=[],r=0;r<e.attribute.length;++r)t.attribute[r]=String(e.attribute[r])}if(e.attributeProto){if(!Array.isArray(e.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");for(t.attributeProto=[],r=0;r<e.attributeProto.length;++r){if("object"!=typeof e.attributeProto[r])throw TypeError(".onnx.FunctionProto.attributeProto: object expected");t.attributeProto[r]=c.onnx.AttributeProto.fromObject(e.attributeProto[r])}}if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.FunctionProto.node: array expected");for(t.node=[],r=0;r<e.node.length;++r){if("object"!=typeof e.node[r])throw TypeError(".onnx.FunctionProto.node: object expected");t.node[r]=c.onnx.NodeProto.fromObject(e.node[r])}}if(null!=e.docString&&(t.docString=String(e.docString)),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");for(t.opsetImport=[],r=0;r<e.opsetImport.length;++r){if("object"!=typeof e.opsetImport[r])throw TypeError(".onnx.FunctionProto.opsetImport: object expected");t.opsetImport[r]=c.onnx.OperatorSetIdProto.fromObject(e.opsetImport[r])}}return null!=e.domain&&(t.domain=String(e.domain)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.input=[],r.output=[],r.attribute=[],r.node=[],r.opsetImport=[],r.attributeProto=[]),t.defaults&&(r.name="",r.docString="",r.domain=""),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),e.input&&e.input.length){r.input=[];for(var o=0;o<e.input.length;++o)r.input[o]=e.input[o]}if(e.output&&e.output.length)for(r.output=[],o=0;o<e.output.length;++o)r.output[o]=e.output[o];if(e.attribute&&e.attribute.length)for(r.attribute=[],o=0;o<e.attribute.length;++o)r.attribute[o]=e.attribute[o];if(e.node&&e.node.length)for(r.node=[],o=0;o<e.node.length;++o)r.node[o]=c.onnx.NodeProto.toObject(e.node[o],t);if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.opsetImport&&e.opsetImport.length)for(r.opsetImport=[],o=0;o<e.opsetImport.length;++o)r.opsetImport[o]=c.onnx.OperatorSetIdProto.toObject(e.opsetImport[o],t);if(null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),e.attributeProto&&e.attributeProto.length)for(r.attributeProto=[],o=0;o<e.attributeProto.length;++o)r.attributeProto[o]=c.onnx.AttributeProto.toObject(e.attributeProto[o],t);return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.FunctionProto"},e}(),n),t.exports=c});function Fr(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function sn(e){return(new TextDecoder).decode(e)}var ye,hr,pi,Ze,jn,We,it,U,an,mr,br,gr,fe=L(()=>{zn(),Zo(),ye=Ar(Cr()),yr(),hr=class{static arraysEqual(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}},pi=class{static preprocessInputShapes(e,t){return[1===e.length?[1,e[0]]:e,1===t.length?[t[0],1]:t]}static postprocessOutputShape(e,t,r){1===t&&e.splice(e.length-2,1),1===r&&e.pop()}static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},Ze=class e{static calcShape(e,t,r=!1){let o=e.length,n=t.length;if(0===o)return t;if(0===n)return e;let s=Math.max(e.length,t.length),a=new Array(s);if(r){if(o<2||n<2)return;let r=pi.calcMatMulShape([e[o-2],e[o-1]],[t[n-2],t[n-1]]);if(void 0===r)return;[a[s-2],a[s-1]]=r}for(let i=r?3:1;i<=s;i++){let r=o-i<0?1:e[o-i],l=n-i<0?1:t[n-i];if(r!==l&&r>1&&l>1)return;a[s-i]=Math.max(r,l)}return a}static index(t,r){let o=new Array(r.length);return e.fillIndex(t,r,o),o}static fillIndex(e,t,r){let o=e.length-t.length;for(let n=0;n<t.length;n++)r[n]=e[o+n]%t[n]}static calc(t,r,o,n,s){let a=e.calcShape(t.dims,r.dims);if(a){if(n&&!U.areEqual(a,t.dims))return;let i=U.size(a),l=n?t:new $e(a,s||t.type);if(0===a.length)l.set([],o(t.get([]),r.get([])));else{let n,s=new Array(a.length),c=new Array(t.dims.length),_=new Array(r.dims.length),p=0,u=0,d=!1,h=!1;0===t.dims.length&&(p=t.get([]),d=!0),0===r.dims.length&&(u=r.get([]),h=!0);for(let f=0;f<i;f++){n=f;for(let e=a.length-1;e>=0;e--)s[e]=n%a[e],n=Math.floor(n/a[e]);d||(e.fillIndex(s,t.dims,c),p=t.get(c)),h||(e.fillIndex(s,r.dims,_),u=r.get(_)),l.set(s,o(p,u))}}return l}}static isValidBroadcast(e,t){let r=e.length,o=t.length;if(r>o)return!1;for(let n=1;n<=r;n++)if(1!==e[r-n]&&e[r-n]!==t[o-n])return!1;return!0}static getBroadcastDims(e,t){let r=e.length,o=[];for(let n=0;n<r;n++){let s=r-1-n,a=e[s]||1;(t[t.length-1-n]||1)>1&&1===a&&o.unshift(s)}return o}},jn=class{static getShapeOfGemmResult(e,t,r,o,n){if(2!==e.length||2!==r.length)throw new Error("shape need to be of size 2");let s,a,i;t?(s=e[1],a=e[0]):(s=e[0],a=e[1]);let l=-1;if(o?(i=r[0],l=1):(i=r[1],l=0),r[l]!==a)throw new Error("dimension mismatch");if(s<=0||i<=0||a<=0)throw new Error("invalid shape specified");if(n&&!Ze.isValidBroadcast(n,[s,i]))throw new Error("gemm: invalid bias shape for broadcast");return[s,i,a]}},We=class e{static tensorDataTypeFromProto(e){switch(e){case ye.onnx.TensorProto.DataType.INT8:return"int8";case ye.onnx.TensorProto.DataType.UINT8:return"uint8";case ye.onnx.TensorProto.DataType.BOOL:return"bool";case ye.onnx.TensorProto.DataType.INT16:return"int16";case ye.onnx.TensorProto.DataType.UINT16:return"uint16";case ye.onnx.TensorProto.DataType.INT32:return"int32";case ye.onnx.TensorProto.DataType.UINT32:return"uint32";case ye.onnx.TensorProto.DataType.FLOAT:return"float32";case ye.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye.onnx.TensorProto.DataType.STRING:return"string";case ye.onnx.TensorProto.DataType.INT64:return"int32";case ye.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye.onnx.TensorProto.DataType[e]}`)}}static tensorDataTypeStringToEnum(e){switch(e){case"int8":return ye.onnx.TensorProto.DataType.INT8;case"uint8":return ye.onnx.TensorProto.DataType.UINT8;case"bool":return ye.onnx.TensorProto.DataType.BOOL;case"int16":return ye.onnx.TensorProto.DataType.INT16;case"uint16":return ye.onnx.TensorProto.DataType.UINT16;case"int32":return ye.onnx.TensorProto.DataType.INT32;case"uint32":return ye.onnx.TensorProto.DataType.UINT32;case"float32":return ye.onnx.TensorProto.DataType.FLOAT;case"float64":return ye.onnx.TensorProto.DataType.DOUBLE;case"string":return ye.onnx.TensorProto.DataType.STRING;case"int64":return ye.onnx.TensorProto.DataType.INT64;case"uint64":return ye.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${e}`)}}static tensorDimsFromProto(e){return e.map(e=>Vt.isLong(e)?e.toNumber():e)}static tensorValueTypeFromProto(t){return{tensorType:e.tensorDataTypeFromProto(t.elemType),shape:{dims:e.tensorDimsFromProto(t.shape.dim.map(e=>e.dimValue))}}}static tensorDimsFromORTFormat(e){let t=[];for(let r=0;r<e.dimsLength();r++)t.push(it.longToNumber(e.dims(r)));return t}static tensorAttributesFromORTFormat(e){let t=[];for(let r=0;r<e.attributesLength();r++)t.push(e.attributes(r));return t}},it=class{static longToNumber(e,t){return Vt.isLong(e)?e.toNumber():e instanceof _.Long?Vt.fromValue({low:e.low,high:e.high,unsigned:t??!1}).toNumber():e}static isLong(e){return Vt.isLong(e)||e instanceof _.Long}},U=class e{static size(t){return e.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(e,t,r){let o=1;for(let n=t;n<r;n++){if(e[n]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");o*=e[n]}return o}static computeStrides(e){let t=e.length;if(0===t)return[];if(1===t)return[1];let r=new Array(t);r[t-1]=1,r[t-2]=e[t-1];for(let o=t-3;o>=0;--o)r[o]=r[o+1]*e[o+1];return r}static transpose(e){return e.slice().reverse()}static indicesToOffset(e,t,r){void 0===r&&(r=e.length);let o=0;for(let n=0;n<r;++n)o+=t[n]*e[n];return o}static offsetToIndices(e,t){let r=t.length;if(0===r)return[];if(1===r)return[e*t[0]];let o=new Array(t.length);for(let r=0;r<o.length-1;++r)o[r]=Math.floor(e/t[r]),e-=o[r]*t[r];return o[o.length-1]=e,o}static normalizeAxis(e,t){if(e<-t&&e>=t)throw new Error("unsupported axis for this operation.");return e<0?e+t:e}static normalizeAxes(e,t){return e.map(e=>this.normalizeAxis(e,t))}static incrementIndex(e,t,r){if(0===t.length||0===e.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===r)r=t.length;else if(r<=0||r>t.length)throw new Error("Incorrect axis to increment on");for(let o=r-1;o>=0&&(e[o]++,!(e[o]<t[o]));--o)e[o]=0}static calculateReshapedDims(t,r){if(0===r.length){if(0===t.length||1===e.size(t))return[];throw new Error("cannot reshape to a scalar Tensor")}let o=r.length,n=new Array(o),s=-1,a=1;for(let e=0;e<o;e++){if(r[e]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===r[e]){if(-1!==s)throw new Error("at most one dimension in shape hints can be -1");s=e}else{if(0===r[e]){if(e>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");n[e]=t[e]}else n[e]=r[e];a*=n[e]}}let i=e.size(t);if(-1!==s){if(i%a!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${t}] Output shape: [${r}]`);n[s]=i/a}else if(a!==i)throw new Error("reshapedDims and originalDims don't have matching sizes");return n}static sortBasedOnPerm(e,t){return t?t.map(t=>e[t]):e.slice().reverse()}static padShape(e,t){let r=e.length;return e.map((e,o)=>e+t[o]+t[o+r])}static areEqual(e,t){return e.length===t.length&&e.every((e,r)=>e===t[r])}static validateDimsAndCalcSize(e){if(e.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let t=1;for(let r of e){if(!Number.isInteger(r))throw new TypeError(`Invalid shape: ${r} is not an integer`);if(r<0||r>2147483647)throw new TypeError(`Invalid shape: length ${r} is not allowed`);t*=r}return t}static flattenShape(e,t){t<0&&(t+=e.length);let r=e.reduce((e,t)=>e*t,1),o=e.slice(t).reduce((e,t)=>e*t,1);return[r/o,o]}static squeezeShape(t,r){let o=new Array;r=e.normalizeAxes(r,t.length);for(let e=0;e<t.length;e++){let n=r.indexOf(e)>=0;if(n&&1!==t[e])throw new Error("squeeze an axis of size different than 1");(0===r.length&&t[e]>1||r.length>0&&!n)&&o.push(t[e])}return o}static unsqueezeShape(t,r){let o=new Array(t.length+r.length);o.fill(0);for(let t=0;t<r.length;t++){let n=e.normalizeAxis(r[t],o.length);if(n>=o.length)throw new Error("'axes' has an out of range axis");if(0!==o[n])throw new Error("'axes' has a duplicate axis");o[n]=1}let n=0;for(let e=0;e<o.length;e++)0===o[e]&&(o[e]=t[n++]);if(n!==t.length)throw new Error("the unsqueezed dimension could not be established");return o}},an=class e{static splitShape(t,r,o,n){if(0===o.length){if(!n)throw new Error("need to know number of outputs when the 'split' attribute is not specified");e.determineSplit(t[r],n,o)}let s=[],a=[0];for(let e=0;e<o.length;++e){0!==e&&a.push(a[e-1]+o[e-1]);let n=t.slice();n[r]=o[e],s.push(n)}return[s,a]}static determineSplit(e,t,r){if(e%t!==0)throw new Error("cannot split tensor to equal sized parts");for(let o=0;o<t;++o)r.push(e/t)}},mr=class e{static adjustPoolAttributes(e,t,r,o,n,s){if(!e&&r.length!==t.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(let e=0;e<t.length-2;e++)e>=r.length?r.push(t[e+2]):r[e]=t[e+2];for(let e=0;e<r.length;e++)if(e<o.length){if(o[e]<0)throw new Error("strides should be greater than or equal to 1")}else o.push(1);for(let e=0;e<r.length;e++)if(e<n.length){if(n[e]<0)throw new Error("dilations should be greater than or equal to 1")}else n.push(1);for(let e=0;e<2*r.length;e++)if(e<s.length){if(s[e]<0)throw new Error("pad should be greater than or equal to 1")}else s.push(0);for(let e=0;e<r.length;e++){if(r[e]<=0)throw new Error("kernel shapes need to be greater than 0");if(s[e]>=r[e]||s[e+r.length]>=r[e])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,o,n,s,a){if(a){if(s.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let i=0;i<t.length-2;i++)e.adjustPadAndReturnShape(t[i+2],r[i],o[i],n[i],s,i,i+t.length-2,a)}}static computePoolOutputShape(t,r,o,n,s,a,i){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return e.computeShapeHelper(t,r,l,o,n,s,a,i),l}static computeConvOutputShape(t,r,o,n,s,a,i){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[t[0],r[0]];return e.computeShapeHelper(!1,t,l,o,n,s,a,i),l}static computeShapeHelper(t,r,o,n,s,a,i,l){if(t)for(let e=0;e<r.length-2;e++)o.push(1);else for(let t=0;t<r.length-2;t++)o.push(e.adjustPadAndReturnShape(r[t+2],n[t],s[t],a[t],i,t,t+r.length-2,l))}static adjustPadAndReturnShape(e,t,r,o,n,s,a,i){let l=r*(o-1)+1;if(!i||"NOTSET"===i)return Math.floor((e+n[s]+n[a]-l)/t+1);switch(i){case"VALID":return n[s]=0,n[a]=0,Math.floor((e-l)/t+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==r)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let r=((e+t-1)/t-1)*t+o-e;return n[s]=Math.floor("SAME_LOWER"===i?(r+1)/2:r/2),n[a]=r-n[s],Math.floor((e+r-o)/t+1)}default:throw new Error("Unsupported AutoPad type")}}},br=-34028234663852886e22,gr=34028234663852886e22});function Hd(e){switch(e){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${e}`)}}function Fu(e){switch(e){case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.BOOL:return 1;case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT16:return 2;case ne.onnx.TensorProto.DataType.FLOAT:case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.UINT32:return 4;case ne.onnx.TensorProto.DataType.INT64:case ne.onnx.TensorProto.DataType.DOUBLE:case ne.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ne.onnx.TensorProto.DataType[e]}`)}}function qd(e,t){return new(Bu(t))(e)}function Bu(e){switch(e){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function hi(e,t){if(t===ne.onnx.TensorProto.DataType.INT64||t===di.TensorDataType.INT64){if(e.greaterThanOrEqual(2147483648)||e.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(t!==ne.onnx.TensorProto.DataType.UINT32&&t!==di.TensorDataType.UINT32&&t!==ne.onnx.TensorProto.DataType.UINT64&&t!==di.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${ne.onnx.TensorProto.DataType[t]}`);if(e.greaterThanOrEqual(4294967296)||e.lessThan(0))throw new TypeError("uint64 is not supported")}return e.toNumber()}function $u(e,t,r){switch(t){case ne.onnx.TensorProto.DataType.BOOL:case ne.onnx.TensorProto.DataType.UINT8:return e.getUint8(r);case ne.onnx.TensorProto.DataType.INT8:return e.getInt8(r);case ne.onnx.TensorProto.DataType.UINT16:return e.getUint16(r,!0);case ne.onnx.TensorProto.DataType.INT16:return e.getInt16(r,!0);case ne.onnx.TensorProto.DataType.FLOAT:return e.getFloat32(r,!0);case ne.onnx.TensorProto.DataType.INT32:return e.getInt32(r,!0);case ne.onnx.TensorProto.DataType.UINT32:return e.getUint32(r,!0);case ne.onnx.TensorProto.DataType.INT64:return hi(Vt.fromBits(e.getUint32(r,!0),e.getUint32(r+4,!0),!1),t);case ne.onnx.TensorProto.DataType.DOUBLE:return e.getFloat64(r,!0);case ne.onnx.TensorProto.DataType.UINT64:return hi(Vt.fromBits(e.getUint32(r,!0),e.getUint32(r+4,!0),!0),t);default:throw new Error(`cannot read from DataView for type ${ne.onnx.TensorProto.DataType[t]}`)}}var ku,ne,di,$e,yr=L(()=>{ku=Ar(Os()),Zo(),tn(),ne=Ar(Cr()),fe(),di=V.experimental.fbs,$e=class e{constructor(e,t,r,o,n,s=ku.Guid.create()){this.dims=e,this.type=t,this.dataProvider=r,this.asyncDataProvider=o,this.cache=n,this.dataId=s,this.size=U.validateDimsAndCalcSize(e);let a=this.size,i=void 0===r&&void 0===o&&void 0===n;if(void 0!==n&&n.length!==a)throw new RangeError("Input dims doesn't match data length.");if("string"===t){if(!(void 0===n||Array.isArray(n)&&n.every(e=>"string"==typeof e)))throw new TypeError("cache should be a string array");i&&(this.cache=new Array(a))}else{if(void 0!==n){let e=Bu(t);if(!(n instanceof e))throw new TypeError(`cache should be type ${e.name}`)}if(i){let e=new ArrayBuffer(a*Hd(t));this.cache=qd(e,t)}}}get data(){if(void 0===this.cache){let e=this.dataProvider(this.dataId);if(e.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache}get stringData(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")}get(e){return this.data[U.indicesToOffset(e,this.strides)]}set(e,t){this.data[U.indicesToOffset(e,this.strides)]=t}async getData(){return void 0===this.cache&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U.computeStrides(this.dims)),this._strides}static fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let r=We.tensorDataTypeFromProto(t.dataType),o=We.tensorDimsFromProto(t.dims),n=new e(o,r);if("string"===r)t.stringData.forEach((e,t)=>{n.data[t]=sn(e)});else if(t.rawData&&"number"==typeof t.rawData.byteLength&&t.rawData.byteLength>0){let e=n.data,r=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),o=Fu(t.dataType),s=t.rawData.byteLength/o;if(t.rawData.byteLength%o!==0)throw new Error("invalid buffer length");if(e.length!==s)throw new Error("buffer length mismatch");for(let n=0;n<s;n++){let s=$u(r,t.dataType,n*o);e[n]=s}}else{let e;switch(t.dataType){case ne.onnx.TensorProto.DataType.FLOAT:e=t.floatData;break;case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.INT16:case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.BOOL:e=t.int32Data;break;case ne.onnx.TensorProto.DataType.INT64:e=t.int64Data;break;case ne.onnx.TensorProto.DataType.DOUBLE:e=t.doubleData;break;case ne.onnx.TensorProto.DataType.UINT32:case ne.onnx.TensorProto.DataType.UINT64:e=t.uint64Data;break;default:throw new Error("unspecific error")}if(null==e)throw new Error("failed to populate data from a tensorproto value");let r=n.data;if(r.length!==e.length)throw new Error("array length mismatch");for(let o=0;o<e.length;o++){let n=e[o];Vt.isLong(n)?r[o]=hi(n,t.dataType):r[o]=n}}return n}static fromData(t,r,o){return new e(r,o,void 0,void 0,t)}static fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let r=We.tensorDimsFromORTFormat(t),o=We.tensorDataTypeFromProto(t.dataType()),n=new e(r,o);if("string"===o)for(let e=0;e<t.stringDataLength();e++)n.data[e]=t.stringData(e);else if(t.rawDataArray()&&"number"==typeof t.rawDataLength()&&t.rawDataLength()>0){let e=n.data,r=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),o=Fu(t.dataType()),s=t.rawDataLength()/o;if(t.rawDataLength()%o!==0)throw new Error("invalid buffer length");if(e.length!==s)throw new Error("buffer length mismatch");for(let n=0;n<s;n++){let s=$u(r,t.dataType(),n*o);e[n]=s}}return n}}});function H(e){return 1===e?jd:Yd}function Nu(e){let t=H(e);return`${t.version}\n      precision highp float;\n      ${t.attribute} vec3 position;\n      ${t.attribute} vec2 textureCoord;\n\n      ${t.varyingVertex} vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }`}function Ru(e){let t=H(e);return`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFrag} vec2 TexCoords;\n    ${t.outputDeclaration}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    `}function Mu(e,t){return`\n  void main() {\n    int indices[${t}];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ${H(e).output} = result;\n  }\n  `}var jd,Yd,we=L(()=>{jd={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Yd={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=L(()=>{});async function mi(e,t=e=>0,r){return new Promise((o,n)=>{let s=0,a=()=>{if(e())return void o();s++;let i=t(s);null!=r&&s>=r?n():setTimeout(a,i)};a()})}function Yn(e){return Fr(typeof e<"u"&&0!==e.length,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)}function Gu(e){return Fr(typeof e<"u"&&0!==e.length,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)+"AtOutCoords"}function $r(e,t){let r=JSON.parse(JSON.stringify(e));return r=t,r}function kr(e,t){return t.map(t=>e[t]).join(", ")}function Qe(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function Dt(e=6){return["x","y","z","w","u","v"].slice(0,e)}var Bt=L(()=>{fe()});function Xd(e,t){return Dt(t).map(t=>`${e}.${t}`)}function Br(e,t){return 1===t?[e]:Xd(e,t)}function Nt(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}var Tr=L(()=>{Bt()});function Jd(e,t,r){if(0===e)return"false";if(1===e)return`rc > ${t[0]}`;let o="";for(let n=e-2;n<e;n++)o+=`${r[n]} >= ${t[n-e+2]}`,n<e-1&&(o+="||");return o}function Zd(e,t){let r=e.length;if(0===r)return"getA(), 0, 0, 0";if(1===r)return`getA(rc),\n            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),\n            0, 0`;let o="";if(r>2)for(let e=0;e<r-2;++e)o+=`${t[e]},`;return`getA(${o}r, c),\n          rEdge ? 0. : getA(${o}rp1, c),\n          cEdge ? 0. : getA(${o}r, cp1),\n          rEdge || cEdge ? 0. : getA(${o}rp1, cp1)`}function Qd(e,t,r,o){return 0===e||1===e?"":`\n    int r = ${t[e-2]};\n    int c = ${t[e-1]};\n    int rp1 = ${t[e-2]} + 1;\n    int cp1 = ${t[e-1]} + 1;\n    bool rEdge = rp1 >= ${o};\n    bool cEdge = cp1 >= ${r};\n    `}var Uu,Kd,zu,Vu=L(()=>{we(),ae(),Bt(),Tr(),Uu={name:"pack",inputNames:["A"],inputTypes:[1]},Kd=(e,t)=>{let r,o=H(e.session.backend.glContext.version),n=t.dims,s=n.length,a=t.dims.length,i=Qe(a),l=Br("rc",a),c=Qd(a,l,n[n.length-2],n[n.length-1]);r=0===s?[1,1]:1===s?[n[0],1]:[n[a-1],n[a-2]];let _=Jd(a,r,l),p=Zd(n,l),u=`\n        void main() {\n          ${i} rc = getOutputCoords();\n\n          if(${_}) {\n            ${o.output} = vec4(0);\n          } else {\n            ${c}\n\n            ${o.output} = vec4(${p});\n          }\n        }\n      `;return{...Uu,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:2},shaderSource:u}},zu=(e,t)=>({...Uu,get:()=>Kd(e,t)})});function bi(e){if(0===e.length)return[1,1,1];let t=1;for(let r=0;r<e.length-2;++r)t*=e[r];return[t,e.length>1?e[e.length-2]:1,e[e.length-1]]}function Hu(e,t){let r=!1;return r=0===e.length||0===t.length||(e.length<2||t.length<2?e[e.length-1]===t[t.length-1]:e[e.length-1]===t[t.length-1]&&e[e.length-2]===t[t.length-2]),r}function rh(e){let t=U.computeStrides(e),r=["b","r","c"],o="index";return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${t.map((e,n)=>`${`int ${r[n]} = ${o} / ${e}`}; ${n===t.length-1?`int ${r[n+1]} = ${o} - ${r[n]} * ${e}`:`index -= ${r[n]} * ${e}`};`).join("")}\n      return ivec3(b, r, c);\n    }\n  `}function nh(e){let t=U.computeStrides(e);return`\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ${t[0]} + coords.z * ${t[1]} + coords.y;\n  }\n`}var eh,th,Wu,qu=L(()=>{fe(),we(),ae(),Tr(),eh=e=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${e}`}),th=(e,t,r,o)=>{let n=t.dims,s=o,a="";for(let e=0;e<4;e++){let t="";switch(e){case 0:t="outputCoords = rc;";break;case 1:t="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:t="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:t="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}a+=`\n        ${t}\n        ${e>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ${e>0?"}":""}\n      `}let i=H(e.session.backend.glContext.version),l=`\n      ${rh(n)}\n      ${nh(s)}\n      ${Nt()}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ${s[2]};\n        int cols = ${s[1]};\n\n        ${a}\n        ${i.output} = result;\n      }\n    `;return{...r,output:{dims:s,type:t.type,textureType:2},shaderSource:l,hasMain:!0}},Wu=(e,t,r)=>{let o=eh(r);return{...o,get:()=>th(e,t,o,r)}}}),gi,ju=L(()=>{we(),ae(),gi=(e,t)=>{let r=t.shape,o=H(e.session.backend.glContext.version),n=`\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ${o.texture2D}(X,TexCoords).r;\n      ${o.output} = encodeAsUint8(value);\n    }`,s={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:r,type:t.tensor.type,textureType:3},shaderSource:n,hasMain:!0};return e.executeProgram(s,[t.tensor])}});function ih(e,t){if(1===e)return"rc";let r="";for(let o=0;o<e;o++)r+=t[o],o<e-1&&(r+=",");return r}var Yu,oh,Xu,Ku=L(()=>{we(),ae(),Bt(),Tr(),Yu={name:"unpack",inputNames:["A"],inputTypes:[2]},oh=(e,t)=>{let r=t.dims.length,o=Br("rc",r),n=o.slice(-2),s=Qe(r),a=Nt(),i=0===t.dims.length?"":ih(r,o),l=r<=1?"rc":`vec2(${n.join(",")})`,c=`\n    ${a}\n    void main() {\n      ${s} rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(${i});\n\n       ${H(e.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${l}), 0, 0, 0);\n     }\n   `;return{...Yu,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:c}},Xu=(e,t)=>({...Yu,get:()=>oh(e,t)})}),Xn,un,Kn,ln=L(()=>{lt(),Xn=class{constructor(e,t=1){if(1===t)this.internalFormat=e.R32F,this.format=e.RED,this.textureType=e.FLOAT,this.channelSize=t;else{if(4!==t)throw new Error(`Invalid number of channels: ${t}`);this.internalFormat=e.RGBA32F,this.format=e.RGBA,this.textureType=e.FLOAT,this.channelSize=t}}encode(e,t){let r,o;return e.constructor!==Float32Array&&(ce.warning("Encoder","data was not of type Float32; creating new Float32Array"),o=new Float32Array(e)),t*this.channelSize>e.length?(ce.warning("Encoder","Source data too small. Allocating larger array"),o=e,r=this.allocate(t*this.channelSize),o.forEach((e,t)=>r[t]=e)):(o=e,r=o),r}allocate(e){return new Float32Array(4*e)}decode(e,t){return 1===this.channelSize?e.filter((e,t)=>t%4==0).subarray(0,t):e.subarray(0,t)}},un=class{constructor(e,t=1,r){if(1!==t&&4!==t)throw new Error(`Invalid number of channels: ${t}`);this.internalFormat=e.RGBA,this.format=e.RGBA,this.channelSize=t,this.textureType=r||e.FLOAT}encode(e,t){let r=e;return 1===this.channelSize&&(ce.verbose("Encoder","Exploding into a larger array"),r=this.allocate(t),e.forEach((e,t)=>r[4*t]=e)),r}allocate(e){return new Float32Array(4*e)}decode(e,t){return 1===this.channelSize?e.filter((e,t)=>t%4==0).subarray(0,t):e.subarray(0,t)}},Kn=class{constructor(e,t=1){if(this.channelSize=4,1===t)this.internalFormat=e.ALPHA,this.format=e.ALPHA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;else{if(4!==t)throw new Error(`Invalid number of channels: ${t}`);this.internalFormat=e.RGBA,this.format=e.RGBA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t}}encode(e,t){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}allocate(e){return new Uint8Array(e*this.channelSize)}decode(e,t){if(e instanceof Uint8Array)return e.subarray(0,t);throw new Error(`Invalid array type: ${e.constructor}`)}}}),fn,Ju,yi,Zu=L(()=>{fe(),ae(),fn=(e,t,r)=>{let o=0===r||1===r?1:4,n=2===r,s=1===r||2===r,a=4===r?t.length-1:void 0,i=4===r?t.map((e,r)=>r===t.length-1?4*e:e):void 0;return yi(e,t,o,i,{isPacked:n,reverseWH:s,breakAxis:a})},Ju=(e,t,r)=>{let o=fn(e,t,r);return[o.width,o.height]},yi=(e,t,r=1,o,n)=>{let s=!(!n||!n.isPacked),[a,i]=e.computeTextureWH(s&&o||t,n),l=t.length,c=t.slice(0);if(0===l&&(c=[1]),1===r)o=t;else if(s){if(4!==r)throw new Error("a packed texture must be 4-channel");o=t,l>0&&(c[l-1]=Math.ceil(c[l-1]/2)),l>1&&(c[l-2]=Math.ceil(c[l-2]/2))}else if(!o)throw new Error("Unpacked shape is needed when using channels > 1");return{width:a,height:i,channels:r,isPacked:s,shape:c,strides:U.computeStrides(c),unpackedShape:o,reversedWH:n&&n.reverseWH}}}),sh,Jn,el=L(()=>{lt(),yr(),fe(),Vu(),qu(),ju(),Ku(),ln(),Zu(),ae(),sh=(e,t)=>{let r=t.map(e=>`${e.unpackedShape.join(",")};${e.width}x${e.height}`).join("_"),o=e.name;return e.cacheHint&&(o+="["+e.cacheHint+"]"),o+=":"+r,o},Jn=class{constructor(e){this.session=e,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(e,t){return Ju(this.session.layoutStrategy,e,t)}executeProgram(e,t){if(t.length<e.inputNames.length)throw new Error(`Input size mustn't be less than ${e.inputNames.length}.`);if(e.inputNames.length!==e.inputTypes.length)throw new Error("input names size does not match input types");let r=[];for(let o=0;o<e.inputNames.length;++o)r[o]=this.getOrCreateTextureData(t[o],e.inputTypes[o]);let o=sh(e,r),n=this.session.programManager.getArtifact(o),s=n?n.programInfo:"function"==typeof e.get?e.get():e,a=fn(this.session.layoutStrategy,s.output.dims,s.output.textureType),i=this.createTextureData(a,s.output.type);return n||(n=this.session.programManager.build(s,r,i),this.session.programManager.setArtifact(o,n)),this.runProgram(n,r,i),i}run(e,t){return this.executeProgram(e,t).tensor}runProgram(e,t,r){for(let r=0;r<t.length;++r)if(!!t[r].isPacked!=(2===e.programInfo.inputTypes[r]))throw new Error(`input[${r}] property packed inconsistent`);if(!!r.isPacked!=(2===e.programInfo.output.textureType))throw new Error("output property packed inconsistent");this.session.programManager.run(e,t,r)}getOrCreateTextureData(e,t){let r=this.getTextureData(e.dataId,2===t);if(!r&&(r=this.getTextureData(e.dataId,2!==t),r))return 2===t?this.pack(r):this.unpack(r);if(!r){let o=fn(this.session.layoutStrategy,e.dims,t);if(4===t){let r=e.dims;if(4===r.length){let o=[r[0],Math.ceil(r[1]*r[2]*r[3]/4)],n=fn(this.session.layoutStrategy,o,t),s=e.numberData;if(r[1]*r[2]*r[3]%4!=0){let t=r[0],o=r[1]*r[2]*r[3],n=4*Math.ceil(1*o/4);s=new Float32Array(t*n);for(let r=0;r<t;++r){let t=r*o,a=r*n+r%1*o;s.set(e.numberData.subarray(t,t+o),a)}}return this.createTextureData(n,e.type,s,e,1)}}if(2===t){let t=yi(this.session.layoutStrategy,e.dims,1,[],{reverseWH:!0}),o=this.createTextureData(t,e.type,e.numberData,e,1);r=this.pack(o)}else r=this.createTextureData(o,e.type,e.numberData,e,1)}return r}createTextureDataFromLayoutBindTensor(e,t,r,o){return this.createTextureData(e,t,r,o,1)}createTextureData(e,t,r,o,n){ce.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(e)}]`);let s=this.session.textureManager.createTextureFromLayout(t,e,r,n);return this.createTextureDataFromTexture(e,t,s,o)}reshapeUnpacked(e,t){let r=this.getOrCreateTextureData(e,0),o={channels:r.channels,height:r.height,width:r.width,shape:0!==t.length?t:[1],strides:U.computeStrides(t),unpackedShape:t};return this.createTextureDataFromTexture(o,e.type,r.texture).tensor}reshapePacked(e,t){let r=this.getOrCreateTextureData(e,2);if(Hu(e.dims,t)){let o={channels:r.channels,height:r.height,width:r.width,shape:0!==t.length?t:[1],strides:U.computeStrides(t),unpackedShape:t,isPacked:!0};return this.createTextureDataFromTexture(o,e.type,r.texture).tensor}let o=bi(e.dims),n=bi(t),s=this.reshapePacked(e,o),a=this.run(Wu(this,s,n),[s]);return this.reshapePacked(a,t)}cast(e,t){let r=this.getOrCreateTextureData(e,0);return this.createTextureDataFromTexture(r,t,r.texture).tensor}createTextureDataFromTexture(e,t,r,o,n){let s={...e,tensor:o||new $e(e.unpackedShape,t,e=>this.readTexture(s),async e=>this.readTextureAsync(s),void 0,n),texture:r};return this.setTextureData(s.tensor.dataId,s,e.isPacked),s}getTextureData(e,t=!1){return this.session.isInitializer(e)?this.session.getTextureData(e,t):t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,t,r=!1){this.session.isInitializer(e)?this.session.setTextureData(e,t,r):(r?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e,t)}isTextureLayoutCached(e,t=!1){return!!this.getTextureData(e.dataId,t)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.unpackedTextureDataCache=new Map}readTexture(e){return e.isPacked?this.readTexture(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,e))}async readTextureAsync(e){return e.isPacked?this.readTextureAsync(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,e))}pack(e){return this.executeProgram(zu(this,e.tensor),[e.tensor])}unpack(e){return this.executeProgram(Xu(this,e.tensor),[e.tensor])}}}),Ti,Q,Ue=L(()=>{Ti=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},Q=e=>new Ti(e)}),tl,rl,nl,uh,lh,ol=L(()=>{Ue(),we(),ae(),tl={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},rl=(e,t,r)=>(lh(t),[e.run({...tl,cacheHint:r.cacheKey,get:()=>uh(e,t,r)},t)]),nl=e=>{let t=e.attributes.getFloat("epsilon",1e-5),r=e.attributes.getFloat("momentum",.9),o=e.attributes.getInt("spatial",1);return Q({epsilon:t,momentum:r,spatial:o})},uh=(e,t,r)=>{let o=H(e.session.backend.glContext.version),n=t[0].dims.length,[s,a]=e.calculateTextureWidthAndHeight(t[1].dims,0),i=`\n  float process(int[${n}] indices) {\n    vec2 position = offsetToCoords(indices[1], ${s}, ${a});\n    float scale = getColorAsFloat(${o.texture2D}(Scale, position));\n    float mean = getColorAsFloat(${o.texture2D}(Mean, position));\n    float variance = getColorAsFloat(${o.texture2D}(Variance, position));\n    float b = getColorAsFloat(${o.texture2D}(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${r.epsilon})) ) + b;\n  }`;return{...tl,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:i}},lh=e=>{if(!e||5!==e.length)throw new Error("BatchNormalization requires 5 inputs.");let t=e[0],r=e[1],o=e[2],n=e[3],s=e[4];if(t.dims.length<3||1!==r.dims.length||1!==o.dims.length||1!==n.dims.length||1!==s.dims.length)throw new Error("invalid input shape.");if(r.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1]||n.dims[0]!==t.dims[1]||s.dims[0]!==t.dims[1])throw new Error("invalid input shape.");if("float32"!==t.type&&"float64"!==t.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==o.type&&"float64"!==o.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==s.type&&"float64"!==s.type)throw new Error("invalid input tensor types.")}}),Zn,dt,R,cn,Qn,Wt=L(()=>{Zn=class{constructor(e,t,r,o){this.glContext=e,this.programInfo=t,this.inputTextureLayouts=r,this.outputTextureLayout=o}},dt=class{constructor(e){this.context=e}},R=class{constructor(e,t){this.routineBody=e,this.dependencies=t}},cn=class{constructor(e,t,r){this.name=e,this.dependencies=r||[],t&&(this.routineBody=t)}addDependency(e){e&&this.dependencies.push(e)}},Qn=class{static returnOrderedNodes(e){if(!e||0===e.length)return[];if(1===e.length)return e;let t=new Set,r=new Set,o=new Array;return this.createOrderedNodes(e,t,r,o),o}static createOrderedNodes(e,t,r,o){for(let n=0;n<e.length;++n)this.dfsTraverse(e[n],t,r,o)}static dfsTraverse(e,t,r,o){if(!e||r.has(e.name))return;if(t.has(e.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");t.add(e.name);let n=e.dependencies;if(n&&n.length>0)for(let e=0;e<n.length;++e)this.dfsTraverse(n[e],t,r,o);o.push(e),r.add(e.name),t.delete(e.name)}}});function ch(){let e="add_";return{body:`\n  float ${e}(float a, float b) {\n    return a + b;\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  `,name:e,type:0}}function ph(){let e="div_";return{body:`\n  float ${e}(float a, float b) {\n    return a / b;\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  `,name:e,type:0}}function dh(){let e="mul_";return{body:`\n  float ${e}(float a, float b) {\n    return a * b;\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  `,name:e,type:0}}function hh(){let e="sub_";return{body:`\n  float ${e}(float a, float b) {\n    return a - b;\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  `,name:e,type:0}}function mh(){let e="equal_";return{body:`\n  float ${e}(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  `,name:e,type:0}}function bh(){let e="greater_";return{body:`\n  float ${e}(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  `,name:e,type:0}}function gh(){let e="less_";return{body:`\n  float ${e}(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  `,name:e,type:0}}function yh(){let e="and_";return{body:`\n  float ${e}(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  `,name:e,type:0}}function Th(){let e="or_";return{body:`\n  float ${e}(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  `,name:e,type:0}}function xh(){let e="xor_";return{body:`\n  float ${e}(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  `,name:e,type:0}}function wh(){return _h("pow")}function vh(){let e="prelu_";return{body:`\n  float ${e}(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  `,name:e,type:0}}function _h(e){let t=`${e}_`;return{body:`\n  float ${t}(float a, float b) {\n    return ${e}(a, b);\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return ${e}(v1, v2);\n  }\n  `,name:t,type:0}}var ht,Oh,il,al,sl,ul,ll,fl,cl,pl,dl,hl,ml,bl,gl=L(()=>{fe(),Wt(),we(),ae(),ht=(e,t,r,o=t[0].type,n)=>{let s=e.session.pack?2:0;return{name:r.name,inputNames:["A","B"],inputTypes:[s,s],cacheHint:n,get:()=>Oh(e,t,r,o)}},Oh=(e,t,r,o=t[0].type)=>{let n=e.session.pack?2:0,s=!U.areEqual(t[0].dims,t[1].dims),a=t[0].dims,i=e.session.pack;if(s){let s=Ze.calcShape(t[0].dims,t[1].dims,!1);if(!s)throw new Error("Can't perform binary op on the given tensors");a=s;let l=a.length,c=0!==t[0].dims.length?t[0].dims.length:1,_=0!==t[1].dims.length?t[1].dims.length:1,p=0!==t[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",u=0!==t[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",d=H(e.session.backend.glContext.version),h=i?`\n      ${r.body}\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ${r.name}(a, b);\n        ${d.output} = result;\n      }`:`\n      ${r.body}\n      float process(int indices[${l}]) {\n        int aindices[${c}];\n        int bindices[${_}];\n        ${p}\n        ${u}\n        return ${r.name}(_A(aindices), _B(bindices));\n      }`;return{name:r.name,inputNames:["A","B"],inputTypes:[n,n],output:{dims:a,type:o,textureType:n},shaderSource:h,hasMain:i}}let l=H(e.session.backend.glContext.version),c=`\n    ${r.body}\n    void main() {\n      vec4 v1 = ${l.texture2D}(A, TexCoords);\n      vec4 v2 = ${l.texture2D}(B, TexCoords);\n      vec4 result = ${r.name}(v1, v2);\n      ${l.output} = result;\n    }\n    `;return{name:r.name,inputNames:["A","B"],inputTypes:[n,n],output:{dims:t[0].dims,type:o,textureType:n},shaderSource:c,hasMain:!0}},il=(e,t)=>[e.run(ht(e,t,ch()),t)],al=(e,t)=>[e.run(ht(e,t,yh(),"bool"),t)],sl=(e,t)=>[e.run(ht(e,t,ph()),t)],ul=(e,t)=>[e.run(ht(e,t,mh(),"bool"),t)],ll=(e,t)=>[e.run(ht(e,t,bh(),"bool"),t)],fl=(e,t)=>[e.run(ht(e,t,gh(),"bool"),t)],cl=(e,t)=>[e.run(ht(e,t,dh()),t)],pl=(e,t)=>[e.run(ht(e,t,Th(),"bool"),t)],dl=(e,t)=>[e.run(ht(e,t,wh()),t)],hl=(e,t)=>[e.run(ht(e,t,vh()),t)],ml=(e,t)=>[e.run(ht(e,t,hh()),t)],bl=(e,t)=>[e.run(ht(e,t,xh(),"bool"),t)]}),yl,Tl,Sh,xl=L(()=>{fe(),yl=(e,t,r)=>(Sh(t),[e.cast(t[0],r)]),Tl=e=>We.tensorDataTypeFromProto(e.attributes.getInt("to")),Sh=e=>{if(!e||1!==e.length)throw new Error("Cast requires 1 input.");if("string"===e[0].type)throw new Error("Invalid input type.")}}),Ah,Ph,wl,eo,vl=L(()=>{we(),ae(),Bt(),Tr(),Ah=(e,t)=>({name:"Concat (packed)",inputNames:Array.from({length:e},(e,t)=>`X${t}`),inputTypes:Array(e).fill(2),cacheHint:t}),Ph=(e,t,r,o)=>{let n=r[0].dims.slice();if(o>=n.length||o<-1*n.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=n.length+o);let s=n.slice(0);for(let e=1;e<r.length;e++){let t=r[e].dims.slice();for(let e=0;e<n.length;e++)if(e===o)s[o]+=t[e];else if(n[e]!==t[e])throw new Error("non concat dimensions must match")}let a=s.length,i=Br("coords",a),l=Qe(a),c=Nt(),_=r.map(e=>e.dims),p=Dt(a),u=new Array(_.length-1);u[0]=_[0][o];for(let e=1;e<u.length;e++)u[e]=u[e-1]+_[e][o];let d=p[o],h=p.slice(-2),f=p.join(),m=`if (${d} < ${u[0]}) {\n        return getChannel(\n            getX0(${f}), vec2(${h.join()}));\n        }`;for(let e=1;e<u.length;e++){let t=u[e-1];m+=`\n            if (${d} < ${u[e]}  && ${d} >= ${u[e-1]}) {\n              return getChannel(\n                getX${e}(${eo(p,d,t)}),\n                vec2(${eo(h,d,t)}));\n            }`}let g=u.length,b=u[u.length-1];m+=`\n            return getChannel(\n              getX${g}(${eo(p,d,b)}),\n              vec2(${eo(h,d,b)}));`;let w=H(e.session.backend.glContext.version),x=`\n          ${c}\n          float getValue(${p.map(e=>"int "+e)}) {\n            ${m}\n          }\n\n          void main() {\n            ${l} coords = getOutputCoords();\n            int lastDim = coords.${p[a-1]};\n            coords.${p[a-1]} = coords.${p[a-2]};\n            coords.${p[a-2]} = lastDim;\n\n            vec4 result = vec4(getValue(${i}), 0., 0., 0.);\n\n            ${i[a-1]} = ${i[a-1]} + 1;\n            if (${i[a-1]} < ${s[a-1]}) {\n              result.g = getValue(${i});\n            }\n\n            ${i[a-2]} = ${i[a-2]} + 1;\n            if (${i[a-2]} < ${s[a-2]}) {\n              result.a = getValue(${i});\n            }\n\n            ${i[a-1]} = ${i[a-1]} - 1;\n            if (${i[a-2]} < ${s[a-2]} &&\n                ${i[a-1]} < ${s[a-1]}) {\n              result.b = getValue(${i});\n            }\n            ${w.output} = result;\n          }\n        `;return{...t,output:{dims:s,type:r[0].type,textureType:2},shaderSource:x,hasMain:!0}},wl=(e,t,r)=>{let o=Ah(t.length,r.cacheKey);return{...o,get:()=>Ph(e,o,t,r.axis)}},eo=(e,t,r)=>{let o=e.indexOf(t);return e.map((e,t)=>t===o?`${e} - ${r}`:e).join()}}),_l,Eh,Dh,Lh,Ol,Ch,Fh,$h,Il,kh,Sl=L(()=>{Ue(),ae(),vl(),_l=(e,t,r)=>(kh(t),e.session.pack&&t[0].dims.length>1?[e.run(wl(e,t,r),t)]:[e.run(Lh(e,t,r),t)]),Eh=(e,t)=>({name:"Concat",inputNames:Array.from({length:e},(e,t)=>`X${t}`),inputTypes:Array(e).fill(0),cacheHint:t}),Dh=(e,t,r,o)=>{let n=r[0].dims.slice();if(o>=n.length||o<-1*n.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=n.length+o);let s=n.slice(0);for(let e=1;e<r.length;e++){let t=r[e].dims.slice();for(let e=0;e<n.length;e++)if(e===o)s[o]+=t[e];else if(n[e]!==t[e])throw new Error("non concat dimensions must match")}let a=s.length,i=new Array(r.length),l=0;for(let e=0;e<i.length;++e)l+=r[e].dims[o],i[e]=l;let c="";c=r.length<5?Ol(i):Ch(i);let _=`\n        ${Fh(r.length,a)}\n        ${$h(i)}\n        ${c}\n        float process(int indices[${a}]) {\n          int textureIndex = getTextureWhereDataResides (indices[${o}]);\n\n          if(textureIndex != 0) {\n            indices[${o}] = indices[${o}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }`;return{...t,output:{dims:s,type:r[0].type,textureType:0},shaderSource:_}},Lh=(e,t,r)=>{let o=Eh(t.length,r.cacheKey);return{...o,get:()=>Dh(e,o,t,r.axis)}},Ol=e=>`int getTextureWhereDataResides(int index) {\n      ${e.map((e,t)=>`if(index<${e}) {return ${t};}\n`).join("")}\n    }`,Ch=e=>Ol(e),Fh=(e,t)=>{let r=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${t}]) {`];for(let t=0;t<e;++t)0===t?r.push(`\tif (textureIndex == ${t}) { return _X${t}(indices); }`):t===e-1?r.push(`\telse { return _X${t}(indices); }`):r.push(`\telse if (textureIndex == ${t}) { return _X${t}(indices); }`);return r.push("\t}"),r.join("\n")},$h=e=>{let t=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let r=0;r<e.length;++r)0===r?t.push(`\tif (index == ${r}) { return ${e[r]}; }`):r===e.length-1?t.push(`\telse { return ${e[r]}; }`):t.push(`\telse if (index == ${r}) { return ${e[r]}; }`);return t.push("\t}"),t.join("\n")},Il=e=>Q({axis:e.attributes.getInt("axis")}),kh=e=>{if(!e||e.length<1)throw new Error("too few inputs");let t=e[0].type,r=e[0].dims.length;if("string"===t)throw new Error("string tensor is not supported yet");for(let o of e){if(o.type!==t)throw new Error("input tensors should be one type");if(o.dims.length!==r)throw new Error("input tensors should have the same shape")}}});function Bh(){return mt("abs")}function Nh(){return mt("acos")}function Rh(){return mt("asin")}function Mh(){return mt("atan")}function Gh(){return mt("ceil")}function Uh(){return mt("cos")}function zh(e){let t="elu";return{body:`\n  const float alpha = float(${e});\n\n  float ${t}_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ${t}_(vec4 v) {\n    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));\n  }\n  `,name:t,type:0}}function Vh(){return mt("exp")}function Wh(){return mt("floor")}function xi(e,t){let r="clip";return{body:`\n  const float min = float(${e});\n  const float max = float(${t});\n\n  float ${r}_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ${r}_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  `,name:r,type:0}}function Hh(){let e="indentity";return{body:`\n  float ${e}_(float a) {\n    return a;\n  }\n  vec4 ${e}_(vec4 v) {\n    return v;\n  }\n  `,name:e,type:0}}function qh(e){let t="leakyRelu";return{body:`\n  const float alpha = float(${e});\n\n  float ${t}_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ${t}_(vec4 v) {\n    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));\n  }\n  `,name:t,type:0}}function jh(){return mt("log")}function Yh(){let e="neg";return{body:`\n  float ${e}_(float a) {\n    return -a;\n  }\n  vec4 ${e}_(vec4 v) {\n    return -v;\n  }\n  `,name:e,type:0}}function Xh(){let e="not";return{body:`\n  float ${e}_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ${e}_(bool a) {\n    return !a;\n  }\n  vec4 ${e}_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ${e}_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  `,name:e,type:0}}function Kh(){return mt("sin")}function wi(){let e="relu";return{body:`\n  float ${e}_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ${e}_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  `,name:e,type:0}}function vi(){let e="sigmoid";return{body:`\n  float ${e}_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ${e}_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  `,name:e,type:0}}function Jh(){return mt("sqrt")}function Zh(){return mt("tan")}function Qh(){let e="tanh";return{body:`\n  float ${e}_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ${e}_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  `,name:e,type:0}}function mt(e){return{body:`\n  float ${e}_(float a) {\n    return ${e}(a);\n  }\n  vec4 ${e}_(vec4 v) {\n    return ${e}(v);\n  }\n  `,name:e,type:0}}var em,Ee,Al,Pl,El,Dl,_i,Ll,Cl,tm,Fl,$l,kl,Bl,Nl,Rl,Oi,Ml,Gl,Ul,zl,Vl,Wl,Hl,ql,jl,Yl,Xl,Ii=L(()=>{Ue(),fe(),Wt(),we(),ae(),em=(e,t,r,o)=>{let n=e.session.pack?2:0,s=H(e.session.backend.glContext.version);return{...t,output:{dims:r.dims,type:r.type,textureType:n},shaderSource:`\n     ${o.body}\n     void main() {\n       vec4 v = ${s.texture2D}(A, TexCoords);\n       v = ${o.name}_(v);\n       ${s.output} = v;\n     }\n     `,hasMain:!0}},Ee=(e,t,r,o)=>{let n=e.session.pack?2:0,s={name:r.name,inputTypes:[n],inputNames:["A"],cacheHint:o};return{...s,get:()=>em(e,s,t,r)}},Al=(e,t)=>[e.run(Ee(e,t[0],Bh()),t)],Pl=(e,t)=>[e.run(Ee(e,t[0],Nh()),t)],El=(e,t)=>[e.run(Ee(e,t[0],Rh()),t)],Dl=(e,t)=>[e.run(Ee(e,t[0],Mh()),t)],_i=(e,t,r)=>[e.run(Ee(e,t[0],xi(r.min,r.max),r.cacheKey),t)],Ll=e=>Q({min:e.attributes.getFloat("min",br),max:e.attributes.getFloat("max",gr)}),Cl=(e,t)=>{let r=tm(e,t);return _i(e,[t[0]],r)},tm=(e,t)=>{if(t.length>=3&&(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let r=t.length>=3?t[1].numberData[0]:br,o=t.length>=3?t[2].numberData[0]:gr;return Q({min:r,max:o})},Fl=(e,t)=>[e.run(Ee(e,t[0],Gh()),t)],$l=(e,t)=>[e.run(Ee(e,t[0],Uh()),t)],kl=(e,t,r)=>[e.run(Ee(e,t[0],zh(r.alpha),r.cacheKey),t)],Bl=e=>Q({alpha:e.attributes.getFloat("alpha",1)}),Nl=(e,t)=>[e.run(Ee(e,t[0],Vh()),t)],Rl=(e,t)=>[e.run(Ee(e,t[0],Wh()),t)],Oi=(e,t)=>[e.run(Ee(e,t[0],Hh()),t)],Ml=(e,t,r)=>[e.run(Ee(e,t[0],qh(r.alpha),r.cacheKey),t)],Gl=e=>Q({alpha:e.attributes.getFloat("alpha",.01)}),Ul=(e,t)=>[e.run(Ee(e,t[0],jh()),t)],zl=(e,t)=>[e.run(Ee(e,t[0],Yh()),t)],Vl=(e,t)=>[e.run(Ee(e,t[0],Xh()),t)],Wl=(e,t)=>[e.run(Ee(e,t[0],wi()),t)],Hl=(e,t)=>[e.run(Ee(e,t[0],vi()),t)],ql=(e,t)=>[e.run(Ee(e,t[0],Kh()),t)],jl=(e,t)=>[e.run(Ee(e,t[0],Jh()),t)],Yl=(e,t)=>[e.run(Ee(e,t[0],Zh()),t)],Xl=(e,t)=>[e.run(Ee(e,t[0],Qh()),t)]});function Rt(e){let t;switch(e.activation){case"Relu":t=wi();break;case"Sigmoid":t=vi();break;case"Clip":t=xi(e.clipMin,e.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let r=t.name;return{activationFunction:t.body,applyActivation:`value = ${r}_(value);`}}var Nr,xr=L(()=>{fe(),Ii(),Nr=e=>{let t=e.getString("activation","");if("Clip"===t){let[r,o]=e.getFloats("activation_params",[br,gr]);return{activation:t,clipMax:o,clipMin:r,activationCacheKey:`${t}:${r},${o}`}}return{activation:t,activationCacheKey:t}}}),nm,om,Kl,Jl=L(()=>{lt(),we(),ae(),to(),xr(),nm=(e,t)=>({name:"GroupedConv",inputNames:e?["X","W","Bias"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t}),om=(e,t,r,o)=>{let n=t.length>2?"value += getBias(output_channel);":"",s=t[0].dims.slice(),a=t[1].dims.slice(),i=a[0]/o.group;ce.verbose("GroupedConv",`autpPad:${o.autoPad}, dilations:${o.dilations}, group:${o.group}, kernelShape:${o.kernelShape}, pads:${o.pads}, strides:${o.strides}`);let l=Rr(s,a,o.dilations,o.pads,o.strides),c=H(e.session.backend.glContext.version),{activationFunction:_,applyActivation:p}=Rt(o),u=`\n  const ivec2 strides = ivec2(${o.strides[0]}, ${o.strides[1]});\n  const ivec2 pads = ivec2(${o.pads[0]}, ${o.pads[1]});\n  ${_}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ${i};\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ${a[1]}; wInChannel++) {\n      int input_channel = group_id * ${a[1]} + wInChannel;\n      for (int wHeight = 0; wHeight < ${a[2]}; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ${o.dilations[0]};\n\n        if (xHeight < 0 || xHeight >= ${s[2]}) {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ${a[3]}; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ${o.dilations[1]};\n          if (xWidth < 0 || xWidth >= ${s[3]}) {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${n}\n    ${p}\n    ${c.output} = vec4(value, .0, .0, .0);\n  }\n`;return{...r,output:{dims:l,type:t[0].type,textureType:0},shaderSource:u,hasMain:!0}},Kl=(e,t,r)=>{let o=nm(t.length>2,r.cacheKey);return{...o,get:()=>om(e,t,o,r)}}}),im,am,Zl,Ql=L(()=>{we(),ae(),Tr(),im=e=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:e}),am=(e,t,r,o,n,s)=>{let a=r.dims,i=o.dims,l=n.length,c=[i[1]*i[2]*i[3],n[2]*n[3]],_=i[2]*i[3],p=Nt(),u=H(e.session.backend.glContext.version),d="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)d+=`\n            blockIndex = rc.x + ${t};\n            pos = rc.y + ${e};\n\n            if(blockIndex < ${c[1]} && pos < ${c[0]}) {\n              offsetY = int(blockIndex / (${n[l-1]})) * ${s.strides[0]} -\n                ${s.pads[0]};\n              d0 = offsetY + ${s.dilations[0]} * (imod(pos, ${_}) / ${i[2]});\n\n              if(d0 < ${a[2]} && d0 >= 0) {\n                offsetX = imod(blockIndex, ${n[l-1]}) * ${s.strides[1]} -\n                  ${s.pads[1]};\n                d1 = offsetX + ${s.dilations[1]} * imod(imod(pos, ${_}), ${i[2]});\n\n                if(d1 < ${a[3]} && d1 >= 0) {\n\n                  ch = int(float(pos)/ ${_}.);\n                    innerDims = vec2(d0, d1);\n                    result[${2*e+t}] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          `;let h=`\n      ${p}\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ${d}\n          ${u.output} = result;\n      }\n            `;return{...t,output:{dims:c,type:r.type,textureType:2},shaderSource:h,hasMain:!0}},Zl=(e,t,r,o,n)=>{let s=im(n.cacheKey);return{...s,get:()=>am(e,s,t,r,o,n)}}});function um(e,t,r){let o=t[0].dims,n=t[1].dims,s=Ze.calcShape(o,n,!0);if(!s)throw new Error("Can't use matmul on the given tensors");let a=Qe(s.length),i=Dt(),{activationFunction:l,applyActivation:c}=Rt(r),_=t.length>2,p=_?"value += getBiasForMatmul();":"",u=_?`${Ai(a,i,t[2].dims,s,!1)}`:"",d=s.length,h=o.length,f=n.length,m=`\n    ${l}\n    ${u}\n    float process(int indices[${d}]) {\n        int a[${h}];\n        int b[${f}];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<${o[o.length-1]}; ++k) {\n            a[${h-1}] = k;\n            b[${f-2}] = k;\n            value += _A(a) * _B(b);\n        }\n        ${p}\n        ${c}\n        return value;\n    }`;return{...e,output:{dims:s,type:t[0].type,textureType:0},shaderSource:m}}function Si(e,t){let r=sm(e.length>2,t.activationCacheKey);return{...r,get:()=>um(r,e,t)}}function Ai(e,t,r,o,n){let s="",a=r.length,i=o.length,l=i-a;s=i<2&&a>0?"coords":r.map((e,r)=>`coords.${t[r+l]}`).join(", ");let c=Ze.getBroadcastDims(r,o).map(e=>`coords.${t[e+l]} = 0;`).join("\n"),_="vec4(outputValue.xx, outputValue.yy)";return 1===U.size(r)&&(_="vec4(outputValue.x)"),n?`\nvec4 getBiasForMatmul() {\n  ${e} coords = getOutputCoords();\n  ${c}\n  vec4 outputValue = getBias(${s});\n  return ${_};\n}`:`\nfloat getBiasForMatmul() {\n  ${e} coords = getOutputCoords();\n  ${c}\n  return getBias(coords.x);\n}`}var ef,tf,sm,lm,ro=L(()=>{fe(),ae(),Bt(),xr(),Pi(),ef=(e,t,r)=>(lm(t),e.session.pack?[e.run(no(e,t,r),t)]:[e.run(Si(t,r),t)]),tf=e=>Nr(e.attributes),sm=(e,t)=>({name:"MatMul",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t}),lm=e=>{if(!e||2!==e.length)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type)throw new Error("inputs should be float type");if(e[0].type!==e[1].type)throw new Error("inputs types should match")}});function pm(e,t,r,o){let n=[],s=[],a=r[0].dims,i=r[1].dims,l=a.length,c=i.length,_=o.length,p=_-l,u=_-c;n=a.map((e,r)=>`coords.${t[r+p]}`),n[l-1]="i*2",n.join(", "),s=i.map((e,r)=>`coords.${t[r+u]}`),s[c-2]="i*2",s.join(", ");let d=Ze.getBroadcastDims(a,o),h=Ze.getBroadcastDims(i,o),f=d.map(e=>`coords.${t[e+p]} = 0;`).join("\n"),m=h.map(e=>`coords.${t[e+u]} = 0;`).join("\n"),g=`int lastDim = coords.${t[_-1]};\n  coords.${t[_-1]} = coords.${t[_-2]};\n  coords.${t[_-2]} = lastDim;`;return`\nvec4 getAAtOutCoordsMatmul(int i) {\n  ${e} coords = getOutputCoords();\n  ${g}\n  ${f}\n  vec4 outputValue = getA(${n});\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ${e} coords = getOutputCoords();\n  ${g}\n  ${m}\n  vec4 outputValue = getB(${s});\n  return outputValue;\n}`}function dm(e,t){let r="";for(let o=0;o<t-2;o++)r+=`rc.${e[o]}, `;return r+=`rc.${e[t-2]}, i*2`,r}function hm(e,t){let r="";for(let o=0;o<t-2;o++)r+=`rc.${e[o]}, `;return r+=`i*2, rc.${e[t-1]}`,r}var fm,cm,no,Pi=L(()=>{fe(),we(),ae(),Bt(),xr(),ro(),fm=(e,t)=>({name:"MatMul (packed)",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[2,2,2]:[2,2],cacheHint:t}),cm=(e,t,r,o)=>{let n=r.length>2,s=n?"value += getBiasForMatmul();":"",a=r[0].dims,i=r[1].dims,l=Ze.calcShape(a,i,!0),c=!U.areEqual(r[0].dims,r[1].dims);if(!l)throw new Error("Can't use matmul on the given tensors");let _=a[a.length-1],p=Math.ceil(_/2),u=a.length,d=i.length,h=H(e.session.backend.glContext.version),f=Qe(l.length),m=l.length,g=Dt(),{activationFunction:b,applyActivation:w}=Rt(o),x=n?`${Ai(f,g,r[2].dims,l,!0)}`:"",y=c?`${pm(f,g,r,l)}`:"",M=c?"getAAtOutCoordsMatmul(i)":`getA(${dm(g,u)})`,T=c?"getBAtOutCoordsMatmul(i)":`getB(${hm(g,d)})`,k=`\n            ${y}\n            ${x}\n            ${b}\n            void main() {\n              ${c?"":`${f} rc =\n          getOutputCoords(); int lastDim = rc.${g[m-1]}; rc.${g[m-1]} =\n          rc.${g[m-2]}; rc.${g[m-2]} = lastDim;\n      `}\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ${p}; i++) {\n                vec4 a = ${M};\n                vec4 b = ${T};\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ${s}\n              ${w}\n              ${h.output} = value;\n            }`;return{...t,output:{dims:l,type:r[0].type,textureType:2},shaderSource:k,hasMain:!0}},no=(e,t,r)=>{let o=fm(t.length>2,r.activationCacheKey);return{...o,get:()=>cm(e,o,t,r)}}}),rf,nf=L(()=>{to(),Ql(),Pi(),rf=(e,t,r)=>{let o=t[0].dims,n=t[1].dims,s=Rr(o,n,r.dilations,r.pads,r.strides),a=e.run(Zl(e,t[0],t[1],s,r),[t[0]]),i=e.reshapePacked(t[1],[n[0],n[1]*n[2]*n[3]]),l=3===t.length?[i,a,t[2]]:[i,a],c=e.run(no(e,l,r),l);return e.reshapePacked(c,s)}}),mm,bm,of,Ei,Di=L(()=>{ae(),mm=e=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:e}),bm=(e,t,r,o,n,s)=>{let a=r.dims,i=o.dims,l=n.length,c=Ei(a,i,n,4),_=`\n        const int XC = ${a[1]};\n        const int XH = ${a[2]};\n        const int XW = ${a[3]};\n        const int KH = ${s.kernelShape[0]};\n        const int KW = ${s.kernelShape[1]};\n        const int dilationH = ${s.dilations[0]};\n        const int dilationW = ${s.dilations[1]};\n        const int strideH = ${s.strides[0]};\n        const int strideW = ${s.strides[1]};\n        const int padH = ${s.pads[0]};\n        const int padW = ${s.pads[1]};\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[${l}]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[${a.length}];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        `;return{...t,output:{dims:c,type:r.type,textureType:4},shaderSource:_}},of=(e,t,r,o,n)=>{let s=mm(n.cacheKey);return{...s,get:()=>bm(e,s,t,r,o,n)}},Ei=(e,t,r,o=4)=>[r[0],r[2],r[3],Math.ceil(e[1]*t[2]*t[3]/o)]}),gm,ym,af,sf=L(()=>{fe(),we(),ae(),xr(),Di(),gm=(e,t)=>({name:"ConvDotProduct",inputNames:e?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:e?[0,4,0]:[0,4],cacheKey:t.activationCacheKey}),ym=(e,t,r,o,n)=>{let s=r[0].dims,a=r[1].dims,i=[a[0],Math.ceil(s[1]*a[2]*a[3]/4)],l=Ei(s,a,o),[c,_]=e.calculateTextureWidthAndHeight(i,4),p=U.computeStrides(l),[u,d]=e.calculateTextureWidthAndHeight(l,4),h=o.length,f=r.length<3?"0.0":"_B(b)",m=Math.ceil(s[1]*a[2]*a[3]/4),{activationFunction:g,applyActivation:b}=Rt(n),w=H(e.session.backend.glContext.version),x=`\n${g}\nfloat process(int indices[${h}]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ${p[0]} + im2col[1] * ${p[1]} + im2col[2] * ${p[2]};\n  int kernelOffset = indices[1] * ${i[1]};\n  float value = ${f};\n  for (int i = 0; i < ${m}; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ${u}, ${d});\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ${c}, ${_});\n    value += dot(${w.texture2D}(Im2Col, im2colCoords), ${w.texture2D}(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ${b}\n  return value;\n}`;return{...t,output:{dims:o,type:r[0].type,textureType:0},shaderSource:x}},af=(e,t,r,o)=>{let n=gm(t.length>2,o);return{...n,get:()=>ym(e,n,t,r,o)}}}),Rr,Li,Tm,xm,wm,vm,Ci,_m,to=L(()=>{Ue(),fe(),Jl(),nf(),sf(),xr(),Di(),ro(),Rr=(e,t,r,o,n)=>{let s=e[0],a=e.slice(2),i=a.length,l=t[0],c=t.slice(2).map((e,t)=>e+(e-1)*(r[t]-1)),_=a.map((e,t)=>e+o[t]+o[t+i]).map((e,t)=>Math.floor((e-c[t]+n[t])/n[t]));return[s,l].concat(..._)},Li=(e,t,r)=>(_m(t,r),Tm(e,t,r)),Tm=(e,t,r)=>{let o=vm(r,t),n=e.session.pack,s=1===o.kernelShape[0]&&1===o.kernelShape[1];return o.group>1?[e.run(Kl(e,t,o),t)]:s&&n?[xm(e,t,o)]:n&&4===t[0].dims.length&&1===t[0].dims[0]&&!s?[rf(e,t,o)]:[wm(e,t,o)]},xm=(e,t,r)=>{let o=t[0].dims,n=t[1].dims,s=Rr(o,n,r.dilations,r.pads,r.strides),a=e.reshapeUnpacked(t[0],[o[1],o[2]*o[3]]),i=e.reshapeUnpacked(t[1],[n[0],n[1]]),l=t.length>2?[i,a,t[2]]:[i,a],c=e.run(Si(l,r),l);return e.reshapeUnpacked(c,s)},wm=(e,t,r)=>{let o=t[0].dims,n=t[1].dims,s=Rr(o,n,r.dilations,r.pads,r.strides),a=e.run(of(e,t[0],t[1],s,r),[t[0]]),i=3===t.length?[a,t[1],t[2]]:[a,t[1]];return e.run(af(e,t,s,r),i)},vm=(e,t)=>{let r=e.kernelShape.slice();if(0===e.kernelShape.length)for(let e=2;e<t[1].dims.length;++e)r.push(t[1].dims[e]);let o=e.pads.slice();mr.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,o,e.autoPad);let n=Object.assign({},e);return Object.assign(n,{kernelShape:r,pads:o,cacheKey:e.cacheKey}),n},Ci=e=>{let t=e.attributes,r=Nr(t),o=t.getString("auto_pad","NOTSET"),n=t.getInts("dilations",[1,1]),s=t.getInt("group",1),a=t.getInts("kernel_shape",[]),i=t.getInts("pads",[0,0,0,0]),l=t.getInts("strides",[1,1]);return Q({autoPad:o,dilations:n,group:s,kernelShape:a,pads:i,strides:l,...r})},_m=(e,t)=>{if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length||4!==e[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims[1]!==e[1].dims[1]*t.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let r=e[0].dims.length-2;if(t.dilations.length!==r)throw new Error(`dilations should be ${r}D`);if(t.strides.length!==r)throw new Error(`strides should be ${r}D`);if(t.pads.length!==2*r)throw new Error(`pads should be ${2*r}D`);if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==e[0].type||"float32"!==e[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===e.length&&"float32"!==e[2].type)throw new Error("Conv input(bias) should be float tensor")}}),Om,Im,Sm,uf,Am,Pm,Em,Dm,Lm,Cm,lf,Fm,ff=L(()=>{Ue(),we(),ae(),xr(),Om=(e,t,r,o,n,s)=>(e-1)*t+r+(o-1)*n+1-s,Im=(e,t,r,o,n)=>{let s=Math.floor(e/2);"SAME_UPPER"===t?(r[o]=s,r[n]=e-s):"SAME_LOWER"===t&&(r[o]=e-s,r[n]=s)},Sm=(e,t,r,o,n,s,a,i)=>{let l=e.length-2,c=0===i.length;for(let _=0;_<l;++_){let p=c?e[_+2]*s[_]:i[_],u=Om(e[_+2],s[_],n[_],t[_],r[_],p);Im(u,o,n,_,_+l),c&&i.push(s[_]*(e[_+2]-1)+a[_]+(t[_]-1)*r[_]+1-n[_]-n[_+l])}},uf=(e,t,r)=>(Fm(t,r),Am(e,t,r)),Am=(e,t,r)=>{let o=Cm(r,t);return[Lm(e,t,o)]},Pm=(e,t)=>({name:"ConvTranspose",inputNames:e?["X","W","B"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t}),Em=(e,t,r,o)=>{let n=t.length>2?"getB(output_channel)":"0.0",s=t[0].dims,a=t[1].dims,i=a[1],l=a[0]/o.group,c=[t[0].dims[0],t[1].dims[1]*o.group,...o.outputShape],_=H(e.session.backend.glContext.version),{activationFunction:p,applyActivation:u}=Rt(o),d=`\n  const ivec2 strides = ivec2(${o.strides[0]}, ${o.strides[1]});\n  const ivec2 pads = ivec2(${o.pads[0]}, ${o.pads[1]});\n  ${p}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ${i};\n    int wOutChannel = output_channel - group_id * ${i};\n\n    float value = ${n};\n    for (int inChannelOffset = 0; inChannelOffset < ${l}; inChannelOffset++) {\n      int input_channel = group_id * ${l} + inChannelOffset;\n      for (int wWOff = 0; wWOff < ${a[2]}; wWOff++) {\n        for (int wHOff = 0; wHOff < ${a[3]}; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ${o.dilations[0]}, wHOff * ${o.dilations[1]});\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ${s[2]} &&\n            wLocIn.y >= 0 && wLocIn.y < ${s[3]}\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ${u}\n    ${_.output} = vec4(value, .0, .0, .0);\n  }\n`;return{...r,output:{dims:c,type:t[0].type,textureType:0},shaderSource:d,hasMain:!0}},Dm=(e,t,r)=>{let o=Pm(t.length>2,r.cacheKey);return{...o,get:()=>Em(e,t,o,r)}},Lm=(e,t,r)=>e.run(Dm(e,t,r),t),Cm=(e,t)=>{let r=e.kernelShape.slice();if(0===e.kernelShape.length)for(let e=2;e<t[1].dims.length;++e)r.push(t[1].dims[e]);let o=e.pads.slice(),n=e.outputShape.slice(),s=t[0].dims;Sm(s,r,e.dilations,e.autoPad,o,e.strides,e.outputPadding,n);let a=Object.assign({},e);return Object.assign(a,{kernelShape:r,pads:o,outputShape:n,cacheKey:e.cacheKey}),a},lf=e=>{let t=e.attributes,r=Nr(t),o=t.getString("auto_pad","NOTSET"),n=t.getInts("dilations",[1,1]),s=t.getInt("group",1),a=t.getInts("kernel_shape",[]),i=t.getInts("output_padding",[0,0]),l=t.getInts("output_shape",[]),c=t.getInts("pads",[0,0,0,0]),_=t.getInts("strides",[1,1]);return Q({autoPad:o,dilations:n,group:s,kernelShape:a,outputPadding:i,outputShape:l,pads:c,strides:_,...r})},Fm=(e,t)=>{if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length||4!==e[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims[1]!==e[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let r=e[1].dims[1]*t.group;if(3===e.length&&(1!==e[2].dims.length||e[2].dims[0]!==r))throw new Error("invalid bias");let o=e[0].dims.length-2;if(t.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(t.strides.length!==o)throw new Error(`strides should be ${o}D`);if(t.pads.length!==2*o)throw new Error(`pads should be ${2*o}D`);if(t.outputPadding.length!==o)throw new Error(`output_padding should be ${o}D`);if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==t.outputShape.length&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==e[0].type||"float32"!==e[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===e.length&&"float32"!==e[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}}),cf,wr,pf,$m,df,km,Bm,Nm,oo=L(()=>{Ue(),fe(),ae(),cf={name:"Transpose",inputNames:["A"],inputTypes:[0]},wr=(e,t,r)=>(Nm(t),[e.run({...cf,cacheHint:r.cacheKey,get:()=>$m(e,t[0],r.perm)},t)]),pf=e=>Q({perm:e.attributes.getInts("perm",[])}),$m=(e,t,r)=>{let o=t.dims;r=df(o,r);let n=km(o,r),s=o.length,a=`\n      ${Bm("perm",r,s)}\n      float process(int indices[${s}]) {\n        int a[${s}];\n        perm(a, indices);\n        return _A(a);\n      }`;return{...cf,output:{dims:n,type:t.type,textureType:0},shaderSource:a}},df=(e,t)=>(t&&t.length!==e.length&&(t=[...e.keys()].reverse()),t),km=(e,t)=>(t=df(e,t),U.sortBasedOnPerm(e,t)),Bm=(e,t,r)=>{let o=[];o.push(`void ${e}(out int a[${r}], int src[${r}]) {`);for(let e=0;e<r;++e)o.push(`\ta[${t[e]}]=src[${e}];`);return o.push("\t}"),o.join("\n")},Nm=e=>{if(!e||1!==e.length)throw new Error("Transpose requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("input should be float tensor")}}),hf,mf,Rm,bf=L(()=>{oo(),hf=(e,t,r)=>{Rm(t);let o=r.blocksize,n=o*o,s="DCR"===r.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],a="DCR"===r.mode?[t[0].dims[0],o,o,t[0].dims[1]/n,t[0].dims[2],t[0].dims[3]]:[t[0].dims[0],t[0].dims[1]/n,o,o,t[0].dims[2],t[0].dims[3]],i=e.reshapeUnpacked(t[0],a),l={perm:s,cacheKey:`${s}`},[c]=wr(e,[i],l),_=[t[0].dims[0],t[0].dims[1]/n,t[0].dims[2]*o,t[0].dims[3]*o];return[e.reshapeUnpacked(c,_)]},mf=e=>{let t=e.attributes.getInt("blocksize");if(t<1)throw new Error(`blocksize must be >= 1, but got : ${t} for DepthToSpace`);let r=e.attributes.getString("mode","DCR");if("DCR"!==r&&"CRD"!==r)throw new Error(`unrecognized mode: ${r} for DepthToSpace`);return{mode:r,blocksize:t}},Rm=e=>{if(1!==e.length)throw new Error(`DepthToSpace expect 1 inputs, but got ${e.length}`);if("string"===e[0].type||4!==e[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),gf,yf,Mm,Tf=L(()=>{fe(),gf=(e,t,r)=>{Mm(t,r);let o=U.flattenShape(t[0].dims,r);return[e.reshapeUnpacked(t[0],o)]},yf=e=>e.attributes.getInt("axis",1),Mm=(e,t)=>{if(!e||1!==e.length)throw new Error("Flatten requires 1 input.");let r=e[0].dims.length;if(0===r)throw new Error("scalar tensor is not supported.");if(t<-r||t>r)throw new Error("Invalid axis");if("string"===e[0].type)throw new Error("string tensor is not supported.")}}),Qt,pn=L(()=>{Qt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),xf,wf,Gm,Um,zm,Vm,vf=L(()=>{Ue(),pn(),fe(),ae(),xf=(e,t,r)=>(Vm(t,r.axis),[e.run(zm(e,t,r),t)]),wf=e=>Q({axis:e.attributes.getInt("axis",0)}),Gm={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Um=(e,t,r,o)=>{let n=r[0].dims.slice(),s=r[1].dims.slice(),a=new Array(n.length+s.length-1);o=U.normalizeAxis(o,n.length);let i=[];for(let e=0;e<a.length;e++)e<o?(a[e]=n[e],i.push(`inputIdx[${e}] = outputIdx[${e}];`)):e<o+s.length?(a[e]=s[e-o],i.push(`indexDataIdx[${e-o}] = outputIdx[${e}];`)):(a[e]=n[e-s.length+1],i.push(`inputIdx[${e-s.length+1}] = outputIdx[${e}];`));let l=`\n      float process(int outputIdx[${a.length||1}]) {\n        int inputIdx[${n.length}];\n        int indexDataIdx[${s.length||1}];\n        indexDataIdx[0] = 0;\n        ${i.join("\n        ")}\n        int idx = int(_B(indexDataIdx));\n        inputIdx[${o}] = idx < 0 ? idx + ${n[o]} : idx;\n        return _A(inputIdx);\n      }`;return{...t,output:{dims:a,type:r[0].type,textureType:0},shaderSource:l}},zm=(e,t,r)=>{let o={...Gm,cacheHint:r.cacheKey};return{...o,get:()=>Um(e,o,t,r.axis)}},Vm=(e,t)=>{if(!e||2!==e.length)throw new Error("Gather requires 2 inputs.");let r=e[0].dims.length;if(r<1)throw new Error("Invalid input shape.");if(t<-r||t>r-1)throw new Error("Invalid axis.");if(-1===Qt.indexOf(e[0].type))throw new Error("Invaid input type.");if("int32"!==e[1].type&&"int16"!==e[1].type)throw new Error("Invaid input type.")}}),Fi,_f,Of,If,Wm,Hm,qm,Sf=L(()=>{Ue(),fe(),ae(),Fi=(e,t,r)=>(qm(t,r),[e.run(Wm(t,r),t)]),_f=(e,t)=>{let r=0!==e.attributes.getInt("transA",0),o=0!==e.attributes.getInt("transB",0),n=e.attributes.getFloat("alpha",1),s=e.attributes.getFloat("beta",1);return Q({transA:r,transB:o,alpha:n,beta:s,isOptionalC:t})},Of=e=>_f(e,!1),If=e=>_f(e,!0),Wm=(e,t)=>{let r={name:"Gemm",inputNames:3===e.length?["A","B","C"]:["A","B"],inputTypes:3===e.length?[0,0,0]:[0,0],key:t.cacheKey};return{...r,get:()=>Hm(r,e,t)}},Hm=(e,t,r)=>{let o=t[0].dims.slice(),n=t[1].dims.slice(),[s,a]=jn.getShapeOfGemmResult(o,r.transA,n,r.transB,3===t.length?t[2].dims:void 0),i=[s,a];if(!i)throw new Error("Can't use gemm on the given tensors");let l=o[o.length-1],c="";r.transA&&(l=o[0]),r.transA&&r.transB?c="value += _A_T(a) * _B_T(b);":r.transA&&!r.transB?c="value += _A_T(a) * _B(b);":!r.transA&&r.transB?c="value += _A(a) * _B_T(b);":!r.transA&&!r.transB&&(c="value += _A(a) * _B(b);");let _=i.length,p=`\n      float process(int indices[${_}]) {\n          int a[${_}];\n          int b[${_}];\n          ${3===t.length?`int c[${t[2].dims.length}];`:""}\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ${3===t.length?"bcastIndices_C(indices, c);":""}\n\n          float value = 0.0;\n          for (int k=0; k<${l}; ++k) {\n              a[${_-1}] = k;\n              b[${_-2}] = k;\n              ${c}\n          }\n\n          value = value * alpha;\n          ${3===t.length?"value += beta * _C(c);":""}\n          return value;\n      }`;return{...e,output:{dims:i,type:t[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:r.alpha},{name:"beta",type:"float",data:r.beta}],shaderSource:p}},qm=(e,t)=>{if(!e)throw new Error("Input is missing");if(t.isOptionalC&&(e.length<2||e.length>3))throw new Error("Invaid input shape.");if(!t.isOptionalC&&3!==e.length)throw new Error("Gemm requires 3 inputs");if(3===e.length&&1!==e[2].dims.length&&2!==e[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type||3===e.length&&"float32"!==e[2].type&&"float64"!==e[2].type)throw new Error("Invalid input type.");if(e[0].type!==e[1].type||3===e.length&&e[0].type!==e[2].type)throw new Error("Input types are mismatched")}}),Af,Pf,jm,Ym,Xm,Km,Jm,Ef=L(()=>{Ue(),ae(),Af=(e,t,r)=>(Jm(t),[e.run(Xm(e,t,r),t)]),Pf=e=>{let t=e.attributes.getFloat("scale"),r=e.attributes.getFloats("bias");return Q({scale:t,bias:r})},jm={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Ym=(e,t,r,o)=>{let n=r[0].dims.slice(),s=n.length,a=`\n      ${Km(o.bias.length)}\n      float process(int indices[${s}]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }`;return{...t,output:{dims:n,type:r[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:o.bias.length,data:o.bias},{name:"scale",type:"float",data:o.scale}],shaderSource:a}},Xm=(e,t,r)=>{let o={...jm,cacheHint:r.cacheKey};return{...o,get:()=>Ym(e,o,t,r)}},Km=e=>{let t=[`float getBias(float bias[${e}], int channel) {`];for(let r=0;r<e;++r)0===r?t.push(`\tif (channel == ${r}) { return bias[${r}]; }`):r===e-1?t.push(`\telse { return bias[${r}]; }`):t.push(`\telse if (channel == ${r}) { return bias[${r}]; }`);return t.push("\t}"),t.join("\n")},Jm=e=>{if(!e||1!==e.length)throw new Error("ImageScaler requires 1 input.");if(4!==e[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.")}}),Lf,Cf,Df,Zm,Qm,eb,tb,rb,nb,Ff=L(()=>{we(),ae(),Lf=(e,t,r)=>{nb(t);let o=e.run(Qm(t[0]),t);return[e.run(rb(e,t[0],r,o.dims),[t[0],o,t[1],t[2]])]},Cf=e=>e.attributes.getFloat("epsilon",1e-5),Df={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Zm=(e,t)=>{let r=t.dims.slice(),o=r[1],n=r[2]*r[3],s=[r[0],o],a=`\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<${r[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${r[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(${n});\n        temp = 0.0;\n        for(int a2=0; a2<${r[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${r[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(${n});\n\n        return v;\n      }`;return{...e,output:{dims:s,type:t.type,textureType:4},shaderSource:a}},Qm=e=>({...Df,get:()=>Zm(Df,e)}),eb={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},tb=(e,t,r,o,n)=>{let s=H(e.session.backend.glContext.version),[a,i]=e.calculateTextureWidthAndHeight(n,4),[l,c]=[a/4,i],_=`\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ${l}, ${c});\n        return ${s.texture2D}(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }`;return{...t,output:{dims:r.dims,type:r.type,textureType:0},variables:[{name:"epsilon",type:"float",data:o}],shaderSource:_}},rb=(e,t,r,o)=>{let n={...eb,cacheHint:`${r}`};return{...n,get:()=>tb(e,n,t,r,o)}},nb=e=>{if(!e||3!==e.length)throw new Error("InstanceNormalization requires 3 inputs.");let t=e[0],r=e[1],o=e[2];if(t.dims.length<3||1!==r.dims.length||1!==o.dims.length)throw new Error("Invalid input shape.");if(r.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==t.type&&"float64"!==t.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==o.type&&"float64"!==o.type)throw new Error("Invalid input type.");if(4!==e[0].dims.length)throw new Error("Only support 4-D input shape.")}});function ob(e,t){let r=e[0].dims[1],o=e[0].dims.length,n=-Math.floor((t.size-1)/2),s=Math.ceil((t.size-1)/2),a=`float(${t.alpha}) / float(${t.size})`,i=`\n    float process(int indices[${o}]) {\n        int c = indices[1];\n        float x = _X(indices);\n        float square_sum = 0.0;\n\n        for (int i = ${n}; i <= ${s}; i++) {\n          int idx = c + i;\n          if (c >= 0 && c < ${r}) {\n            indices[1] = idx;\n            float j = _X(indices);\n            square_sum += j * j;\n          }\n        }\n        return x / pow(${`float(${t.bias})`} + ${a} * square_sum, ${`float(${t.beta})`});\n    }`;return{...Bf,cacheHint:t.cacheKey,output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:i}}function ib(e,t){return{...Bf,cacheHint:t.cacheKey,get:()=>ob(e,t)}}var $f,kf,Bf,ab,Nf=L(()=>{Ue(),ae(),$f=(e,t,r)=>(ab(t),[e.run(ib(t,r),t)]),kf=e=>{let t=e.attributes.getFloat("alpha",1e-4),r=e.attributes.getFloat("beta",.75),o=e.attributes.getFloat("bias",1),n=e.attributes.getInt("size");return Q({alpha:t,beta:r,bias:o,size:n})},Bf={name:"LRN",inputNames:["X"],inputTypes:[0]},ab=e=>{if(!e||1!==e.length)throw new Error("LRN requires 1 input.");if(4!==e[0].dims.length)throw new Error('currently only support LRN for input with "NCHW" format');if("float32"!==e[0].type)throw new Error("input should be float type")}}),sb,$i,Rf,Mf,Gf,ub,lb,fb,cb,pb,db,hb,mb,Uf=L(()=>{Ue(),fe(),we(),ae(),sb={name:"Pad",inputNames:["A"],inputTypes:[0]},$i=(e,t,r)=>(fb(t),[e.run({...sb,cacheHint:r.cacheKey,get:()=>lb(e,t[0],r)},t)]),Rf=e=>{let t=e.attributes.getString("mode","constant"),r=e.attributes.getFloat("value",0),o=e.attributes.getInts("pads");return Q({mode:t,value:r,pads:o})},Mf=(e,t,r)=>{cb(t);let o=ub(e,t,r);return $i(e,[t[0]],o)},Gf=e=>e.attributes.getString("mode","constant"),ub=(e,t,r)=>{if(!e.session.isInitializer(t[1].dataId)||t.length>=3&&!e.session.isInitializer(t[2].dataId))throw new Error("dynamic pad attributes are not allowed");let o=Array.from(t[1].integerData),n=t.length>=3?t[2].floatData[0]:0;return Q({mode:r,pads:o,value:n})},lb=(e,t,r)=>{let o=U.padShape(t.dims.slice(),r.pads),n=o.length,s=`\n      ${pb(e,t,r)}\n      float process(int[${n}] indices) {\n          return padA(indices);\n      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:o,type:t.type,textureType:0},shaderSource:s}},fb=e=>{if(!e||1!==e.length)throw new Error("Pad requires 1 input");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.")},cb=e=>{if(!e||2!==e.length&&3!==e.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==e[1].type)throw new Error("Invalid input type.");if(e.length>=3&&"string"===e[2].type)throw new Error("Invalid input type.")},pb=(e,t,r)=>{let o=H(e.session.backend.glContext.version),[n,s]=e.calculateTextureWidthAndHeight(t.dims,0),a=U.computeStrides(t.dims);switch(r.mode){case"constant":return db(o,t.dims,a,n,s,r.pads,r.value);case"reflect":return hb(o,t.dims,a,n,s,r.pads);case"edge":return mb(o,t.dims,a,n,s,r.pads);default:throw new Error("Invalid mode")}},db=(e,t,r,o,n,s,a)=>{let i=t.length,l="";for(let e=i-1;e>=0;--e)l+=`\n        k = m[${e}] - ${s[e]};\n        if (k < 0)  return constant;\n        if (k >= ${t[e]}) return constant;\n        offset += k * ${r[e]};\n        `;return`\n      float padA(int m[${i}]) {\n        const float constant = float(${a});\n        int offset = 0;\n        int k = 0;\n        ${l}\n        vec2 coords = offsetToCoords(offset, ${o}, ${n});\n        float value = getColorAsFloat(${e.texture2D}(A, coords));\n        return value;\n      }\n      `},hb=(e,t,r,o,n,s)=>{let a=t.length,i="";for(let e=a-1;e>=0;--e)i+=`\n        k = m[${e}] - ${s[e]};\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ${2*(t[e]-1)};\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ${t[e]}) { k = _2n_1 - k; }\n        }\n        offset += k * ${r[e]};\n        `;return`\n      float padA(int m[${a}]) {\n        int offset = 0;\n        int k = 0;\n        ${i}\n        vec2 coords = offsetToCoords(offset, ${o}, ${n});\n        float value = getColorAsFloat(${e.texture2D}(A, coords));\n        return value;\n      }\n      `},mb=(e,t,r,o,n,s)=>{let a=t.length,i="";for(let e=a-1;e>=0;--e)i+=`\n        k = m[${e}] - ${s[e]};\n        if (k < 0)  k = 0;\n        if (k >= ${t[e]}) k = ${t[e]-1};\n        offset += k * ${r[e]};\n      `;return`\n      float padA(int m[${a}]) {\n        int offset = 0;\n        int k = 0;\n        ${i}\n        vec2 coords = offsetToCoords(offset, ${o}, ${n});\n        float value = getColorAsFloat(${e.texture2D}(A, coords));\n        return value;\n      }\n      `}}),Vf,Wf,Hf,qf,jf,Yf,Xf,Kf,Jf,bb,zf,Zf,ao,Qf,io,gb,ec=L(()=>{Ue(),fe(),ae(),Vf=(e,t,r)=>{ao(t);let o={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[e.run({...o,get:()=>Hf(t,o,!1,r)},t)]},Wf=e=>{let t=e.attributes.getString("auto_pad","NOTSET"),r=e.attributes.getInt("ceil_mode",0),o=0!==e.attributes.getInt("count_include_pad",0),n=e.attributes.getInts("kernel_shape"),s=e.attributes.getInts("strides",[]),a=e.attributes.getInts("pads",[]);if(0!==r)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Q({autoPad:t,ceilMode:r,countIncludePad:o,kernelShape:n,strides:s,pads:a})},Hf=(e,t,r,o)=>{let[n,s]=Jf(e,o,r),a=U.size(n.kernelShape),i="";n.countIncludePad?i+=`value /= float(${a});`:i+=`value /= float(${a} - pad);`;let l=`\n        ${Qf(e[0].dims,n,"value += _X(x);",i,"0.0")}\n      `;return{...t,output:{dims:s,type:e[0].type,textureType:0},shaderSource:l}},qf=(e,t,r)=>{ao(t);let o={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${r.countIncludePad}`};return[e.run({...o,get:()=>Hf(t,o,!0,r)},t)]},jf=e=>{let t=0!==e.attributes.getInt("count_include_pad",0);return Q({autoPad:"",ceilMode:0,countIncludePad:t,kernelShape:[],strides:[],pads:[]})},Yf=(e,t,r)=>{ao(t);let o={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[e.run({...o,get:()=>Kf(t,o,!1,r)},t)]},Xf=e=>{let t=e.attributes.getString("auto_pad","NOTSET"),r=e.attributes.getInt("ceil_mode",0),o=e.attributes.getInts("kernel_shape"),n=e.attributes.getInts("strides",[]),s=e.attributes.getInts("pads",[]),a=e.attributes.getInt("storage_order",0),i=e.attributes.getInts("dilations",[]);if(0!==a)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==r)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Q({autoPad:t,ceilMode:r,countIncludePad:!1,kernelShape:o,strides:n,pads:s,storageOrder:a,dilations:i})},Kf=(e,t,r,o)=>{let[n,s]=Jf(e,o,r),a=`\n      ${Qf(e[0].dims,n,"\n      value = max(_X(x), value);\n    ","","-1e5")}\n    `;return{...t,output:{dims:s,type:e[0].type,textureType:0},shaderSource:a}},Jf=(e,t,r)=>{let o=e[0].dims.slice(),n=Object.hasOwnProperty.call(t,"dilations"),s=t.kernelShape.slice(),a=t.strides.slice(),i=n?t.dilations.slice():[],l=t.pads.slice();mr.adjustPoolAttributes(r,o,s,a,i,l);let c=mr.computePoolOutputShape(r,o,a,i,s,l,t.autoPad),_=Object.assign({},t);return n?Object.assign(_,{kernelShape:s,strides:a,pads:l,dilations:i,cacheKey:t.cacheKey}):Object.assign(_,{kernelShape:s,strides:a,pads:l,cacheKey:t.cacheKey}),[_,c]},bb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},zf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Zf=(e,t)=>(ao(t),[e.run({...zf,get:()=>Kf(t,zf,!0,bb)},t)]),ao=e=>{if(!e||1!==e.length)throw new Error("Pool ops requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.")},Qf=(e,t,r,o,n)=>{let s=e.length;if(t.kernelShape.length<=2){let a=t.kernelShape[t.kernelShape.length-1],i=t.strides[t.strides.length-1],l=t.pads[t.pads.length/2-1],c=t.pads[t.pads.length-1],_=e[s-1],p="",u="",d="";if(p=l+c!==0?`\n          for (int i = 0; i < ${a}; i++) {\n            x[${s} - 1] = indices[${s} - 1] * ${i} - ${l} + i;\n            if (x[${s} - 1] < 0 || x[${s} - 1] >= ${_}) {\n              pad++;\n              continue;\n            }\n            ${r}\n          }`:`\n          for (int i = 0; i < ${a}; i++) {\n            x[${s} - 1] = indices[${s} - 1] * ${i} - ${l} + i;\n            ${r}\n          }`,2===t.kernelShape.length){let r=t.kernelShape[t.kernelShape.length-2],o=t.strides[t.strides.length-2],n=t.pads[t.pads.length/2-2],i=t.pads[t.pads.length-2],l=e[s-2];u=n+i!==0?`\n            for (int j = 0; j < ${r}; j++) {\n              x[${s} - 2] = indices[${s} - 2] * ${o} - ${n} + j;\n              if (x[${s} - 2] < 0 || x[${s} - 2] >= ${l}) {\n                pad+= ${a};\n                continue;\n              }\n          `:`\n            for (int j = 0; j < ${r}; j++) {\n              x[${s} - 2] = indices[${s} - 2] * ${o} - ${n} + j;\n            `,d="\n          }\n        "}return`\n        float process(int indices[${s}]) {\n          int x[${s}];\n          copyVec(indices, x);\n\n          float value = ${n};\n          int pad = 0;\n          ${u}\n          ${p}\n          ${d}\n          ${o}\n          return value;\n        }\n      `}{let a=U.size(t.kernelShape),i=U.computeStrides(t.kernelShape),l=i.length,c=t.pads.length,_=gb(l),p=io(e,"inputDims"),u=io(t.pads,"pads"),d=io(i,"kernelStrides"),h=io(t.strides,"strides"),f="";return f=t.pads.reduce((e,t)=>e+t)?`\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ${r}\n          }`:`\n          }\n          ${r}\n        `,`\n        ${_}\n        float process(int indices[${s}]) {\n          int x[${s}];\n          copyVec(indices, x);\n          int offset[${l}];\n          int pads[${c}];\n          int inputDims[${s}];\n          int kernelStrides[${l}];\n          int strides[${l}];\n          ${u}\n          ${p}\n          ${h}\n          ${d}\n\n          float value = ${n};\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ${a}; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ${s} - ${l}; j < ${s}; j++) {\n              x[j] = indices[j] * strides[j - ${s} + ${l}]\n                + offset[j - ${s} + ${l}] - pads[j - 2];\n              ${f}\n          }\n          ${o}\n\n          return value;\n        }\n      `}},io=(e,t)=>{let r="";for(let o=0;o<e.length;o++)r+=`\n      ${t}[${o}] = ${e[o]};\n    `;return r},gb=e=>`\n  void offsetToIndices(int offset, int[${e}] strides, out int[${e}] indices) {\n    if (${e} == 0) {\n      return;\n    }\n    for (int i = 0; i < ${e} - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[${e} - 1] = offset;\n  }`}),vr,er,yb,Tb,tc,rc,nc,oc,ic,ac,sc,uc=L(()=>{Ue(),pn(),fe(),ae(),vr=(e,t,r,o,n)=>{Tb(t);let s={name:o,inputNames:["A"],inputTypes:[0]};return[e.run({...s,cacheHint:r.cacheKey,get:()=>yb(e,t,r,o,n,s)},t)]},er=e=>{let t=e.attributes.getInts("axes",[]),r=1===e.attributes.getInt("keepdims",1);return Q({axes:t,keepDims:r})},yb=(e,t,r,o,n,s)=>{let a=[],i=t[0].dims.length||1,l=[],c=U.normalizeAxes(r.axes,t[0].dims.length),_=n(t,c),p=_[1];for(let e=0;e<t[0].dims.length;e++)c.indexOf(e)>=0||0===c.length?(r.keepDims&&a.push(1),p=`\n          for(int j${e} = 0; j${e} < ${t[0].dims[e]}; j${e}++) {\n            inputIdx[${e}] = j${e};\n            ${p}\n          }`):(l.push(`inputIdx[${e}] = outputIdx[${a.length}];`),a.push(t[0].dims[e]));let u=`\n      float process(int outputIdx[${a.length||1}]) {\n        float value;                 // final result\n        int inputIdx[${i}];      // addressing input data\n        ${l.join("\n")}\n        ${_[0]}       // init ops for reduce max/min\n        ${p}\n        ${_[2]}       // final computation for reduce mean\n        return value;\n      }`;return{...s,output:{dims:a,type:t[0].type,textureType:0},shaderSource:u}},Tb=e=>{if(!e||1!==e.length)throw new Error("Reduce op requires 1 input.");if(-1===Qt.indexOf(e[0].type))throw new Error("Invalid input type.")},tc=(e,t,r)=>vr(e,t,r,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),rc=(e,t,r)=>vr(e,t,r,"ReduceMean",(e,t)=>{let r=1;for(let o=0;o<e[0].dims.length;o++)(t.indexOf(o)>=0||0===t.length)&&(r*=e[0].dims[o]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${r}.;`]}),nc=(e,t,r)=>vr(e,t,r,"ReduceMax",(e,t)=>{let r=[];for(let o=0;o<e[0].dims.length;o++)(t.indexOf(o)>=0||0===t.length)&&r.push(`inputIdx[${o}] = 0;`);return[`${r.join("\n")}\nvalue = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),oc=(e,t,r)=>vr(e,t,r,"ReduceMin",(e,t)=>{let r=[];for(let o=0;o<e[0].dims.length;o++)(t.indexOf(o)>=0||0===t.length)&&r.push(`inputIdx[${o}] = 0;`);return[`${r.join("\n")}\nvalue = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),ic=(e,t,r)=>vr(e,t,r,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),ac=(e,t,r)=>vr(e,t,r,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),sc=(e,t,r)=>vr(e,t,r,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),lc,fc=L(()=>{fe(),lc=(e,t)=>{let r=U.calculateReshapedDims(t[0].dims,t[1].integerData);return e.session.pack?[e.reshapePacked(t[0],r)]:[e.reshapeUnpacked(t[0],r)]}}),cc,ki,pc,dc,dn,xb,Bi,so,Ni=L(()=>{Ue(),we(),ae(),cc={name:"Upsample",inputNames:["X"],inputTypes:[0]},ki=(e,t,r)=>(Bi(t,r),[e.run({...cc,cacheHint:r.cacheKey,get:()=>xb(e,t,r)},t)]),pc=e=>dn(e,7),dc=e=>dn(e,9),dn=(e,t)=>{let r=t>=10,o=e.attributes.getString("mode","nearest");if("nearest"!==o&&"linear"!==o&&(t<11||"cubic"!==o))throw new Error(`unrecognized mode: ${o}`);let n=[];t<9&&(n=e.attributes.getFloats("scales"),so(n,o,r));let s=e.attributes.getFloat("extrapolation_value",0),a=t>10?e.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(a))throw new Error(`coordinate_transform_mode '${a}' is not supported`);let i="tf_crop_and_resize"===a,l=i,c="nearest"===o&&t>=11?e.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(c))throw new Error(`nearest_mode '${c}' is not supported`);let _=e.attributes.getFloat("cubic_coeff_a",-.75),p=0!==e.attributes.getInt("exclude_outside",0);if(p&&"cubic"!==o)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let u=t<11||"nearest"===o&&"asymmetric"===a&&"floor"===c,d=0,h=0,f=0;return t>10?e.inputs.length>2?(d=1,h=2,f=3):(h=1,f=2):9===t&&(h=1),Q({opset:t,isResize:r,mode:o,scales:n,extrapolationValue:s,coordinateTransformMode:a,useExtrapolation:l,needRoiInput:i,nearestMode:c,cubicCoefficientA:_,excludeOutside:p,useNearest2xOptimization:u,roiInputIdx:d,scalesInputIdx:h,sizesInputIdx:f})},xb=(e,t,r)=>{let o=H(e.session.backend.glContext.version),[n,s]=e.calculateTextureWidthAndHeight(t[0].dims,0),a=t[0].dims.map((e,t)=>Math.floor(e*r.scales[t])),[i,l]=e.calculateTextureWidthAndHeight(a,0),c=a.length,_=new Array(c),p=new Array(c),u=`\n      int output_pitches[${c}];\n      int input_pitches[${c}];\n      `;for(let e=c-1;e>=0;e--)_[e]=e===c-1?1:_[e+1]*a[e+1],p[e]=e===c-1?1:p[e+1]*t[0].dims[e+1],u+=`\n        output_pitches[${e}] = ${_[e]};\n        input_pitches[${e}] = ${p[e]};\n        `;let d=`\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ${n}, ${s});\n        float value = getColorAsFloat(${o.texture2D}(X, coords));\n        return value;\n      }\n      `,h="nearest"===r.mode?`\n    ${d}\n    float process(int indices[${c}]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${i}, ${l});\n\n      ${u}\n\n      int d, m;\n      for (int dim = 0; dim < ${c}; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }`:4===c?`\n    ${d}\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${i}, ${l});\n\n      ${u}\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (${t[0].dims[2]} - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }`:`\n    ${d}\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${i}, ${l});\n\n      ${u}\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (${t[0].dims[0]} - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }`;return{...cc,output:{dims:a,type:t[0].type,textureType:0},shaderSource:h,variables:[{name:"scales",type:"int",arrayLength:r.scales.length,data:r.scales.map(e=>Math.ceil(e))}]}},Bi=(e,t)=>{if(!e||t.opset<9&&1!==e.length||t.opset>=9&&t.opset<11&&2!==e.length||t.opset>=11&&e.length<2)throw new Error("invalid inputs.");if(t.scales.length>0&&e[0].dims.length!==t.scales.length)throw new Error("Invalid input shape.");if("string"===e[0].type)throw new Error("Invalid input tensor types.")},so=(e,t,r)=>{if(r){for(let t of e)if(t<=0)throw new Error("Scale value should be greater than 0.")}else for(let t of e)if(t<1)throw new Error("Scale value should be greater than or equal to 1.");if(!("linear"!==t&&"cubic"!==t||2===e.length||4===e.length&&1===e[0]&&1===e[1]))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${r?"Resize":"Upsample"} opeartor.`)}}),Ri,Mi,hc,mc,wb,vb,_b,Ob,bc=L(()=>{we(),ae(),Bt(),Tr(),Ni(),Ri={name:"Resize",inputNames:["A"],inputTypes:[2]},Mi=(e,t,r)=>(Bi(t,r),[e.run({...Ri,cacheHint:r.cacheKey,get:()=>wb(e,t,r)},t)]),hc=e=>dn(e,10),mc=e=>dn(e,11),wb=(e,t,r)=>{let o=H(e.session.backend.glContext.version),[n,s]=vb(t,r);if(n.every(e=>1===e)&&"tf_crop_and_resize"!==r.coordinateTransformMode)return{...Ri,output:{dims:s,type:t[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {\n                    vec4 v = ${o.texture2D}(X, TexCoords);\n                    ${o.output} = v;\n                }`};let a=s.length;if(a<2)throw new Error(`output dimension should be at least 2, but got ${a}`);let i=s[a-2],l=s[a-1],c=t[0].dims;if(a!==c.length)throw new Error(`output dimension should match input ${c.length}, but got ${a}`);let _=c[a-2],p=c[a-1],u=n[a-2],d=n[a-1],h="";if("linear"!==r.mode)throw new Error(`resize (packed) does not support mode: '${r.mode}'`);switch(r.coordinateTransformMode){case"asymmetric":h="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":h="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":h=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ${l}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ${i}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ${l}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ${i}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                `;break;case"align_corners":h=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(${l}.0 - 1.0, ${i}.0 - 1.0, ${l}.0 - 1.0,\n                            ${i}.0 - 1.0);\n                        vec4 original = vec4(${p}.0 - 1.0, ${_}.0 - 1.0, ${p}.0 - 1.0,\n                            ${_}.0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${r.coordinateTransformMode}'`)}let f=Qe(a),m=`\n            const vec2 inputWH = vec2(${_}.0, ${p}.0);\n            const vec4 scaleWHWH = vec4(float(${u}), float(${d}), float(${u}), float(${d}));\n            ${Nt()}\n            ${h}\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ${f} rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ${i-1};\n                bool hasNextCol = rc.z < ${l-1};\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ${o.output} = vec4(newValue);\n            }\n        `;return{...Ri,output:{dims:s,type:t[0].type,textureType:2},hasMain:!0,shaderSource:m}},vb=(e,t)=>{let r,o=e[0].dims,n=t.scales;if(0===n.length){let s=e[t.scalesInputIdx];if(s&&0!==s.size){if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");n=_b(s,t.mode,t.isResize)}else{let s=e[t.sizesInputIdx];if(!s||0===s.size)throw new Error("Either scales or sizes MUST be provided as input.");r=Array.from(s.integerData),n=Ob(r,o,t.mode,t.isResize)}}else if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let s=r||o.map((e,t)=>Math.floor(e*n[t]));return[n,s]},_b=(e,t,r)=>{let o=Array.from(e.floatData);return so(o,t,r),o},Ob=(e,t,r,o)=>{let n=t.length,s=new Array(n);for(let r=0,o=n;r<o;r++)if(0===t[r]){if(0!==e[r])throw new Error("Input dim is zero but required output dim is non-zero.");s[r]=1}else s[r]=e[r]/t[r];return so(s,r,o),s}}),gc,Ib,yc=L(()=>{yr(),gc=(e,t)=>(Ib(t),[new $e([t[0].dims.length],"int32",void 0,void 0,new Int32Array(t[0].dims))]),Ib=e=>{if(!e||1!==e.length)throw new Error("Shape requires 1 input.")}}),Gi,Tc,xc,wc,Sb,vc,Ab,Pb,_c=L(()=>{Ue(),pn(),fe(),ae(),Gi={name:"Slice",inputNames:["A"],inputTypes:[0]},Tc=(e,t,r)=>(Sb(t),[e.run({...Gi,cacheHint:r.cacheKey,get:()=>wc(e,t[0],r)},t)]),xc=e=>{let t=e.attributes.getInts("starts"),r=e.attributes.getInts("ends"),o=e.attributes.getInts("axes",[]);return Q({starts:t,ends:r,axes:o})},wc=(e,t,r)=>{let o=0===r.axes.length?t.dims.slice(0).map((e,t)=>t):r.axes,n=U.normalizeAxes(o,t.dims.length),s=r.starts.map((e,r)=>e>t.dims[n[r]]-1?t.dims[n[r]]:U.normalizeAxis(e,t.dims[n[r]])),a=r.ends.map((e,r)=>e>t.dims[n[r]]-1?t.dims[n[r]]:U.normalizeAxis(e,t.dims[n[r]])),i=t.dims.slice(),l=[];for(let e=0;e<n.length;e++)i[n[e]]=a[e]-s[e],s[e]>0&&l.push(`outputIdx[${n[e]}] += ${s[e]};`);let c=`\n      float process(int outputIdx[${i.length}]) {\n        ${l.join("\n      ")}\n        return _A(outputIdx);\n      }`;return{...Gi,output:{dims:i,type:t.type,textureType:0},shaderSource:c}},Sb=e=>{if(!e||1!==e.length)throw new Error("Slice requires 1 input.");if(-1===Qt.indexOf(e[0].type))throw new Error("Invalid input type.")},vc=(e,t)=>{Pb(t);let r=Ab(e,t);return[e.run({...Gi,cacheHint:r.cacheKey,get:()=>wc(e,t[0],r)},[t[0]])]},Ab=(e,t)=>{if(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)||t.length>=4&&!e.session.isInitializer(t[3].dataId)||t.length>=5&&!e.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some(e=>1!==e))throw new Error("currently non-1 steps is not supported for Slice");let r=Array.from(t[1].integerData),o=Array.from(t[2].integerData),n=t.length>=4?Array.from(t[3].integerData):[];return{starts:r,ends:o,axes:n,cacheKey:`${n};${r};${o}`}},Pb=e=>{if(!e||e.length<3||e.length>5)throw new Error("Invalid input number.");if("int32"!==e[1].type||1!==e[1].dims.length)throw new Error("Invalid input type.");if("int32"!==e[2].type||1!==e[2].dims.length)throw new Error("Invalid input type.");if(e.length>=4&&("int32"!==e[3].type||1!==e[3].dims.length))throw new Error("Invalid input type.");if(e.length>=5&&("int32"!==e[4].type||1!==e[4].dims.length))throw new Error("Invalid input type.")}}),Oc,Ic,Sc,Ac,Pc,Ec,Dc,Lc,Eb,Db,Lb,Cc,Fc=L(()=>{Ue(),fe(),we(),ae(),oo(),Oc={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ic={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Sc={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Ac=(e,t,r)=>{Cc(t);let o=t[0].dims.slice(),n=U.normalizeAxis(r.axis,o.length),s=U.sizeToDimension(o,n),a=U.sizeFromDimension(o,n);return Lc(e,t,r,s,a)},Pc=e=>Q({axis:e.attributes.getInt("axis",1)}),Ec=e=>Q({axis:e.attributes.getInt("axis",-1)}),Dc=(e,t,r)=>{Cc(t);let o,n=t[0].dims.slice(),s=U.normalizeAxis(r.axis,n.length),a=n.length,i=s!==a-1,l=[],c=[],_=[];i&&(c=Array.from({length:a}).map((e,t)=>t),c[s]=a-1,c[a-1]=s,c.map(e=>l.push(n[e])),o=Q({perm:c}),_=wr(e,t,o));let p=i?U.sizeToDimension(l,a-1):U.sizeToDimension(n,a-1),u=i?U.sizeFromDimension(l,a-1):U.sizeFromDimension(n,a-1),d=Lc(e,i?_:t,r,p,u);return i?wr(e,d,o):d},Lc=(e,t,r,o,n)=>{let s=Eb(e,t[0],o,n,[o]),a=e.run({...Oc,cacheHint:r.cacheKey,get:()=>s},t),i=Db(e,t[0],o,n,s.output.dims,[o]),l=e.run({...Ic,cacheHint:r.cacheKey,get:()=>i},[t[0],a]),c=Lb(e,t[0],o,n,s.output.dims,i.output.dims);return[e.run({...Sc,cacheHint:r.cacheKey,get:()=>c},[t[0],a,l])]},Eb=(e,t,r,o,n)=>{let[s,a]=e.calculateTextureWidthAndHeight(t.dims,0),i=n.length;if(r<1||o<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==n.length)throw new Error("Dimensionality of the output should be 1");if(n[0]!==r)throw new Error("Shape of the output should be equal to logical row count");let l=H(e.session.backend.glContext.version),c=`\n      float process(int[${i}] indices) {\n        int logical_row_start_offset = indices[0] * ${o};\n\n        float max = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset, ${s},\n        ${a} )));\n        for(int i=1; i<${o}; ++i)\n        {\n          float current = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${s}, ${a})));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }`;return{...Oc,output:{dims:n,type:t.type,textureType:0},shaderSource:c}},Db=(e,t,r,o,n,s)=>{let[a,i]=e.calculateTextureWidthAndHeight(t.dims,0),l=s.length;if(r<1||o<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==s.length)throw new Error("Dimensionality of the output should be 1");if(s[0]!==r)throw new Error("Shape of the output should be equal to logical row count");if(1!==n.length)throw new Error("Dimensionality of the intermediate results should be 1");if(n[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let c=`\n      float process(int[${l}] indices) {\n        int logical_row_start_offset = indices[0] * ${o};\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<${o}; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(${H(e.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${a}, ${i}))) - max);\n        }\n\n        return norm_factor;\n      }`;return{...Ic,output:{dims:s,type:t.type,textureType:0},shaderSource:c}},Lb=(e,t,r,o,n,s)=>{let[a,i]=e.calculateTextureWidthAndHeight(t.dims,0),l=t.dims.length;if(r<1||o<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==n.length||1!==s.length)throw new Error("Dimensionality of the intermediate results should be 1");if(n[0]!==r||s[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let c=`\n      float process(int[${l}] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ${a}, ${i});\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ${o};\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }`;return{...Sc,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:c}},Cc=e=>{if(!e||1!==e.length)throw new Error("Softmax requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type")}}),$c,kc,Bc,Cb,Fb,$b,Nc=L(()=>{Ue(),fe(),ae(),$c={name:"Split",inputNames:["A"],inputTypes:[0]},kc=(e,t,r)=>{$b(t);let o=U.normalizeAxis(r.axis,t[0].dims.length),n=Cb(e,t,o,r),s=[];for(let a=0;a<n;++a)s.push(e.run({...$c,cacheHint:`${r.cacheKey};${a}`,get:()=>Fb(e,t[0],r,o,a)},t));return s},Bc=e=>{let t=e.attributes.getInt("axis",0),r=e.attributes.getInts("split",[]),o=e.outputs.length;return Q({axis:t,split:r,numOutputs:o})},Cb=(e,t,r,o)=>{let[,n]=an.splitShape(t[0].dims,r,o.split,o.numOutputs);return n.length},Fb=(e,t,r,o,n)=>{let[s,a]=an.splitShape(t.dims,o,r.split,r.numOutputs),i=a[n],l=s[n],c=`\n      float process(int indices[${l.length}]) {\n        indices[${o}] += ${i};\n        return _A(indices);\n      }\n    `;return{...$c,cacheHint:`${r.cacheKey}:${n}`,output:{dims:l,type:t.type,textureType:0},shaderSource:c}},$b=e=>{if(!e||1!==e.length)throw new Error("Split requires one input.");if("int8"!==e[0].type&&"uint8"!==e[0].type&&"int16"!==e[0].type&&"uint16"!==e[0].type&&"int32"!==e[0].type&&"uint32"!==e[0].type&&"float32"!==e[0].type&&"float64"!==e[0].type&&"bool"!==e[0].type)throw new Error("Invalid input type.")}}),Ui,Rc,Mc,kb,Bb,Gc=L(()=>{fe(),Ui=(e,t,r)=>{kb(t);let o=U.squeezeShape(t[0].dims,r);return[e.reshapeUnpacked(t[0],o)]},Rc=(e,t)=>(Bb(t),Ui(e,[t[0]],Array.from(t[1].integerData))),Mc=e=>e.attributes.getInts("axes"),kb=e=>{if(!e||1!==e.length)throw new Error("Squeeze requires 1 input.");if("string"===e[0].type)throw new Error("invalid input tensor types.")},Bb=e=>{if(!e||2!==e.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==e[1].type)throw new Error("Invalid input type.")}}),Uc,Nb,Rb,zc=L(()=>{we(),ae(),Uc=(e,t)=>{Rb(t);let r={name:"Sum",inputNames:t.map((e,t)=>`X${t}`),inputTypes:new Array(t.length).fill(0)};return[e.run({...r,get:()=>Nb(e,t,r)},t)]},Nb=(e,t,r)=>{let o=H(e.session.backend.glContext.version),n=t[0].dims.slice(),s=`\n      void main() {\n        vec4 result = ${t.map((e,t)=>`${o.texture2D}(X${t},TexCoords)`).join(" + ")};\n        ${o.output} = result;\n      }\n    `;return{...r,output:{dims:n,type:t[0].type,textureType:0},hasMain:!0,shaderSource:s}},Rb=e=>{if(!e||0===e.length)throw new Error("Sum requires inputs.");let t=e[0].dims.length;for(let r=1;r<e.length;r++){if(t!==e[r].dims.length)throw new Error("Input shapes are mismatched.");for(let o=0;o<t;o++)if(e[0].dims[o]!==e[r].dims[o])throw new Error("Input shapes are not matched.")}if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.");for(let t=1;t<e.length;t++)if(e[0].type!==e[t].type)throw new Error("Input types are not matched.")}}),Vc,Mb,Gb,Wc=L(()=>{pn(),ae(),Vc=(e,t)=>{Gb(t);let r={name:"Tile",inputNames:["A"],inputTypes:[0]};return[e.run({...r,get:()=>Mb(e,t,r)},t)]},Mb=(e,t,r)=>{let o=t[0].dims.slice(),n=new Array(o.length),s=[];for(let e=0;e<o.length;e++)n[e]=o[e]*t[1].numberData[e],s.push(`inputIdx[${e}] = int(mod(float(outputIdx[${e}]), ${o[e]}.));`);let a=n.length,i=`\n      float process(int outputIdx[${a}]) {\n        int inputIdx[${a}];\n        ${s.join("\n")}\n        return _A(inputIdx);\n      }\n    `;return{...r,output:{dims:n,type:t[0].type,textureType:0},shaderSource:i}},Gb=e=>{if(!e||2!==e.length)throw new Error("Tile requires 2 input.");if(1!==e[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(e[1].dims[0]!==e[0].dims.length)throw new Error("Invalid input shape.");if(-1===Qt.indexOf(e[0].type))throw new Error("Invalid input type.");if("int32"!==e[1].type&&"int16"!==e[1].type)throw new Error("Invalid repeat type.")}}),zi,Hc,qc,Ub,zb,jc=L(()=>{fe(),zi=(e,t,r)=>{Ub(t);let o=U.unsqueezeShape(t[0].dims,r);return[e.reshapeUnpacked(t[0],o)]},Hc=(e,t)=>(zb(t),zi(e,[t[0]],Array.from(t[1].integerData))),qc=e=>e.attributes.getInts("axes"),Ub=e=>{if(!e||1!==e.length)throw new Error("Unsqueeze requires 1 input.");if("string"===e[0].type)throw new Error("invalid input tensor types.")},zb=e=>{if(!e||2!==e.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==e[1].type)throw new Error("Invalid input type.")}}),Yc,Xc=L(()=>{ol(),gl(),xl(),Sl(),to(),ff(),bf(),Tf(),vf(),Sf(),Ef(),Ff(),Nf(),ro(),Uf(),ec(),uc(),fc(),bc(),yc(),_c(),Fc(),Nc(),Gc(),zc(),Wc(),oo(),Ii(),jc(),Ni(),Yc=[["Abs","","6+",Al],["Acos","","7+",Pl],["Add","","7+",il],["And","","7+",al],["Asin","","7+",El],["Atan","","7+",Dl],["AveragePool","","7+",Vf,Wf],["BatchNormalization","","7+",rl,nl],["Cast","","6+",yl,Tl],["Ceil","","6+",Fl],["Clip","","6-10",_i,Ll],["Clip","","11+",Cl],["Concat","","4+",_l,Il],["Conv","","1+",Li,Ci],["ConvTranspose","","1+",uf,lf],["Cos","","7+",$l],["Div","","7+",sl],["Dropout","","7+",Oi],["DepthToSpace","","1+",hf,mf],["Equal","","7+",ul],["Elu","","6+",kl,Bl],["Exp","","6+",Nl],["Flatten","","1+",gf,yf],["Floor","","6+",Rl],["FusedConv","com.microsoft","1+",Li,Ci],["Gather","","1+",xf,wf],["Gemm","","7-10",Fi,Of],["Gemm","","11+",Fi,If],["GlobalAveragePool","","1+",qf,jf],["GlobalMaxPool","","1+",Zf],["Greater","","7+",ll],["Identity","","1+",Oi],["ImageScaler","","1+",Af,Pf],["InstanceNormalization","","6+",Lf,Cf],["LeakyRelu","","6+",Ml,Gl],["Less","","7+",fl],["LRN","","1+",$f,kf],["Log","","6+",Ul],["MatMul","","1+",ef,tf],["MaxPool","","1+",Yf,Xf],["Mul","","7+",cl],["Neg","","6+",zl],["Not","","1+",Vl],["Or","","7+",pl],["Pad","","2-10",$i,Rf],["Pad","","11+",Mf,Gf],["Pow","","7+",dl],["PRelu","","7+",hl],["ReduceLogSum","","1+",ac,er],["ReduceMax","","1+",nc,er],["ReduceMean","","1+",rc,er],["ReduceMin","","1+",oc,er],["ReduceProd","","1+",ic,er],["ReduceSum","","1-12",tc,er],["ReduceSumSquare","","1+",sc,er],["Relu","","6+",Wl],["Reshape","","5+",lc],["Resize","","10",Mi,hc],["Resize","","11+",Mi,mc],["Shape","","1+",gc],["Sigmoid","","6+",Hl],["Sin","","7+",ql],["Slice","","10+",vc],["Slice","","1-9",Tc,xc],["Softmax","","1-12",Ac,Pc],["Softmax","","13+",Dc,Ec],["Split","","2-12",kc,Bc],["Sqrt","","6+",jl],["Squeeze","","1-12",Ui,Mc],["Squeeze","","13+",Rc],["Sub","","7+",ml],["Sum","","6+",Uc],["Tan","","7+",Yl],["Tanh","","6+",Xl],["Tile","","6+",Vc],["Transpose","","1+",wr,pf],["Upsample","","7-8",ki,pc],["Upsample","","9",ki,dc],["Unsqueeze","","1-12",zi,qc],["Unsqueeze","","13+",Hc],["Xor","","7+",bl]]});function Jc(e){let t,r={};for(;null!==(t=Kc.exec(e));){let e=t[3].split(",").map(e=>{let t=e.trim().split(" ");return t&&2===t.length?{type:t[0],name:t[1]}:null}).filter(e=>null!==e);r[t[2]]={params:e,body:t[4]}}for(let o in r){let n=Vb.replace("__FUNC__",o),s=new RegExp(n,"gm");for(;null!==(t=s.exec(e));){let n=t[1],s=t[2],a=t[3].split(","),i=n?`${n} ${s};`:"",l=r[o].body,c="";r[o].params.forEach((e,t)=>{e&&(c+=`${e.type} ${e.name} = ${a[t]};\n`)}),l=`${c}\n ${l}`,l=l.replace("return",`${s} = `);let _=`\n      ${i}\n      {\n        ${l}\n      }\n      `;e=e.replace(t[0],_)}}return e=e.replace(Kc,"")}var Kc,Vb,Zc=L(()=>{Kc=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Vb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Mr(e,t){let r=[],o=[],n=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||n?null:Wb(t,e).sort(),a=0;for(let t=0;t<e.length;++t){if(null!=s){if(s[a]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==s[a]||s[a]>t)&&1===e[t]&&(r.push(e[t]),o.push(t)),s[a]<=t&&a++}1!==e[t]&&(r.push(e[t]),o.push(t))}return{newShape:r,keptDims:o}}function Wb(e,t){let r=t.length;return Fr((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-r&&e<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${e}`),Fr(e.every(Hb),()=>`All values in axis param must be integers but got axis ${e}`),e.map(e=>e<0?r+e:e)}function Hb(e){return e%1==0}function qb(e){if(0===e.length)return 1;let t=e[0];for(let r=1;r<e.length;r++)t*=e[r];return t}function Qc(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}var uo,Vi=L(()=>{lt(),fe(),uo=class{constructor(e){this.maxTextureSize=e}computeTextureWH(e,t){let r=this.computeTexture(e,t);return t&&t.isPacked&&(r[0]/=2,r[1]/=2),t&&t.reverseWH?[r[1],r[0]]:r}computeTexture(e,t){let r=t&&t.isPacked;if(0===e.length)return r?[2,2]:[1,1];let o=this.maxTextureSize;if(t&&void 0!==t.breakAxis){let r=t.breakAxis>=e.length?1:e.slice(t.breakAxis).reduce((e,t)=>e*t),n=t.breakAxis<=0?1:e.slice(0,t.breakAxis).reduce((e,t)=>e*t);if(!(r>o||n>o))return[r,n];ce.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${e}, breakAxis:${t.breakAxis}`)}let n=e.slice(0);r&&(o*=2,n=n.map((e,t)=>t>=n.length-2?n[t]%2==0?n[t]:n[t]+1:n[t]),1===n.length&&(n=[2,n[0]])),2!==n.length&&(n=Mr(n).newShape);let s=qb(n);return n.length<=1&&s<=o?[1,s]:2===n.length&&n[0]<=o&&n[1]<=o?n:3===n.length&&n[0]*n[1]<=o&&n[2]<=o?[n[0]*n[1],n[2]]:3===n.length&&n[0]<=o&&n[1]*n[2]<=o?[n[0],n[1]*n[2]]:4===n.length&&n[0]*n[1]*n[2]<=o&&n[3]<=o?[n[0]*n[1]*n[2],n[3]]:4===n.length&&n[0]<=o&&n[1]*n[2]*n[3]<=o?[n[0],n[1]*n[2]*n[3]]:r?Qc(s/4).map(e=>2*e):Qc(s)}}}),lo,ep=L(()=>{fe(),Wt(),we(),Vi(),Bt(),lo=class extends dt{constructor(e){super(e)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new R("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}}coordsToOffset(){return{coordsToOffset:new R("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}}getOutputSamplingSnippet(){let e=this.context.outputTextureLayout;return e.isPacked?this.getPackedOutputSamplingSnippet(e):this.getUnpackedOutputSamplingSnippet(e)}getPackedOutputSamplingSnippet(e){let t=e.unpackedShape,r=[e.width,e.height],o={},n="getOutputCoords";switch(t.length){case 0:o[n]=this.getOutputScalarCoords();break;case 1:o[n]=this.getOutputPacked1DCoords(t,r);break;case 2:o[n]=this.getOutputPacked2DCoords(t,r);break;case 3:o[n]=this.getOutputPacked3DCoords(t,r);break;default:o[n]=this.getOutputPackedNDCoords(t,r)}let s=`\n      void setOutput(vec4 val) {\n        ${H(this.context.glContext.version).output} = val;\n      }\n    `;return o.floatTextureSetRGBA=new R(s),o}getUnpackedOutputSamplingSnippet(e){let t=e.unpackedShape,r=[e.width,e.height],o={},n="getOutputCoords";switch(t.length){case 0:o[n]=this.getOutputScalarCoords();break;case 1:o[n]=this.getOutputUnpacked1DCoords(t,r);break;case 2:o[n]=this.getOutputUnpacked2DCoords(t,r);break;case 3:o[n]=this.getOutputUnpacked3DCoords(t,r);break;case 4:o[n]=this.getOutputUnpacked4DCoords(t,r);break;case 5:o[n]=this.getOutputUnpacked5DCoords(t,r);break;case 6:o[n]=this.getOutputUnpacked6DCoords(t,r);break;default:throw new Error(`Unsupported output dimensionality: ${t.length}`)}let s=`\n        void setOutput(float val) {\n          ${H(this.context.glContext.version).output} = vec4(val, 0, 0, 0);\n        }\n    `;return o.floatTextureSetR=new R(s),o}getOutputScalarCoords(){return new R("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")}getOutputPacked1DCoords(e,t){let r=t,o="";return 1===r[0]?(o=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ${r[1]}.0);\n          }\n        `,new R(o)):1===r[1]?(o=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ${r[0]}.0);\n          }\n        `,new R(o)):(o=`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(${r[0]}, ${r[1]}));\n          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);\n        }\n      `,new R(o))}getOutputPacked2DCoords(e,t){let r="";if(hr.arraysEqual(e,t))return r=`\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(${t[0]}, ${t[1]}));\n        }\n      `,new R(r);let o=t,n=Math.ceil(e[1]/2);return r=`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${o[0]}, ${o[1]}));\n\n          int index = resTexRC.y * ${o[0]} + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${n}) * 2;\n          int c = 2 * (index / ${n});\n\n          return ivec2(r, c);\n        }\n      `,new R(r)}getOutputPacked3DCoords(e,t){let r=[t[0],t[1]],o=Math.ceil(e[2]/2),n=o*Math.ceil(e[1]/2);return new R(`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${r[0]}, ${r[1]}));\n          int index = resTexRC.y * ${r[0]} + resTexRC.x;\n\n          int b = index / ${n};\n          index -= b * ${n};\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${o}) * 2;\n          int c = 2 * (index / ${o});\n\n          return ivec3(b, r, c);\n        }\n      `)}getOutputPackedNDCoords(e,t){let r=[t[0],t[1]],o=Math.ceil(e[e.length-1]/2),n=o*Math.ceil(e[e.length-2]/2),s=n,a="",i="b, r, c";for(let t=2;t<e.length-1;t++)s*=e[e.length-t-1],a=`\n      int b${t} = index / ${s};\n      index -= b${t} * ${s};\n    `+a,i=`b${t}, `+i;let l=`\n      ivec${e.length} getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(${r[0]}, ${r[1]}));\n        int index = resTexRC.y * ${r[0]} + resTexRC.x;\n\n        ${a}\n\n        int b = index / ${n};\n        index -= b * ${n};\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ${o}) * 2;\n        int c = 2 * (index / ${o});\n\n        return ivec${e.length}(${i});\n      }\n    `;return new R(l)}getOutputUnpacked1DCoords(e,t){let r=`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${t[0]}, ${t[1]}));\n          return resTexRC.y * ${t[0]} + resTexRC.x;\n        }\n      `;return new R(r)}getOutputUnpacked2DCoords(e,t){let r=`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${t[0]}, ${t[1]}));\n          int index = resTexRC.y * ${t[0]} + resTexRC.x;\n          int r = index / ${e[1]};\n          int c = index - r * ${e[1]};\n          return ivec2(r, c);\n        }\n      `;return new R(r)}getOutputUnpacked3DCoords(e,t){let r="",o=e.length,n=null;o<2&&(n=[]),n=new Array(o-1),n[o-2]=e[o-1];for(let t=o-3;t>=0;--t)n[t]=n[t+1]*e[t+1];let s=["r","c","d"],a=n.map((e,t)=>`${`int ${s[t]} = index / ${e}`}; ${t===n.length-1?`int ${s[t+1]} = index - ${s[t]} * ${e}`:`index -= ${s[t]} * ${e}`};`).join("");return r=`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${t[0]}, ${t[1]}));\n          int index = resTexRC.y * ${t[0]} + resTexRC.x;\n          ${a}\n          return ivec3(r, c, d);\n        }\n      `,new R(r)}getOutputUnpacked4DCoords(e,t){let r="",o=e.length,n=null;o<2&&(n=[]),n=new Array(o-1),n[o-2]=e[o-1];for(let t=o-3;t>=0;--t)n[t]=n[t+1]*e[t+1];let s=["r","c","d","d2"],a=n.map((e,t)=>`${`int ${s[t]} = index / ${e}`}; ${t===n.length-1?`int ${s[t+1]} = index - ${s[t]} * ${e}`:`index -= ${s[t]} * ${e}`};`).join("");return r=`\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${t[0]}, ${t[1]}));\n          int index = resTexRC.y * ${t[0]} + resTexRC.x;\n          ${a}\n          return ivec4(r, c, d, d2);\n        }\n      `,new R(r)}getOutputUnpacked5DCoords(e,t){let r="",o=e.length,n=null;o<2&&(n=[]),n=new Array(o-1),n[o-2]=e[o-1];for(let t=o-3;t>=0;--t)n[t]=n[t+1]*e[t+1];let s=["r","c","d","d2","d3"],a=n.map((e,t)=>`${`int ${s[t]} = index / ${e}`}; ${t===n.length-1?`int ${s[t+1]} = index - ${s[t]} * ${e}`:`index -= ${s[t]} * ${e}`};`).join("");return r=`\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${t[0]}, ${t[1]}));\n          int index = resTexRC.y * ${t[0]} + resTexRC.x;\n          ${a}\n          return ivec5(r, c, d, d2, d3);\n        }\n      `,new R(r)}getOutputUnpacked6DCoords(e,t){let r="",o=e.length,n=null;o<2&&(n=[]),n=new Array(o-1),n[o-2]=e[o-1];for(let t=o-3;t>=0;--t)n[t]=n[t+1]*e[t+1];let s=["r","c","d","d2","d3","d4"],a=n.map((e,t)=>`${`int ${s[t]} = index / ${e}`}; ${t===n.length-1?`int ${s[t+1]} = index - ${s[t]} * ${e}`:`index -= ${s[t]} * ${e}`};`).join("");return r=`\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(${t[0]}, ${t[1]}));\n         int index = resTexRC.y * ${t[0]} + resTexRC.x;\n         ${a}\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     `,new R(r)}getCommonUtilFuncs(){let e={},t="uvFromFlat";e[t]=new R("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),t="packedUVfrom1D",e[t]=new R("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t="packedUVfrom2D",e[t]=new R("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t="packedUVfrom3D",e[t]=new R("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t="sampleTexture";let r=H(this.context.glContext.version);return e[t]=new R(`\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ${r.texture2D}(textureSampler, uv).r;\n        }`),e}getInputsSamplingSnippets(){let e={},t=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,o)=>{let n=this.context.inputTextureLayouts[o],s=Yn(r);n.isPacked?e[s]=this.getPackedSamplerFromInput(s,r,n):e[s]=this.getUnpackedSamplerFromInput(s,r,n);let a=Gu(r);n.unpackedShape.length<=t.unpackedShape.length&&(n.isPacked?e[a]=this.getPackedSamplerAtOutputCoords(a,n,t,r):e[a]=this.getUnpackedSamplerAtOutputCoords(a,n,t,r))}),e}getPackedSamplerAtOutputCoords(e,t,r,o){let n,s=t.unpackedShape,a=r.unpackedShape,i=Yn(o),l=s.length,c=a.length,_=Ze.getBroadcastDims(s,a),p=Qe(c),u=c-l,d=Dt();n=0===l?"":c<2&&_.length>=1?"coords = 0;":_.map(e=>`coords.${d[e+u]} = 0;`).join("\n");let h="";h=c<2&&l>0?"coords":s.map((e,t)=>`coords.${d[t+u]}`).join(", ");let f="return outputValue;",m=1===U.size(s),g=1===U.size(a);if(1!==l||m||g){if(m&&!g)f=1===c?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(_.length){let e=l-2,t=l-1;_.indexOf(e)>-1&&_.indexOf(t)>-1?f="return vec4(outputValue.x);":_.indexOf(e)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":_.indexOf(t)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";let b=`\n        int lastDim = coords.${d[c-1]};\n        coords.${d[c-1]} = coords.${d[c-2]};\n        coords.${d[c-2]} = lastDim;\n      `;return new R(`\n      vec4 ${e}() {\n        ${p} coords = getOutputCoords();\n        ${b}\n        ${n}\n        vec4 outputValue = ${i}(${h});\n        ${f}\n      }\n    `,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(e,t,r,o){let n=[r.width,r.height],s=[t.width,t.height],a=t.unpackedShape.length,i=r.unpackedShape.length,l=t.unpackedShape,c=r.unpackedShape,_=Yn(o);if(a===i&&hr.arraysEqual(s,n)){return new R(`\n          float ${e}() {\n            return sampleTexture(${o}, TexCoords);\n          }\n        `,["coordinates.sampleTexture"])}let p,u=Qe(i),d=Ze.getBroadcastDims(l,c),h=i-a,f=Dt();p=0===a?"":i<2&&d.length>=1?"coords = 0;":d.map(e=>`coords.${f[e+h]} = 0;`).join("\n");let m="";return m=i<2&&a>0?"coords":t.unpackedShape.map((e,t)=>`coords.${f[t+h]}`).join(", "),new R(`\n        float ${e}() {\n          ${u} coords = getOutputCoords();\n          ${p}\n          return ${_}(${m});\n        }\n      `,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(e,t,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(e,t);case 1:return this.getPackedSampler1D(e,t,r);case 2:return this.getPackedSampler2D(e,t,r);case 3:return this.getPackedSampler3D(e,t,r);default:return this.getPackedSamplerND(e,t,r)}}getUnpackedSamplerFromInput(e,t,r){let o=r.unpackedShape;switch(o.length){case 0:return this.getUnpackedSamplerScalar(e,t,r);case 1:return this.getUnpackedSampler1D(e,t,r);case 2:return this.getUnpackedSampler2D(e,t,r);case 3:return this.getUnpackedSampler3D(e,t,r);case 4:return this.getUnpackedSampler4D(e,t,r);case 5:return this.getUnpackedSampler5D(e,t,r);case 6:return this.getUnpackedSampler6D(e,t,r);default:throw new Error(`Unsupported dimension ${o.length}-D`)}}getPackedSamplerScalar(e,t){let r=`\n          vec4 ${e}() {\n            return ${H(this.context.glContext.version).texture2D}(${t}, halfCR);\n          }\n        `;return new R(r)}getPackedSampler1D(e,t,r){let o=[r.width,r.height],n=[o[1],o[0]],s=H(this.context.glContext.version),a=`vec4 ${e}(int index) {\n      vec2 uv = packedUVfrom1D(\n      ${n[0]}, ${n[1]}, index);\n      return ${s.texture2D}(${t}, uv);\n    }`;return new R(a,["coordinates.packedUVfrom1D"])}getPackedSampler2D(e,t,r){let o=r.unpackedShape,n=[r.width,r.height],s=H(this.context.glContext.version),a=n[0],i=n[1];if(null!=n&&hr.arraysEqual(o,n)){let r=`vec4 ${e}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${a}.0);\n        return ${s.texture2D}(${t}, uv);\n      }`;return new R(r)}let l=n,c=Math.ceil(o[1]/2),_=`vec4 ${e}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${l[1]}, ${l[0]}, ${c}, row, col);\n      return ${s.texture2D}(${t}, uv);\n    }`;return new R(_,["coordinates.packedUVfrom2D"])}getPackedSampler3D(e,t,r){let o=r.unpackedShape,n=[r.width,r.height],s=[n[0],n[1]],a=H(this.context.glContext.version);if(1===o[0]){let n=o.slice(1),s=[1,2],a=$r(o,n),i=["b","row","col"],l=JSON.parse(JSON.stringify(r));l.unpackedShape=a;let c=this.getPackedSamplerFromInput(e,t,l),_=`${c.routineBody}\n      vec4 ${e}(int b, int row, int col) {\n        return ${e}(${kr(i,s)});\n      } `;return new R(_,c.dependencies)}let i=s[0],l=s[1],c=Math.ceil(o[2]/2),_=`vec4 ${e}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${i}, ${c*Math.ceil(o[1]/2)}, ${c}, b, row, col);\n      return ${a.texture2D}(${t}, uv);}`;return new R(_,["coordinates.packedUVfrom3D"])}getPackedSamplerND(e,t,r){let o=r.unpackedShape,n=o.length,s=[r.width,r.height],a=H(this.context.glContext.version),i=[s[0],s[1]],l=i[1],c=i[0],_=Math.ceil(o[n-1]/2),p=_*Math.ceil(o[n-2]/2),u="int b, int row, int col",d=`b * ${p} + (row / 2) * ${_} + (col / 2)`;for(let e=2;e<n-1;e++)u=`int b${e}, `+u,p*=o[n-e-1],d=`b${e} * ${p} + `+d;let h=`vec4 ${e}(${u}) {\n      int index = ${d};\n      int texR = index / ${c};\n      int texC = index - texR * ${c};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});\n      return ${a.texture2D}(${t}, uv);\n    }`;return new R(h)}getUnpackedSamplerScalar(e,t,r){let[o,n]=[r.width,r.height];if(1===o&&1===n){return new R(`\n          float ${e}() {\n            return sampleTexture(${t}, halfCR);\n          }\n        `,["coordinates.sampleTexture"])}return new R(`\n        float ${e}() {\n          int offset_${t} = coordsToOffset(TexCoords, ${o}, ${n});\n          vec2 uv = uvFromFlat(${o}, ${n}, offset_${t});\n          return sampleTexture(${t}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(e,t,r){let o=r.width,n=r.height;if(1===n&&1===o){return new R(`\n        float ${e}(int index) {\n          return sampleTexture(${t}, halfCR);\n        }\n      `,["coordinates.sampleTexture"])}if(1===n){return new R(`\n          float ${e}(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ${o}.0, 0.5);\n            return sampleTexture(${t}, uv);\n          }\n        `,["coordinates.sampleTexture"])}if(1===o){return new R(`\n          float ${e}(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${n}.0);\n            return sampleTexture(${t}, uv);\n          }\n        `,["coordinates.sampleTexture"])}return new R(`\n        float ${e}(int index) {\n          vec2 uv = uvFromFlat(${o}, ${n}, index);\n          return sampleTexture(${t}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(e,t,r){let o=r.unpackedShape,n=[r.height,r.width];if(null!=n&&hr.arraysEqual(o,n)){return new R(`\n          float ${e}(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(${n[1]}.0, ${n[0]}.0);\n            return sampleTexture(${t}, uv);\n          }\n        `,["coordinates.sampleTexture"])}let{newShape:s,keptDims:a}=Mr(o),i=s;if(i.length<o.length){let n=$r(o,i),s=JSON.parse(JSON.stringify(r));s.unpackedShape=n;let l=["col","row"],c=`\n          ${this.getUnpackedSamplerFromInput(e,t,s).routineBody}\n          float ${e}(int row, int col) {\n            return ${e}(${kr(l,a)});\n          }\n        `;return new R(c,["coordinates.sampleTexture"])}let l=n[1],c=n[0];if(1===c){let r=`\n          float ${e}(int row, int col) {\n            int offset_${t} = coordsToOffset(TexCoords, ${l}, ${c});\n            float index = dot(vec3(row, col, offset_${t}), vec3(${o[1]}, 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);\n            return sampleTexture(${t}, uv);\n          }\n        `;return new R(r,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===l){let r=`\n          float ${e}(int row, int col) {\n            int offset_${t} = coordsToOffset(TexCoords, ${l}, ${c});\n            float index = dot(vec3(row, col, offset_${t}), vec3(${o[1]}, 1, 1));\n            vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n            return sampleTexture(${t}, uv);\n          }\n        `;return new R(r,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let _=`\n        float ${e}(int row, int col) {\n          int index = col * ${o[1]} + row;\n          vec2 uv = uvFromFlat(${l}, ${c}, index);\n          return sampleTexture(${t}, uv);\n        }\n      `;return new R(_,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(e,t,r){let o=r.unpackedShape,n=o[1]*o[2],s=o[2],{newShape:a,keptDims:i}=Mr(o),l=a;if(l.length<o.length){let n=$r(o,l),s=["batch","col","row"],a=JSON.parse(JSON.stringify(r));a.unpackedShape=n;let c=this.getUnpackedSamplerFromInput(e,t,a),_=i.reverse(),p=`\n          ${c.routineBody}\n          float ${e}(int batch, int row, int col) {\n            return ${e}(${kr(s,_)});\n          }\n        `;return new R(p,c.dependencies)}let c=r.width,_=r.height;return new R(`\n          float ${e}(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ${n} + col * ${s} + row;\n            vec2 uv = uvFromFlat(${c}, ${_}, index);\n            return sampleTexture(${t}, uv);\n          }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(e,t,r){let o=r.unpackedShape,n=o[3],s=o[2]*n,a=o[1]*s,i=r.width,l=r.height;return new R(`\n        float ${e}(int row, int col, int depth, int depth2) {\n          int index = row * ${a} + col * ${s} +\n              depth2 * ${n} + depth;\n          vec2 uv = uvFromFlat(${i}, ${l}, index);\n          return sampleTexture(${t}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(e,t,r){let o=r.unpackedShape,n=o[4],s=o[3]*n,a=o[2]*s,i=o[1]*a,{newShape:l,keptDims:c}=Mr(o);if(l.length<o.length){let n=$r(o,l),s=["row","col","depth","depth2","depth3"],a=JSON.parse(JSON.stringify(r));a.unpackedShape=n;let i=`\n          ${this.getUnpackedSamplerFromInput(e,t,a).routineBody}\n          float ${e}(int row, int col, int depth, int depth2, int depth3) {\n            return ${e}(${kr(s,c)});\n          }\n        `;return new R(i,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let _=r.width,p=r.height;return new R(`\n        float ${e}(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ${i} + col * ${a} + depth * ${s} +\n          depth3 * ${n} + depth2;\n          vec2 uv = uvFromFlat(${_}, ${p}, index);\n          return sampleTexture(${t}, uv);\n        }\n      `,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(e,t,r){let o=r.unpackedShape,n=o[5],s=o[4]*n,a=o[3]*s,i=o[2]*a,l=o[1]*i,{newShape:c,keptDims:_}=Mr(o);if(c.length<o.length){let n=$r(o,c),s=["row","col","depth","depth2","depth3","depth4"],a=JSON.parse(JSON.stringify(r));a.unpackedShape=n;let i=`\n            ${this.getUnpackedSamplerFromInput(e,t,a).routineBody}\n            float ${e}(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ${e}(${kr(s,_)});\n            }\n          `;return new R(i,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let p=r.width,u=r.height;return new R(`\n          float ${e}(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ${l} + col * ${i} + depth * ${a} +\n            depth2 * ${s} + depth3 * ${n} + depth4;\n            vec2 uv = uvFromFlat(${p}, ${u}, index);\n            return sampleTexture(${t}, uv);\n          }\n        `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let e=this.context.outputTextureLayout,t=e.shape.length,r=e.strides,o=e.width,n=e.height,s=[];for(let e=0;e<t-1;++e)s.push(`\n        c[${e}] = offset / ${r[e]};`),s.push(`\n        offset -= c[${e}] * ${r[e]};`);s.push(`\n        c[${t-1}] = offset;`);let a=`\n      void toVec(vec2 texCoords, out int c[${t}]) {\n        int offset = coordsToOffset(texCoords, ${o}, ${n});\n        ${s.join("")}\n      }\n      void toVec(int offset, out int c[${t}]) {\n        ${s.join("")}\n      }\n    `;return{toVec:new R(a,["coordinates.coordsToOffset"])}}valueFrom(){let e={};return this.context.programInfo.inputNames.forEach((t,r)=>{let o=this.context.inputTextureLayouts[r],n=(o.unpackedShape.length>0?o.unpackedShape:o.shape).length,s=`_${t}`;e[s]=new R(this.getValueFromSingle(t,n,o.width,o.height,!1),[`shapeUtils.indicesToOffset${s}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),s+="_T",e[s]=new R(this.getValueFromSingle(t,n,o.width,o.height,!0),[`shapeUtils.indicesToOffset${s}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),e}getValueFromSingle(e,t,r,o,n){let s=`_${e}`;return n&&(s+="_T"),`\n        float ${s}(int m[${t}]) {\n          int offset = indicesToOffset${s}(m);\n          vec2 coords = offsetToCoords(offset, ${r}, ${o});\n          float value = getColorAsFloat(${H(this.context.glContext.version).texture2D}(${e}, coords));\n          return value;\n        }\n        `}getPackedValueFrom(e,t,r,o,n){let s=`_${e}_Pack`;return n&&(s+="_T"),`\n        vec4 ${s}(int m[${t}]) {\n          int offset = indicesToOffset_${e}(m);\n          vec2 coords = offsetToCoords(offset, ${r}, ${o});\n          return ${H(this.context.glContext.version).texture2D}(${e}, coords);\n        }\n        `}}}),fo,tp=L(()=>{Wt(),fo=class e extends dt{constructor(e){super(e)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}}decodeFloat32(){return{decode:new R("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}}encodeUint8(){let t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R(`\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ${t}\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        `)}}decodeUint8(){let t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R(`\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ${t}\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        `)}}static isLittleEndian(){let e=new ArrayBuffer(4),t=new Uint32Array(e),r=new Uint8Array(e);if(t[0]=3735928559,239===r[0])return!0;if(222===r[0])return!1;throw new Error("unknown endianness")}}}),co,rp=L(()=>{Wt(),we(),co=class extends dt{constructor(e){super(e)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let e=H(this.context.glContext.version);return{setFragColor:new R(`\n        void setFragColor(float value) {\n            ${e.output} = encode(value);\n        }\n        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}}}}),po,np=L(()=>{Wt(),po=class e extends dt{constructor(e){super(e)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let e=this.context.outputTextureLayout.shape.length,t={};return this.context.programInfo.inputNames.forEach((r,o)=>{let n=this.context.inputTextureLayouts[o].unpackedShape;if(n.length<=e){let o=n.length,s=e-o,a=`bcastIndices_${r}`,i="";for(let e=0;e<o;++e)i+=`\n          realIndices[${e}] = int( mod(float(bcastedIndices[${s+e}]), ${n[e]}.0) );\n          `;let l=`\n        void ${a} (int bcastedIndices[${e}], out int realIndices[${o}]) {\n          ${i}\n        }\n        `;t[a]=new R(l)}}),t}bcastMatmulIndex(){let e=this.context.outputTextureLayout.shape.length,t={};return this.context.programInfo.inputNames.forEach((r,o)=>{let n=this.context.inputTextureLayouts[o].shape;if(!(n.length<2||n.length>e)){let o=n.length,s=e-o,a=`bcastMatmulIndices_${r}`,i="";for(let e=0;e<o-2;++e)i+=`\n          realIndices[${e}] = int( mod(float(bcastedIndices[${s+e}]), ${n[e]}.0) );\n          `;let l=`\n        void ${a}(int bcastedIndices[${e}], out int realIndices[${o}]) {\n          ${i}\n          realIndices[${o-1}] = bcastedIndices[${e-1}];\n          realIndices[${o-2}] = bcastedIndices[${e-2}];\n        }\n        `;t[a]=new R(l)}}),t}indicesToOffset(){let t={};return this.context.programInfo.inputNames.forEach((r,o)=>{let n=this.context.inputTextureLayouts[o].shape,s=this.context.inputTextureLayouts[o].strides,a=n.length,i=`indicesToOffset_${r}`;t[i]=new R(e.indexToOffsetSingle(i,a,s)),i=`indicesToOffset_${r}_T`,t[i]=new R(e.indexToOffsetSingle(i,a,s.slice().reverse()))}),t}static indexToOffsetSingle(e,t,r){let o="";for(let e=t-1;e>=0;--e)o+=`\n        offset += indices[${e}] * ${r[e]};\n        `;return`\n      int ${e}(int indices[${t}]) {\n        int offset = 0;\n        ${o}\n        return offset;\n      }\n      `}offsetToIndices(){let t={};return this.context.programInfo.inputNames.forEach((r,o)=>{let n=this.context.inputTextureLayouts[o].shape,s=this.context.inputTextureLayouts[o].strides,a=n.length,i=`offsetToIndices_${r}`;t[i]=new R(e.offsetToIndicesSingle(i,a,s)),i=`offsetToIndices_${r}_T`,t[i]=new R(e.offsetToIndicesSingle(i,a,s.slice().reverse()))}),t}static offsetToIndicesSingle(e,t,r){let o=[];for(let e=0;e<t-1;++e)o.push(`\n      indices[${e}] = offset / ${r[e]};`),o.push(`\n        offset -= indices[${e}] * ${r[e]};`);return o.push(`\n      indices[${t-1}] = offset;`),`\n      void ${e}(int offset, out int indices[${t}]) {\n        ${o.join("")}\n      }\n      `}incrementIndices(){let e={};return this.context.programInfo.inputNames.forEach((t,r)=>{let o=this.context.inputTextureLayouts[r].shape,n=o.length,s=`incrementIndices_${t}`,a="";for(let e=0;e<n;++e)a+=`\n        shape[${e}] = ${o[e]};`;let i=`\n        void ${s}(int axis, out int indices[${n}]) {\n          int shape[${n}];\n          ${a};\n          for(int i = ${n} -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        `;e[s]=new R(i)}),e}}}),ho,op=L(()=>{Wt(),ho=class extends dt{constructor(e){super(e)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let e=this.context.outputTextureLayout.shape.length,t={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let o in t){let n=`${o}Vec`,s="";for(let r=0;r<e;++r)s+=`\n          dest[${r}] ${t[o]} src[${r}];\n          `;let a=`\n        void ${n}(int src[${e}], out int dest[${e}]) {\n          ${s}\n        }\n        `;r[n]=new R(a)}return r}copyVec(){let e=this.context.outputTextureLayout.shape.length,t="";for(let r=0;r<e;++r)t+=`\n        dest[${r}] = src[${r}];\n        `;return{copyVec:new R(`\n      void copyVec(int src[${e}], out int dest[${e}]) {\n        ${t}\n      }\n      `)}}setVecItem(){let e=this.context.outputTextureLayout.shape.length,t=`\n        if(index < 0)\n            index =${e} + index;\n        if (index == 0)\n            m[0] = value;\n        `;for(let r=1;r<e-1;++r)t+=`\n        else if (index == ${r})\n            m[${r}] = value;\n            `;return t+=`\n        else\n            m[${e-1}] = value;\n        `,{setVecItem:new R(`\n      void setVecItem(out int m[${e}], int index, int value) {\n        ${t}\n      }\n        `)}}getVecItem(){let e=this.context.outputTextureLayout.shape.length,t=`\n        if(index < 0)\n            index = ${e} + index;\n        if (index == 0)\n            return m[0];\n      `;for(let r=1;r<e-1;++r)t+=`\n        else if (index == ${r})\n            return m[${r}];\n      `;return t+=`\n        else\n            return m[${e-1}];\n        `,{getVecItem:new R(`\n      int getVecItem(int m[${e}], int index) {\n        ${t}\n      }\n    `)}}}}),Wi,ip=L(()=>{ep(),tp(),rp(),np(),op(),Wi={encoding:fo,fragcolor:co,vec:ho,shapeUtils:po,coordinates:lo}}),mo,ap=L(()=>{Wt(),Zc(),ip(),we(),mo=class{constructor(e,t,r,o){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Zn(e,t,r,o),Object.keys(Wi).forEach(e=>{let t=new Wi[e](this.context);this.libs[e]=t});let n=this.glslLibRoutineDependencyGraph;for(let e in this.libs){let t=this.libs[e].getFunctions();for(let r in t){let o,s=e+"."+r;n[s]?(o=n[s],o.routineBody=t[r].routineBody):(o=new cn(s,t[r].routineBody),n[s]=o);let a=t[r].dependencies;if(a)for(let e=0;e<a.length;++e)if(n[a[e]])o.addDependency(n[a[e]]);else{let t=new cn(a[e]);n[a[e]]=t,o.addDependency(t)}}}}preprocess(){let e=this.context.programInfo,t=e.shaderSource;return this.context.programInfo.hasMain||(t=`${t}\n      ${Mu(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),t=Jc(t),`${Ru(this.context.glContext.version)}\n    ${this.getUniforms(e.inputNames,e.variables)}\n    ${this.getImports(t)}\n    ${t}`}getImports(e){let t=this.selectGlslLibRoutinesToBeIncluded(e);if(0===t.length)return"";let r="";for(let e=0;e<t.length;++e){if(!t[e].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${t[e].name}`);r+=t[e].routineBody+"\n"}return r}selectGlslLibRoutinesToBeIncluded(e){let t=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(r=>{let o=r.split(".")[1];-1!==e.indexOf(o)&&t.push(this.glslLibRoutineDependencyGraph[r])}),Qn.returnOrderedNodes(t)}getUniforms(e,t){let r=[];if(e)for(let t of e)r.push(`uniform sampler2D ${t};`);if(t)for(let e of t)r.push(`uniform ${e.type} ${e.name}${e.arrayLength?`[${e.arrayLength}]`:""};`);return r.join("\n")}}}),bo,sp=L(()=>{Ot(),lt(),ap(),we(),bo=class{constructor(e,t,r){this.profiler=e,this.glContext=t,this.textureLayoutStrategy=r,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,r){this.profiler.event("op",`ProgramManager.run ${e.programInfo.name??"unknown kernel"}`,()=>{let o=this.glContext.gl,n=e.program;o.useProgram(n);try{this.bindOutput(r),this.attributesBound||this.bindAttributes(e.attribLocations),this.bindUniforms(e.uniformLocations,e.programInfo.variables??[],t)}catch(t){throw ce.error("ProgramManager",e.programInfo.shaderSource),t}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(e=>this.glContext.deleteProgram(e.program))}build(e,t,r){return this.profiler.event("backend","ProgramManager.build",()=>{let o=new mo(this.glContext,e,t,r),n=o.preprocess(),s=this.compile(n);return{programInfo:e,program:s,uniformLocations:this.getUniformLocations(s,o.context.programInfo.inputNames,o.context.programInfo.variables),attribLocations:this.getAttribLocations(s)}})}compile(e){if(!this.vertexShader){ce.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let e=Nu(this.glContext.version);this.vertexShader=this.glContext.compileShader(e,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce.verbose("ProrgramManager",`FragShader:\n${e}\n`);let t=this.glContext.compileShader(e,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,t);return this.glContext.deleteShader(t),r}bindOutput(e){let t=e.width,r=e.height;ce.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${t}/${r}, shape=${e.shape}, type=${e.tensor.type}`),this.glContext.attachFramebuffer(e.texture,t,r)}bindAttributes(e){let t=e.position,r=e.textureCoord;this.glContext.setVertexAttributes(t,r),this.attributesBound=!0}bindUniforms(e,t,r){let o=this.glContext.gl,n=0;for(let{name:s,type:a,location:i,arrayLength:l}of e){let e=t.find(e=>e.name===s)?.data;if("sampler2D"!==a&&!e)throw new Error(`variable '${s}' does not have data defined in program info`);switch(a){case"sampler2D":this.bindTexture(r[n],i,n),n++;break;case"float":l?o.uniform1fv(i,e):o.uniform1f(i,e);break;case"int":l?o.uniform1iv(i,e):o.uniform1i(i,e);break;default:throw new Error(`Uniform not implemented: ${a}`)}}}bindTexture(e,t,r){this.glContext.bindTextureToUniform(e.texture,r,t)}getAttribLocations(e){return{position:this.getAttribLocation(e,"position"),textureCoord:this.getAttribLocation(e,"textureCoord")}}getUniformLocations(e,t,r){let o=[];if(t)for(let r of t)o.push({name:r,type:"sampler2D",location:this.getUniformLocation(e,r)});if(r)for(let t of r)o.push({...t,location:this.getUniformLocation(e,t.name)});return o}getUniformLocation(e,t){let r=this.glContext.gl.getUniformLocation(e,t);if(null===r)throw new Error(`Uniform ${t} not found.`);return r}getAttribLocation(e,t){return this.glContext.gl.getAttribLocation(e,t)}}}),go,up=L(()=>{lt(),ln(),go=class{constructor(e,t,r,o){this.glContext=e,this.layoutStrategy=t,this.profiler=r,this.config=o,this.pendingRead=new Map,o.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(e,t,r,o){let n=this.toEncoderType(e),s=this.glContext.getEncoder(n,t.channels||1,o);if(t.isPacked&&1===o)throw new Error("not implemented");let a,i,l=t.width,c=t.height;if(this.config.reuseTextures){a=`${l}x${c}_${s.format}_${s.internalFormat}_${s.textureType}`,i=this.inUseTextures.get(a),i||(i=[],this.inUseTextures.set(a,i));let t=this.idleTextures.get(a);if(t&&t.length>0){let n=t.pop();return i.push(n),1===o&&this.glContext.updateTexture(n,l,c,s,this.toTextureData(e,r)),n}}ce.verbose("TextureManager",`Creating new texture of size ${t.width}x${t.height}`);let _=this.glContext.allocateTexture(l,c,s,this.toTextureData(e,r));return this.config.reuseTextures&&(i.push(_),this.textureLookup.set(_,a)),_}readTexture(e,t,r){return r||(r=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let o=e.shape.reduce((e,t)=>e*t)*r,n=this.glContext.readTexture(e.texture,e.width,e.height,o,this.toEncoderType(t),r);return this.toTensorData(t,n)})}async readTextureAsync(e,t,r){let o=e.tensor.dataId;if(r||(r=1),this.pendingRead.has(o)){let e=this.pendingRead.get(o);return new Promise(t=>e?.push(t))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(o,[]);let n=e.shape.reduce((e,t)=>e*t)*r;await this.glContext.createAndWaitForFence();let s=this.glContext.readTexture(e.texture,e.width,e.height,n,this.toEncoderType(t),r),a=this.toTensorData(t,s),i=this.pendingRead.get(o);return this.pendingRead.delete(o),i?.forEach(e=>e(a)),a})}readUint8TextureAsFloat(e){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let t=e.shape.reduce((e,t)=>e*t),r=this.glContext.readTexture(e.texture,e.width,e.height,4*t,"byte",4);return new Float32Array(r.buffer,r.byteOffset,t)})}releaseTexture(e,t){let r;if(this.config.reuseTextures&&(r=this.textureLookup.get(e.texture),r)){t&&this.textureLookup.delete(r);let o=this.inUseTextures.get(r);if(o){let t=o.indexOf(e.texture);if(-1!==t){o.splice(t,1);let n=this.idleTextures.get(r);n||(n=[],this.idleTextures.set(r,n)),n.push(e.texture)}}}(!r||t)&&(ce.verbose("TextureManager",`Deleting texture of size ${e.width}x${e.height}`),this.glContext.deleteTexture(e.texture))}toTensorData(e,t){switch(e){case"int16":return t instanceof Int16Array?t:Int16Array.from(t);case"int32":return t instanceof Int32Array?t:Int32Array.from(t);case"int8":return t instanceof Int8Array?t:Int8Array.from(t);case"uint16":return t instanceof Uint16Array?t:Uint16Array.from(t);case"uint32":return t instanceof Uint32Array?t:Uint32Array.from(t);case"uint8":case"bool":return t instanceof Uint8Array?t:Uint8Array.from(t);case"float32":return t instanceof Float32Array?t:Float32Array.from(t);case"float64":return t instanceof Float64Array?t:Float64Array.from(t);default:throw new Error(`TensorData type ${e} is not supported`)}}toTextureData(e,t){if(t)return t instanceof Float32Array?t:new Float32Array(t)}toEncoderType(e){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),yo,lp=L(()=>{lt(),_s(),el(),Xc(),sp(),Vi(),up(),yo=class{constructor(e,t){this.backend=e,this.context=t,this.layoutStrategy=new uo(e.glContext.maxTextureSize),this.programManager=new bo(this.context.profiler,e.glContext,this.layoutStrategy),this.textureManager=new go(e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===e.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=e.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Jn(this)}onGraphInitialized(e){let t=e.getValues().filter(e=>-1===e.from&&e.tensor).map(e=>e.tensor.dataId);this.initializers=new Set(t)}isInitializer(e){return!!this.initializers&&this.initializers.has(e)}addInitializer(e){this.initializers.add(e)}getTextureData(e,t){return t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,t,r=!1){ce.verbose("WebGLSessionHandler","Storing Texture data in cache"),r?this.packedTextureDataCache.set(e,t):this.unpackedTextureDataCache.set(e,t)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.unpackedTextureDataCache=new Map}resolve(e,t,r){let o=vs(e,t,Yc);return{impl:o.opImpl,context:o.opInit?o.opInit(e,r):e}}}});function jb(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}var hn,fp=L(()=>{Ot(),ln(),ln(),Bt(),hn=class{constructor(e,t){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=e,this.version=t,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(e,t,r,o){let n=this.gl,s=n.createTexture();n.bindTexture(n.TEXTURE_2D,s),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);let a=o?r.encode(o,e*t):null;return n.texImage2D(n.TEXTURE_2D,0,r.internalFormat,e,t,0,r.format,r.textureType,a),this.checkError(),s}updateTexture(e,t,r,o,n){let s=this.gl;s.bindTexture(s.TEXTURE_2D,e);let a=o.encode(n,t*r);s.texSubImage2D(s.TEXTURE_2D,0,0,0,t,r,o.format,o.textureType,a),this.checkError()}attachFramebuffer(e,t,r){let o=this.gl;o.bindTexture(o.TEXTURE_2D,e),o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),this.checkError(),o.viewport(0,0,t,r),o.scissor(0,0,t,r)}readTexture(e,t,r,o,n,s){let a=this.gl;s||(s=1),this.frameBufferBound||this.attachFramebuffer(e,t,r);let i=this.getEncoder(n,s),l=i.allocate(t*r);return a.bindTexture(a.TEXTURE_2D,e),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),a.readPixels(0,0,t,r,a.RGBA,i.textureType,l),this.checkError(),i.decode(l,o)}isFramebufferReady(){return!0}getActiveTexture(){let e=this.gl;return"TEXTURE"+(e.getParameter(this.gl.ACTIVE_TEXTURE)-e.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(e,t){let r=this.gl;r.vertexAttribPointer(e,3,r.FLOAT,!1,20,0),r.enableVertexAttribArray(e),-1!==t&&(r.vertexAttribPointer(t,2,r.FLOAT,!1,20,12),r.enableVertexAttribArray(t)),this.checkError()}createProgram(e,t){let r=this.gl,o=r.createProgram();return r.attachShader(o,e),r.attachShader(o,t),r.linkProgram(o),o}compileShader(e,t){let r=this.gl,o=r.createShader(t);if(!o)throw new Error(`createShader() returned null with type ${t}`);if(r.shaderSource(o,e),r.compileShader(o),!1===r.getShaderParameter(o,r.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${r.getShaderInfoLog(o)}\nShader source:\n${e}`);return o}deleteShader(e){this.gl.deleteShader(e)}bindTextureToUniform(e,t,r){let o=this.gl;o.activeTexture(o.TEXTURE0+t),this.checkError(),o.bindTexture(o.TEXTURE_2D,e),this.checkError(),o.uniform1i(r,t),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let e=this.gl,t=e.getError(),r="";switch(t){case e.NO_ERROR:return;case e.INVALID_ENUM:r="INVALID_ENUM";break;case e.INVALID_VALUE:r="INVALID_VALUE";break;case e.INVALID_OPERATION:r="INVALID_OPERATION";break;case e.INVALID_FRAMEBUFFER_OPERATION:r="INVALID_FRAMEBUFFER_OPERATION";break;case e.OUT_OF_MEMORY:r="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:r="CONTEXT_LOST_WEBGL";break;default:r=`Unknown WebGL Error: ${t.toString(16)}`}throw new Error(r)}}deleteTexture(e){this.gl.deleteTexture(e)}deleteProgram(e){this.gl.deleteProgram(e)}getEncoder(e,t,r=0){if(2===this.version)return new Xn(this.gl,t);switch(e){case"float":return 1===r||this.isRenderFloat32Supported?new un(this.gl,t):new un(this.gl,t,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Kn(this.gl,t);default:throw new Error(`Invalid dataType: ${e}`)}}clearActiveTextures(){let e=this.gl;for(let t=0;t<this.maxTextureImageUnits;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.framebuffer),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteBuffer(this.vertexbuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let e=this.gl,t=e.createBuffer();if(!t)throw new Error("createBuffer() returned null");let r=this.createDefaultGeometry();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),this.checkError(),t}createFramebuffer(){let e=this.gl.createFramebuffer();if(!e)throw new Error("createFramebuffer returned null");return e}queryVitalParameters(){let e=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let e=this.gl,t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);let r=2===this.version?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,r,1,1,0,e.RGBA,e.FLOAT,null);let o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);let n=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(o),n}checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let e,t,r,o,n,s=this.gl;try{e=s.createTexture(),t=s.createFramebuffer(),s.bindTexture(s.TEXTURE_2D,e);let a=2===this.version?s.RGBA32F:s.RGBA;return s.texImage2D(s.TEXTURE_2D,0,a,1,1,0,s.RGBA,s.FLOAT,null),s.bindFramebuffer(s.FRAMEBUFFER,t),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e,0),s.enable(s.BLEND),r=s.createShader(s.VERTEX_SHADER),!!(r&&(s.shaderSource(r,"void main(){}"),s.compileShader(r),o=s.createShader(s.FRAGMENT_SHADER),o)&&(s.shaderSource(o,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),s.compileShader(o),n=s.createProgram(),n))&&(s.attachShader(n,r),s.attachShader(n,o),s.linkProgram(n),s.useProgram(n),s.drawArrays(s.POINTS,0,1),s.getError()===s.NO_ERROR)}finally{s.disable(s.BLEND),n&&s.deleteProgram(n),r&&s.deleteShader(r),o&&s.deleteShader(o),t&&(s.bindFramebuffer(s.FRAMEBUFFER,null),s.deleteFramebuffer(t)),e&&(s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(e))}}beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){let e=this.gl,t=this.disjointTimerQueryWebgl2Extension,r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){let e=this.gl,t=this.disjointTimerQueryWebgl2Extension;return void e.endQuery(t.TIME_ELAPSED_EXT)}throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(e){let t=!1,r=!1;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{let o=this.gl,n=this.disjointTimerQueryWebgl2Extension;t=o.getQueryParameter(e,o.QUERY_RESULT_AVAILABLE),r=o.getParameter(n.GPU_DISJOINT_EXT)}return t&&!r}getTimerResult(e){let t=0;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");{let r=this.gl;t=r.getQueryParameter(e,r.QUERY_RESULT),r.deleteQuery(e)}return t/1e6}async waitForQueryAndGetTime(e){return await mi(()=>this.isTimerResultAvailable(e)),this.getTimerResult(e)}async createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r=e,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),t=null===o?()=>!0:()=>{let e=r.clientWaitSync(o,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},{query:o,isFencePassed:t}}async pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=jb(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}async addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)&&await mi(()=>(this.pollItems(),0===this.itemsToPoll.length))}}});function Hi(e){let t;if(e&&"webgl2"!==e||!("webgl2"in Gr)?(!e||"webgl"===e)&&"webgl"in Gr&&(t=Gr.webgl):t=Gr.webgl2,!t)try{t=cp(Xb(),e)}catch{t=cp(Yb(),e)}e=e||1===t.version?"webgl":"webgl2";let r=t.gl;return Gr[e]=t,r.isContextLost()?(delete Gr[e],Hi(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),t)}function cp(e,t){let r,o={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!t||"webgl2"===t)&&(r=e.getContext("webgl2",o),r))try{return new hn(r,2)}catch(e){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${e}`)}if((!t||"webgl"===t)&&(r=e.getContext("webgl",o)||e.getContext("experimental-webgl",o),r))try{return new hn(r,1)}catch(e){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${e}`)}throw new Error("WebGL is not supported")}function Yb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let e=document.createElement("canvas");return e.width=1,e.height=1,e}function Xb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Gr,pp=L(()=>{lt(),fp(),Gr={}}),To,dp=L(()=>{Ot(),lt(),lp(),pp(),To=class{get contextId(){return Z.webgl.contextId}set contextId(e){Z.webgl.contextId=e}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(e){Z.webgl.matmulMaxBatchSize=e}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(e){Z.webgl.textureCacheMode=e}get pack(){return Z.webgl.pack}set pack(e){Z.webgl.pack=e}get async(){return Z.webgl.async}set async(e){Z.webgl.async=e}initialize(){try{return this.glContext=Hi(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),ce.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(e){return ce.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${e}`),!1}}createSessionHandler(e){return new yo(this,e)}dispose(){this.glContext.dispose()}}});async function qi(e){if(!e)return qi(["webgl"]);{let t="string"==typeof e?[e]:e;for(let e of t){let t=hp.get(e);if(t)return t;let r=await Jb(e);if(r)return r}}throw new Error("no available backend to use")}async function Jb(e){let t=Kb;if(typeof t[e]<"u"&&Zb(t[e])){let r=t[e],o=r.initialize();if("object"==typeof o&&"then"in o&&(o=await o),o)return hp.set(e,r),r}}function Zb(e){let t=e;return"initialize"in t&&"function"==typeof t.initialize&&"createSessionHandler"in t&&"function"==typeof t.createSessionHandler&&"dispose"in t&&"function"==typeof t.dispose}var hp,Kb,mp=L(()=>{dp(),hp=new Map,Kb={webgl:new To}}),ji,xo,bp=L(()=>{lt(),ji=class{constructor(e,t){this.op=e,this.node=t}},xo=class{constructor(e,t,r){this.graph=e,this.profiler=r,this.initialize(t)}initialize(e){this.profiler.event("session","ExecutionPlan.initialize",()=>{let t=this.graph.getNodes();if(t.length!==e.length)throw new Error("The size of nodes and OPs do not match.");this._ops=e.map((e,r)=>new ji(e,t[r])),this.reset(),this._starter=[],this._ops.forEach((e,t)=>{let r=!0;for(let t of e.node.inputs)if(!this._values[t]&&-1===this.graph.getInputIndices().indexOf(t)){r=!1;break}r&&this._starter.push(t)})})}reset(){this._values=this.graph.getValues().map(e=>e.tensor)}async execute(e,t){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let r=e.createInferenceHandler(),o=this.graph.getInputIndices();if(t.length!==o.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${t.length} expected: ${o.length}`);t.forEach((e,t)=>{let r=o[t];this._values[r]=e});let n=this._starter.slice(0),s=this.graph.getValues(),a=this.graph.getNodes(),i=0;for(;i<n.length;){let e=n[i++],t=this._ops[e],o=t.node.inputs.map(e=>this._values[e]);if(-1!==o.indexOf(void 0))throw new Error(`unresolved input detected: op: ${t.node}`);let l=o;ce.verbose("ExecPlan",`Runing op:${t.node.name} (${l.map((e,r)=>`'${t.node.inputs[r]}': ${e.type}[${e.dims.join(",")}]`).join(", ")})`);let c=await this.profiler.event("node",t.node.name,async()=>t.op.impl(r,l,t.op.context));if(c.length!==t.node.outputs.length)throw new Error("the size of output does not match model definition.");c.forEach((e,r)=>{let o=t.node.outputs[r];if(this._values[o])throw new Error(`output [${o}] already has value: op:${t.node.name}`);this._values[o]=e});let _=new Set;c.forEach((e,r)=>{let o=t.node.outputs[r];for(let e of s[o].to){let t=a[e],r=!0;for(let e of t.inputs)if(!this._values[e]){r=!1;break}r&&_.add(e)}}),n.push(..._)}let l=[];for(let e=0;e<this.graph.getOutputIndices().length;e++){let t=this.graph.getOutputIndices()[e],r=this._values[t];if(void 0===r)throw new Error(`required output [${t}] does not have value`);0===t?await r.getData():r.data,l.push(r)}return ce.verbose("ExecPlan","disposing of inferenceHandler"),r.dispose(),l})}}}),oe,bt,mn,gp=L(()=>{tn(),oe=Ar(Cr()),yr(),fe(),bt=V.experimental.fbs,mn=class e{constructor(t){if(this._attributes=new Map,null!=t){for(let r of t)r instanceof oe.onnx.AttributeProto?this._attributes.set(r.name,[e.getValue(r),e.getType(r)]):r instanceof bt.Attribute&&this._attributes.set(r.name(),[e.getValue(r),e.getType(r)]);if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}set(e,t,r){this._attributes.set(e,[r,t])}delete(e){this._attributes.delete(e)}getFloat(e,t){return this.get(e,"float",t)}getInt(e,t){return this.get(e,"int",t)}getString(e,t){return this.get(e,"string",t)}getTensor(e,t){return this.get(e,"tensor",t)}getFloats(e,t){return this.get(e,"floats",t)}getInts(e,t){return this.get(e,"ints",t)}getStrings(e,t){return this.get(e,"strings",t)}getTensors(e,t){return this.get(e,"tensors",t)}get(e,t,r){let o=this._attributes.get(e);if(void 0===o){if(void 0!==r)return r;throw new Error(`required attribute not found: ${e}`)}if(o[1]!==t)throw new Error(`type mismatch: expected ${t} but got ${o[1]}`);return o[0]}static getType(e){let t=e instanceof oe.onnx.AttributeProto?e.type:e.type();switch(t){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[t]}`)}}static getValue(e){let t=e instanceof oe.onnx.AttributeProto?e.type:e.type();if(t===oe.onnx.AttributeProto.AttributeType.GRAPH||t===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let r=this.getValueNoCheck(e);if(t===oe.onnx.AttributeProto.AttributeType.INT&&it.isLong(r))return it.longToNumber(r);if(t===oe.onnx.AttributeProto.AttributeType.INTS){let e=r,t=new Array(e.length);for(let r=0;r<e.length;r++){let o=e[r];t[r]=it.longToNumber(o)}return t}if(t===oe.onnx.AttributeProto.AttributeType.TENSOR)return e instanceof oe.onnx.AttributeProto?$e.fromProto(r):$e.fromOrtTensor(r);if(t===oe.onnx.AttributeProto.AttributeType.TENSORS){if(e instanceof oe.onnx.AttributeProto)return r.map(e=>$e.fromProto(e));if(e instanceof bt.Attribute)return r.map(e=>$e.fromOrtTensor(e))}return t===oe.onnx.AttributeProto.AttributeType.STRING&&e instanceof oe.onnx.AttributeProto?sn(r):t===oe.onnx.AttributeProto.AttributeType.STRINGS&&e instanceof oe.onnx.AttributeProto?r.map(sn):r}static getValueNoCheck(e){return e instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(e):this.getValueNoCheckFromOrtFormat(e)}static getValueNoCheckFromOnnxFormat(e){switch(e.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case oe.onnx.AttributeProto.AttributeType.INT:return e.i;case oe.onnx.AttributeProto.AttributeType.STRING:return e.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return e.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[e.type]}`)}}static getValueNoCheckFromOrtFormat(e){switch(e.type()){case bt.AttributeType.FLOAT:return e.f();case bt.AttributeType.INT:return e.i();case bt.AttributeType.STRING:return e.s();case bt.AttributeType.TENSOR:return e.t();case bt.AttributeType.GRAPH:return e.g();case bt.AttributeType.FLOATS:return e.floatsArray();case bt.AttributeType.INTS:{let t=[];for(let r=0;r<e.intsLength();r++)t.push(e.ints(r));return t}case bt.AttributeType.STRINGS:{let t=[];for(let r=0;r<e.stringsLength();r++)t.push(e.strings(r));return t}case bt.AttributeType.TENSORS:{let t=[];for(let r=0;r<e.tensorsLength();r++)t.push(e.tensors(r));return t}default:throw new Error(`unsupported attribute type: ${bt.AttributeType[e.type()]}`)}}}}),Xi,wo,Ki,Mt,vo,Yi,yp=L(()=>{gp(),tn(),Xi=Ar(Cr()),yr(),fe(),wo=V.experimental.fbs,Ki={from:(e,t)=>new Yi(e,t)},Mt=class{constructor(e){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,e&&(this.type=We.tensorValueTypeFromProto(e.type.tensorType))}get from(){return this._from}get to(){return this._to}},vo=class{constructor(e,t){e instanceof Xi.onnx.NodeProto?(this.name=e.name,this.opType=e.opType,this.attributes=new mn(e.attribute)):e instanceof wo.Node&&(this.name=t??e.name(),this.opType=e.opType(),this.attributes=new mn(We.tensorAttributesFromORTFormat(e))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Yi=class{constructor(e,t){if(!e)throw new TypeError("graph is empty");this.buildGraph(e),this.transformGraph(t),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(e){if(e instanceof Xi.onnx.GraphProto)this.buildGraphFromOnnxFormat(e);else{if(!(e instanceof wo.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(e)}}buildGraphFromOnnxFormat(e){let t=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map;if(!e.input)throw new Error("missing information in graph: input");let o=[];for(let r of e.input){if(t.has(r.name))throw new Error(`duplicated input name: ${r.name}`);let e=this._allData.push(new Mt(r))-1;t.set(r.name,e),o.push(r.name)}if(!e.initializer)throw new Error("missing information in graph: initializer");for(let r of e.initializer){let e=t.get(r.name);if(void 0===e){let o=new Mt;o.type={shape:{dims:We.tensorDimsFromProto(r.dims)},tensorType:We.tensorDataTypeFromProto(r.dataType)},e=this._allData.push(o)-1,t.set(r.name,e)}this._allData[e]._from=-1,this._allData[e].tensor=$e.fromProto(r)}for(let e=0;e<this._allData.length;e++)this._allData[e].tensor||(this._allInputIndices.push(e),this._allInputNames.push(o[e]));if(!e.output)throw new Error("missing information in graph: output");for(let r of e.output){if(t.has(r.name))throw new Error(`duplicated output name: ${r.name}`);let e=this._allData.push(new Mt(r))-1;t.set(r.name,e),this._allOutputIndices.push(e),this._allOutputNames.push(r.name)}if(!e.node)throw new Error("missing information in graph: node");for(let t of e.node){if(!t.name)for(let e=0;;e++){let o=`unnamed_${t.opType}_${e}`;if(!r.has(o)){t.name=o;break}}if(r.has(t.name))throw new Error(`duplicated node name: ${t.name}`);let e=this._nodes.push(new vo(t))-1;r.set(t.name,e)}for(let r=0;r<this._nodes.length;r++){let o=this._nodes[r],n=e.node[r];if(!n.output)throw new Error(`missing output for node: ${n.name}`);for(let e of n.output){let s=t.get(e);if(typeof s>"u"&&(s=this._allData.push(new Mt)-1,t.set(e,s)),o.outputs.push(s),void 0!==this._allData[s]._from)throw new Error(`multiple nodes output to one data value: ${s}`);if(this._allData[s]._from=r,"Constant"===n.opType){if(!n.attribute||1!==n.attribute.length||!n.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!n.output||1!==n.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");o.outputs.pop(),o.executeNode=!1,this._allData[s]._from=-1,this._allData[s].tensor=$e.fromProto(n.attribute[0].t)}}}for(let r=0;r<this._nodes.length;r++){let o=this._nodes[r],n=e.node[r];if(!n.input)throw new Error(`missing input for node: ${n.name}`);for(let e of n.input){let s=t.get(e);if(typeof s>"u"){if(""===e&&(3===n.input.length||4===n.input.length)&&"Resize"===n.opType)continue;throw new Error(`unrecognized input '${e}' for node: ${n.name}`)}o.inputs.push(s),this._allData[s]._to.push(r)}}return!0}buildGraphFromOrtFormat(e){let t=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map,o=[];for(let r=0;r<e.inputsLength();r++){let n=e.inputs(r);if(t.has(n))throw new Error(`duplicated input name: ${n}`);for(let r=0;r<e.nodeArgsLength();r++)if(e.nodeArgs(r)?.name()===n){let s=new Mt;if(e.nodeArgs(r)?.type()?.valueType()!==wo.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let a=e.nodeArgs(r).type().value(new wo.TensorTypeAndShape),i=We.tensorDataTypeFromProto(a.elemType()),l=a.shape(),c=[];for(let e=0;e<l.dimLength();e++)c.push(it.longToNumber(l.dim(e).value().dimValue()));s.type={shape:{dims:c},tensorType:i};let _=this._allData.push(s)-1;t.set(n,_),o.push(n)}}for(let r=0;r<e.initializersLength();r++){let o=e.initializers(r),n=t.get(o.name());if(void 0===n){let e=new Mt,r=We.tensorDimsFromORTFormat(o),s=We.tensorDataTypeFromProto(o.dataType());e.type={shape:{dims:r},tensorType:s},n=this._allData.push(e)-1,t.set(o.name(),n)}this._allData[n]._from=-1,this._allData[n].tensor=$e.fromOrtTensor(o)}for(let e=0;e<this._allData.length;e++)this._allData[e].tensor||(this._allInputIndices.push(e),this._allInputNames.push(o[e]));for(let r=0;r<e.outputsLength();r++){let o=e.outputs(r);if(t.has(o))throw new Error(`duplicated output name: ${o}`);let n=this._allData.push(new Mt)-1;t.set(o,n),this._allOutputIndices.push(n),this._allOutputNames.push(o)}if(!e.nodes)throw new Error("missing information in graph: node");for(let t=0;t<e.nodesLength();t++){let o=e.nodes(t),n=o.name();if(!n)for(let e=0;n=`unnamed_${o.opType()}_${e}`,r.has(n);e++);if(r.has(n))throw new Error(`duplicated node name: ${n}`);let s=this._nodes.push(new vo(o,n))-1;r.set(n,s)}for(let r=0;r<this._nodes.length;r++){let o=this._nodes[r],n=e.nodes(r);if(null==n)throw new Error(`No node exists at index ${r}`);if(0===n?.outputsLength())throw new Error(`missing output for node: ${n.name}`);for(let e=0;e<n?.outputsLength();e++){let s=n?.outputs(e),a=t.get(s);if(typeof a>"u"&&(a=this._allData.push(new Mt)-1,t.set(s,a)),o.outputs.push(a),void 0!==this._allData[a]._from)throw new Error(`multiple nodes output to one data value: ${a}`);if(this._allData[a]._from=r,"Constant"===n.opType()){if(1!==n.attributesLength()||!n.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==n.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");o.outputs.pop(),o.executeNode=!1,this._allData[a]._from=-1,this._allData[a].tensor=$e.fromOrtTensor(n.attributes(0).t())}}}for(let r=0;r<this._nodes.length;r++){let o=this._nodes[r],n=e.nodes(r);if(0===n.inputsLength())throw new Error(`missing input for node: ${n.name}`);for(let e=0;e<n.inputsLength();e++){let s=n.inputs(e),a=t.get(s);if(typeof a>"u")throw new Error(`unrecognized input '${s}' for node: ${n.name()}`);o.inputs.push(a),this._allData[a]._to.push(r)}}}checkIsAcyclic(){let e=new Set;this._allInputIndices.forEach(t=>{this._allData[t]._to.forEach(t=>{e.add(t)})});let t=Array.from(e),r=new Array(this._nodes.length).fill("white");for(;t.length>0;){let e=t.pop();"gray"===r[e]?r[e]="black":(t.push(e),r[e]="gray",this._nodes[e].outputs.forEach(o=>{let n=this._allData[o];if(typeof n.tensor<"u")throw new Error("node outputs should not be initialized");if(n._from!==e)throw new Error("from property of the Value object doesn't match index of Node being processed");n._to.forEach(e=>{if("gray"===r[e])throw new Error("model graph is cyclic");"white"===r[e]&&t.push(e)})}))}}transformGraph(e){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),e&&e.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let e=0,t=new Array(this._nodes.length,0),r=0;for(let e=0;e<this._nodes.length;e++)t[e]=r,this._nodes[e].executeNode?(r!==e&&(this._nodes[r]=this._nodes[e]),r++):this._nodes[e].outputs.forEach(e=>{this._allData[e]._from=-2});this._nodes.splice(r,this._nodes.length-r);for(let e=0;e<this._allData.length;e++){let r=this._allData[e];void 0!==r._from&&-1!==r._from&&-2!==r._from&&(r._from=t[r._from]);for(let e=0;e<r._to.length;e++){if(!(r._to[e]>=0))throw new Error("Trying to update a removed node");r._to[e]=t[r._to[e]]}}e=0;for(let t=0;t<this._allData.length;t++)if(-2!==this._allData[t].from||-1!==this._allOutputIndices.indexOf(t+e)){if(e>0){let r=-1;void 0!==this._allData[t].from&&-1!==this._allData[t].from?(r=this._nodes[this._allData[t].from].outputs.indexOf(t+e),-1!==r&&(this._nodes[this._allData[t].from].outputs[r]=t)):(r=this._allInputIndices.indexOf(t+e),-1!==r&&(this._allInputIndices[r]=t)),this._allData[t].to.forEach(o=>{r=this._nodes[o].inputs.indexOf(t+e),-1!==r&&(this._nodes[o].inputs[r]=t)}),0===this._allData[t].to.length&&(r=this._allOutputIndices.indexOf(t+e),-1!==r&&(this._allOutputIndices[r]=t))}}else e++,this._allData.splice(t,1),t--}deleteNode(e){let t=this._nodes[e];if(t.outputs.length>1)for(let e=1;e<t.outputs.length;e++)if(this._allData[t.outputs[e]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");t.executeNode=!1;let r=t.inputs[0],o=t.outputs[0],n=this._allData[o].to;for(let r=0;r<t.inputs.length;r++){let o=this._allData[t.inputs[r]].to.indexOf(e);if(-1===o)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[t.inputs[r]].to.splice(o,1)}this._allData[o]._to=[];let s=this._allOutputIndices.indexOf(o);if(-1!==s&&(this._allOutputIndices[s]=r),n&&n.length>0)for(let e of n){let t=this._nodes[e].inputs.indexOf(o);if(-1===t)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[e].inputs[t]=r,this._allData[r].to.push(e)}}removeAllDropoutNodes(){let e=0;for(let t of this._nodes){if("Dropout"===t.opType){if(1!==t.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==t.outputs.length&&2!==t.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===t.outputs.length&&0!==this._allData[t.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(e)}e++}}removeAllIdentityNodes(){let e=0;for(let t of this._nodes)"Identity"===t.opType&&this.deleteNode(e),e++}isActivation(e){switch(e.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let e of this._nodes)if("Conv"===e.opType){let t=this._allData[e.outputs[0]]._to;if(1===t.length&&this.isActivation(this._nodes[t[0]])){let r=this._nodes[t[0]];if("Clip"===r.opType)if(1===r.inputs.length)try{e.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")])}catch{e.attributes.set("activation_params","floats",[br,gr])}else{if(!(r.inputs.length>=3&&void 0!==this._allData[r.inputs[1]].tensor&&void 0!==this._allData[r.inputs[2]].tensor))continue;e.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]])}e.attributes.set("activation","string",r.opType),this.deleteNode(t[0])}}}}}),Tp,Qb,_o,xp=L(()=>{zn(),yp(),tn(),Tp=Ar(Cr()),fe(),Qb=V.experimental.fbs,_o=class{constructor(){}load(e,t,r){let o;if(!r)try{return void this.loadFromOnnxFormat(e,t)}catch(e){if(void 0!==r)throw e;o=e}try{this.loadFromOrtFormat(e,t)}catch(e){throw void 0!==r?e:new Error(`Failed to load model as ONNX format: ${o}\nas ORT format: ${e}`)}}loadFromOnnxFormat(e,t){let r=Tp.onnx.ModelProto.decode(e);if(it.longToNumber(r.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=r.opsetImport.map(e=>({domain:e.domain,version:it.longToNumber(e.version)})),this._graph=Ki.from(r.graph,t)}loadFromOrtFormat(e,t){let r=new _.ByteBuffer(e),o=Qb.InferenceSession.getRootAsInferenceSession(r).model();if(it.longToNumber(o.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let e=0;e<o.opsetImportLength();e++){let t=o.opsetImport(e);this._opsets.push({domain:t?.domain(),version:it.longToNumber(t.version())})}this._graph=Ki.from(o.graph(),t)}get graph(){return this._graph}get opsets(){return this._opsets}}}),Oo,wp=L(()=>{mp(),bp(),lt(),xp(),Oo=class{constructor(e={}){this._initialized=!1,this.backendHint=e.backendHint,this.profiler=Gn.create(e.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(e,t,r){await this.profiler.event("session","Session.loadModel",async()=>{let o=await qi(this.backendHint);if(this.sessionHandler=o.createSessionHandler(this.context),this._model=new _o,"string"==typeof e){let t=e.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let r=await(void 0)(e);this.initialize(r,t)}else{let r=await(await fetch(e)).arrayBuffer();this.initialize(new Uint8Array(r),t)}}else if(ArrayBuffer.isView(e))this.initialize(e);else{let o=new Uint8Array(e,t||0,r||e.byteLength);this.initialize(o)}})}initialize(e,t){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let r=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(e,r,t),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new xo(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(e){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let t=this.normalizeAndValidateInputs(e),r=await this._executionPlan.execute(this.sessionHandler,t);return this.createOutput(r)})}normalizeAndValidateInputs(e){let t=this._model.graph.getInputNames();if(Array.isArray(e)){if(e.length!==t.length)throw new Error(`incorrect input array length: expected ${t.length} but got ${e.length}`)}else{if(e.size!==t.length)throw new Error(`incorrect input map size: expected ${t.length} but got ${e.size}`);let r=new Array(e.size),o=0;for(let n=0;n<t.length;++n){let s=e.get(t[n]);if(!s)throw new Error(`missing input tensor for: '${name}'`);r[o++]=s}e=r}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,e,!1);else{let t=this._model.graph.getInputIndices(),r=this._model.graph.getValues(),o=new Array(t.length);for(let n=0;n<t.length;++n){let s=r[t[n]];o[n]=s.type.shape.dims,this.context.graphInputTypes.push(s.type.tensorType),this.context.graphInputDims.push(e[n].dims)}this.validateInputTensorDims(o,e,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,e),e}validateInputTensorTypes(e,t){for(let r=0;r<t.length;r++){let o=e[r],n=t[r].type;if(o!==n)throw new Error(`input tensor[${r}] check failed: expected type '${o}' but got ${n}`)}}validateInputTensorDims(e,t,r){for(let o=0;o<t.length;o++){let n=e[o],s=t[o].dims;if(!this.compareTensorDims(n,s,r))throw new Error(`input tensor[${o}] check failed: expected shape '[${n.join(",")}]' but got [${s.join(",")}]`)}}compareTensorDims(e,t,r){if(e.length!==t.length)return!1;for(let o=0;o<e.length;++o)if(e[o]!==t[o]&&(!r||0!==e[o]))return!1;return!0}createOutput(e){let t=this._model.graph.getOutputNames();if(e.length!==t.length)throw new Error("expected number of outputs do not match number of generated outputs");let r=new Map;for(let o=0;o<t.length;++o)r.set(t[o],e[o]);return r}initializeOps(e){let t=e.getNodes();this._ops=new Array(t.length);for(let r=0;r<t.length;r++)this._ops[r]=this.sessionHandler.resolve(t[r],this._model.opsets,e)}}}),Io,vp=L(()=>{Ot(),yr(),Io=class{constructor(e){this.session=e,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(e,t,r){let o=new Map;for(let t in e)if(Object.hasOwnProperty.call(e,t)){let r=e[t];o.set(t,new $e(r.dims,r.type,void 0,void 0,r.data))}let n=await this.session.run(o),s={};return n.forEach((e,t)=>{s[t]=new Me(e.type,e.data,e.dims)}),s}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),_p={};Sr(_p,{onnxjsBackend:()=>tg});var Ji,tg,Op=L(()=>{wp(),vp(),tg=new(Ji=class{async init(){}async createInferenceSessionHandler(e,t){let r=new Oo(t);return await r.loadModel(e),new Io(r)}})}),Zi={};Sr(Zi,{createReadStream:()=>Ip,readFile:()=>rg,readFileSync:()=>ng});var rg,ng,Ip,Qi=L(()=>{rg=void 0,ng=void 0,Ip=void 0}),ea={};Sr(ea,{join:()=>og});var og,ta=L(()=>{og=void 0}),Pp=me((e,t)=>{var r,o=(r=typeof document<"u"?document.currentScript?.src:void 0,typeof __filename<"u"&&(r||=__filename),function(e={}){var t,o,n,s,a,i=e,l=new Promise((e,r)=>{t=e,o=r}),c=Object.assign({},i),_="./this.program",p="object"==typeof window,u="function"==typeof importScripts,d="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,h="";if(d){var f=(Qi(),ar(Zi)),m=(ta(),ar(ea));h=u?m.dirname(h)+"/":__dirname+"/",n=(e,t)=>(e=N(e)?new URL(e):m.normalize(e),f.readFileSync(e,t?void 0:"utf8")),a=e=>((e=n(e,!0)).buffer||(e=new Uint8Array(e)),e),s=(e,t,r,o=!0)=>{e=N(e)?new URL(e):m.normalize(e),f.readFile(e,o?void 0:"utf8",(e,n)=>{e?r(e):t(o?n.buffer:n)})},!i.thisProgram&&1<process.argv.length&&(_=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(p||u)&&(u?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),r&&(h=r),h=h.startsWith("blob:")?"":h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1),n=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(a=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),s=(e,t,r)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{200==o.status||0==o.status&&o.response?t(o.response):r()},o.onerror=r,o.send(null)});var g=console.log.bind(console),b=console.error.bind(console);Object.assign(i,c),c=null;var w,x,y,M,T,k,v=!1;function P(){var e=w.buffer;i.HEAP8=x=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAPU8=y=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=M=new Int32Array(e),i.HEAPU32=T=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=k=new Float64Array(e)}var S=[],F=[],C=[],E=0,A=null,I=null;function O(e){throw b(e="Aborted("+e+")"),v=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),o(e),e}var L,D=e=>e.startsWith("data:application/octet-stream;base64,"),N=e=>e.startsWith("file://");if(!D(L="ort-wasm.wasm")){var B=L;L=i.locateFile?i.locateFile(B,h):h+B}function $(e){if(a)return a(e);throw"both async and sync fetching of the wasm failed"}function V(e,t,r){return function(e){if(p||u){if("function"==typeof fetch&&!N(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw`failed to load wasm binary file at '${e}'`;return t.arrayBuffer()}).catch(()=>$(e));if(s)return new Promise((t,r)=>{s(e,e=>t(new Uint8Array(e)),r)})}return Promise.resolve().then(()=>$(e))}(e).then(e=>WebAssembly.instantiate(e,t)).then(r,e=>{b(`failed to asynchronously prepare wasm: ${e}`),O(e)})}var j,z={798088:(e,t,r,o)=>{if(typeof i>"u"||!i.ya)return 1;if((e=W(e>>>0)).startsWith("./")&&(e=e.substring(2)),!(e=i.ya.get(e)))return 2;if((t>>>=0)+(r>>>=0)>e.byteLength)return 3;try{return y.set(e.subarray(t,t+r),o>>>0>>>0),0}catch{return 4}}};class R{constructor(e){this.wa=e-24}}var G,U=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,q=(e,t,r)=>{var o=(t>>>=0)+r;for(r=t;e[r]&&!(r>=o);)++r;if(16<r-t&&e.buffer&&U)return U.decode(e.subarray(t,r));for(o="";t<r;){var n=e[t++];if(128&n){var s=63&e[t++];if(192==(224&n))o+=String.fromCharCode((31&n)<<6|s);else{var a=63&e[t++];65536>(n=224==(240&n)?(15&n)<<12|s<<6|a:(7&n)<<18|s<<12|a<<6|63&e[t++])?o+=String.fromCharCode(n):(n-=65536,o+=String.fromCharCode(55296|n>>10,56320|1023&n))}}else o+=String.fromCharCode(n)}return o},W=(e,t)=>(e>>>=0)?q(y,e,t):"",H=e=>{for(var t=0,r=0;r<e.length;++r){var o=e.charCodeAt(r);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++r):t+=3}return t},X=(e,t,r,o)=>{if(!(0<o))return 0;var n=r>>>=0;o=r+o-1;for(var s=0;s<e.length;++s){var a=e.charCodeAt(s);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s)),127>=a){if(r>=o)break;t[r++>>>0]=a}else{if(2047>=a){if(r+1>=o)break;t[r++>>>0]=192|a>>6}else{if(65535>=a){if(r+2>=o)break;t[r++>>>0]=224|a>>12}else{if(r+3>=o)break;t[r++>>>0]=240|a>>18,t[r++>>>0]=128|a>>12&63}t[r++>>>0]=128|a>>6&63}t[r++>>>0]=128|63&a}}return t[r>>>0]=0,r-n},Q=e=>e%4==0&&(e%100!=0||e%400==0),Y=[0,31,60,91,121,152,182,213,244,274,305,335],J=[0,31,59,90,120,151,181,212,243,273,304,334],Z=[],K={},ee=()=>{if(!G){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:_||"./this.program"};for(e in K)void 0===K[e]?delete t[e]:t[e]=K[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);G=r}return G},te=[null,[],[]],re=[31,29,31,30,31,30,31,31,30,31,30,31],oe=[31,28,31,30,31,30,31,31,30,31,30,31];function ne(e,t,r,o){function n(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function s(e,t){return n(e,t,"0")}function a(e,t){function r(e){return 0>e?-1:0<e?1:0}var o;return 0===(o=r(e.getFullYear()-t.getFullYear()))&&0===(o=r(e.getMonth()-t.getMonth()))&&(o=r(e.getDate()-t.getDate())),o}function i(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){var t=e.sa;for(e=new Date(new Date(e.ta+1900,0,1).getTime());0<t;){var r=e.getMonth(),o=(Q(e.getFullYear())?re:oe)[r];if(!(t>o-e.getDate())){e.setDate(e.getDate()+t);break}t-=o-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=i(new Date(e.getFullYear(),0,4)),r=i(r),0>=a(t,e)?0>=a(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0;var c=T[(o>>>=0)+40>>>2>>>0];for(var _ in o={Ba:M[o>>>2>>>0],Aa:M[o+4>>>2>>>0],ua:M[o+8>>>2>>>0],xa:M[o+12>>>2>>>0],va:M[o+16>>>2>>>0],ta:M[o+20>>>2>>>0],na:M[o+24>>>2>>>0],sa:M[o+28>>>2>>>0],Da:M[o+32>>>2>>>0],za:M[o+36>>>2>>>0],Ca:c?W(c):""},r=W(r),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(_,"g"),c[_]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),u="January February March April May June July August September October November December".split(" ");for(_ in c={"%a":e=>p[e.na].substring(0,3),"%A":e=>p[e.na],"%b":e=>u[e.va].substring(0,3),"%B":e=>u[e.va],"%C":e=>s((e.ta+1900)/100|0,2),"%d":e=>s(e.xa,2),"%e":e=>n(e.xa,2," "),"%g":e=>l(e).toString().substring(2),"%G":l,"%H":e=>s(e.ua,2),"%I":e=>(0==(e=e.ua)?e=12:12<e&&(e-=12),s(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.va-1;t+=(Q(e.ta+1900)?re:oe)[r++]);return s(e.xa+t,3)},"%m":e=>s(e.va+1,2),"%M":e=>s(e.Aa,2),"%n":()=>"\n","%p":e=>0<=e.ua&&12>e.ua?"AM":"PM","%S":e=>s(e.Ba,2),"%t":()=>"\t","%u":e=>e.na||7,"%U":e=>s(Math.floor((e.sa+7-e.na)/7),2),"%V":e=>{var t=Math.floor((e.sa+7-(e.na+6)%7)/7);if(2>=(e.na+371-e.sa-2)%7&&t++,t)53==t&&(4==(r=(e.na+371-e.sa)%7)||3==r&&Q(e.ta)||(t=1));else{t=52;var r=(e.na+7-e.sa-1)%7;(4==r||5==r&&Q(e.ta%400-1))&&t++}return s(t,2)},"%w":e=>e.na,"%W":e=>s(Math.floor((e.sa+7-(e.na+6)%7)/7),2),"%y":e=>(e.ta+1900).toString().substring(2),"%Y":e=>e.ta+1900,"%z":e=>(0<=(e=e.za)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4),"%Z":e=>e.Ca,"%%":()=>"%"},r=r.replace(/%%/g,"\0\0"),c)r.includes(_)&&(r=r.replace(new RegExp(_,"g"),c[_](o)));return _=function(e){var t=Array(H(e)+1);return X(e,t,0,t.length),t}(r=r.replace(/\0\0/g,"%")),_.length>t?0:(x.set(_,e>>>0),_.length-1)}var se={a:function(e,t,r){var o=new R(e>>>=0);throw T[o.wa+16>>>2>>>0]=0,T[o.wa+4>>>2>>>0]=t>>>0,T[o.wa+8>>>2>>>0]=r>>>0,e},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(e,t,r){return t>>>=0,y.copyWithin(e>>>0>>>0,t>>>0,t+(r>>>0)>>>0)},n:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),M[r>>>2>>>0]=e.getUTCSeconds(),M[r+4>>>2>>>0]=e.getUTCMinutes(),M[r+8>>>2>>>0]=e.getUTCHours(),M[r+12>>>2>>>0]=e.getUTCDate(),M[r+16>>>2>>>0]=e.getUTCMonth(),M[r+20>>>2>>>0]=e.getUTCFullYear()-1900,M[r+24>>>2>>>0]=e.getUTCDay(),M[r+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),M[r>>>2>>>0]=e.getSeconds(),M[r+4>>>2>>>0]=e.getMinutes(),M[r+8>>>2>>>0]=e.getHours(),M[r+12>>>2>>>0]=e.getDate(),M[r+16>>>2>>>0]=e.getMonth(),M[r+20>>>2>>>0]=e.getFullYear()-1900,M[r+24>>>2>>>0]=e.getDay(),M[r+28>>>2>>>0]=(Q(e.getFullYear())?Y:J)[e.getMonth()]+e.getDate()-1|0,M[r+36>>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var o=new Date(e.getFullYear(),0,1).getTimezoneOffset();M[r+32>>>2>>>0]=0|(t!=o&&e.getTimezoneOffset()==Math.min(o,t))},p:function(e){e>>>=0;var t=new Date(M[e+20>>>2>>>0]+1900,M[e+16>>>2>>>0],M[e+12>>>2>>>0],M[e+8>>>2>>>0],M[e+4>>>2>>>0],M[e>>>2>>>0],0),r=M[e+32>>>2>>>0],o=t.getTimezoneOffset(),n=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=new Date(t.getFullYear(),0,1).getTimezoneOffset(),a=Math.min(s,n);return 0>r?M[e+32>>>2>>>0]=+(n!=s&&a==o):0<r!=(a==o)&&(n=Math.max(s,n),t.setTime(t.getTime()+6e4*((0<r?a:n)-o))),M[e+24>>>2>>>0]=t.getDay(),M[e+28>>>2>>>0]=(Q(t.getFullYear())?Y:J)[t.getMonth()]+t.getDate()-1|0,M[e>>>2>>>0]=t.getSeconds(),M[e+4>>>2>>>0]=t.getMinutes(),M[e+8>>>2>>>0]=t.getHours(),M[e+12>>>2>>>0]=t.getDate(),M[e+16>>>2>>>0]=t.getMonth(),M[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),e=isNaN(e)?-1:e/1e3,le((j=e,1<=+Math.abs(j)?0<j?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)),e>>>0},l:function(){return-52},m:function(){},t:function(e,t,r,o){r>>>=0,o>>>=0;var n=(new Date).getFullYear(),s=new Date(n,0,1),a=new Date(n,6,1);n=s.getTimezoneOffset();var i=a.getTimezoneOffset();T[e>>>0>>>2>>>0]=60*Math.max(n,i),M[t>>>0>>>2>>>0]=+(n!=i),s=(e=e=>e.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1])(s),a=e(a),i<n?(X(s,y,r,17),X(a,y,o,17)):(X(s,y,o,17),X(a,y,r,17))},d:()=>{O("")},B:function(e,t,r){e>>>=0,t>>>=0,r>>>=0,Z.length=0;for(var o;o=y[t++>>>0];){var n=105!=o;r+=(n&=112!=o)&&r%8?4:0,Z.push(112==o?T[r>>>2>>>0]:105==o?M[r>>>2>>>0]:k[r>>>3>>>0]),r+=n?8:4}return z[e](...Z)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(e){e>>>=0;var t=y.length;if(4294901760<e)return!1;for(var r=1;4>=r;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var n=Math;o=Math.max(e,o);e:{n=(n.min.call(n,4294901760,o+(65536-o%65536)%65536)-w.buffer.byteLength+65535)/65536;try{w.grow(n),P();var s=1;break e}catch{}s=void 0}if(s)return!0}return!1},C:function(e,t){e>>>=0,t>>>=0;var r=0;return ee().forEach((o,n)=>{var s=t+r;for(n=T[e+4*n>>>2>>>0]=s,s=0;s<o.length;++s)x[n++>>>0]=o.charCodeAt(s);x[n>>>0]=0,r+=o.length+1}),0},D:function(e,t){e>>>=0,t>>>=0;var r=ee();T[e>>>2>>>0]=r.length;var o=0;return r.forEach(e=>o+=e.length+1),T[t>>>2>>>0]=o,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(e,t,r,o){t>>>=0,r>>>=0,o>>>=0;for(var n=0,s=0;s<r;s++){var a=T[t>>>2>>>0],i=T[t+4>>>2>>>0];t+=8;for(var l=0;l<i;l++){var c=y[a+l>>>0],_=te[e];0===c||10===c?((1===e?g:b)(q(_,0)),_.length=0):_.push(c)}n+=i}return T[o>>>2>>>0]=n,0},r:ne,c:function(e,t,r,o){return ne(e>>>0,t>>>0,r>>>0,o>>>0)}},ae=function(){function e(e){return ae=e.exports,ae=function(){var e=ae;e=Object.assign({},e);var t=e=>t=>e(t)>>>0;return e.la=t(e.la),e.qa=t(e.qa),e.ra=(e=>()=>e()>>>0)(e.ra),e}(),w=ae.K,P(),F.unshift(ae.L),0==--E&&(null!==A&&(clearInterval(A),A=null),I&&(e=I,I=null,e())),ae}var t={a:se};if(E++,i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(e){b(`Module.instantiateWasm callback failed with error: ${e}`),o(e)}return function(e,t){var r=L;return"function"!=typeof WebAssembly.instantiateStreaming||D(r)||N(r)||d||"function"!=typeof fetch?V(r,e,t):fetch(r,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(t,function(o){return b(`wasm streaming compile failed: ${o}`),b("falling back to ArrayBuffer instantiation"),V(r,e,t)}))}(t,function(t){e(t.instance)}).catch(o),{}}();i._OrtInit=(e,t)=>(i._OrtInit=ae.M)(e,t),i._OrtGetLastError=(e,t)=>(i._OrtGetLastError=ae.N)(e,t),i._OrtCreateSessionOptions=(e,t,r,o,n,s,a,l,c,_)=>(i._OrtCreateSessionOptions=ae.O)(e,t,r,o,n,s,a,l,c,_),i._OrtAppendExecutionProvider=(e,t)=>(i._OrtAppendExecutionProvider=ae.P)(e,t),i._OrtAddFreeDimensionOverride=(e,t,r)=>(i._OrtAddFreeDimensionOverride=ae.Q)(e,t,r),i._OrtAddSessionConfigEntry=(e,t,r)=>(i._OrtAddSessionConfigEntry=ae.R)(e,t,r),i._OrtReleaseSessionOptions=e=>(i._OrtReleaseSessionOptions=ae.S)(e),i._OrtCreateSession=(e,t,r)=>(i._OrtCreateSession=ae.T)(e,t,r),i._OrtReleaseSession=e=>(i._OrtReleaseSession=ae.U)(e),i._OrtGetInputOutputCount=(e,t,r)=>(i._OrtGetInputOutputCount=ae.V)(e,t,r),i._OrtGetInputName=(e,t)=>(i._OrtGetInputName=ae.W)(e,t),i._OrtGetOutputName=(e,t)=>(i._OrtGetOutputName=ae.X)(e,t),i._OrtFree=e=>(i._OrtFree=ae.Y)(e),i._OrtCreateTensor=(e,t,r,o,n,s)=>(i._OrtCreateTensor=ae.Z)(e,t,r,o,n,s),i._OrtGetTensorData=(e,t,r,o,n)=>(i._OrtGetTensorData=ae._)(e,t,r,o,n),i._OrtReleaseTensor=e=>(i._OrtReleaseTensor=ae.$)(e),i._OrtCreateRunOptions=(e,t,r,o)=>(i._OrtCreateRunOptions=ae.aa)(e,t,r,o),i._OrtAddRunConfigEntry=(e,t,r)=>(i._OrtAddRunConfigEntry=ae.ba)(e,t,r),i._OrtReleaseRunOptions=e=>(i._OrtReleaseRunOptions=ae.ca)(e),i._OrtCreateBinding=e=>(i._OrtCreateBinding=ae.da)(e),i._OrtBindInput=(e,t,r)=>(i._OrtBindInput=ae.ea)(e,t,r),i._OrtBindOutput=(e,t,r,o)=>(i._OrtBindOutput=ae.fa)(e,t,r,o),i._OrtClearBoundOutputs=e=>(i._OrtClearBoundOutputs=ae.ga)(e),i._OrtReleaseBinding=e=>(i._OrtReleaseBinding=ae.ha)(e),i._OrtRunWithBinding=(e,t,r,o,n)=>(i._OrtRunWithBinding=ae.ia)(e,t,r,o,n),i._OrtRun=(e,t,r,o,n,s,a,l)=>(i._OrtRun=ae.ja)(e,t,r,o,n,s,a,l),i._OrtEndProfiling=e=>(i._OrtEndProfiling=ae.ka)(e),i._malloc=e=>(i._malloc=ae.la)(e),i._free=e=>(i._free=ae.ma)(e);var ie,le=e=>(le=ae.oa)(e),ce=e=>(ce=ae.pa)(e),_e=e=>(_e=ae.qa)(e),pe=()=>(pe=ae.ra)();function ue(){if(!(0<E)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;){var e=i.preRun.shift();S.unshift(e)}for(;0<S.length;)S.shift()(i);if(!(0<E||ie||(ie=!0,i.calledRun=!0,v))){for(;0<F.length;)F.shift()(i);for(t(i);0<C.length;)C.shift()(i)}}}return i.stackSave=()=>pe(),i.stackRestore=e=>ce(e),i.stackAlloc=e=>_e(e),i.UTF8ToString=W,i.stringToUTF8=(e,t,r)=>X(e,y,t,r),i.lengthBytesUTF8=H,I=function e(){ie||ue(),ie||(I=e)},ue(),l});"object"==typeof e&&"object"==typeof t?t.exports=o:"function"==typeof define&&define.amd&&define([],()=>o)}),Ep=me(()=>{}),Dp=me(()=>{}),Lp={};Sr(Lp,{cpus:()=>ig});var ig,Cp=L(()=>{ig=void 0}),kp=me((e,t)=>{var r,o=(r=typeof document<"u"?document.currentScript?.src:void 0,typeof __filename<"u"&&(r||=__filename),function(e={}){function t(){return C.buffer!=I.buffer&&$(),I}function o(){return C.buffer!=I.buffer&&$(),O}function n(){return C.buffer!=I.buffer&&$(),L}function s(){return C.buffer!=I.buffer&&$(),D}function a(){return C.buffer!=I.buffer&&$(),N}var i,l,c,_,p,u=e,d=new Promise((e,t)=>{i=e,l=t}),h=Object.assign({},u),f="./this.program",m=(e,t)=>{throw t},g="object"==typeof window,b="function"==typeof importScripts,w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,x=u.ENVIRONMENT_IS_PTHREAD||!1,y="";function M(e){return u.locateFile?u.locateFile(e,y):y+e}if(w){var T=(Qi(),ar(Zi)),k=(ta(),ar(ea));y=b?k.dirname(y)+"/":__dirname+"/",c=(e,t)=>(e=Y(e)?new URL(e):k.normalize(e),T.readFileSync(e,t?void 0:"utf8")),p=e=>((e=c(e,!0)).buffer||(e=new Uint8Array(e)),e),_=(e,t,r,o=!0)=>{e=Y(e)?new URL(e):k.normalize(e),T.readFile(e,o?void 0:"utf8",(e,n)=>{e?r(e):t(o?n.buffer:n)})},!u.thisProgram&&1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),m=(e,t)=>{throw process.exitCode=e,t},global.Worker=Ep().Worker}else(g||b)&&(b?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),typeof r<"u"&&r&&(y=r),y=y.startsWith("blob:")?"":y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1),w||(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},b&&(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),_=(e,t,r)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{200==o.status||0==o.status&&o.response?t(o.response):r()},o.onerror=r,o.send(null)}));w&&typeof performance>"u"&&(global.performance=Dp().performance);var v=console.log.bind(console),P=console.error.bind(console);w&&(v=(...e)=>T.writeSync(1,e.join(" ")+"\n"),P=(...e)=>T.writeSync(2,e.join(" ")+"\n"));var S=v,F=P;Object.assign(u,h),h=null;var C,E,A,I,O,L,D,N,B=!1;function $(){var e=C.buffer;u.HEAP8=I=new Int8Array(e),u.HEAP16=new Int16Array(e),u.HEAPU8=O=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAP32=L=new Int32Array(e),u.HEAPU32=D=new Uint32Array(e),u.HEAPF32=new Float32Array(e),u.HEAPF64=N=new Float64Array(e)}var V=16777216;if(x)C=u.wasmMemory;else if(u.wasmMemory)C=u.wasmMemory;else if(!((C=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw F("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&F("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");$(),V=C.buffer.byteLength;var j=[],z=[],R=[],G=0,U=null,q=null;function W(){if(0==--G&&(null!==U&&(clearInterval(U),U=null),q)){var e=q;q=null,e()}}function H(e){throw F(e="Aborted("+e+")"),B=!0,A=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),l(e),e}var X,Q=e=>e.startsWith("data:application/octet-stream;base64,"),Y=e=>e.startsWith("file://");function J(e){if(p)return p(e);throw"both async and sync fetching of the wasm failed"}function Z(e,t,r){return function(e){if(g||b){if("function"==typeof fetch&&!Y(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw`failed to load wasm binary file at '${e}'`;return t.arrayBuffer()}).catch(()=>J(e));if(_)return new Promise((t,r)=>{_(e,e=>t(new Uint8Array(e)),r)})}return Promise.resolve().then(()=>J(e))}(e).then(e=>WebAssembly.instantiate(e,t)).then(r,e=>{F(`failed to asynchronously prepare wasm: ${e}`),H(e)})}Q(X="ort-wasm-threaded.wasm")||(X=M(X));var K,ee={799444:(e,t,r,n)=>{if(typeof u>"u"||!u.bb)return 1;if((e=xe(e>>>0)).startsWith("./")&&(e=e.substring(2)),!(e=u.bb.get(e)))return 2;if(n>>>=0,(t>>>=0)+(r>>>=0)>e.byteLength)return 3;try{return o().set(e.subarray(t,t+r),n>>>0),0}catch{return 4}}};function te(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var re=e=>{e.terminate(),e.onmessage=()=>{}},oe=e=>{0==_e.Oa.length&&(ce(),_e.Xa(_e.Oa[0]));var t=_e.Oa.pop();if(!t)return 6;_e.Pa.push(t),_e.La[e.Na]=t,t.Na=e.Na;var r={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return w&&t.unref(),t.postMessage(r,e.mb),0},ne=0,se=(e,t,...r)=>(e=>{var t=wt();return e=e(),gt(t),e})(()=>{for(var o=r.length,n=bt(8*o),s=n>>>3,i=0;i<r.length;i++){var l=r[i];a()[s+i>>>0]=l}return pt(e,0,o,n,t)});function ae(e){if(x)return se(0,1,e);A=e,0<ne||(_e.hb(),u.onExit?.(e),B=!0),m(e,new te(e))}var ie=e=>{if(A=e,x)throw ue(e),"unwind";ae(e)};function le(){for(var e=u.numThreads;e--;)ce();j.unshift(()=>{G++,function(e){x?e():Promise.all(_e.Oa.map(_e.Xa)).then(e)}(()=>W())})}function ce(){var e=M("ort-wasm-threaded.worker.js");e=new Worker(e),_e.Oa.push(e)}var _e={Oa:[],Pa:[],ab:[],La:{},Va(){x?(_e.receiveObjectTransfer=_e.fb,_e.threadInitTLS=_e.$a,_e.setExitStatus=_e.Za):le()},Za:e=>A=e,pb:["$terminateWorker"],hb:()=>{for(var e of _e.Pa)re(e);for(e of _e.Oa)re(e);_e.Oa=[],_e.Pa=[],_e.La=[]},Ya:e=>{var t=e.Na;delete _e.La[t],_e.Oa.push(e),_e.Pa.splice(_e.Pa.indexOf(e),1),e.Na=0,ut(t)},fb(){},$a(){_e.ab.forEach(e=>e())},Xa:e=>new Promise(t=>{e.onmessage=r=>{var o=(r=r.data).cmd;if(r.targetThread&&r.targetThread!=lt()){var n=_e.La[r.targetThread];n?n.postMessage(r,r.transferList):F(`Internal error! Worker sent a message "${o}" to target pthread ${r.targetThread}, but that thread no longer exists!`)}else"checkMailbox"===o?$e():"spawnThread"===o?oe(r):"cleanupThread"===o?_e.Ya(_e.La[r.thread]):"killThread"===o?(r=r.thread,o=_e.La[r],delete _e.La[r],re(o),ut(r),_e.Pa.splice(_e.Pa.indexOf(o),1),o.Na=0):"cancelThread"===o?_e.La[r.thread].postMessage({cmd:"cancel"}):"loaded"===o?(e.loaded=!0,w&&!e.Na&&e.unref(),t(e)):"alert"===o?alert(`Thread ${r.threadId}: ${r.text}`):"setimmediate"===r.target?e.postMessage(r):"callHandler"===o?u[r.handler](...r.args):o&&F(`worker sent an unknown command ${o}`)},e.onerror=e=>{throw F(`worker sent an error! ${e.filename}:${e.lineno}: ${e.message}`),e},w&&(e.on("message",t=>e.onmessage({data:t})),e.on("error",t=>e.onerror(t)));var o,n=[];for(o of["onExit"])u.hasOwnProperty(o)&&n.push(o);e.postMessage({cmd:"load",handlers:n,urlOrBlob:u.mainScriptUrlOrBlob||r,wasmMemory:C,wasmModule:E})})};u.PThread=_e;var pe=e=>{for(;0<e.length;)e.shift()(u)};function ue(e){if(x)return se(1,0,e);ie(e)}u.establishStackSpace=()=>{var e=lt(),t=s()[e+52>>>2>>>0];e=s()[e+56>>>2>>>0],mt(t,t-e),gt(t)};var de,he=[];u.invokeEntryPoint=(e,t)=>{ne=0;var r=he[e];r||(e>=he.length&&(he.length=e+1),he[e]=r=de.get(e)),e=r(t),0<ne?_e.Za(e):dt(e)};class fe{constructor(e){this.Ua=e-24}Va(e,t){s()[this.Ua+16>>>2>>>0]=0,s()[this.Ua+4>>>2>>>0]=e,s()[this.Ua+8>>>2>>>0]=t}}function me(e,t,r,o){return x?se(2,1,e,t,r,o):ge(e,t,r,o)}function ge(e,t,r,o){if(e>>>=0,t>>>=0,r>>>=0,o>>>=0,typeof SharedArrayBuffer>"u")return F("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var n=[];return x&&0===n.length?me(e,t,r,o):(e={gb:r,Na:e,cb:o,mb:n},x?(e.ob="spawnThread",postMessage(e,n),0):oe(e))}var be=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,we=(e,t,r)=>{var o=(t>>>=0)+r;for(r=t;e[r]&&!(r>=o);)++r;if(16<r-t&&e.buffer&&be)return be.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(o="";t<r;){var n=e[t++];if(128&n){var s=63&e[t++];if(192==(224&n))o+=String.fromCharCode((31&n)<<6|s);else{var a=63&e[t++];65536>(n=224==(240&n)?(15&n)<<12|s<<6|a:(7&n)<<18|s<<12|a<<6|63&e[t++])?o+=String.fromCharCode(n):(n-=65536,o+=String.fromCharCode(55296|n>>10,56320|1023&n))}}else o+=String.fromCharCode(n)}return o},xe=(e,t)=>(e>>>=0)?we(o(),e,t):"";function ye(e,t,r){return x?se(3,1,e,t,r):0}function Me(e,t){if(x)return se(4,1,e,t)}var Te=e=>{for(var t=0,r=0;r<e.length;++r){var o=e.charCodeAt(r);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++r):t+=3}return t},ke=(e,t,r,o)=>{if(!(0<o))return 0;var n=r>>>=0;o=r+o-1;for(var s=0;s<e.length;++s){var a=e.charCodeAt(s);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s)),127>=a){if(r>=o)break;t[r++>>>0]=a}else{if(2047>=a){if(r+1>=o)break;t[r++>>>0]=192|a>>6}else{if(65535>=a){if(r+2>=o)break;t[r++>>>0]=224|a>>12}else{if(r+3>=o)break;t[r++>>>0]=240|a>>18,t[r++>>>0]=128|a>>12&63}t[r++>>>0]=128|a>>6&63}t[r++>>>0]=128|63&a}}return t[r>>>0]=0,r-n},ve=(e,t,r)=>ke(e,o(),t,r);function Pe(e,t){if(x)return se(5,1,e,t)}function Se(e,t,r){if(x)return se(6,1,e,t,r)}function Fe(e,t,r){return x?se(7,1,e,t,r):0}function Ce(e,t){if(x)return se(8,1,e,t)}function Ee(e,t,r){if(x)return se(9,1,e,t,r)}function Ae(e,t,r,o){if(x)return se(10,1,e,t,r,o)}function Ie(e,t,r,o){if(x)return se(11,1,e,t,r,o)}function Oe(e,t,r,o){if(x)return se(12,1,e,t,r,o)}function Le(e){if(x)return se(13,1,e)}function De(e,t){if(x)return se(14,1,e,t)}function Ne(e,t,r){if(x)return se(15,1,e,t,r)}function Be(e){e>>>=0,"function"==typeof Atomics.nb&&(Atomics.nb(n(),e>>>2,e).value.then($e),e+=128,Atomics.store(n(),e>>>2,1))}u.__emscripten_thread_mailbox_await=Be;var $e=()=>{var e=lt();if(e&&(Be(e),e=ht,!B))try{if(e(),!(0<ne))try{x?dt(A):ie(A)}catch(e){e instanceof te||"unwind"==e||m(1,e)}}catch(e){e instanceof te||"unwind"==e||m(1,e)}};u.checkMailbox=$e;var Ve=[],je=e=>e%4==0&&(e%100!=0||e%400==0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],Re=[0,31,59,90,120,151,181,212,243,273,304,334];function Ge(e,t,r,o,n,s,a,i){return x?se(16,1,e,t,r,o,n,s,a,i):-52}function Ue(e,t,r,o,n,s,a){if(x)return se(17,1,e,t,r,o,n,s,a)}var qe,We=[],He={},Xe=()=>{if(!qe){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"};for(e in He)void 0===He[e]?delete t[e]:t[e]=He[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);qe=r}return qe};function Qe(e,r){if(x)return se(18,1,e,r);e>>>=0,r>>>=0;var o=0;return Xe().forEach((n,a)=>{var i=r+o;for(a=s()[e+4*a>>>2>>>0]=i,i=0;i<n.length;++i)t()[a++>>>0]=n.charCodeAt(i);t()[a>>>0]=0,o+=n.length+1}),0}function Ye(e,t){if(x)return se(19,1,e,t);e>>>=0,t>>>=0;var r=Xe();s()[e>>>2>>>0]=r.length;var o=0;return r.forEach(e=>o+=e.length+1),s()[t>>>2>>>0]=o,0}function Je(e){return x?se(20,1,e):52}function Ze(e,t,r,o){return x?se(21,1,e,t,r,o):52}function Ke(e,t,r,o,n){return x?se(22,1,e,t,r,o,n):70}var et=[null,[],[]];function tt(e,t,r,n){if(x)return se(23,1,e,t,r,n);t>>>=0,r>>>=0,n>>>=0;for(var a=0,i=0;i<r;i++){var l=s()[t>>>2>>>0],c=s()[t+4>>>2>>>0];t+=8;for(var _=0;_<c;_++){var p=o()[l+_>>>0],u=et[e];0===p||10===p?((1===e?S:F)(we(u,0)),u.length=0):u.push(p)}a+=c}return s()[n>>>2>>>0]=a,0}var rt=[31,29,31,30,31,30,31,31,30,31,30,31],ot=[31,28,31,30,31,30,31,31,30,31,30,31];function nt(e,r,o,a){function i(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function l(e,t){return i(e,t,"0")}function c(e,t){function r(e){return 0>e?-1:0<e?1:0}var o;return 0===(o=r(e.getFullYear()-t.getFullYear()))&&0===(o=r(e.getMonth()-t.getMonth()))&&(o=r(e.getDate()-t.getDate())),o}function _(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function p(e){var t=e.Qa;for(e=new Date(new Date(e.Ra+1900,0,1).getTime());0<t;){var r=e.getMonth(),o=(je(e.getFullYear())?rt:ot)[r];if(!(t>o-e.getDate())){e.setDate(e.getDate()+t);break}t-=o-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=_(new Date(e.getFullYear(),0,4)),r=_(r),0>=c(t,e)?0>=c(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,r>>>=0,o>>>=0,a>>>=0;var u=s()[a+40>>>2>>>0];for(var d in a={kb:n()[a>>>2>>>0],jb:n()[a+4>>>2>>>0],Sa:n()[a+8>>>2>>>0],Wa:n()[a+12>>>2>>>0],Ta:n()[a+16>>>2>>>0],Ra:n()[a+20>>>2>>>0],Ma:n()[a+24>>>2>>>0],Qa:n()[a+28>>>2>>>0],qb:n()[a+32>>>2>>>0],ib:n()[a+36>>>2>>>0],lb:u?xe(u):""},o=xe(o),u={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})o=o.replace(new RegExp(d,"g"),u[d]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f="January February March April May June July August September October November December".split(" ");for(d in u={"%a":e=>h[e.Ma].substring(0,3),"%A":e=>h[e.Ma],"%b":e=>f[e.Ta].substring(0,3),"%B":e=>f[e.Ta],"%C":e=>l((e.Ra+1900)/100|0,2),"%d":e=>l(e.Wa,2),"%e":e=>i(e.Wa,2," "),"%g":e=>p(e).toString().substring(2),"%G":p,"%H":e=>l(e.Sa,2),"%I":e=>(0==(e=e.Sa)?e=12:12<e&&(e-=12),l(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.Ta-1;t+=(je(e.Ra+1900)?rt:ot)[r++]);return l(e.Wa+t,3)},"%m":e=>l(e.Ta+1,2),"%M":e=>l(e.jb,2),"%n":()=>"\n","%p":e=>0<=e.Sa&&12>e.Sa?"AM":"PM","%S":e=>l(e.kb,2),"%t":()=>"\t","%u":e=>e.Ma||7,"%U":e=>l(Math.floor((e.Qa+7-e.Ma)/7),2),"%V":e=>{var t=Math.floor((e.Qa+7-(e.Ma+6)%7)/7);if(2>=(e.Ma+371-e.Qa-2)%7&&t++,t)53==t&&(4==(r=(e.Ma+371-e.Qa)%7)||3==r&&je(e.Ra)||(t=1));else{t=52;var r=(e.Ma+7-e.Qa-1)%7;(4==r||5==r&&je(e.Ra%400-1))&&t++}return l(t,2)},"%w":e=>e.Ma,"%W":e=>l(Math.floor((e.Qa+7-(e.Ma+6)%7)/7),2),"%y":e=>(e.Ra+1900).toString().substring(2),"%Y":e=>e.Ra+1900,"%z":e=>(0<=(e=e.ib)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4),"%Z":e=>e.lb,"%%":()=>"%"},o=o.replace(/%%/g,"\0\0"),u)o.includes(d)&&(o=o.replace(new RegExp(d,"g"),u[d](a)));return d=function(e){var t=Array(Te(e)+1);return ke(e,t,0,t.length),t}(o=o.replace(/\0\0/g,"%")),d.length>r?0:(((e,r)=>{t().set(e,r>>>0)})(d,e),d.length-1)}_e.Va();var st=[ae,ue,me,ye,Me,Pe,Se,Fe,Ce,Ee,Ae,Ie,Oe,Le,De,Ne,Ge,Ue,Qe,Ye,Je,Ze,Ke,tt],at={b:function(e,t,r){throw new fe(e>>>=0).Va(t>>>0,r>>>0),e},L:function(e){ct(e>>>0,!b,1,!g,131072,!1),_e.$a()},j:function(e){e>>>=0,x?postMessage({cmd:"cleanupThread",thread:e}):_e.Ya(_e.La[e])},H:ge,h:ye,S:Me,D:Pe,F:Se,T:Fe,Q:Ce,J:Ee,P:Ae,n:Ie,E:Oe,B:Le,R:De,C:Ne,p:()=>1,z:function(e,t){(e>>>=0)==t>>>0?setTimeout($e):x?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=_e.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,t,r,o,n){t>>>=0,r>>>=0,Ve.length=o,n=n>>>0>>>3;for(var s=0;s<o;s++)Ve[s]=a()[n+s>>>0];return e=t?ee[t]:st[e],_e.eb=r,r=e(...Ve),_e.eb=0,r},K:Be,o:function(e){w&&_e.La[e>>>0].ref()},s:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),n()[r>>>2>>>0]=e.getUTCSeconds(),n()[r+4>>>2>>>0]=e.getUTCMinutes(),n()[r+8>>>2>>>0]=e.getUTCHours(),n()[r+12>>>2>>>0]=e.getUTCDate(),n()[r+16>>>2>>>0]=e.getUTCMonth(),n()[r+20>>>2>>>0]=e.getUTCFullYear()-1900,n()[r+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,n()[r+28>>>2>>>0]=e},t:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),n()[r>>>2>>>0]=e.getSeconds(),n()[r+4>>>2>>>0]=e.getMinutes(),n()[r+8>>>2>>>0]=e.getHours(),n()[r+12>>>2>>>0]=e.getDate(),n()[r+16>>>2>>>0]=e.getMonth(),n()[r+20>>>2>>>0]=e.getFullYear()-1900,n()[r+24>>>2>>>0]=e.getDay(),t=(je(e.getFullYear())?ze:Re)[e.getMonth()]+e.getDate()-1|0,n()[r+28>>>2>>>0]=t,n()[r+36>>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var o=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=o&&e.getTimezoneOffset()==Math.min(o,t)),n()[r+32>>>2>>>0]=e},u:function(e){e>>>=0;var t=new Date(n()[e+20>>>2>>>0]+1900,n()[e+16>>>2>>>0],n()[e+12>>>2>>>0],n()[e+8>>>2>>>0],n()[e+4>>>2>>>0],n()[e>>>2>>>0],0),r=n()[e+32>>>2>>>0],o=t.getTimezoneOffset(),s=new Date(t.getFullYear(),6,1).getTimezoneOffset(),a=new Date(t.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(a,s);return 0>r?n()[e+32>>>2>>>0]=+(s!=a&&i==o):0<r!=(i==o)&&(s=Math.max(a,s),t.setTime(t.getTime()+6e4*((0<r?i:s)-o))),n()[e+24>>>2>>>0]=t.getDay(),r=(je(t.getFullYear())?ze:Re)[t.getMonth()]+t.getDate()-1|0,n()[e+28>>>2>>>0]=r,n()[e>>>2>>>0]=t.getSeconds(),n()[e+4>>>2>>>0]=t.getMinutes(),n()[e+8>>>2>>>0]=t.getHours(),n()[e+12>>>2>>>0]=t.getDate(),n()[e+16>>>2>>>0]=t.getMonth(),n()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),e=isNaN(e)?-1:e/1e3,ft((K=e,1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)),e>>>0},q:Ge,r:Ue,y:function(e,t,r,o){e>>>=0,t>>>=0,r>>>=0,o>>>=0;var a=(new Date).getFullYear(),i=new Date(a,0,1),l=new Date(a,6,1);a=i.getTimezoneOffset();var c=l.getTimezoneOffset(),_=Math.max(a,c);s()[e>>>2>>>0]=60*_,n()[t>>>2>>>0]=+(a!=c),i=(e=e=>e.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1])(i),l=e(l),c<a?(ve(i,r,17),ve(l,o,17)):(ve(i,o,17),ve(l,r,17))},c:()=>{H("")},O:function(e,t,r){e>>>=0,t>>>=0,r>>>=0,We.length=0;for(var i;i=o()[t++>>>0];){var l=105!=i;r+=(l&=112!=i)&&r%8?4:0,We.push(112==i?s()[r>>>2>>>0]:105==i?n()[r>>>2>>>0]:a()[r>>>3>>>0]),r+=l?8:4}return ee[e](...We)},k:()=>{},i:()=>Date.now(),U:()=>{throw ne+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>w?(Cp(),ar(Lp)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var t=o().length;if(e<=t||4294901760<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var s=Math;n=Math.max(e,n);e:{s=(s.min.call(s,4294901760,n+(65536-n%65536)%65536)-C.buffer.byteLength+65535)/65536;try{C.grow(s),$();var a=1;break e}catch{}a=void 0}if(a)return!0}return!1},M:Qe,N:Ye,G:ie,g:Je,m:Ze,v:Ke,l:tt,a:C||u.wasmMemory,w:nt,d:function(e,t,r,o){return nt(e>>>0,t>>>0,r>>>0,o>>>0)}},it=function(){function e(e,t){return it=e.exports,it=function(){var e=it;e=Object.assign({},e);var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return e.va=t(e.va),e.wa=r(e.wa),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Ja=r(e.Ja),e.Ka=t(e.Ka),e}(),_e.ab.push(it.ya),de=it.za,z.unshift(it.V),E=t,W(),it}var t={a:at};if(G++,u.instantiateWasm)try{return u.instantiateWasm(t,e)}catch(e){F(`Module.instantiateWasm callback failed with error: ${e}`),l(e)}return function(e,t){var r=X;return"function"!=typeof WebAssembly.instantiateStreaming||Q(r)||Y(r)||w||"function"!=typeof fetch?Z(r,e,t):fetch(r,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(t,function(o){return F(`wasm streaming compile failed: ${o}`),F("falling back to ArrayBuffer instantiation"),Z(r,e,t)}))}(t,function(t){e(t.instance,t.module)}).catch(l),{}}();u._OrtInit=(e,t)=>(u._OrtInit=it.W)(e,t),u._OrtGetLastError=(e,t)=>(u._OrtGetLastError=it.X)(e,t),u._OrtCreateSessionOptions=(e,t,r,o,n,s,a,i,l,c)=>(u._OrtCreateSessionOptions=it.Y)(e,t,r,o,n,s,a,i,l,c),u._OrtAppendExecutionProvider=(e,t)=>(u._OrtAppendExecutionProvider=it.Z)(e,t),u._OrtAddFreeDimensionOverride=(e,t,r)=>(u._OrtAddFreeDimensionOverride=it._)(e,t,r),u._OrtAddSessionConfigEntry=(e,t,r)=>(u._OrtAddSessionConfigEntry=it.$)(e,t,r),u._OrtReleaseSessionOptions=e=>(u._OrtReleaseSessionOptions=it.aa)(e),u._OrtCreateSession=(e,t,r)=>(u._OrtCreateSession=it.ba)(e,t,r),u._OrtReleaseSession=e=>(u._OrtReleaseSession=it.ca)(e),u._OrtGetInputOutputCount=(e,t,r)=>(u._OrtGetInputOutputCount=it.da)(e,t,r),u._OrtGetInputName=(e,t)=>(u._OrtGetInputName=it.ea)(e,t),u._OrtGetOutputName=(e,t)=>(u._OrtGetOutputName=it.fa)(e,t),u._OrtFree=e=>(u._OrtFree=it.ga)(e),u._OrtCreateTensor=(e,t,r,o,n,s)=>(u._OrtCreateTensor=it.ha)(e,t,r,o,n,s),u._OrtGetTensorData=(e,t,r,o,n)=>(u._OrtGetTensorData=it.ia)(e,t,r,o,n),u._OrtReleaseTensor=e=>(u._OrtReleaseTensor=it.ja)(e),u._OrtCreateRunOptions=(e,t,r,o)=>(u._OrtCreateRunOptions=it.ka)(e,t,r,o),u._OrtAddRunConfigEntry=(e,t,r)=>(u._OrtAddRunConfigEntry=it.la)(e,t,r),u._OrtReleaseRunOptions=e=>(u._OrtReleaseRunOptions=it.ma)(e),u._OrtCreateBinding=e=>(u._OrtCreateBinding=it.na)(e),u._OrtBindInput=(e,t,r)=>(u._OrtBindInput=it.oa)(e,t,r),u._OrtBindOutput=(e,t,r,o)=>(u._OrtBindOutput=it.pa)(e,t,r,o),u._OrtClearBoundOutputs=e=>(u._OrtClearBoundOutputs=it.qa)(e),u._OrtReleaseBinding=e=>(u._OrtReleaseBinding=it.ra)(e),u._OrtRunWithBinding=(e,t,r,o,n)=>(u._OrtRunWithBinding=it.sa)(e,t,r,o,n),u._OrtRun=(e,t,r,o,n,s,a,i)=>(u._OrtRun=it.ta)(e,t,r,o,n,s,a,i),u._OrtEndProfiling=e=>(u._OrtEndProfiling=it.ua)(e);var lt=u._pthread_self=()=>(lt=u._pthread_self=it.va)();u._malloc=e=>(u._malloc=it.wa)(e),u._free=e=>(u._free=it.xa)(e),u.__emscripten_tls_init=()=>(u.__emscripten_tls_init=it.ya)();var ct=u.__emscripten_thread_init=(e,t,r,o,n,s)=>(ct=u.__emscripten_thread_init=it.Aa)(e,t,r,o,n,s);u.__emscripten_thread_crashed=()=>(u.__emscripten_thread_crashed=it.Ba)();var _t,pt=(e,t,r,o,n)=>(pt=it.Ca)(e,t,r,o,n),ut=e=>(ut=it.Da)(e),dt=u.__emscripten_thread_exit=e=>(dt=u.__emscripten_thread_exit=it.Ea)(e),ht=()=>(ht=it.Fa)(),ft=e=>(ft=it.Ga)(e),mt=(e,t)=>(mt=it.Ha)(e,t),gt=e=>(gt=it.Ia)(e),bt=e=>(bt=it.Ja)(e),wt=()=>(wt=it.Ka)();function xt(){if(!(0<G))if(x)i(u),x||pe(z),startWorker(u);else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)j.unshift(u.preRun.shift());pe(j),0<G||_t||(_t=!0,u.calledRun=!0,B||(x||pe(z),i(u),x||pe(R)))}}return u.wasmMemory=C,u.stackSave=()=>wt(),u.stackRestore=e=>gt(e),u.stackAlloc=e=>bt(e),u.keepRuntimeAlive=()=>0<ne,u.UTF8ToString=xe,u.stringToUTF8=ve,u.lengthBytesUTF8=Te,u.ExitStatus=te,u.PThread=_e,q=function e(){_t||xt(),_t||(q=e)},xt(),d});"object"==typeof e&&"object"==typeof t?t.exports=o:"function"==typeof define&&define.amd&&define([],()=>o)}),Bp=me((e,t)=>{t.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),Rp,sg,oa,ia,So,Np,ug,lg,fg,Mp,De,Ur=L(()=>{Rp=Pp(),sg=kp(),ia=!1,So=!1,Np=!1,ug=e=>{if(1===e)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},lg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fg=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Mp=async e=>{if(ia)return Promise.resolve();if(So)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Np)throw new Error("previous call to 'initializeWebAssembly()' failed.");So=!0;let t=e.initTimeout,r=e.numThreads,o=e.simd,n=ug(r),s=o&&lg(),a=e.wasmPaths,i="string"==typeof a?a:void 0,l=fg(s,n),c="object"==typeof a?a[l]:void 0,_=!1,p=[];if(t>0&&p.push(new Promise(e=>{setTimeout(()=>{_=!0,e()},t)})),p.push(new Promise((e,t)=>{let o=n?sg:Rp,s={locateFile:(e,t)=>n&&e.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Bp()],{type:"text/javascript"})):e.endsWith(".wasm")?c||(i??t)+l:t+e};if(n)if(s.numThreads=r,typeof Blob>"u")s.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let e=`var ortWasmThreaded=${o.toString()};`;s.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"})}o(s).then(t=>{So=!1,ia=!0,oa=t,e()},e=>{So=!1,Np=!0,t(e)})})),await Promise.race(p),_)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},De=()=>{if(ia&&oa)return oa;throw new Error("WebAssembly is not initialized yet.")}}),ve,bn,_e,Ao=L(()=>{Ur(),ve=(e,t)=>{let r=De(),o=r.lengthBytesUTF8(e)+1,n=r._malloc(o);return r.stringToUTF8(e,n,o),t.push(n),n},bn=(e,t,r,o)=>{if("object"==typeof e&&null!==e){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([e,n])=>{let s=t?t+e:e;if("object"==typeof n)bn(n,s+".",r,o);else if("string"==typeof n||"number"==typeof n)o(s,n.toString());else{if("boolean"!=typeof n)throw new Error("Can't handle extra config type: "+typeof n);o(s,n?"1":"0")}})},_e=e=>{let t=De(),r=t.stackSave();try{let r=t.stackAlloc(8);t._OrtGetLastError(r,r+4);let o=t.HEAP32[r/4],n=t.HEAPU32[r/4+1],s=n?t.UTF8ToString(n):"";throw new Error(`${e} ERROR_CODE: ${o}, ERROR_MESSAGE: ${s}`)}finally{t.stackRestore(r)}}}),Gp,Up=L(()=>{Ur(),Ao(),Gp=e=>{let t=De(),r=0,o=[],n=e||{};try{if(void 0===e?.logSeverityLevel)n.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===e?.logVerbosityLevel)n.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===e?.terminate&&(n.terminate=!1);let s=0;return void 0!==e?.tag&&(s=ve(e.tag,o)),r=t._OrtCreateRunOptions(n.logSeverityLevel,n.logVerbosityLevel,!!n.terminate,s),0===r&&_e("Can't create run options."),void 0!==e?.extra&&bn(e.extra,"",new WeakSet,(e,n)=>{let s=ve(e,o),a=ve(n,o);0!==t._OrtAddRunConfigEntry(r,s,a)&&_e(`Can't set a run config entry: ${e} - ${n}.`)}),[r,o]}catch(e){throw 0!==r&&t._OrtReleaseRunOptions(r),o.forEach(e=>t._free(e)),e}}}),cg,pg,dg,hg,zp,Vp=L(()=>{Ur(),Ao(),cg=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},pg=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},dg=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(e=>"webgpu"===("string"==typeof e?e:e.name))&&(e.enableMemPattern=!1)},hg=(e,t,r)=>{for(let o of t){let t="string"==typeof o?o:o.name;switch(t){case"webnn":if(t="WEBNN","string"!=typeof o){let t=o;if(t?.deviceType){let o=ve("deviceType",r),n=ve(t.deviceType,r);0!==De()._OrtAddSessionConfigEntry(e,o,n)&&_e(`Can't set a session config entry: 'deviceType' - ${t.deviceType}.`)}if(t?.numThreads){let o=t.numThreads;("number"!=typeof o||!Number.isInteger(o)||o<0)&&(o=0);let n=ve("numThreads",r),s=ve(o.toString(),r);0!==De()._OrtAddSessionConfigEntry(e,n,s)&&_e(`Can't set a session config entry: 'numThreads' - ${t.numThreads}.`)}if(t?.powerPreference){let o=ve("powerPreference",r),n=ve(t.powerPreference,r);0!==De()._OrtAddSessionConfigEntry(e,o,n)&&_e(`Can't set a session config entry: 'powerPreference' - ${t.powerPreference}.`)}}break;case"webgpu":if(t="JS","string"!=typeof o){let t=o;if(t?.preferredLayout){if("NCHW"!==t.preferredLayout&&"NHWC"!==t.preferredLayout)throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${t.preferredLayout}`);let o=ve("preferredLayout",r),n=ve(t.preferredLayout,r);0!==De()._OrtAddSessionConfigEntry(e,o,n)&&_e(`Can't set a session config entry: 'preferredLayout' - ${t.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${t}`)}let n=ve(t,r);0!==De()._OrtAppendExecutionProvider(e,n)&&_e(`Can't append execution provider: ${t}.`)}},zp=e=>{let t=De(),r=0,o=[],n=e||{};dg(n);try{let e=cg(n.graphOptimizationLevel??"all"),s=pg(n.executionMode??"sequential"),a="string"==typeof n.logId?ve(n.logId,o):0,i=n.logSeverityLevel??2;if(!Number.isInteger(i)||i<0||i>4)throw new Error(`log serverity level is not valid: ${i}`);let l=n.logVerbosityLevel??0;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log verbosity level is not valid: ${l}`);let c="string"==typeof n.optimizedModelFilePath?ve(n.optimizedModelFilePath,o):0;if(r=t._OrtCreateSessionOptions(e,!!n.enableCpuMemArena,!!n.enableMemPattern,s,!!n.enableProfiling,0,a,i,l,c),0===r&&_e("Can't create session options."),n.executionProviders&&hg(r,n.executionProviders,o),void 0!==n.enableGraphCapture){if("boolean"!=typeof n.enableGraphCapture)throw new Error(`enableGraphCapture must be a boolean value: ${n.enableGraphCapture}`);let e=ve("enableGraphCapture",o),s=ve(n.enableGraphCapture.toString(),o);0!==t._OrtAddSessionConfigEntry(r,e,s)&&_e(`Can't set a session config entry: 'enableGraphCapture' - ${n.enableGraphCapture}.`)}if(n.freeDimensionOverrides)for(let[e,s]of Object.entries(n.freeDimensionOverrides)){if("string"!=typeof e)throw new Error(`free dimension override name must be a string: ${e}`);if("number"!=typeof s||!Number.isInteger(s)||s<0)throw new Error(`free dimension override value must be a non-negative integer: ${s}`);let n=ve(e,o);0!==t._OrtAddFreeDimensionOverride(r,n,s)&&_e(`Can't set a free dimension override: ${e} - ${s}.`)}return void 0!==n.extra&&bn(n.extra,"",new WeakSet,(e,n)=>{let s=ve(e,o),a=ve(n,o);0!==t._OrtAddSessionConfigEntry(r,s,a)&&_e(`Can't set a session config entry: ${e} - ${n}.`)}),[r,o]}catch(e){throw 0!==r&&t._OrtReleaseSessionOptions(r),o.forEach(e=>t._free(e)),e}}}),aa,Wp,sa,Hp,qp,Po,jp,ua=L(()=>{aa=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},Wp=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},sa=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],Hp=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},qp=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Po=e=>"float32"===e||"float16"===e||"int32"===e||"int64"===e||"uint32"===e||"uint8"===e||"bool"===e,jp=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}}),gn,la=L(()=>{gn=async e=>{if("string"!=typeof e)return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e);if(!(typeof process<"u"&&process.versions&&process.versions.node)){let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),o=r?parseInt(r,10):0;if(o<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let r,n=t.body.getReader();try{r=new ArrayBuffer(o)}catch(e){if(!(e instanceof RangeError))throw e;{let e=Math.ceil(o/65536);r=new WebAssembly.Memory({initial:e,maximum:e}).buffer}}let s=0;for(;;){let{done:e,value:t}=await n.read();if(e)break;let o=t.byteLength;new Uint8Array(r,s,o).set(t),s+=o}return new Uint8Array(r,0,o)}}try{return new Uint8Array(await(void 0)(e))}catch(t){if("ERR_FS_FILE_TOO_LARGE"===t.code){let t=(void 0)(e),r=[];for await(let e of t)r.push(e);return new Uint8Array(Buffer.concat(r))}throw t}}}),mg,Xp,Kp,zr,bg,fa,Jp,Zp,Yp,Qp,ed,td,rd=L(()=>{Up(),Vp(),ua(),Ur(),Ao(),la(),mg=(e,t)=>{0!==De()._OrtInit(e,t)&&_e("Can't initialize onnxruntime.")},Xp=async e=>{mg(e.wasm.numThreads,qp(e.logLevel))},Kp=async(e,t)=>{},zr=new Map,bg=e=>{let t=De(),r=t.stackSave();try{let r=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,r,r+4)&&_e("Can't get session input/output count."),[t.HEAP32[r/4],t.HEAP32[r/4+1]]}finally{t.stackRestore(r)}},fa=e=>{let t=De(),r=t._malloc(e.byteLength);if(0===r)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},Jp=async(e,t)=>{let r,o,n=De();Array.isArray(e)?[r,o]=e:e.buffer===n.HEAPU8.buffer?[r,o]=[e.byteOffset,e.byteLength]:[r,o]=fa(e);let s=0,a=0,i=[],l=[],c=[];try{if([a,i]=zp(t),t?.externalData&&n.mountExternalData){let e=[];for(let r of t.externalData){let t="string"==typeof r?r:r.path;e.push(gn("string"==typeof r?r:r.data).then(e=>{n.mountExternalData(t,e)}))}await Promise.all(e)}s=await n._OrtCreateSession(r,o,a),0===s&&_e("Can't create a session.");let[e,_]=bg(s),p=!!t?.enableGraphCapture,u=[],d=[];for(let t=0;t<e;t++){let e=n._OrtGetInputName(s,t);0===e&&_e("Can't get an input name."),l.push(e),u.push(n.UTF8ToString(e))}for(let e=0;e<_;e++){let t=n._OrtGetOutputName(s,e);0===t&&_e("Can't get an output name."),c.push(t);let r=n.UTF8ToString(t);d.push(r)}let h=null;return zr.set(s,[s,l,c,h,p,!1]),[s,u,d]}catch(e){throw l.forEach(e=>n._OrtFree(e)),c.forEach(e=>n._OrtFree(e)),0!==s&&n._OrtReleaseSession(s),e}finally{n._free(r),0!==a&&n._OrtReleaseSessionOptions(a),i.forEach(e=>n._free(e)),n.unmountExternalData?.()}},Zp=e=>{let t=De(),r=zr.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,n,s,a,i]=r;a&&(i&&t._OrtClearBoundOutputs(a.handle),t._OrtReleaseBinding(a.handle)),t.jsepOnReleaseSession?.(e),n.forEach(e=>t._OrtFree(e)),s.forEach(e=>t._OrtFree(e)),t._OrtReleaseSession(o),zr.delete(e)},Yp=(e,t,r,o,n,s=!1)=>{if(!e)return void t.push(0);let a,i,l=De(),c=e[0],_=e[1],p=e[3];if("string"===c&&"gpu-buffer"===p)throw new Error("String tensor is not supported on GPU.");if(s&&"gpu-buffer"!==p)throw new Error(`External buffer must be provided for input/output index ${n} when enableGraphCapture is true.`);if("gpu-buffer"===p){let t=e[2].gpuBuffer,r=sa(aa(c));i=_.reduce((e,t)=>e*t,1)*r;let s=l.jsepRegisterBuffer;if(!s)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');a=s(o,n,t,i)}else{let t=e[2];if(Array.isArray(t)){i=4*t.length,a=l._malloc(i),r.push(a);let e=a/4;for(let o=0;o<t.length;o++){if("string"!=typeof t[o])throw new TypeError(`tensor data at index ${o} is not a string`);l.HEAPU32[e++]=ve(t[o],r)}}else i=t.byteLength,a=l._malloc(i),r.push(a),l.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,i),a)}let u=l.stackSave(),d=l.stackAlloc(4*_.length);try{let e=d/4;_.forEach(t=>l.HEAP32[e++]=t);let r=l._OrtCreateTensor(aa(c),a,i,d,_.length,jp(p));0===r&&_e(`Can't create tensor for input/output. session=${o}, index=${n}.`),t.push(r)}finally{l.stackRestore(u)}},Qp=async(e,t,r,o,n,s)=>{let a=De(),i=zr.get(e);if(!i)throw new Error(`cannot run inference. invalid session id: ${e}`);let l=i[0],c=i[1],_=i[2],p=i[3],u=i[4],d=(i[5],t.length),h=o.length,f=0,m=[],g=[],b=[],w=[],x=a.stackSave(),y=a.stackAlloc(4*d),M=a.stackAlloc(4*d),T=a.stackAlloc(4*h),k=a.stackAlloc(4*h);try{[f,m]=Gp(s);for(let o=0;o<d;o++)Yp(r[o],g,w,e,t[o],u);for(let t=0;t<h;t++)Yp(n[t],b,w,e,d+o[t],u);let i,x=y/4,v=M/4,P=T/4,S=k/4;for(let e=0;e<d;e++)a.HEAPU32[x++]=g[e],a.HEAPU32[v++]=c[t[e]];for(let e=0;e<h;e++)a.HEAPU32[P++]=b[e],a.HEAPU32[S++]=_[o[e]];a.jsepOnRunStart?.(l),i=await a._OrtRun(l,M,y,d,k,h,T,f),0!==i&&_e("failed to call OrtRun().");let F=[];for(let e=0;e<h;e++){let t=a.HEAPU32[T/4+e];if(t===b[e]){F.push(n[e]);continue}let r,s=a.stackSave(),i=a.stackAlloc(16),l=!1,c=0;try{0!==a._OrtGetTensorData(t,i,i+4,i+8,i+12)&&_e(`Can't access output tensor data on index ${e}.`);let n=i/4,s=a.HEAPU32[n++];c=a.HEAPU32[n++];let _=a.HEAPU32[n++],u=a.HEAPU32[n++],d=[];for(let e=0;e<u;e++)d.push(a.HEAPU32[_/4+e]);a._OrtFree(_);let h=d.reduce((e,t)=>e*t,1);r=Wp(s);let f=p?.outputPreferredLocations[o[e]];if("string"===r){if("gpu-buffer"===f)throw new Error("String tensor is not supported on GPU.");let e=[],t=c/4;for(let r=0;r<h;r++){let o=a.HEAPU32[t++],n=r===h-1?void 0:a.HEAPU32[t]-o;e.push(a.UTF8ToString(o,n))}F.push([r,d,e,"cpu"])}else if("gpu-buffer"===f&&h>0){let e=a.jsepGetBuffer;if(!e)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let o=e(c),n=sa(s);if(void 0===n||!Po(r))throw new Error(`Unsupported data type: ${r}`);l=!0,F.push([r,d,{gpuBuffer:o,download:a.jsepCreateDownloader(o,h*n,r),dispose:()=>{a._OrtReleaseTensor(t)}},"gpu-buffer"])}else{let e=new(Hp(r))(h);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(a.HEAPU8.subarray(c,c+e.byteLength)),F.push([r,d,e,"cpu"])}}finally{a.stackRestore(s),"string"===r&&c&&a._free(c),l||a._OrtReleaseTensor(t)}}return p&&!u&&(a._OrtClearBoundOutputs(p.handle),zr.set(e,[l,c,_,p,u,!1])),F}finally{a.stackRestore(x),g.forEach(e=>a._OrtReleaseTensor(e)),b.forEach(e=>a._OrtReleaseTensor(e)),w.forEach(e=>a._free(e)),0!==f&&a._OrtReleaseRunOptions(f),m.forEach(e=>a._free(e))}},ed=e=>{let t=De(),r=zr.get(e);if(!r)throw new Error("invalid session id");let o=r[0],n=t._OrtEndProfiling(o);0===n&&_e("Can't get an profile file name."),t._OrtFree(n)},td=e=>{let t=[];for(let r of e){let e=r[2];!Array.isArray(e)&&"buffer"in e&&t.push(e.buffer)}return t}}),nd=me((e,t)=>{t.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(i,c)=>()=>(i&&(c=i(i=0)),c);var Ke=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports),Et=(i,c)=>{for(var a in c)vt(i,a,{get:c[a],enumerable:!0})},Xr=(i,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Vr(c))!Jr.call(i,f)&&f!==a&&vt(i,f,{get:()=>c[f],enumerable:!(h=qr(c,f))||h.enumerable});return i};var et=i=>Xr(vt({},"__esModule",{value:!0}),i);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Zr});var Qr,Zr,lr,At=_t(()=>{Qr=void 0,Zr=void 0,lr=void 0});var Tt={};Et(Tt,{join:()=>Kr});var Kr,Mt=_t(()=>{Kr=void 0});var pr=Ke((dr,Ct)=>{"use strict";var cr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){var a=c,h,f,w=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",S=typeof window=="object",x=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,V,R;if(H){var B=(At(),et(St)),D=(Mt(),et(Tt));A=x?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),V=(t,o,u,m=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,m?void 0:"utf8",(O,E)=>{O?u(O):o(m?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(S||x)&&(x?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},x&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),V=(t,o,u)=>{var m=new XMLHttpRequest;m.open("GET",t,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):u()},m.onerror=u,m.send(null)});var T=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,_,J,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=_=new Int32Array(t),a.HEAPU32=J=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],X=[],we=0,me=null,F=null;function ie(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),be;if(be="ort-wasm.wasm",!xe(be)){var ae=be;be=a.locateFile?a.locateFile(ae,A):A+ae}function K(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function je(t){if(S||x){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>K(t));if(V)return new Promise((o,u)=>{V(t,m=>o(new Uint8Array(m)),u)})}return Promise.resolve().then(()=>K(t))}function Oe(t,o,u){return je(t).then(m=>WebAssembly.instantiate(m,o)).then(u,m=>{L(`failed to asynchronously prepare wasm: ${m}`),ie(m)})}function Ue(t,o){var u=be;return typeof WebAssembly.instantiateStreaming!="function"||xe(u)||ce(u)||H||typeof fetch!="function"?Oe(u,t,o):fetch(u,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,t).then(o,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),Oe(u,t,o)}))}var ve,Ae={798088:(t,o,u,m)=>{if(typeof a>"u"||!a.ya)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.ya.get(t),!t)return 2;if(o>>>=0,u>>>=0,o+u>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+u),m>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.wa=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,u)=>{o>>>=0;var m=o+u;for(u=o;t[u]&&!(u>=m);)++u;if(16<u-o&&t.buffer&&te)return te.decode(t.subarray(o,u));for(m="";o<u;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|E);else{var U=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|U:(O&7)<<18|E<<12|U<<6|t[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,u=0;u<t.length;++u){var m=t.charCodeAt(u);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++u):o+=3}return o},Se=(t,o,u,m)=>{if(u>>>=0,!(0<m))return 0;var O=u;m=u+m-1;for(var E=0;E<t.length;++E){var U=t.charCodeAt(E);if(55296<=U&&57343>=U){var ee=t.charCodeAt(++E);U=65536+((U&1023)<<10)|ee&1023}if(127>=U){if(u>=m)break;o[u++>>>0]=U}else{if(2047>=U){if(u+1>=m)break;o[u++>>>0]=192|U>>6}else{if(65535>=U){if(u+2>=m)break;o[u++>>>0]=224|U>>12}else{if(u+3>=m)break;o[u++>>>0]=240|U>>18,o[u++>>>0]=128|U>>12&63}o[u++>>>0]=128|U>>6&63}o[u++>>>0]=128|U&63}}return o[u>>>0]=0,u-O},Le=t=>t%4===0&&(t%100!==0||t%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var u=[];for(o in t)u.push(`${o}=${t[o]}`);We=u}return We},We,nt=[null,[],[]],De=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,u,m){function O(d,k,$){for(d=typeof d=="number"?d.toString():d||"";d.length<k;)d=$[0]+d;return d}function E(d,k){return O(d,k,"0")}function U(d,k){function $(Ze){return 0>Ze?-1:0<Ze?1:0}var Me;return(Me=$(d.getFullYear()-k.getFullYear()))===0&&(Me=$(d.getMonth()-k.getMonth()))===0&&(Me=$(d.getDate()-k.getDate())),Me}function ee(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function ye(d){var k=d.sa;for(d=new Date(new Date(d.ta+1900,0,1).getTime());0<k;){var $=d.getMonth(),Me=(Le(d.getFullYear())?De:at)[$];if(k>Me-d.getDate())k-=Me-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+k);break}}return $=new Date(d.getFullYear()+1,0,4),k=ee(new Date(d.getFullYear(),0,4)),$=ee($),0>=U(k,d)?0>=U($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,o>>>=0,u>>>=0,m>>>=0;var oe=J[m+40>>>2>>>0];m={Ba:_[m>>>2>>>0],Aa:_[m+4>>>2>>>0],ua:_[m+8>>>2>>>0],xa:_[m+12>>>2>>>0],va:_[m+16>>>2>>>0],ta:_[m+20>>>2>>>0],na:_[m+24>>>2>>>0],sa:_[m+28>>>2>>>0],Da:_[m+32>>>2>>>0],za:_[m+36>>>2>>>0],Ca:oe?ue(oe):""},u=ue(u),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)u=u.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":d=>Qe[d.na].substring(0,3),"%A":d=>Qe[d.na],"%b":d=>Re[d.va].substring(0,3),"%B":d=>Re[d.va],"%C":d=>E((d.ta+1900)/100|0,2),"%d":d=>E(d.xa,2),"%e":d=>O(d.xa,2," "),"%g":d=>ye(d).toString().substring(2),"%G":ye,"%H":d=>E(d.ua,2),"%I":d=>(d=d.ua,d==0?d=12:12<d&&(d-=12),E(d,2)),"%j":d=>{for(var k=0,$=0;$<=d.va-1;k+=(Le(d.ta+1900)?De:at)[$++]);return E(d.xa+k,3)},"%m":d=>E(d.va+1,2),"%M":d=>E(d.Aa,2),"%n":()=>`\n`,"%p":d=>0<=d.ua&&12>d.ua?"AM":"PM","%S":d=>E(d.Ba,2),"%t":()=>"\t","%u":d=>d.na||7,"%U":d=>E(Math.floor((d.sa+7-d.na)/7),2),"%V":d=>{var k=Math.floor((d.sa+7-(d.na+6)%7)/7);if(2>=(d.na+371-d.sa-2)%7&&k++,k)k==53&&($=(d.na+371-d.sa)%7,$==4||$==3&&Le(d.ta)||(k=1));else{k=52;var $=(d.na+7-d.sa-1)%7;($==4||$==5&&Le(d.ta%400-1))&&k++}return E(k,2)},"%w":d=>d.na,"%W":d=>E(Math.floor((d.sa+7-(d.na+6)%7)/7),2),"%y":d=>(d.ta+1900).toString().substring(2),"%Y":d=>d.ta+1900,"%z":d=>{d=d.za;var k=0<=d;return d=Math.abs(d)/60,(k?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ca,"%%":()=>"%"},u=u.replace(/%%/g,"\\0\\0");for(se in oe)u.includes(se)&&(u=u.replace(new RegExp(se,"g"),oe[se](m)));return u=u.replace(/\\0\\0/g,"%"),se=G(u),se.length>o?0:(pe.set(se,t>>>0),se.length-1)}var Ve={a:function(t,o,u){t>>>=0;var m=new _e(t);throw J[m.wa+16>>>2>>>0]=0,J[m.wa+4>>>2>>>0]=o>>>0,J[m.wa+8>>>2>>>0]=u>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,u){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(u>>>0)>>>0)},n:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getUTCSeconds(),_[u+4>>>2>>>0]=t.getUTCMinutes(),_[u+8>>>2>>>0]=t.getUTCHours(),_[u+12>>>2>>>0]=t.getUTCDate(),_[u+16>>>2>>>0]=t.getUTCMonth(),_[u+20>>>2>>>0]=t.getUTCFullYear()-1900,_[u+24>>>2>>>0]=t.getUTCDay(),_[u+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getSeconds(),_[u+4>>>2>>>0]=t.getMinutes(),_[u+8>>>2>>>0]=t.getHours(),_[u+12>>>2>>>0]=t.getDate(),_[u+16>>>2>>>0]=t.getMonth(),_[u+20>>>2>>>0]=t.getFullYear()-1900,_[u+24>>>2>>>0]=t.getDay(),_[u+28>>>2>>>0]=(Le(t.getFullYear())?ze:rt)[t.getMonth()]+t.getDate()-1|0,_[u+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var m=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[u+32>>>2>>>0]=(o!=m&&t.getTimezoneOffset()==Math.min(m,o))|0},p:function(t){t>>>=0;var o=new Date(_[t+20>>>2>>>0]+1900,_[t+16>>>2>>>0],_[t+12>>>2>>>0],_[t+8>>>2>>>0],_[t+4>>>2>>>0],_[t>>>2>>>0],0),u=_[t+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(E,O);return 0>u?_[t+32>>>2>>>0]=+(O!=E&&U==m):0<u!=(U==m)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<u?U:O)-m))),_[t+24>>>2>>>0]=o.getDay(),_[t+28>>>2>>>0]=(Le(o.getFullYear())?ze:rt)[o.getMonth()]+o.getDate()-1|0,_[t>>>2>>>0]=o.getSeconds(),_[t+4>>>2>>>0]=o.getMinutes(),_[t+8>>>2>>>0]=o.getHours(),_[t+12>>>2>>>0]=o.getDate(),_[t+16>>>2>>>0]=o.getMonth(),_[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,u,m){u>>>=0,m>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),U=new Date(O,6,1);O=E.getTimezoneOffset();var ee=U.getTimezoneOffset();J[t>>>0>>>2>>>0]=60*Math.max(O,ee),_[o>>>0>>>2>>>0]=+(O!=ee),t=ye=>ye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],E=t(E),U=t(U),ee<O?(Se(E,Z,u,17),Se(U,Z,m,17)):(Se(E,Z,m,17),Se(U,Z,u,17))},d:()=>{ie("")},B:function(t,o,u){t>>>=0,o>>>=0,u>>>=0,Te.length=0;for(var m;m=Z[o++>>>0];){var O=m!=105;O&=m!=112,u+=O&&u%8?4:0,Te.push(m==112?J[u>>>2>>>0]:m==105?_[u>>>2>>>0]:Pe[u>>>3>>>0]),u+=O?8:4}return Ae[t](...Te)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var u=1;4>=u;u*=2){var m=o*(1+.2/u);m=Math.min(m,t+100663296);var O=Math;m=Math.max(t,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),le();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var u=0;return ke().forEach((m,O)=>{var E=o+u;for(O=J[t+4*O>>>2>>>0]=E,E=0;E<m.length;++E)pe[O++>>>0]=m.charCodeAt(E);pe[O>>>0]=0,u+=m.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var u=ke();J[t>>>2>>>0]=u.length;var m=0;return u.forEach(O=>m+=O.length+1),J[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,u,m){o>>>=0,u>>>=0,m>>>=0;for(var O=0,E=0;E<u;E++){var U=J[o>>>2>>>0],ee=J[o+4>>>2>>>0];o+=8;for(var ye=0;ye<ee;ye++){var oe=Z[U+ye>>>0],se=nt[t];oe===0||oe===10?((t===1?T:L)(re(se,0)),se.length=0):se.push(oe)}O+=ee}return J[m>>>2>>>0]=O,0},r:qe,c:function(t,o,u,m){return qe(t>>>0,o>>>0,u>>>0,m>>>0)}},P=function(){function t(u){return P=u.exports,P=st(),W=P.K,le(),ne.unshift(P.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),F&&(u=F,F=null,u())),P}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(u){L(`Module.instantiateWasm callback failed with error: ${u}`),f(u)}return Ue(o,function(u){t(u.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=P.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=P.N)(t,o),a._OrtCreateSessionOptions=(t,o,u,m,O,E,U,ee,ye,oe)=>(a._OrtCreateSessionOptions=P.O)(t,o,u,m,O,E,U,ee,ye,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=P.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,u)=>(a._OrtAddFreeDimensionOverride=P.Q)(t,o,u),a._OrtAddSessionConfigEntry=(t,o,u)=>(a._OrtAddSessionConfigEntry=P.R)(t,o,u),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=P.S)(t),a._OrtCreateSession=(t,o,u)=>(a._OrtCreateSession=P.T)(t,o,u),a._OrtReleaseSession=t=>(a._OrtReleaseSession=P.U)(t),a._OrtGetInputOutputCount=(t,o,u)=>(a._OrtGetInputOutputCount=P.V)(t,o,u),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=P.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=P.X)(t,o),a._OrtFree=t=>(a._OrtFree=P.Y)(t),a._OrtCreateTensor=(t,o,u,m,O,E)=>(a._OrtCreateTensor=P.Z)(t,o,u,m,O,E),a._OrtGetTensorData=(t,o,u,m,O)=>(a._OrtGetTensorData=P._)(t,o,u,m,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=P.$)(t),a._OrtCreateRunOptions=(t,o,u,m)=>(a._OrtCreateRunOptions=P.aa)(t,o,u,m),a._OrtAddRunConfigEntry=(t,o,u)=>(a._OrtAddRunConfigEntry=P.ba)(t,o,u),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=P.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=P.da)(t),a._OrtBindInput=(t,o,u)=>(a._OrtBindInput=P.ea)(t,o,u),a._OrtBindOutput=(t,o,u,m)=>(a._OrtBindOutput=P.fa)(t,o,u,m),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=P.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=P.ha)(t),a._OrtRunWithBinding=(t,o,u,m,O)=>(a._OrtRunWithBinding=P.ia)(t,o,u,m,O),a._OrtRun=(t,o,u,m,O,E,U,ee)=>(a._OrtRun=P.ja)(t,o,u,m,O,E,U,ee),a._OrtEndProfiling=t=>(a._OrtEndProfiling=P.ka)(t),a._malloc=t=>(a._malloc=P.la)(t),a._free=t=>(a._free=P.ma)(t);var Je=t=>(Je=P.oa)(t),ot=t=>(ot=P.pa)(t),M=t=>(M=P.qa)(t),Ne=()=>(Ne=P.ra)();function st(){var t=P;t=Object.assign({},t);var o=u=>m=>u(m)>>>0;return t.la=o(t.la),t.qa=o(t.qa),t.ra=(u=>()=>u()>>>0)(t.ra),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>M(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,u)=>Se(t,Z,o,u),a.lengthBytesUTF8=Ee;var Fe;F=function t(){Fe||Xe(),Fe||(F=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||Fe||(Fe=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<X.length;)X.shift()(a)}}}return Xe(),w}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ke(()=>{});var gr=Ke(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,br=_t(()=>{en=void 0});var Or=Ke((wr,Dt)=>{"use strict";var yr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){function a(){return X.buffer!=ie.buffer&&K(),ie}function h(){return X.buffer!=ie.buffer&&K(),xe}function f(){return X.buffer!=ie.buffer&&K(),ce}function w(){return X.buffer!=ie.buffer&&K(),be}function g(){return X.buffer!=ie.buffer&&K(),ae}var s=c,S,x,H=new Promise((e,r)=>{S=e,x=r}),A=Object.assign({},s),I="./this.program",V=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var _=(At(),et(St)),J=(Mt(),et(Tt));L=B?J.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):J.normalize(e),_.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):J.normalize(e),_.readFile(e,l?void 0:"utf8",(y,b)=>{y?n(y):r(l?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),V=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof i<"u"&&i&&(L=i),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>_.writeSync(1,e.join(" ")+`\n`),le=(...e)=>_.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var X,we,me=!1,F,ie,xe,ce,be,ae;function K(){var e=X.buffer;s.HEAP8=ie=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=be=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var je=16777216;if(T)X=s.wasmMemory;else if(s.wasmMemory)X=s.wasmMemory;else if(X=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(X.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),je=X.buffer.byteLength;var Oe=[],Ue=[],ve=[],Ae=0,_e=null,ge=null;function Be(){if(Ae--,Ae==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),x(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function ze(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?ze(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),ze(n,e,r)}))}var Te,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=ee(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{M.Oa.length==0&&(Je(),M.Xa(M.Oa[0]));var r=M.Oa.pop();if(!r)return 6;M.Pa.push(r),M.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},De=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,y=wt(8*l),b=y>>>3,v=0;v<n.length;v++){var z=n[v];g()[b+v>>>0]=z}return rr(e,0,l,y,r)});function qe(e){if(T)return G(0,1,e);F=e,0<De||(M.hb(),s.onExit?.(e),me=!0),V(e,new ke(e))}var Ve=e=>{if(F=e,T)throw st(e),"unwind";qe(e)};function P(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Ae++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Oa.push(e)}function ot(e){T?e():Promise.all(M.Oa.map(M.Xa)).then(e)}var M={Oa:[],Pa:[],ab:[],La:{},Va(){T?(M.receiveObjectTransfer=M.fb,M.threadInitTLS=M.$a,M.setExitStatus=M.Za):P()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of M.Pa)We(e);for(e of M.Oa)We(e);M.Oa=[],M.Pa=[],M.La=[]},Ya:e=>{var r=e.Na;delete M.La[r],M.Oa.push(e),M.Pa.splice(M.Pa.indexOf(e),1),e.Na=0,bt(r)},fb(){},$a(){M.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=ut()){var z=M.La[b.targetThread];z?z.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?it():v==="spawnThread"?nt(b):v==="cleanupThread"?M.Ya(M.La[b.thread]):v==="killThread"?(b=b.thread,v=M.La[b],delete M.La[b],We(v),bt(b),M.Pa.splice(M.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?M.La[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?s[b.handler](...b.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},D&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:X,wasmModule:we})})};s.PThread=M;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],or(r,r-e),ft(r)};function st(e){if(T)return G(1,0,e);Ve(e)}var Fe=[],Xe;s.invokeEntryPoint=(e,r)=>{De=0;var n=Fe[e];n||(e>=Fe.length&&(Fe.length=e+1),Fe[e]=n=Xe.get(e)),e=n(r),0<De?M.Za(e):yt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){w()[this.Ua+16>>>2>>>0]=0,w()[this.Ua+4>>>2>>>0]=r,w()[this.Ua+8>>>2>>>0]=n}}var o=0,u=0;function m(e,r,n,l){return T?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return T&&y.length===0?m(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:y},T?(e.ob="spawnThread",postMessage(e,y),0):nt(e))}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&E)return E.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var v=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},ee=(e,r)=>(e>>>=0)?U(h(),e,r):"";function ye(e,r,n){return T?G(3,1,e,r,n):0}function oe(e,r){if(T)return G(4,1,e,r)}var se=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-y},Re=(e,r,n)=>Qe(e,h(),r,n);function d(e,r){if(T)return G(5,1,e,r)}function k(e,r,n){if(T)return G(6,1,e,r,n)}function $(e,r,n){return T?G(7,1,e,r,n):0}function Me(e,r){if(T)return G(8,1,e,r)}function Ze(e,r,n){if(T)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(T)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(T)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(T)return G(12,1,e,r,n,l)}function kt(e){if(T)return G(13,1,e)}function Wt(e,r){if(T)return G(14,1,e,r)}function Nt(e,r,n){if(T)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(it),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var it=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<De))try{T?yt(F):Ve(F)}catch(r){r instanceof ke||r=="unwind"||V(1,r)}}catch(r){r instanceof ke||r=="unwind"||V(1,r)}};s.checkMailbox=it;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,y,b,v,z){return T?G(16,1,e,r,n,l,y,b,v,z):-52}function Yt(e,r,n,l,y,b,v){if(T)return G(17,1,e,r,n,l,y,b,v)}var mt=[],gt={},jt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function zt(e,r){if(T)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0]=l.charCodeAt(b);a()[y>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(T)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return T?G(20,1,e):52}function Jt(e,r,n,l){return T?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return T?G(22,1,e,r,n,l,y):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(T)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[r>>>2>>>0],z=w()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<z;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(U(he,0)),he.length=0):he.push(fe)}y+=z}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(se(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function b(p,N){return y(p,N,"0")}function v(p,N){function q(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=q(p.getFullYear()-N.getFullYear()))===0&&(He=q(p.getMonth()-N.getMonth()))===0&&(He=q(p.getDate()-N.getDate())),He}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Ce(p){var N=p.Qa;for(p=new Date(new Date(p.Ra+1900,0,1).getTime());0<N;){var q=p.getMonth(),He=($e(p.getFullYear())?Zt:Kt)[q];if(N>He-p.getDate())N-=He-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(N,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=w()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?ee(fe):""},n=ee(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":p=>ir[p.Ma].substring(0,3),"%A":p=>ir[p.Ma],"%b":p=>ur[p.Ta].substring(0,3),"%B":p=>ur[p.Ta],"%C":p=>b((p.Ra+1900)/100|0,2),"%d":p=>b(p.Wa,2),"%e":p=>y(p.Wa,2," "),"%g":p=>Ce(p).toString().substring(2),"%G":Ce,"%H":p=>b(p.Sa,2),"%I":p=>(p=p.Sa,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Ta-1;N+=($e(p.Ra+1900)?Zt:Kt)[q++]);return b(p.Wa+N,3)},"%m":p=>b(p.Ta+1,2),"%M":p=>b(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Sa&&12>p.Sa?"AM":"PM","%S":p=>b(p.kb,2),"%t":()=>"\t","%u":p=>p.Ma||7,"%U":p=>b(Math.floor((p.Qa+7-p.Ma)/7),2),"%V":p=>{var N=Math.floor((p.Qa+7-(p.Ma+6)%7)/7);if(2>=(p.Ma+371-p.Qa-2)%7&&N++,N)N==53&&(q=(p.Ma+371-p.Qa)%7,q==4||q==3&&$e(p.Ra)||(N=1));else{N=52;var q=(p.Ma+7-p.Qa-1)%7;(q==4||q==5&&$e(p.Ra%400-1))&&N++}return b(N,2)},"%w":p=>p.Ma,"%W":p=>b(Math.floor((p.Qa+7-(p.Ma+6)%7)/7),2),"%y":p=>(p.Ra+1900).toString().substring(2),"%Y":p=>p.Ra+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}M.Va();var Yr=[qe,st,m,ye,oe,d,k,$,Me,Ze,Rt,It,Bt,kt,Wt,Nt,$t,Yt,zt,qt,Vt,Jt,Xt,Qt],jr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,u++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),M.$a()},j:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):M.Ya(M.La[e])},H:O,h:ye,S:oe,D:d,F:k,T:$,Q:Me,J:Ze,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(it):T?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,y){r>>>=0,n>>>=0,pt.length=l,y=y>>>0>>>3;for(var b=0;b<l;b++)pt[b]=g()[y+b>>>0];return e=r?Ge[r]:Yr[e],M.eb=n,n=e(...pt),M.eb=0,n},K:dt,o:function(e){D&&M.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&v==l):0<n!=(v==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?v:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Te=e,1<=+Math.abs(Te)?0<Te?+Math.floor(Te/4294967296)>>>0:~~+Math.ceil((Te-+(~~Te>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Yt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Ce=Math.max(y,z);w()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(y!=z),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b=e(b),v=e(v),z<y?(Re(b,n,17),Re(v,l,17)):(Re(b,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,mt.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw De+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(br(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-X.buffer.byteLength+65535)/65536;try{X.grow(y),K();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:X||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},C=function(){function e(n,l){return C=n.exports,C=zr(),M.ab.push(C.ya),Xe=C.za,Ue.unshift(C.V),we=l,Be(),C}var r={a:jr};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),x(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(x),{}}();s._OrtInit=(e,r)=>(s._OrtInit=C.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=C.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,v,z,Ce,fe)=>(s._OrtCreateSessionOptions=C.Y)(e,r,n,l,y,b,v,z,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=C.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=C._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=C.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=C.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=C.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=C.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=C.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=C.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=C.fa)(e,r),s._OrtFree=e=>(s._OrtFree=C.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=C.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=C.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=C.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=C.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=C.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=C.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=C.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=C.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=C.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=C.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=C.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=C.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,v,z)=>(s._OrtRun=C.ta)(e,r,n,l,y,b,v,z),s._OrtEndProfiling=e=>(s._OrtEndProfiling=C.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=C.va)();s._malloc=e=>(s._malloc=C.wa)(e),s._free=e=>(s._free=C.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=C.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(tr=s.__emscripten_thread_init=C.Aa)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=C.Ba)();var rr=(e,r,n,l,y)=>(rr=C.Ca)(e,r,n,l,y),bt=e=>(bt=C.Da)(e),yt=s.__emscripten_thread_exit=e=>(yt=s.__emscripten_thread_exit=C.Ea)(e),nr=()=>(nr=C.Fa)(),ar=e=>(ar=C.Ga)(e),or=(e,r)=>(or=C.Ha)(e,r),ft=e=>(ft=C.Ia)(e),wt=e=>(wt=C.Ja)(e),Ot=()=>(Ot=C.Ka)();function zr(){var e=C;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=X,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<De,s.UTF8ToString=ee,s.stringToUTF8=Re,s.lengthBytesUTF8=se,s.ExitStatus=ke,s.PThread=M;var lt;ge=function e(){lt||sr(),lt||(ge=e)};function sr(){if(!(0<Ae))if(T)S(s),T||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Ae||lt||(lt=!0,s.calledRun=!0,me||(T||Ne(Ue),S(s),T||Ne(ve)))}}return sr(),H}})();typeof wr=="object"&&typeof Dt=="object"?Dt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var vr=Ke((yn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Ft,Pt=!1,ct=!1,_r=!1,nn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(i,c)=>i?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async i=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let c=i.initTimeout,a=i.numThreads,h=i.simd,f=nn(a),w=h&&an(),g=i.wasmPaths,s=typeof g=="string"?g:void 0,S=on(w,f),x=typeof g=="object"?g[S]:void 0,H=!1,A=[];if(c>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},c)})),A.push(new Promise((I,V)=>{let R=f?rn:Er,B={locateFile:(D,T)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?x||(s??T)+S:T+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Ft=D,I()},D=>{ct=!1,_r=!0,V(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Q=()=>{if(Pt&&Ft)return Ft;throw new Error("WebAssembly is not initialized yet.")};var Y=(i,c)=>{let a=Q(),h=a.lengthBytesUTF8(i)+1,f=a._malloc(h);return a.stringToUTF8(i,f,h),c.push(f),f},tt=(i,c,a,h)=>{if(typeof i=="object"&&i!==null){if(a.has(i))throw new Error("Circular reference in options");a.add(i)}Object.entries(i).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")tt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},j=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${i} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Ar=i=>{let c=Q(),a=0,h=[],f=i||{};try{if(i?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(f.terminate=!1);let w=0;return i?.tag!==void 0&&(w=Y(i.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&j("Can\'t create run options."),i?.extra!==void 0&&tt(i.extra,"",new WeakSet,(g,s)=>{let S=Y(g,h),x=Y(s,h);c._OrtAddRunConfigEntry(a,S,x)!==0&&j(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var sn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},un=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},fn=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let c=i.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(i.enableMemPattern=!1)},ln=(i,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=Y("deviceType",a),S=Y(g.deviceType,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=Y("numThreads",a),x=Y(s.toString(),a);Q()._OrtAddSessionConfigEntry(i,S,x)!==0&&j(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=Y("powerPreference",a),S=Y(g.powerPreference,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=Y("preferredLayout",a),S=Y(g.preferredLayout,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=Y(f,a);Q()._OrtAppendExecutionProvider(i,w)!==0&&j(`Can\'t append execution provider: ${f}.`)}},Tr=i=>{let c=Q(),a=0,h=[],f=i||{};fn(f);try{let w=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?Y(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let x=f.logVerbosityLevel??0;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log verbosity level is not valid: ${x}`);let H=typeof f.optimizedModelFilePath=="string"?Y(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,x,H),a===0&&j("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=Y("enableGraphCapture",h),I=Y(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,A,I)!==0&&j(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let V=Y(A,h);c._OrtAddFreeDimensionOverride(a,V,I)!==0&&j(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let V=Y(A,h),R=Y(I,h);c._OrtAddSessionConfigEntry(a,V,R)!==0&&j(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var xt=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Mr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ut=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Cr=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Dr=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Fr=i=>i==="float32"||i==="float16"||i==="int32"||i==="int64"||i==="uint32"||i==="uint8"||i==="bool",Pr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var xr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(i),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(i);if(!c.ok)throw new Error(`failed to load external data file: ${i}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let x=S.byteLength;new Uint8Array(w,g,x).set(S),g+=x}return new Uint8Array(w,0,h)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var cn=(i,c)=>{Q()._OrtInit(i,c)!==0&&j("Can\'t initialize onnxruntime.")},Lr=async i=>{cn(i.wasm.numThreads,Dr(i.logLevel))},Rr=async(i,c)=>{},Ye=new Map,dn=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(i,h,h+4)!==0&&j("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=i=>{let c=Q(),a=c._malloc(i.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return c.HEAPU8.set(i,a),[a,i.byteLength]},Ir=async(i,c)=>{let a,h,f=Q();Array.isArray(i)?[a,h]=i:i.buffer===f.HEAPU8.buffer?[a,h]=[i.byteOffset,i.byteLength]:[a,h]=Lt(i);let w=0,g=0,s=0,S=[],x=[],H=[];try{if([g,S]=Tr(c),c?.externalData&&f.mountExternalData){let L=[];for(let W of c.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}w=await f._OrtCreateSession(a,h,g),w===0&&j("Can\'t create a session.");let[A,I]=dn(w),V=!!c?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(w,L);W===0&&j("Can\'t get an input name."),x.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(w,L);W===0&&j("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let T=null;return Ye.set(w,[w,x,H,T,V,!1]),[w,R,B]}catch(A){throw x.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error(`cannot release session. invalid session id: ${i}`);let[h,f,w,g,s]=a;g&&(s&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(i),f.forEach(S=>c._OrtFree(S)),w.forEach(S=>c._OrtFree(S)),c._OrtReleaseSession(h),Ye.delete(i)},Ur=(i,c,a,h,f,w=!1)=>{if(!i){c.push(0);return}let g=Q(),s=i[0],S=i[1],x=i[3],H,A;if(s==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&x!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(x==="gpu-buffer"){let R=i[2].gpuBuffer,B=Ut(xt(s));A=S.reduce((T,L)=>T*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=i[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=Y(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),V=g.stackAlloc(4*S.length);try{let R=V/4;S.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,V,S.length,Pr(x));B===0&&j(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(B)}finally{g.stackRestore(I)}},kr=async(i,c,a,h,f,w)=>{let g=Q(),s=Ye.get(i);if(!s)throw new Error(`cannot run inference. invalid session id: ${i}`);let S=s[0],x=s[1],H=s[2],A=s[3],I=s[4],V=s[5],R=c.length,B=h.length,D=0,T=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),_=g.stackAlloc(R*4),J=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,T]=Ar(w);for(let F=0;F<R;F++)Ur(a[F],L,de,i,c[F],I);for(let F=0;F<B;F++)Ur(f[F],W,de,i,R+h[F],I);let le=Z/4,Ie=_/4,ne=J/4,X=Pe/4;for(let F=0;F<R;F++)g.HEAPU32[le++]=L[F],g.HEAPU32[Ie++]=x[c[F]];for(let F=0;F<B;F++)g.HEAPU32[ne++]=W[F],g.HEAPU32[X++]=H[h[F]];g.jsepOnRunStart?.(S);let we;we=await g._OrtRun(S,_,Z,R,Pe,B,J,D),we!==0&&j("failed to call OrtRun().");let me=[];for(let F=0;F<B;F++){let ie=g.HEAPU32[J/4+F];if(ie===W[F]){me.push(f[F]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),be=!1,ae,K=0;try{g._OrtGetTensorData(ie,ce,ce+4,ce+8,ce+12)!==0&&j(`Can\'t access output tensor data on index ${F}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];K=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Ae=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Ae;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[F]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=K/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(K),ue=Ut(Ue);if(ue===void 0||!Fr(ae))throw new Error(`Unsupported data type: ${ae}`);be=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(ie)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(K,K+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&K&&g._free(K),be||g._OrtReleaseTensor(ie)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),Ye.set(i,[S,x,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),T.forEach(le=>g._free(le))}},Wr=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&j("Can\'t get an profile file name."),c._OrtFree(f)},Nr=i=>{let c=[];for(let a of i){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=i=>{let{type:c,in:a}=i.data;try{switch(c){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Br(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;kr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(x=>x[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:S},Nr([...w,...S]))},S=>{postMessage({type:c,err:S})});break}case"end-profiling":Wr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),_r,gt,yn,Do,Lo,ca,pa,Vr,Wr,Tg,Eo,od,id,ad,sd,ud,ld,fd,da=L(()=>{Ot(),rd(),Ur(),_r=()=>!!Z.wasm.proxy&&typeof document<"u",yn=!1,Do=!1,Lo=!1,pa=new Map,Vr=(e,t)=>{let r=pa.get(e);r?r.push(t):pa.set(e,[t])},Wr=()=>{if(yn||!Do||Lo||!gt)throw new Error("worker not ready")},Tg=e=>{switch(e.data.type){case"init-wasm":yn=!1,e.data.err?(Lo=!0,ca[1](e.data.err)):(Do=!0,ca[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=pa.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break}}},Eo=typeof document<"u"?document?.currentScript?.src:void 0,od=async()=>{if(!Do){if(yn)throw new Error("multiple calls to 'initWasm()' detected.");if(Lo)throw new Error("previous call to 'initWasm()' failed.");if(yn=!0,_r())return void 0===Z.wasm.wasmPaths&&Eo&&0!==Eo.indexOf("blob:")&&(Z.wasm.wasmPaths=Eo.substr(0,+Eo.lastIndexOf("/")+1)),new Promise((e,t)=>{gt?.terminate();let r=URL.createObjectURL(new Blob([nd()],{type:"text/javascript"}));(gt=new Worker(r,{name:"ort-wasm-proxy-worker"})).onerror=e=>t(e),gt.onmessage=Tg,URL.revokeObjectURL(r),ca=[e,t];let o={type:"init-wasm",in:Z};gt.postMessage(o)});try{await Mp(Z.wasm),await Xp(Z),Do=!0}catch(e){throw Lo=!0,e}finally{yn=!1}}},id=async e=>{if(_r())return Wr(),new Promise((t,r)=>{Vr("init-ep",[t,r]);let o={type:"init-ep",in:{epName:e,env:Z}};gt.postMessage(o)});await Kp(Z,e)},ad=async e=>_r()?(Wr(),new Promise((t,r)=>{Vr("copy-from",[t,r]);let o={type:"copy-from",in:{buffer:e}};gt.postMessage(o,[e.buffer])})):fa(e),sd=async(e,t)=>{if(_r()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wr(),new Promise((r,o)=>{Vr("create",[r,o]);let n={type:"create",in:{model:e,options:{...t}}},s=[];e instanceof Uint8Array&&s.push(e.buffer),gt.postMessage(n,s)})}return Jp(e,t)},ud=async e=>{if(_r())return Wr(),new Promise((t,r)=>{Vr("release",[t,r]);let o={type:"release",in:e};gt.postMessage(o)});Zp(e)},ld=async(e,t,r,o,n,s)=>{if(_r()){if(r.some(e=>"cpu"!==e[3]))throw new Error("input tensor on GPU is not supported for proxy.");if(n.some(e=>e))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wr(),new Promise((n,a)=>{Vr("run",[n,a]);let i=r,l={type:"run",in:{sessionId:e,inputIndices:t,inputs:i,outputIndices:o,options:s}};gt.postMessage(l,td(i))})}return Qp(e,t,r,o,n,s)},fd=async e=>{if(_r())return Wr(),new Promise((t,r)=>{Vr("end-profiling",[t,r]);let o={type:"end-profiling",in:e};gt.postMessage(o)});ed(e)}}),cd,xg,Co,pd=L(()=>{Ot(),da(),ua(),la(),cd=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},xg=e=>{switch(e[3]){case"cpu":return new Me(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!Po(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:r,download:o,dispose:n}=e[2];return Me.fromGpuBuffer(r,{dataType:t,dims:e[1],download:o,dispose:n})}default:throw new Error(`invalid data location: ${e[3]}`)}},Co=class{async fetchModelAndCopyToWasmMemory(e){return ad(await gn(e))}async loadModel(e,t){let r;lr(),r="string"==typeof e?typeof process<"u"&&process.versions&&process.versions.node?await gn(e):await this.fetchModelAndCopyToWasmMemory(e):e,[this.sessionId,this.inputNames,this.outputNames]=await sd(r,t),fr()}async dispose(){return ud(this.sessionId)}async run(e,t,r){lr();let o=[],n=[];Object.entries(e).forEach(e=>{let t=e[0],r=e[1],s=this.inputNames.indexOf(t);if(-1===s)throw new Error(`invalid input '${t}'`);o.push(r),n.push(s)});let s=[],a=[];Object.entries(t).forEach(e=>{let t=e[0],r=e[1],o=this.outputNames.indexOf(t);if(-1===o)throw new Error(`invalid output '${t}'`);s.push(r),a.push(o)});let i=o.map((e,t)=>cd(e,()=>`input "${this.inputNames[n[t]]}"`)),l=s.map((e,t)=>e?cd(e,()=>`output "${this.outputNames[a[t]]}"`):null),c=await ld(this.sessionId,n,i,a,l,r),_={};for(let e=0;e<c.length;e++)_[this.outputNames[a[e]]]=s[e]??xg(c[e]);return fr(),_}startProfiling(){}endProfiling(){fd(this.sessionId)}}}),wg,Fo,dd=L(()=>{Ot(),da(),pd(),wg=()=>{if(("number"!=typeof Z.wasm.initTimeout||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),"boolean"!=typeof Z.wasm.simd&&(Z.wasm.simd=!0),"boolean"!=typeof Z.wasm.proxy&&(Z.wasm.proxy=!1),"boolean"!=typeof Z.wasm.trace&&(Z.wasm.trace=!1),"number"!=typeof Z.wasm.numThreads||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let e=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},Fo=class{async init(e){wg(),await od(),await id(e)}async createInferenceSessionHandler(e,t){let r=new Co;return await r.loadModel(e,t),Promise.resolve(r)}}}),hd={};Sr(hd,{wasmBackend:()=>vg});var vg,md=L(()=>{dd(),vg=new Fo});Ot(),Ot(),Ot();var Ts="1.18.0",jO=qo;{let e=(Op(),ar(_p)).onnxjsBackend;Pr("webgl",e,-10)}{let e=(md(),ar(hd)).wasmBackend;Pr("cpu",e,10),Pr("wasm",e,10)}Object.defineProperty(Z.versions,"web",{value:Ts,enumerable:!0})},"./src/backends/onnx.js":(e,t,r)=>{var o;r.r(t),r.d(t,{Tensor:()=>i.Tensor,createInferenceSession:()=>m,deviceToExecutionProviders:()=>h,isONNXProxy:()=>M,isONNXTensor:()=>x,runInferenceSession:()=>w});var n=r("./src/env.js"),s=r("?2ce3"),a=r("./node_modules/onnxruntime-web/dist/esm/ort.min.js"),i=r("./node_modules/onnxruntime-common/dist/esm/index.js");const l=Object.freeze({auto:null,gpu:null,cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:{name:"webnn",deviceType:"cpu"},"webnn-npu":{name:"webnn",deviceType:"npu"},"webnn-gpu":{name:"webnn",deviceType:"gpu"},"webnn-cpu":{name:"webnn",deviceType:"cpu"}}),c=[];let _,p;const u=Symbol.for("onnxruntime");if(u in globalThis)p=globalThis[u];else if(n.apis.IS_NODE_ENV){switch(p=s??(o||(o=r.t(s,2))),process.platform){case"win32":c.push("dml");break;case"linux":"x64"===process.arch&&c.push("cuda")}c.push("cpu"),_=["cpu"]}else p=a,n.apis.IS_WEBNN_AVAILABLE&&c.push("webnn-npu","webnn-gpu","webnn-cpu","webnn"),n.apis.IS_WEBGPU_AVAILABLE&&c.push("webgpu"),c.push("wasm"),_=["wasm"];const d=p.InferenceSession;function h(e=null){if(!e)return _;switch(e){case"auto":return c;case"gpu":return c.filter(e=>["webgpu","cuda","dml","webnn-gpu"].includes(e))}if(c.includes(e))return[l[e]??e];throw new Error(`Unsupported device: "${e}". Should be one of: ${c.join(", ")}.`)}let f=null;async function m(e,t,r){f&&await f;const o=d.create(e,t);f??=o;const n=await o;return n.config=r,n}let g=Promise.resolve();const b=n.apis.IS_BROWSER_ENV||n.apis.IS_WEBWORKER_ENV;async function w(e,t){const r=()=>e.run(t);return await(b?g=g.then(r):r())}function x(e){return e instanceof p.Tensor}const y=p?.env;function M(){return y?.wasm?.proxy}y?.wasm&&("undefined"!=typeof ServiceWorkerGlobalScope&&self instanceof ServiceWorkerGlobalScope||y.wasm.wasmPaths||(y.wasm.wasmPaths=`https://cdn.jsdelivr.net/npm/@huggingface/transformers@${n.env.version}/dist/`),y.wasm.proxy=!1),y?.webgpu&&(y.webgpu.powerPreference="high-performance"),n.env.backends.onnx=y},"./src/base/feature_extraction_utils.js":(e,t,r)=>{r.r(t),r.d(t,{FeatureExtractor:()=>a,validate_audio_inputs:()=>i});var o=r("./src/utils/constants.js"),n=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class a extends n.Callable{constructor(e){super(),this.config=e}static async from_pretrained(e,t={}){return new this(await(0,s.getModelJSON)(e,o.FEATURE_EXTRACTOR_NAME,!0,t))}}function i(e,t){if(!(e instanceof Float32Array||e instanceof Float64Array))throw new Error(`${t} expects input to be a Float32Array or a Float64Array, but got ${e?.constructor?.name??typeof e} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}},"./src/base/image_processors_utils.js":(e,t,r)=>{r.r(t),r.d(t,{ImageProcessor:()=>w,center_to_corners_format:()=>p,post_process_instance_segmentation:()=>b,post_process_object_detection:()=>u,post_process_panoptic_segmentation:()=>g,post_process_semantic_segmentation:()=>d});var o=r("./src/utils/generic.js"),n=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js"),a=(r("./src/utils/image.js"),r("./src/utils/core.js")),i=r("./src/utils/hub.js"),l=r("./src/utils/constants.js");function c(e,t,r=0,o=null){const n=e/t;let a=(0,s.bankers_round)(n)*t;return null!==o&&a>o&&(a=Math.floor(n)*t),a<r&&(a=Math.ceil(n)*t),a}function _([e,t],r){return[Math.max(Math.floor(e/r),1)*r,Math.max(Math.floor(t/r),1)*r]}function p([e,t,r,o]){return[e-r/2,t-o/2,e+r/2,t+o/2]}function u(e,t=.5,r=null,o=!1){const n=e.logits,a=e.pred_boxes,[i,l,c]=n.dims;if(null!==r&&r.length!==i)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let _=[];for(let e=0;e<i;++e){let i=null!==r?r[e]:null,u={boxes:[],classes:[],scores:[]},d=n[e],h=a[e];for(let e=0;e<l;++e){let r,n=d[e],a=[];if(o){r=n.sigmoid().data;for(let e=0;e<r.length;++e)r[e]>t&&a.push(e)}else{let e=(0,s.max)(n.data)[1];if(e===c-1)continue;if(r=(0,s.softmax)(n.data),r[e]<t)continue;a.push(e)}for(const t of a){let o=h[e].data;o=p(o),null!==i&&(o=o.map((e,t)=>e*i[(t+1)%2])),u.boxes.push(o),u.classes.push(t),u.scores.push(r[t])}}_.push(u)}return _}function d(e,t=null){const r=e.logits,o=r.dims[0];if(null!==t&&t.length!==o)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const s=[];for(let e=0;e<o;++e){const o=null!==t?t[e]:null;let a=r[e];null!==o&&(a=(0,n.interpolate)(a,o,"bilinear",!1));const[i,l]=o??a.dims.slice(-2),c=new n.Tensor("int32",new Int32Array(i*l),[i,l]),_=a[0].data,p=c.data;for(let e=1;e<a.dims[0];++e){const t=a[e].data;for(let r=0;r<t.length;++r)t[r]>_[r]&&(_[r]=t[r],p[r]=e)}const u=new Array(a.dims[0]);for(let e=0;e<p.length;++e){const t=p[e];u[t]=t}const d=u.filter(e=>void 0!==e);s.push({segmentation:c,labels:d})}return s}function h(e,t,r,o){const n=[],a=[],i=[];for(let l=0;l<e.dims[0];++l){const c=e[l],_=t[l],p=(0,s.max)(c.data)[1];if(p===o)continue;const u=(0,s.softmax)(c.data)[p];u>r&&(n.push(_),a.push(u),i.push(p))}return[n,a,i]}function f(e,t,r,o=.5,n=.8){const s=[];let a=0,i=0;const l=t[r].data;for(let t=0;t<e.length;++t)e[t]===r&&(s.push(t),++a),l[t]>=o&&++i;let c=a>0&&i>0;if(c){c=a/i>n}return[c,s]}function m(e,t,r,o,s,a=null,i=null){const[l,c]=i??e[0].dims,_=new n.Tensor("int32",new Int32Array(l*c),[l,c]),p=[];if(null!==i)for(let t=0;t<e.length;++t)e[t]=(0,n.interpolate)(e[t],i,"bilinear",!1);const u=new Int32Array(e[0].data.length),d=new Float32Array(e[0].data.length);for(let r=0;r<e.length;++r){let o=t[r];const n=e[r].data;for(let e=0;e<n.length;++e)n[e]*=o,n[e]>d[e]&&(u[e]=r,d[e]=n[e])}let h=0;const m=_.data;for(let n=0;n<r.length;++n){const a=r[n],[i,l]=f(u,e,n,o,s);if(i){++h;for(const e of l)m[e]=h;p.push({id:h,label_id:a,score:t[n]})}}return[_,p]}function g(e,t=.5,r=.5,o=.8,s=null,a=null){null===s&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),s=new Set);const i=e.class_queries_logits??e.logits,l=(e.masks_queries_logits??e.pred_masks).sigmoid();let[c,_,p]=i.dims;if(p-=1,null!==a&&a.length!==c)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let u=[];for(let e=0;e<c;++e){let c=null!==a?a[e]:null,_=i[e],d=l[e],[f,g,b]=h(_,d,t,p);if(0===b.length){let[e,t]=c??d.dims.slice(-2),r=new n.Tensor("int32",new Int32Array(e*t).fill(-1),[e,t]);u.push({segmentation:r,segments_info:[]});continue}let[w,x]=m(f,g,b,r,o,s,c);u.push({segmentation:w,segments_info:x})}return u}function b(e,t=.5,r=null){throw new Error("`post_process_instance_segmentation` is not yet implemented.")}class w extends o.Callable{constructor(e){super(),this.image_mean=e.image_mean??e.mean,this.image_std=e.image_std??e.std,this.resample=e.resample??2,this.do_rescale=e.do_rescale??!0,this.rescale_factor=e.rescale_factor??1/255,this.do_normalize=e.do_normalize,this.do_thumbnail=e.do_thumbnail,this.size=e.size??e.image_size,this.do_resize=e.do_resize??void 0!==this.size,this.size_divisibility=e.size_divisibility??e.size_divisor,this.do_center_crop=e.do_center_crop,this.crop_size=e.crop_size,this.do_convert_rgb=e.do_convert_rgb??!0,this.do_crop_margin=e.do_crop_margin,this.pad_size=e.pad_size,this.do_pad=e.do_pad,this.min_pixels=e.min_pixels,this.max_pixels=e.max_pixels,this.do_pad&&!this.pad_size&&this.size&&void 0!==this.size.width&&void 0!==this.size.height&&(this.pad_size=this.size),this.do_flip_channel_order=e.do_flip_channel_order??!1,this.config=e}async thumbnail(e,t,r=2){const o=e.height,n=e.width,s=t.height,a=t.width;let i=Math.min(o,s),l=Math.min(n,a);return i===o&&l===n?e:(o>n?l=Math.floor(n*i/o):n>o&&(i=Math.floor(o*l/n)),await e.resize(l,i,{resample:r}))}async crop_margin(e,t=200){const r=e.clone().grayscale(),o=(0,s.min)(r.data)[0],n=(0,s.max)(r.data)[0]-o;if(0===n)return e;const a=t/255;let i=r.width,l=r.height,c=0,_=0;const p=r.data;for(let e=0;e<r.height;++e){const t=e*r.width;for(let s=0;s<r.width;++s)(p[t+s]-o)/n<a&&(i=Math.min(i,s),l=Math.min(l,e),c=Math.max(c,s),_=Math.max(_,e))}return e=await e.crop([i,l,c,_])}pad_image(e,t,r,{mode:o="constant",center:n=!1,constant_values:s=0}={}){const[i,l,c]=t;let _,p;if("number"==typeof r?(_=r,p=r):"square"===r?_=p=Math.max(i,l):(_=r.width,p=r.height),_!==l||p!==i){const r=new Float32Array(_*p*c);if(Array.isArray(s))for(let e=0;e<r.length;++e)r[e]=s[e%c];else 0!==s&&r.fill(s);const[u,d]=n?[Math.floor((_-l)/2),Math.floor((p-i)/2)]:[0,0];for(let t=0;t<i;++t){const o=(t+d)*_,n=t*l;for(let t=0;t<l;++t){const s=(o+t+u)*c,a=(n+t)*c;for(let t=0;t<c;++t)r[s+t]=e[a+t]}}if("symmetric"===o){if(n)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const t=i-1,o=l-1;for(let n=0;n<p;++n){const s=n*_,p=(0,a.calculateReflectOffset)(n,t)*l;for(let t=0;t<_;++t){if(n<i&&t<l)continue;const _=(s+t)*c,u=(p+(0,a.calculateReflectOffset)(t,o))*c;for(let t=0;t<c;++t)r[_+t]=e[u+t]}}}e=r,t=[p,_,c]}return[e,t]}rescale(e){for(let t=0;t<e.length;++t)e[t]=this.rescale_factor*e[t]}get_resize_output_image_size(e,t){const[r,o]=e.size;let n,s;if(this.do_thumbnail){const{height:e,width:r}=t;n=Math.min(e,r)}else Number.isInteger(t)?(n=t,s=this.config.max_size??n):void 0!==t&&(n=t.shortest_edge,s=t.longest_edge);if(void 0!==n||void 0!==s){const e=void 0===n?1:Math.max(n/r,n/o),t=r*e,a=o*e,i=void 0===s?1:Math.min(s/t,s/a);let l=Math.floor(Number((t*i).toFixed(2))),c=Math.floor(Number((a*i).toFixed(2)));return void 0!==this.size_divisibility&&([l,c]=_([l,c],this.size_divisibility)),[l,c]}if(void 0!==t&&void 0!==t.width&&void 0!==t.height){let e=t.width,n=t.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let t=n/o,s=e/r;Math.abs(1-s)<Math.abs(1-t)?t=s:s=t,n=c(t*o,this.config.ensure_multiple_of),e=c(s*r,this.config.ensure_multiple_of)}return[e,n]}if(void 0!==this.size_divisibility)return _([r,o],this.size_divisibility);if(void 0!==this.min_pixels&&void 0!==this.max_pixels){return function(e,t,r=28,o=3136,n=1003520){if(e<r||t<r)throw new Error(`height:${e} or width:${t} must be larger than factor:${r}`);if(Math.max(e,t)/Math.min(e,t)>200)throw new Error("absolute aspect ratio must be smaller than 200, got "+Math.max(e,t)/Math.min(e,t));let s=Math.round(e/r)*r,a=Math.round(t/r)*r;if(s*a>n){const o=Math.sqrt(e*t/n);s=Math.floor(e/o/r)*r,a=Math.floor(t/o/r)*r}else if(s*a<o){const n=Math.sqrt(o/(e*t));s=Math.ceil(e*n/r)*r,a=Math.ceil(t*n/r)*r}return[s,a]}(o,r,this.config.patch_size*this.config.merge_size,this.min_pixels,this.max_pixels)}throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(t)}`)}async resize(e){const[t,r]=this.get_resize_output_image_size(e,this.size);return await e.resize(t,r,{resample:this.resample})}async preprocess(e,{do_normalize:t=null,do_pad:r=null,do_convert_rgb:o=null,do_convert_grayscale:s=null,do_flip_channel_order:a=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));const[i,l]=e.size;if(o??this.do_convert_rgb?e=e.rgb():s&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let t,r;Number.isInteger(this.crop_size)?(t=this.crop_size,r=this.crop_size):(t=this.crop_size.width,r=this.crop_size.height),e=await e.center_crop(t,r)}const c=[e.height,e.width];let p=Float32Array.from(e.data),u=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale(p),t??this.do_normalize){let t=this.image_mean;Array.isArray(this.image_mean)||(t=new Array(e.channels).fill(t));let r=this.image_std;if(Array.isArray(this.image_std)||(r=new Array(e.channels).fill(t)),t.length!==e.channels||r.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${t.length}) and \`image_std\` (${r.length}) must match the number of channels in the image (${e.channels}).`);for(let o=0;o<p.length;o+=e.channels)for(let n=0;n<e.channels;++n)p[o+n]=(p[o+n]-t[n])/r[n]}if(r??this.do_pad)if(this.pad_size){const t=this.pad_image(p,[e.height,e.width,e.channels],this.pad_size);[p,u]=t}else if(this.size_divisibility){const[e,t]=_([u[1],u[0]],this.size_divisibility);[p,u]=this.pad_image(p,u,{width:e,height:t})}if(a??this.do_flip_channel_order){if(3!==u[2])throw new Error("Flipping channel order is only supported for RGB images.");for(let e=0;e<p.length;e+=3){const t=p[e];p[e]=p[e+2],p[e+2]=t}}return{original_size:[l,i],reshaped_input_size:c,pixel_values:new n.Tensor("float32",p,u).permute(2,0,1)}}async _call(e,...t){Array.isArray(e)||(e=[e]);const r=await Promise.all(e.map(e=>this.preprocess(e)));return{pixel_values:(0,n.stack)(r.map(e=>e.pixel_values),0),original_sizes:r.map(e=>e.original_size),reshaped_input_sizes:r.map(e=>e.reshaped_input_size)}}static async from_pretrained(e,t={}){return new this(await(0,i.getModelJSON)(e,l.IMAGE_PROCESSOR_NAME,!0,t))}}},"./src/base/processing_utils.js":(e,t,r)=>{r.r(t),r.d(t,{Processor:()=>a});var o=r("./src/utils/constants.js"),n=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class a extends n.Callable{static classes=["image_processor_class","tokenizer_class","feature_extractor_class"];static uses_processor_config=!1;static uses_chat_template_file=!1;constructor(e,t,r){super(),this.config=e,this.components=t,this.chat_template=r}get image_processor(){return this.components.image_processor}get tokenizer(){return this.components.tokenizer}get feature_extractor(){return this.components.feature_extractor}apply_chat_template(e,t={}){if(!this.tokenizer)throw new Error("Unable to apply chat template without a tokenizer.");return this.tokenizer.apply_chat_template(e,{tokenize:!1,chat_template:this.chat_template??void 0,...t})}batch_decode(...e){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.batch_decode(...e)}decode(...e){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.decode(...e)}async _call(e,...t){for(const r of[this.image_processor,this.feature_extractor,this.tokenizer])if(r)return r(e,...t);throw new Error("No image processor, feature extractor, or tokenizer found.")}static async from_pretrained(e,t={}){const[r,n,a]=await Promise.all([this.uses_processor_config?(0,s.getModelJSON)(e,o.PROCESSOR_NAME,!0,t):{},Promise.all(this.classes.filter(e=>e in this).map(async r=>{const o=await this[r].from_pretrained(e,t);return[r.replace(/_class$/,""),o]})).then(Object.fromEntries),this.uses_chat_template_file?(0,s.getModelText)(e,o.CHAT_TEMPLATE_NAME,!0,t):null]);return new this(r,n,a)}}},"./src/configs.js":(e,t,r)=>{r.r(t),r.d(t,{AutoConfig:()=>l,PretrainedConfig:()=>i,getCacheShapes:()=>a});var o=r("./src/utils/core.js"),n=r("./src/utils/hub.js");function s(e){const t={};let r={};switch(e.model_type){case"llava":case"paligemma":case"gemma3":case"florence2":case"llava_onevision":case"idefics3":case"ultravox":case"voxtral":case"smolvlm":case"gemma3n":r=s(e.text_config);break;case"moondream1":r=s(e.phi_config);break;case"musicgen":r=s(e.decoder);break;case"multi_modality":r=s(e.language_config);break;case"gpt2":case"gptj":case"jais":case"codegen":case"gpt_bigcode":t.num_heads="n_head",t.num_layers="n_layer",t.hidden_size="n_embd";break;case"gpt_neox":case"stablelm":case"opt":case"falcon":case"modernbert-decoder":t.num_heads="num_attention_heads",t.num_layers="num_hidden_layers",t.hidden_size="hidden_size";break;case"llama":case"llama4_text":case"arcee":case"lfm2":case"smollm3":case"olmo":case"olmo2":case"mobilellm":case"granite":case"granitemoehybrid":case"cohere":case"mistral":case"starcoder2":case"qwen2":case"qwen2_vl":case"phi":case"phi3":case"phi3_v":case"llava_qwen2":t.num_heads="num_key_value_heads",t.num_layers="num_hidden_layers",t.hidden_size="hidden_size",t.num_attention_heads="num_attention_heads",t.dim_kv="head_dim";break;case"qwen3":case"gemma":case"gemma2":case"vaultgemma":case"gemma3_text":case"gemma3n_text":case"glm":case"helium":case"ernie4_5":t.num_heads="num_key_value_heads",t.num_layers="num_hidden_layers",t.dim_kv="head_dim";break;case"openelm":t.num_heads="num_kv_heads",t.num_layers="num_transformer_layers",t.dim_kv="head_dim";break;case"gpt_neo":case"donut-swin":t.num_heads="num_heads",t.num_layers="num_layers",t.hidden_size="hidden_size";break;case"bloom":t.num_heads="n_head",t.num_layers="n_layer",t.hidden_size="hidden_size";break;case"mpt":t.num_heads="n_heads",t.num_layers="n_layers",t.hidden_size="d_model";break;case"exaone":t.num_heads="num_key_value_heads",t.num_layers="num_layers",t.dim_kv="head_dim",t.num_attention_heads="num_attention_heads";break;case"t5":case"mt5":case"longt5":t.num_decoder_layers="num_decoder_layers",t.num_decoder_heads="num_heads",t.decoder_dim_kv="d_kv",t.num_encoder_layers="num_layers",t.num_encoder_heads="num_heads",t.encoder_dim_kv="d_kv";break;case"bart":case"mbart":case"marian":case"whisper":case"lite-whisper":case"m2m_100":case"blenderbot":case"blenderbot-small":case"florence2_language":t.num_decoder_layers="decoder_layers",t.num_decoder_heads="decoder_attention_heads",t.decoder_hidden_size="d_model",t.num_encoder_layers="encoder_layers",t.num_encoder_heads="encoder_attention_heads",t.encoder_hidden_size="d_model";break;case"speecht5":t.num_decoder_layers="decoder_layers",t.num_decoder_heads="decoder_attention_heads",t.decoder_hidden_size="hidden_size",t.num_encoder_layers="encoder_layers",t.num_encoder_heads="encoder_attention_heads",t.encoder_hidden_size="hidden_size";break;case"trocr":t.num_encoder_layers=t.num_decoder_layers="decoder_layers",t.num_encoder_heads=t.num_decoder_heads="decoder_attention_heads",t.encoder_hidden_size=t.decoder_hidden_size="d_model";break;case"musicgen_decoder":t.num_encoder_layers=t.num_decoder_layers="num_hidden_layers",t.num_encoder_heads=t.num_decoder_heads="num_attention_heads",t.encoder_hidden_size=t.decoder_hidden_size="hidden_size";break;case"moonshine":t.num_decoder_layers="decoder_num_hidden_layers",t.num_decoder_heads="decoder_num_key_value_heads",t.num_encoder_layers="encoder_num_hidden_layers",t.num_encoder_heads="encoder_num_key_value_heads",t.encoder_hidden_size=t.decoder_hidden_size="hidden_size";break;case"vision-encoder-decoder":const n=s(e.decoder),a="num_decoder_layers"in n,i=(0,o.pick)(e,["model_type","is_encoder_decoder"]);return a?(i.num_decoder_layers=n.num_decoder_layers,i.num_decoder_heads=n.num_decoder_heads,i.decoder_hidden_size=n.decoder_hidden_size,i.num_encoder_layers=n.num_encoder_layers,i.num_encoder_heads=n.num_encoder_heads,i.encoder_hidden_size=n.encoder_hidden_size):(i.num_layers=n.num_layers,i.num_heads=n.num_heads,i.hidden_size=n.hidden_size),i}const n={...r,...(0,o.pick)(e,["model_type","multi_query","is_encoder_decoder"])};for(const r in t)n[r]=e[t[r]];return n}function a(e,t){if("lfm2"===e.model_type){const r=t?.prefix??"past_key_values",o="present"===r?"present":"past",n={},{layer_types:s,num_attention_heads:a,num_key_value_heads:i,hidden_size:l,conv_L_cache:c}=e,_=l/a,p=t?.batch_size??1;for(let e=0;e<s.length;++e)if("full_attention"===s[e])for(const t of["key","value"])n[`${r}.${e}.${t}`]=[p,i,0,_];else{if("conv"!==s[e])throw new Error(`Unsupported layer type: ${s[e]}`);n[`${o}_conv.${e}`]=[p,l,c]}return n}return function(e,{prefix:t="past_key_values",batch_size:r=1}={}){const o={},n=e.normalized_config;if(n.is_encoder_decoder&&"num_encoder_heads"in n&&"num_decoder_heads"in n){const e=n.encoder_dim_kv??n.encoder_hidden_size/n.num_encoder_heads,s=n.decoder_dim_kv??n.decoder_hidden_size/n.num_decoder_heads,a=[r,n.num_encoder_heads,0,e],i=[r,n.num_decoder_heads,0,s];for(let e=0;e<n.num_decoder_layers;++e)o[`${t}.${e}.encoder.key`]=a,o[`${t}.${e}.encoder.value`]=a,o[`${t}.${e}.decoder.key`]=i,o[`${t}.${e}.decoder.value`]=i}else{const e=n.num_heads,s=n.num_layers,a=n.dim_kv??n.hidden_size/(n.num_attention_heads??e);if("falcon"===n.model_type){const n=[r*e,0,a];for(let e=0;e<s;++e)o[`${t}.${e}.key`]=n,o[`${t}.${e}.value`]=n}else if(n.multi_query){const n=[r*e,0,2*a];for(let e=0;e<s;++e)o[`${t}.${e}.key_value`]=n}else if("bloom"===n.model_type){const n=[r*e,a,0],i=[r*e,0,a];for(let e=0;e<s;++e)o[`${t}.${e}.key`]=n,o[`${t}.${e}.value`]=i}else if("openelm"===n.model_type)for(let n=0;n<s;++n){const s=[r,e[n],0,a];o[`${t}.${n}.key`]=s,o[`${t}.${n}.value`]=s}else{const n=[r,e,0,a];for(let e=0;e<s;++e)o[`${t}.${e}.key`]=n,o[`${t}.${e}.value`]=n}}return o}(e,t)}class i{model_type=null;is_encoder_decoder=!1;max_position_embeddings;"transformers.js_config";constructor(e){Object.assign(this,e),this.normalized_config=s(this)}static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:o=null,local_files_only:s=!1,revision:a="main"}={}){!r||r instanceof i||(r=new i(r));const l=r??await async function(e,t){return await(0,n.getModelJSON)(e,"config.json",!0,t)}(e,{progress_callback:t,config:r,cache_dir:o,local_files_only:s,revision:a});return new this(l)}}class l{static async from_pretrained(...e){return i.from_pretrained(...e)}}},"./src/env.js":(e,t,r)=>{r.r(t),r.d(t,{apis:()=>m,env:()=>y});var o=r("?db59"),n=r("?383f"),s=r("?fa4b");const a="undefined"!=typeof window&&void 0!==window.document,i="undefined"!=typeof self&&["DedicatedWorkerGlobalScope","ServiceWorkerGlobalScope","SharedWorkerGlobalScope"].includes(self.constructor?.name),l="undefined"!=typeof self&&"caches"in self,c="undefined"!=typeof navigator&&"gpu"in navigator,_="undefined"!=typeof navigator&&"ml"in navigator,p="undefined"!=typeof process,u=p&&"node"===process?.release?.name,d=!M(o),h=!M(n),f=void 0!==globalThis.Deno,m=(globalThis.Bun,Object.freeze({IS_BROWSER_ENV:a,IS_WEBWORKER_ENV:i,IS_WEB_CACHE_AVAILABLE:l,IS_WEBGPU_AVAILABLE:c,IS_WEBNN_AVAILABLE:_,IS_PROCESS_AVAILABLE:p,IS_NODE_ENV:u,IS_FS_AVAILABLE:d,IS_PATH_AVAILABLE:h})),g=d&&h;let b="./";if(g){const e=Object(import.meta).url;e?b=n.dirname(n.dirname(s.fileURLToPath(e))):"undefined"!=typeof __dirname&&(b=n.dirname(__dirname))}const w=g?n.join(b,"/.cache/"):null,x="/models/",y={version:"3.7.5",backends:{onnx:{}},allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!(a||i),localModelPath:g?n.join(b,x):x,useFS:d,useBrowserCache:l&&!f,useFSCache:d,cacheDir:w,useCustomCache:!1,customCache:null};function M(e){return 0===Object.keys(e).length}},"./src/generation/configuration_utils.js":(e,t,r)=>{r.r(t),r.d(t,{GenerationConfig:()=>n});var o=r("./src/utils/core.js");class n{max_length=20;max_new_tokens=null;min_length=0;min_new_tokens=null;early_stopping=!1;max_time=null;do_sample=!1;num_beams=1;num_beam_groups=1;penalty_alpha=null;use_cache=!0;temperature=1;top_k=50;top_p=1;typical_p=1;epsilon_cutoff=0;eta_cutoff=0;diversity_penalty=0;repetition_penalty=1;encoder_repetition_penalty=1;length_penalty=1;no_repeat_ngram_size=0;bad_words_ids=null;force_words_ids=null;renormalize_logits=!1;constraints=null;forced_bos_token_id=null;forced_eos_token_id=null;remove_invalid_values=!1;exponential_decay_length_penalty=null;suppress_tokens=null;streamer=null;begin_suppress_tokens=null;forced_decoder_ids=null;guidance_scale=null;num_return_sequences=1;output_attentions=!1;output_hidden_states=!1;output_scores=!1;return_dict_in_generate=!1;pad_token_id=null;bos_token_id=null;eos_token_id=null;encoder_no_repeat_ngram_size=0;decoder_start_token_id=null;generation_kwargs={};constructor(e){Object.assign(this,(0,o.pick)(e,Object.getOwnPropertyNames(this)))}}},"./src/generation/logits_process.js":(e,t,r)=>{r.r(t),r.d(t,{ClassifierFreeGuidanceLogitsProcessor:()=>g,ForcedBOSTokenLogitsProcessor:()=>l,ForcedEOSTokenLogitsProcessor:()=>c,LogitsProcessor:()=>s,LogitsProcessorList:()=>i,LogitsWarper:()=>a,MinLengthLogitsProcessor:()=>h,MinNewTokensLengthLogitsProcessor:()=>f,NoBadWordsLogitsProcessor:()=>m,NoRepeatNGramLogitsProcessor:()=>u,RepetitionPenaltyLogitsProcessor:()=>d,SuppressTokensAtBeginLogitsProcessor:()=>_,TemperatureLogitsWarper:()=>b,TopKLogitsWarper:()=>x,TopPLogitsWarper:()=>w,WhisperTimeStampLogitsProcessor:()=>p});var o=r("./src/utils/generic.js"),n=(r("./src/utils/tensor.js"),r("./src/utils/maths.js"));class s extends o.Callable{_call(e,t){throw Error("`_call` should be implemented in a subclass")}}class a extends o.Callable{_call(e,t){throw Error("`_call` should be implemented in a subclass")}}class i extends o.Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,t){let r=t;for(const t of this.processors)r=t(e,r);return r}[Symbol.iterator](){return this.processors.values()}}class l extends s{constructor(e){super(),this.bos_token_id=e}_call(e,t){for(let r=0;r<e.length;++r)if(1===e[r].length){const e=t[r].data;e.fill(-1/0),e[this.bos_token_id]=0}return t}}class c extends s{constructor(e,t){super(),this.max_length=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){for(let r=0;r<e.length;++r)if(e[r].length===this.max_length-1){const e=t[r].data;e.fill(-1/0);for(const t of this.eos_token_id)e[t]=0}return t}}class _ extends s{constructor(e,t){super(),this.begin_suppress_tokens=e,this.begin_index=t}_call(e,t){for(let r=0;r<e.length;++r)if(e[r].length===this.begin_index){const e=t[r].data;for(const t of this.begin_suppress_tokens)e[t]=-1/0}return t}}class p extends s{constructor(e,t){super(),this.eos_token_id=Array.isArray(e.eos_token_id)?e.eos_token_id[0]:e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=t.length,t.at(-1)===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,t){for(let r=0;r<e.length;++r){const o=t[r].data;if(o[this.no_timestamps_token_id]=-1/0,e[r].length===this.begin_index-1){o.fill(-1/0),o[this.timestamp_begin]=0;continue}const s=e[r].slice(this.begin_index),a=s.length>=1&&s[s.length-1]>=this.timestamp_begin,i=s.length<2||s[s.length-2]>=this.timestamp_begin;if(a&&(i?o.subarray(this.timestamp_begin).fill(-1/0):o.subarray(0,this.eos_token_id).fill(-1/0)),e[r].length===this.begin_index&&null!==this.max_initial_timestamp_index){const e=this.timestamp_begin+this.max_initial_timestamp_index;o.subarray(e+1).fill(-1/0)}const l=(0,n.log_softmax)(o);Math.log(l.subarray(this.timestamp_begin).map(Math.exp).reduce((e,t)=>e+t))>(0,n.max)(l.subarray(0,this.timestamp_begin))[0]&&o.subarray(0,this.timestamp_begin).fill(-1/0)}return t}}class u extends s{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const t=e.length,r=[];for(let o=0;o<t+1-this.no_repeat_ngram_size;++o){const t=[];for(let r=0;r<this.no_repeat_ngram_size;++r)t.push(e[o+r]);r.push(t.map(Number))}const o=new Map;for(const e of r){const t=e.slice(0,e.length-1),r=JSON.stringify(t),n=o.get(r)??[];n.push(e[e.length-1]),o.set(r,n)}return o}getGeneratedNgrams(e,t){const r=t.slice(t.length+1-this.no_repeat_ngram_size,t.length);return e.get(JSON.stringify(r.map(Number)))??[]}calcBannedNgramTokens(e){const t=[];if(e.length+1<this.no_repeat_ngram_size)return t;{const t=this.getNgrams(e);return this.getGeneratedNgrams(t,e)}}_call(e,t){for(let r=0;r<e.length;++r){const o=t[r].data,n=this.calcBannedNgramTokens(e[r]);for(const e of n)o[e]=-1/0}return t}}class d extends s{constructor(e){super(),this.penalty=e}_call(e,t){for(let r=0;r<e.length;++r){const o=t[r].data;for(const t of new Set(e[r])){const e=Number(t);o[e]<0?o[e]*=this.penalty:o[e]/=this.penalty}}return t}}class h extends s{constructor(e,t){super(),this.min_length=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){for(let r=0;r<e.length;++r)if(e[r].length<this.min_length){const e=t[r].data;for(const t of this.eos_token_id)e[t]=-1/0}return t}}class f extends s{constructor(e,t,r){super(),this.prompt_length_to_skip=e,this.min_new_tokens=t,this.eos_token_id=Array.isArray(r)?r:[r]}_call(e,t){for(let r=0;r<e.length;++r){if(e[r].length-this.prompt_length_to_skip<this.min_new_tokens){const e=t[r].data;for(const t of this.eos_token_id)e[t]=-1/0}}return t}}class m extends s{constructor(e,t){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){for(let r=0;r<e.length;++r){const o=t[r].data,n=e[r];for(const e of this.bad_words_ids){if(n.length<e.length-1)continue;let t=!0;for(let r=1;r<=e.length-1;++r)if(e.at(-r-1)!=n.at(-r)){t=!1;break}t&&(o[e.at(-1)]=-1/0)}}return t}}class g extends s{constructor(e){if(super(),e<=1)throw new Error(`Require guidance scale >1 to use the classifier free guidance processor, got guidance scale ${e}.`);this.guidance_scale=e}_call(e,t){if(t.dims[0]!==2*e.length)throw new Error(`Logits should have twice the batch size of the input ids, the first half of batches corresponding to the conditional inputs, and the second half of batches corresponding to the unconditional inputs. Got batch size ${t.dims[0]} for the logits and ${e.length} for the input ids.`);const r=e.length,o=t.slice([0,r],null),n=t.slice([r,t.dims[0]],null);for(let e=0;e<n.data.length;++e)n.data[e]+=(o.data[e]-n.data[e])*this.guidance_scale;return n}}class b extends a{constructor(e){if(super(),"number"!=typeof e||e<=0){let t=`\`temperature\` (=${e}) must be a strictly positive float, otherwise your next token scores will be invalid.`;0===e&&(t+=" If you're looking for greedy decoding strategies, set `do_sample=false`.")}this.temperature=e}_call(e,t){const r=t.data;for(let e=0;e<r.length;++e)r[e]/=this.temperature;return t}}class w extends a{constructor(e,{filter_value:t=-1/0,min_tokens_to_keep:r=1}={}){if(super(),e<0||e>1)throw new Error(`\`top_p\` must be a float > 0 and < 1, but is ${e}`);if(!Number.isInteger(r)||r<1)throw new Error(`\`min_tokens_to_keep\` must be a positive integer, but is ${r}`);this.top_p=e,this.filter_value=t,this.min_tokens_to_keep=r}}class x extends a{constructor(e,{filter_value:t=-1/0,min_tokens_to_keep:r=1}={}){if(super(),!Number.isInteger(e)||e<0)throw new Error(`\`top_k\` must be a positive integer, but is ${e}`);this.top_k=Math.max(e,r),this.filter_value=t}}},"./src/generation/logits_sampler.js":(e,t,r)=>{r.r(t),r.d(t,{LogitsSampler:()=>a});var o=r("./src/utils/generic.js"),n=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");r("./src/generation/configuration_utils.js");class a extends o.Callable{constructor(e){super(),this.generation_config=e}async _call(e){return this.sample(e)}async sample(e){throw Error("sample should be implemented in subclasses.")}getLogits(e,t){let r=e.dims.at(-1),o=e.data;if(-1===t)o=o.slice(-r);else{let e=t*r;o=o.slice(e,e+r)}return o}randomSelect(e){let t=0;for(let r=0;r<e.length;++r)t+=e[r];let r=Math.random()*t;for(let t=0;t<e.length;++t)if(r-=e[t],r<=0)return t;return 0}static getSampler(e){if(e.do_sample)return new l(e);if(e.num_beams>1)return new c(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new i(e)}}class i extends a{async sample(e){const t=(0,s.max)(e.data)[1];return[[BigInt(t),0]]}}class l extends a{async sample(e){let t=e.dims.at(-1);this.generation_config.top_k>0&&(t=Math.min(this.generation_config.top_k,t));const[r,o]=await(0,n.topk)(e,t),a=(0,s.softmax)(r.data);return Array.from({length:this.generation_config.num_beams},()=>{const e=this.randomSelect(a);return[o.data[e],Math.log(a[e])]})}}class c extends a{async sample(e){let t=e.dims.at(-1);this.generation_config.top_k>0&&(t=Math.min(this.generation_config.top_k,t));const[r,o]=await(0,n.topk)(e,t),a=(0,s.softmax)(r.data);return Array.from({length:this.generation_config.num_beams},(e,t)=>[o.data[t],Math.log(a[t])])}}},"./src/generation/stopping_criteria.js":(e,t,r)=>{r.r(t),r.d(t,{EosTokenCriteria:()=>i,InterruptableStoppingCriteria:()=>l,MaxLengthCriteria:()=>a,StoppingCriteria:()=>n,StoppingCriteriaList:()=>s});var o=r("./src/utils/generic.js");class n extends o.Callable{_call(e,t){throw Error("StoppingCriteria needs to be subclassed")}}class s extends o.Callable{constructor(){super(),this.criteria=[]}push(e){this.criteria.push(e)}extend(e){e instanceof s?e=e.criteria:e instanceof n&&(e=[e]),this.criteria.push(...e)}_call(e,t){const r=new Array(e.length).fill(!1);for(const o of this.criteria){const n=o(e,t);for(let e=0;e<r.length;++e)r[e]||=n[e]}return r}[Symbol.iterator](){return this.criteria.values()}}class a extends n{constructor(e,t=null){super(),this.max_length=e,this.max_position_embeddings=t}_call(e){return e.map(e=>e.length>=this.max_length)}}class i extends n{constructor(e){super(),Array.isArray(e)||(e=[e]),this.eos_token_id=e}_call(e,t){return e.map(e=>{const t=e.at(-1);return this.eos_token_id.some(e=>t==e)})}}class l extends n{constructor(){super(),this.interrupted=!1}interrupt(){this.interrupted=!0}reset(){this.interrupted=!1}_call(e,t){return new Array(e.length).fill(this.interrupted)}}},"./src/generation/streamers.js":(e,t,r)=>{r.r(t),r.d(t,{BaseStreamer:()=>a,TextStreamer:()=>l,WhisperTextStreamer:()=>c});var o=r("./src/utils/core.js"),n=r("./src/tokenizers.js"),s=r("./src/env.js");class a{put(e){throw Error("Not implemented")}end(){throw Error("Not implemented")}}const i=s.apis.IS_PROCESS_AVAILABLE?e=>process.stdout.write(e):e=>console.log(e);class l extends a{constructor(e,{skip_prompt:t=!1,callback_function:r=null,token_callback_function:o=null,skip_special_tokens:n=!0,decode_kwargs:s={},...a}={}){super(),this.tokenizer=e,this.skip_prompt=t,this.callback_function=r??i,this.token_callback_function=o,this.decode_kwargs={skip_special_tokens:n,...s,...a},this.token_cache=[],this.print_len=0,this.next_tokens_are_prompt=!0}put(e){if(e.length>1)throw Error("TextStreamer only supports batch size of 1");const t=this.next_tokens_are_prompt;if(t&&(this.next_tokens_are_prompt=!1,this.skip_prompt))return;const r=e[0];this.token_callback_function?.(r),this.token_cache=(0,o.mergeArrays)(this.token_cache,r);const s=this.tokenizer.decode(this.token_cache,this.decode_kwargs);let a;t||s.endsWith("\n")?(a=s.slice(this.print_len),this.token_cache=[],this.print_len=0):s.length>0&&(0,n.is_chinese_char)(s.charCodeAt(s.length-1))?(a=s.slice(this.print_len),this.print_len+=a.length):(a=s.slice(this.print_len,s.lastIndexOf(" ")+1),this.print_len+=a.length),this.on_finalized_text(a,!1)}end(){let e;if(this.token_cache.length>0){e=this.tokenizer.decode(this.token_cache,this.decode_kwargs).slice(this.print_len),this.token_cache=[],this.print_len=0}else e="";this.next_tokens_are_prompt=!0,this.on_finalized_text(e,!0)}on_finalized_text(e,t){e.length>0&&this.callback_function?.(e),t&&this.callback_function===i&&s.apis.IS_PROCESS_AVAILABLE&&this.callback_function?.("\n")}}class c extends l{constructor(e,{skip_prompt:t=!1,callback_function:r=null,token_callback_function:o=null,on_chunk_start:n=null,on_chunk_end:s=null,on_finalize:a=null,time_precision:i=.02,skip_special_tokens:l=!0,decode_kwargs:c={}}={}){super(e,{skip_prompt:t,skip_special_tokens:l,callback_function:r,token_callback_function:o,decode_kwargs:c}),this.timestamp_begin=e.timestamp_begin,this.on_chunk_start=n,this.on_chunk_end=s,this.on_finalize=a,this.time_precision=i,this.waiting_for_timestamp=!1}put(e){if(e.length>1)throw Error("WhisperTextStreamer only supports batch size of 1");const t=e[0];if(1===t.length){const e=Number(t[0])-this.timestamp_begin;if(e>=0){const r=e*this.time_precision;return this.waiting_for_timestamp?this.on_chunk_end?.(r):this.on_chunk_start?.(r),this.waiting_for_timestamp=!this.waiting_for_timestamp,void this.token_callback_function?.(t)}}return super.put(e)}end(){super.end(),this.on_finalize?.()}}},"./src/models.js":(e,t,r)=>{r.r(t),r.d(t,{ASTForAudioClassification:()=>Ir,ASTModel:()=>Ar,ASTPreTrainedModel:()=>Er,AlbertForMaskedLM:()=>zt,AlbertForQuestionAnswering:()=>jt,AlbertForSequenceClassification:()=>Vt,AlbertModel:()=>$t,AlbertPreTrainedModel:()=>Bt,ArceeForCausalLM:()=>Jo,ArceeModel:()=>Yo,ArceePreTrainedModel:()=>Qo,AutoModel:()=>z_,AutoModelForAudioClassification:()=>ap,AutoModelForAudioFrameClassification:()=>lp,AutoModelForAudioTextToText:()=>gp,AutoModelForCTC:()=>sp,AutoModelForCausalLM:()=>X_,AutoModelForDepthEstimation:()=>up,AutoModelForDocumentQuestionAnswering:()=>cp,AutoModelForImageClassification:()=>Z_,AutoModelForImageFeatureExtraction:()=>fp,AutoModelForImageMatting:()=>_p,AutoModelForImageSegmentation:()=>K_,AutoModelForImageTextToText:()=>mp,AutoModelForImageToImage:()=>pp,AutoModelForMaskGeneration:()=>np,AutoModelForMaskedLM:()=>Q_,AutoModelForNormalEstimation:()=>dp,AutoModelForObjectDetection:()=>rp,AutoModelForPoseEstimation:()=>hp,AutoModelForQuestionAnswering:()=>Y_,AutoModelForSemanticSegmentation:()=>ep,AutoModelForSeq2SeqLM:()=>U_,AutoModelForSequenceClassification:()=>R_,AutoModelForSpeechSeq2Seq:()=>q_,AutoModelForTextToSpectrogram:()=>W_,AutoModelForTextToWaveform:()=>H_,AutoModelForTokenClassification:()=>G_,AutoModelForUniversalSegmentation:()=>tp,AutoModelForVision2Seq:()=>J_,AutoModelForXVector:()=>ip,AutoModelForZeroShotObjectDetection:()=>op,BartForConditionalGeneration:()=>Kt,BartForSequenceClassification:()=>er,BartModel:()=>Zt,BartPretrainedModel:()=>Jt,BaseModelOutput:()=>se,BeitForImageClassification:()=>Ks,BeitModel:()=>Zs,BeitPreTrainedModel:()=>Js,BertForMaskedLM:()=>le,BertForQuestionAnswering:()=>pe,BertForSequenceClassification:()=>ce,BertForTokenClassification:()=>_e,BertModel:()=>ie,BertPreTrainedModel:()=>ae,BlenderbotForConditionalGeneration:()=>lr,BlenderbotModel:()=>ir,BlenderbotPreTrainedModel:()=>ar,BlenderbotSmallForConditionalGeneration:()=>pr,BlenderbotSmallModel:()=>_r,BlenderbotSmallPreTrainedModel:()=>cr,BloomForCausalLM:()=>cs,BloomModel:()=>ls,BloomPreTrainedModel:()=>is,CLIPModel:()=>no,CLIPPreTrainedModel:()=>oo,CLIPSegForImageSegmentation:()=>Mo,CLIPSegModel:()=>yo,CLIPSegPreTrainedModel:()=>xo,CLIPTextModel:()=>so,CLIPTextModelWithProjection:()=>ao,CLIPVisionModel:()=>io,CLIPVisionModelWithProjection:()=>lo,CamembertForMaskedLM:()=>Xe,CamembertForQuestionAnswering:()=>Je,CamembertForSequenceClassification:()=>Qe,CamembertForTokenClassification:()=>Ye,CamembertModel:()=>He,CamembertPreTrainedModel:()=>We,CausalLMOutput:()=>kp,CausalLMOutputWithPast:()=>vp,ChineseCLIPModel:()=>fo,ChineseCLIPPreTrainedModel:()=>ho,ClapAudioModelWithProjection:()=>Ul,ClapModel:()=>Rl,ClapPreTrainedModel:()=>zl,ClapTextModelWithProjection:()=>Gl,CodeGenForCausalLM:()=>Go,CodeGenModel:()=>Ro,CodeGenPreTrainedModel:()=>zo,CohereForCausalLM:()=>An,CohereModel:()=>En,CoherePreTrainedModel:()=>Cn,ConvBertForMaskedLM:()=>Ne,ConvBertForQuestionAnswering:()=>Ve,ConvBertForSequenceClassification:()=>Be,ConvBertForTokenClassification:()=>$e,ConvBertModel:()=>De,ConvBertPreTrainedModel:()=>Le,ConvNextForImageClassification:()=>ui,ConvNextModel:()=>pi,ConvNextPreTrainedModel:()=>_i,ConvNextV2ForImageClassification:()=>fi,ConvNextV2Model:()=>hi,ConvNextV2PreTrainedModel:()=>di,DFineForObjectDetection:()=>xa,DFineModel:()=>wa,DFinePreTrainedModel:()=>ba,DINOv3ConvNextModel:()=>vi,DINOv3ConvNextPreTrainedModel:()=>ki,DINOv3ViTModel:()=>Ti,DINOv3ViTPreTrainedModel:()=>Mi,DPTForDepthEstimation:()=>Ga,DPTModel:()=>Ra,DPTPreTrainedModel:()=>za,DacDecoderModel:()=>Yc,DacDecoderOutput:()=>Hc,DacEncoderModel:()=>Qc,DacEncoderOutput:()=>Wc,DacModel:()=>Xc,DacPreTrainedModel:()=>qc,DebertaForMaskedLM:()=>et,DebertaForQuestionAnswering:()=>ot,DebertaForSequenceClassification:()=>tt,DebertaForTokenClassification:()=>rt,DebertaModel:()=>Ke,DebertaPreTrainedModel:()=>Ze,DebertaV2ForMaskedLM:()=>at,DebertaV2ForQuestionAnswering:()=>ct,DebertaV2ForSequenceClassification:()=>it,DebertaV2ForTokenClassification:()=>lt,DebertaV2Model:()=>st,DebertaV2PreTrainedModel:()=>nt,DecisionTransformerModel:()=>kc,DecisionTransformerPreTrainedModel:()=>Tc,DeiTForImageClassification:()=>Sa,DeiTModel:()=>Pa,DeiTPreTrainedModel:()=>va,DepthAnythingForDepthEstimation:()=>qa,DepthAnythingPreTrainedModel:()=>Ua,DepthProForDepthEstimation:()=>Ja,DepthProPreTrainedModel:()=>Ya,DetrForObjectDetection:()=>ra,DetrForSegmentation:()=>oa,DetrModel:()=>ta,DetrObjectDetectionOutput:()=>na,DetrPreTrainedModel:()=>ea,DetrSegmentationOutput:()=>sa,Dinov2ForImageClassification:()=>bi,Dinov2Model:()=>gi,Dinov2PreTrainedModel:()=>mi,Dinov2WithRegistersForImageClassification:()=>yi,Dinov2WithRegistersModel:()=>xi,Dinov2WithRegistersPreTrainedModel:()=>wi,DistilBertForMaskedLM:()=>ft,DistilBertForQuestionAnswering:()=>ht,DistilBertForSequenceClassification:()=>ut,DistilBertForTokenClassification:()=>dt,DistilBertModel:()=>pt,DistilBertPreTrainedModel:()=>_t,DonutSwinModel:()=>ci,DonutSwinPreTrainedModel:()=>li,EfficientNetForImageClassification:()=>rc,EfficientNetModel:()=>tc,EfficientNetPreTrainedModel:()=>ec,ElectraForMaskedLM:()=>Re,ElectraForQuestionAnswering:()=>qe,ElectraForSequenceClassification:()=>Ge,ElectraForTokenClassification:()=>Ue,ElectraModel:()=>ze,ElectraPreTrainedModel:()=>je,Ernie4_5_ForCausalLM:()=>Ll,Ernie4_5_Model:()=>Ol,Ernie4_5_PretrainedModel:()=>Il,EsmForMaskedLM:()=>bt,EsmForSequenceClassification:()=>wt,EsmForTokenClassification:()=>xt,EsmModel:()=>gt,EsmPreTrainedModel:()=>mt,ExaoneForCausalLM:()=>dn,ExaoneModel:()=>un,ExaonePreTrainedModel:()=>pn,FalconForCausalLM:()=>jl,FalconModel:()=>Vl,FalconPreTrainedModel:()=>$l,FastViTForImageClassification:()=>Ns,FastViTModel:()=>Ds,FastViTPreTrainedModel:()=>Ls,Florence2ForConditionalGeneration:()=>Wr,Florence2PreTrainedModel:()=>qr,GLPNForDepthEstimation:()=>ii,GLPNModel:()=>ai,GLPNPreTrainedModel:()=>si,GPT2LMHeadModel:()=>vo,GPT2Model:()=>ko,GPT2PreTrainedModel:()=>To,GPTBigCodeForCausalLM:()=>jo,GPTBigCodeModel:()=>Vo,GPTBigCodePreTrainedModel:()=>$o,GPTJForCausalLM:()=>Bo,GPTJModel:()=>No,GPTJPreTrainedModel:()=>Do,GPTNeoForCausalLM:()=>Ao,GPTNeoModel:()=>Eo,GPTNeoPreTrainedModel:()=>Co,GPTNeoXForCausalLM:()=>Lo,GPTNeoXModel:()=>Oo,GPTNeoXPreTrainedModel:()=>Io,Gemma2ForCausalLM:()=>Bn,Gemma2Model:()=>Nn,Gemma2PreTrainedModel:()=>Dn,Gemma3ForCausalLM:()=>Gn,Gemma3Model:()=>Rn,Gemma3PreTrainedModel:()=>zn,Gemma3nForConditionalGeneration:()=>Jr,Gemma3nPreTrainedModel:()=>Yr,GemmaForCausalLM:()=>Ln,GemmaModel:()=>On,GemmaPreTrainedModel:()=>In,GlmForCausalLM:()=>_n,GlmModel:()=>cn,GlmPreTrainedModel:()=>ln,GraniteForCausalLM:()=>vn,GraniteModel:()=>kn,GraniteMoeHybridForCausalLM:()=>Fn,GraniteMoeHybridModel:()=>Sn,GraniteMoeHybridPreTrainedModel:()=>Pn,GranitePreTrainedModel:()=>Tn,GroundingDinoForObjectDetection:()=>Si,GroundingDinoPreTrainedModel:()=>Pi,GroupViTModel:()=>Os,GroupViTPreTrainedModel:()=>Is,HeliumForCausalLM:()=>an,HeliumModel:()=>sn,HeliumPreTrainedModel:()=>nn,HieraForImageClassification:()=>Ea,HieraModel:()=>Ca,HieraPreTrainedModel:()=>Fa,HubertForCTC:()=>ul,HubertForSequenceClassification:()=>dl,HubertModel:()=>pl,HubertPreTrainedModel:()=>_l,IJepaForImageClassification:()=>ys,IJepaModel:()=>xs,IJepaPreTrainedModel:()=>ws,Idefics3ForConditionalGeneration:()=>Kr,Idefics3PreTrainedModel:()=>Zr,ImageMattingOutput:()=>Pp,JAISLMHeadModel:()=>Fo,JAISModel:()=>So,JAISPreTrainedModel:()=>Po,JinaCLIPModel:()=>go,JinaCLIPPreTrainedModel:()=>mo,JinaCLIPTextModel:()=>bo,JinaCLIPVisionModel:()=>wo,Lfm2ForCausalLM:()=>en,Lfm2Model:()=>Ko,Lfm2PreTrainedModel:()=>Zo,LiteWhisperForConditionalGeneration:()=>Nr,Llama4ForCausalLM:()=>Xo,Llama4PreTrainedModel:()=>Ho,LlamaForCausalLM:()=>Wo,LlamaModel:()=>qo,LlamaPreTrainedModel:()=>Uo,LlavaForConditionalGeneration:()=>Rr,LlavaOnevisionForConditionalGeneration:()=>Gr,LlavaPreTrainedModel:()=>zr,LlavaQwen2ForCausalLM:()=>Qr,LongT5ForConditionalGeneration:()=>Ht,LongT5Model:()=>Wt,LongT5PreTrainedModel:()=>qt,M2M100ForConditionalGeneration:()=>ji,M2M100Model:()=>Vi,M2M100PreTrainedModel:()=>$i,MBartForCausalLM:()=>sr,MBartForConditionalGeneration:()=>or,MBartForSequenceClassification:()=>nr,MBartModel:()=>rr,MBartPreTrainedModel:()=>tr,MPNetForMaskedLM:()=>Ft,MPNetForQuestionAnswering:()=>At,MPNetForSequenceClassification:()=>Ct,MPNetForTokenClassification:()=>Et,MPNetModel:()=>St,MPNetPreTrainedModel:()=>Pt,MT5ForConditionalGeneration:()=>Yt,MT5Model:()=>Qt,MT5PreTrainedModel:()=>Xt,MarianMTModel:()=>Bi,MarianModel:()=>Ni,MarianPreTrainedModel:()=>Di,MaskFormerForInstanceSegmentation:()=>ni,MaskFormerModel:()=>oi,MaskFormerPreTrainedModel:()=>ri,MaskedLMOutput:()=>Mp,Metric3DForDepthEstimation:()=>Ka,Metric3DPreTrainedModel:()=>Za,Metric3Dv2ForDepthEstimation:()=>ti,Metric3Dv2PreTrainedModel:()=>ei,MgpstrForSceneTextRecognition:()=>Cc,MgpstrModelOutput:()=>Sc,MgpstrPreTrainedModel:()=>Fc,MimiDecoderModel:()=>Uc,MimiDecoderOutput:()=>zc,MimiEncoderModel:()=>Gc,MimiEncoderOutput:()=>jc,MimiModel:()=>Rc,MimiPreTrainedModel:()=>Vc,MistralForCausalLM:()=>Al,MistralModel:()=>El,MistralPreTrainedModel:()=>Cl,MobileBertForMaskedLM:()=>Tt,MobileBertForQuestionAnswering:()=>vt,MobileBertForSequenceClassification:()=>kt,MobileBertModel:()=>Mt,MobileBertPreTrainedModel:()=>yt,MobileLLMForCausalLM:()=>mn,MobileLLMModel:()=>fn,MobileLLMPreTrainedModel:()=>hn,MobileNetV1ForImageClassification:()=>cc,MobileNetV1ForSemanticSegmentation:()=>_c,MobileNetV1Model:()=>lc,MobileNetV1PreTrainedModel:()=>ic,MobileNetV2ForImageClassification:()=>dc,MobileNetV2ForSemanticSegmentation:()=>hc,MobileNetV2Model:()=>uc,MobileNetV2PreTrainedModel:()=>pc,MobileNetV3ForImageClassification:()=>gc,MobileNetV3ForSemanticSegmentation:()=>bc,MobileNetV3Model:()=>mc,MobileNetV3PreTrainedModel:()=>fc,MobileNetV4ForImageClassification:()=>yc,MobileNetV4ForSemanticSegmentation:()=>Mc,MobileNetV4Model:()=>xc,MobileNetV4PreTrainedModel:()=>wc,MobileViTForImageClassification:()=>zs,MobileViTModel:()=>js,MobileViTPreTrainedModel:()=>Vs,MobileViTV2ForImageClassification:()=>Us,MobileViTV2Model:()=>Gs,MobileViTV2PreTrainedModel:()=>Rs,ModelOutput:()=>ne,ModernBertDecoderForCausalLM:()=>ve,ModernBertDecoderModel:()=>ke,ModernBertDecoderPreTrainedModel:()=>Te,ModernBertForMaskedLM:()=>xe,ModernBertForSequenceClassification:()=>ye,ModernBertForTokenClassification:()=>Me,ModernBertModel:()=>we,ModernBertPreTrainedModel:()=>be,Moondream1ForConditionalGeneration:()=>Ur,MoonshineForConditionalGeneration:()=>Vr,MoonshineModel:()=>$r,MoonshinePreTrainedModel:()=>Br,MptForCausalLM:()=>us,MptModel:()=>ps,MptPreTrainedModel:()=>_s,MultiModalityCausalLM:()=>Pc,MultiModalityPreTrainedModel:()=>vc,MusicgenForCausalLM:()=>sc,MusicgenForConditionalGeneration:()=>ac,MusicgenModel:()=>nc,MusicgenPreTrainedModel:()=>oc,NeoBertForMaskedLM:()=>he,NeoBertForQuestionAnswering:()=>ge,NeoBertForSequenceClassification:()=>fe,NeoBertForTokenClassification:()=>me,NeoBertModel:()=>de,NeoBertPreTrainedModel:()=>ue,NomicBertModel:()=>Se,NomicBertPreTrainedModel:()=>Pe,OPTForCausalLM:()=>fs,OPTModel:()=>hs,OPTPreTrainedModel:()=>ds,Olmo2ForCausalLM:()=>Mn,Olmo2Model:()=>yn,Olmo2PreTrainedModel:()=>xn,OlmoForCausalLM:()=>wn,OlmoModel:()=>bn,OlmoPreTrainedModel:()=>gn,OpenELMForCausalLM:()=>Wn,OpenELMModel:()=>qn,OpenELMPreTrainedModel:()=>Un,OwlViTForObjectDetection:()=>Hs,OwlViTModel:()=>Ws,OwlViTPreTrainedModel:()=>qs,Owlv2ForObjectDetection:()=>Ys,Owlv2Model:()=>Qs,Owlv2PreTrainedModel:()=>Xs,PaliGemmaForConditionalGeneration:()=>Xr,PaliGemmaPreTrainedModel:()=>Hr,PatchTSMixerForPrediction:()=>Dc,PatchTSMixerModel:()=>Lc,PatchTSMixerPreTrainedModel:()=>Oc,PatchTSTForPrediction:()=>Ic,PatchTSTModel:()=>Ac,PatchTSTPreTrainedModel:()=>Ec,Phi3ForCausalLM:()=>as,Phi3Model:()=>ss,Phi3PreTrainedModel:()=>ns,Phi3VForCausalLM:()=>ro,Phi3VPreTrainedModel:()=>to,PhiForCausalLM:()=>os,PhiModel:()=>rs,PhiPreTrainedModel:()=>ts,PreTrainedModel:()=>oe,PretrainedMixin:()=>t_,PvtForImageClassification:()=>Ps,PvtModel:()=>vs,PvtPreTrainedModel:()=>ks,PyAnnoteForAudioFrameClassification:()=>Xi,PyAnnoteModel:()=>Hi,PyAnnotePreTrainedModel:()=>Wi,QuestionAnsweringModelOutput:()=>Tp,Qwen2ForCausalLM:()=>Qn,Qwen2Model:()=>Xn,Qwen2PreTrainedModel:()=>Hn,Qwen2VLForConditionalGeneration:()=>es,Qwen2VLPreTrainedModel:()=>Kn,Qwen3ForCausalLM:()=>Zn,Qwen3Model:()=>Jn,Qwen3PreTrainedModel:()=>Yn,RFDetrForObjectDetection:()=>ma,RFDetrModel:()=>fa,RFDetrObjectDetectionOutput:()=>ga,RFDetrPreTrainedModel:()=>ha,RTDetrForObjectDetection:()=>la,RTDetrModel:()=>ia,RTDetrObjectDetectionOutput:()=>ca,RTDetrPreTrainedModel:()=>aa,RTDetrV2ForObjectDetection:()=>ua,RTDetrV2Model:()=>pa,RTDetrV2ObjectDetectionOutput:()=>da,RTDetrV2PreTrainedModel:()=>_a,ResNetForImageClassification:()=>Oa,ResNetModel:()=>Ia,ResNetPreTrainedModel:()=>Aa,RoFormerForMaskedLM:()=>Ee,RoFormerForQuestionAnswering:()=>Oe,RoFormerForSequenceClassification:()=>Ae,RoFormerForTokenClassification:()=>Ie,RoFormerModel:()=>Ce,RoFormerPreTrainedModel:()=>Fe,RobertaForMaskedLM:()=>hr,RobertaForQuestionAnswering:()=>gr,RobertaForSequenceClassification:()=>fr,RobertaForTokenClassification:()=>mr,RobertaModel:()=>dr,RobertaPreTrainedModel:()=>ur,SamImageSegmentationOutput:()=>Li,SamModel:()=>Oi,SamPreTrainedModel:()=>Ii,SapiensForDepthEstimation:()=>Xa,SapiensForNormalEstimation:()=>Qa,SapiensForSemanticSegmentation:()=>Ha,SapiensPreTrainedModel:()=>Wa,SegformerForImageClassification:()=>Ql,SegformerForSemanticSegmentation:()=>Yl,SegformerModel:()=>Xl,SegformerPreTrainedModel:()=>Hl,Seq2SeqLMOutput:()=>bp,SequenceClassifierOutput:()=>wp,SiglipModel:()=>_o,SiglipPreTrainedModel:()=>co,SiglipTextModel:()=>po,SiglipVisionModel:()=>uo,SmolLM3ForCausalLM:()=>on,SmolLM3Model:()=>rn,SmolLM3PreTrainedModel:()=>tn,SmolVLMForConditionalGeneration:()=>eo,SnacDecoderModel:()=>e_,SnacEncoderModel:()=>Kc,SnacModel:()=>Zc,SnacPreTrainedModel:()=>Jc,SpeechT5ForSpeechToText:()=>kl,SpeechT5ForTextToSpeech:()=>vl,SpeechT5HifiGan:()=>Pl,SpeechT5Model:()=>Tl,SpeechT5PreTrainedModel:()=>Ml,SqueezeBertForMaskedLM:()=>Lt,SqueezeBertForQuestionAnswering:()=>Nt,SqueezeBertForSequenceClassification:()=>Dt,SqueezeBertModel:()=>Ot,SqueezeBertPreTrainedModel:()=>It,StableLmForCausalLM:()=>Kl,StableLmModel:()=>Zl,StableLmPreTrainedModel:()=>Jl,Starcoder2ForCausalLM:()=>Bl,Starcoder2Model:()=>Nl,Starcoder2PreTrainedModel:()=>Dl,StyleTextToSpeech2Model:()=>yl,StyleTextToSpeech2PreTrainedModel:()=>xl,Swin2SRForImageSuperResolution:()=>ja,Swin2SRModel:()=>Va,Swin2SRPreTrainedModel:()=>$a,SwinForImageClassification:()=>Na,SwinForSemanticSegmentation:()=>Ba,SwinModel:()=>Da,SwinPreTrainedModel:()=>La,T5ForConditionalGeneration:()=>Ut,T5Model:()=>Gt,T5PreTrainedModel:()=>Rt,TableTransformerForObjectDetection:()=>Ta,TableTransformerModel:()=>Ma,TableTransformerObjectDetectionOutput:()=>ka,TableTransformerPreTrainedModel:()=>ya,TokenClassifierOutput:()=>yp,TrOCRForCausalLM:()=>Fl,TrOCRPreTrainedModel:()=>Sl,UltravoxModel:()=>Bc,UltravoxPreTrainedModel:()=>Nc,UniSpeechForCTC:()=>Ki,UniSpeechForSequenceClassification:()=>el,UniSpeechModel:()=>Zi,UniSpeechPreTrainedModel:()=>Ji,UniSpeechSatForAudioFrameClassification:()=>sl,UniSpeechSatForCTC:()=>ol,UniSpeechSatForSequenceClassification:()=>nl,UniSpeechSatModel:()=>rl,UniSpeechSatPreTrainedModel:()=>tl,VaultGemmaForCausalLM:()=>jn,VaultGemmaModel:()=>Vn,VaultGemmaPreTrainedModel:()=>$n,ViTForImageClassification:()=>bs,ViTMAEModel:()=>Fs,ViTMAEPreTrainedModel:()=>Ss,ViTMSNForImageClassification:()=>As,ViTMSNModel:()=>Es,ViTMSNPreTrainedModel:()=>Cs,ViTModel:()=>gs,ViTPreTrainedModel:()=>ms,VisionEncoderDecoderModel:()=>jr,VitMatteForImageMatting:()=>$s,VitMattePreTrainedModel:()=>Bs,VitPoseForPoseEstimation:()=>Ts,VitPosePreTrainedModel:()=>Ms,VitsModel:()=>Wl,VitsModelOutput:()=>Sp,VitsPreTrainedModel:()=>ql,VoxtralForConditionalGeneration:()=>$c,Wav2Vec2BertForCTC:()=>ll,Wav2Vec2BertForSequenceClassification:()=>cl,Wav2Vec2BertModel:()=>il,Wav2Vec2BertPreTrainedModel:()=>al,Wav2Vec2ForAudioFrameClassification:()=>qi,Wav2Vec2ForCTC:()=>Gi,Wav2Vec2ForSequenceClassification:()=>Ui,Wav2Vec2Model:()=>Ri,Wav2Vec2PreTrainedModel:()=>zi,WavLMForAudioFrameClassification:()=>wl,WavLMForCTC:()=>ml,WavLMForSequenceClassification:()=>gl,WavLMForXVector:()=>bl,WavLMModel:()=>fl,WavLMPreTrainedModel:()=>hl,WeSpeakerResNetModel:()=>Yi,WeSpeakerResNetPreTrainedModel:()=>Qi,WhisperForConditionalGeneration:()=>Dr,WhisperModel:()=>Lr,WhisperPreTrainedModel:()=>Or,XLMForQuestionAnswering:()=>Tr,XLMForSequenceClassification:()=>yr,XLMForTokenClassification:()=>Mr,XLMModel:()=>wr,XLMPreTrainedModel:()=>br,XLMRobertaForMaskedLM:()=>Pr,XLMRobertaForQuestionAnswering:()=>Cr,XLMRobertaForSequenceClassification:()=>Sr,XLMRobertaForTokenClassification:()=>Fr,XLMRobertaModel:()=>vr,XLMRobertaPreTrainedModel:()=>kr,XLMWithLMHeadModel:()=>xr,XVectorOutput:()=>xp,YolosForObjectDetection:()=>Ei,YolosModel:()=>Ci,YolosObjectDetectionOutput:()=>Ai,YolosPreTrainedModel:()=>Fi});var o=r("./src/configs.js"),n=r("./src/backends/onnx.js"),s=r("./src/utils/dtypes.js"),a=r("./src/utils/generic.js"),i=r("./src/utils/core.js"),l=r("./src/utils/hub.js"),c=r("./src/utils/constants.js"),_=r("./src/generation/logits_process.js"),p=r("./src/generation/configuration_utils.js"),u=r("./src/utils/tensor.js"),d=r("./src/utils/image.js"),h=r("./src/utils/maths.js"),f=r("./src/generation/stopping_criteria.js"),m=r("./src/generation/logits_sampler.js"),g=r("./src/env.js"),b=r("./src/models/whisper/generation_whisper.js"),w=r("./src/models/whisper/common_whisper.js");const x=0,y=1,M=2,T=3,k=4,v=5,P=6,S=7,F=8,C=9,E=10,A=11,I=12,O=new Map,L=new Map,D=new Map;async function N(e,t,r){return Object.fromEntries(await Promise.all(Object.keys(t).map(async a=>{const{buffer_or_path:i,session_options:c,session_config:_}=await async function(e,t,r){let a=r.config?.["transformers.js_config"]??{},i=r.device??a.device;i&&"string"!=typeof i&&(i.hasOwnProperty(t)?i=i[t]:(console.warn(`device not specified for "${t}". Using the default device.`),i=null));const c=i??(g.apis.IS_NODE_ENV?"cpu":"wasm"),_=(0,n.deviceToExecutionProviders)(c),p=a.device_config??{};p.hasOwnProperty(c)&&(a={...a,...p[c]});let u=r.dtype??a.dtype;if("string"!=typeof u&&(u&&u.hasOwnProperty(t)?u=u[t]:(u=s.DEFAULT_DEVICE_DTYPE_MAPPING[c]??s.DATA_TYPES.fp32,console.warn(`dtype not specified for "${t}". Using the default dtype (${u}) for this device (${c}).`))),u===s.DATA_TYPES.auto){let e=a.dtype;"string"!=typeof e&&(e=e?.[t]),u=e&&e!==s.DATA_TYPES.auto&&s.DATA_TYPES.hasOwnProperty(e)?e:s.DEFAULT_DEVICE_DTYPE_MAPPING[c]??s.DATA_TYPES.fp32}const d=u;if(!s.DEFAULT_DTYPE_SUFFIX_MAPPING.hasOwnProperty(d))throw new Error(`Invalid dtype: ${d}. Should be one of: ${Object.keys(s.DATA_TYPES).join(", ")}`);if(d===s.DATA_TYPES.fp16&&"webgpu"===c&&!await(0,s.isWebGpuFp16Supported)())throw new Error(`The device (${c}) does not support fp16.`);const h=a.kv_cache_dtype,f=h?"string"==typeof h?h:h[d]??"float32":void 0;if(f&&!["float32","float16"].includes(f))throw new Error(`Invalid kv_cache_dtype: ${f}. Should be one of: float32, float16`);const m={dtype:d,kv_cache_dtype:f,device:c},b=`${t}${s.DEFAULT_DTYPE_SUFFIX_MAPPING[d]}.onnx`,w=`${r.subfolder??""}/${b}`,x={...r.session_options};x.executionProviders??=_;const y=a.free_dimension_overrides;y?x.freeDimensionOverrides??=y:c.startsWith("webnn")&&!x.freeDimensionOverrides&&console.warn(`WebNN does not currently support dynamic shapes and requires 'free_dimension_overrides' to be set in config.json, preferably as a field within config["transformers.js_config"]["device_config"]["${c}"]. When 'free_dimension_overrides' is not set, you may experience significant performance degradation.`);const M=g.apis.IS_NODE_ENV&&g.env.useFSCache,T=(0,l.getModelFile)(e,w,!0,r,M),k=r.use_external_data_format??a.use_external_data_format;let v=[];if(k){let o;o="object"==typeof k?k.hasOwnProperty(b)?k[b]:!!k.hasOwnProperty(t)&&k[t]:k;const n=+o;if(n>l.MAX_EXTERNAL_DATA_CHUNKS)throw new Error(`The number of external data chunks (${n}) exceeds the maximum allowed value (${l.MAX_EXTERNAL_DATA_CHUNKS}).`);for(let t=0;t<n;++t){const o=`${b}_data${0===t?"":"_"+t}`,n=`${r.subfolder??""}/${o}`;v.push(new Promise(async(t,s)=>{const a=await(0,l.getModelFile)(e,n,!0,r,M);t(a instanceof Uint8Array?{path:o,data:a}:o)}))}}else void 0!==x.externalData&&(v=x.externalData.map(async t=>{if("string"==typeof t.data){const o=await(0,l.getModelFile)(e,t.data,!0,r);return{...t,data:o}}return t}));if(v.length>0){const e=await Promise.all(v);g.apis.IS_NODE_ENV||(x.externalData=e)}if("webgpu"===c){const e=(0,o.getCacheShapes)(r.config,{prefix:"present"});if(Object.keys(e).length>0&&!(0,n.isONNXProxy)()){const t={};for(const r in e)t[r]="gpu-buffer";x.preferredOutputLocation=t}}return{buffer_or_path:await T,session_options:x,session_config:m}}(e,t[a],r);return[a,await(0,n.createInferenceSession)(i,c,_)]})))}async function B(e,t,r){return Object.fromEntries(await Promise.all(Object.keys(t).map(async o=>[o,await(0,l.getModelJSON)(e,t[o],!1,r)])))}async function $(e,t){const r=function(e,t){const r=Object.create(null),o=[];for(const s of e.inputNames){const e=t[s];e instanceof u.Tensor?r[s]=(0,n.isONNXProxy)()?e.clone():e:o.push(s)}if(o.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${o.join(", ")}.`);const s=Object.keys(t).length,a=e.inputNames.length;if(s>a){let r=Object.keys(t).filter(t=>!e.inputNames.includes(t));console.warn(`WARNING: Too many inputs were provided (${s} > ${a}). The following inputs will be ignored: "${r.join(", ")}".`)}return r}(e,t);try{const t=Object.fromEntries(Object.entries(r).map(([e,t])=>[e,t.ort_tensor]));return V(await(0,n.runInferenceSession)(e,t))}catch(e){const t=Object.fromEntries(Object.entries(r).map(([e,t])=>{const r={type:t.type,dims:t.dims,location:t.location};return"gpu-buffer"!==r.location&&(r.data=t.data),[e,r]}));throw console.error(`An error occurred during model execution: "${e}".`),console.error("Inputs given to model:",t),e}}function V(e){for(let t in e)(0,n.isONNXTensor)(e[t])?e[t]=new u.Tensor(e[t]):"object"==typeof e[t]&&V(e[t]);return e}function j(e){if(e instanceof u.Tensor)return e;if(0===e.length)throw Error("items must be non-empty");if(Array.isArray(e[0])){if(e.some(t=>t.length!==e[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new u.Tensor("int64",BigInt64Array.from(e.flat().map(e=>BigInt(e))),[e.length,e[0].length])}return new u.Tensor("int64",BigInt64Array.from(e.map(e=>BigInt(e))),[1,e.length])}function z(e){return new u.Tensor("bool",[e],[1])}async function R(e,t){let{encoder_outputs:r,input_ids:o,decoder_input_ids:n,...s}=t;if(!r){const o=(0,i.pick)(t,e.sessions.model.inputNames);r=(await G(e,o)).last_hidden_state}s.input_ids=n,s.encoder_hidden_states=r,e.sessions.decoder_model_merged.inputNames.includes("encoder_attention_mask")&&(s.encoder_attention_mask=t.attention_mask);return await q(e,s,!0)}async function G(e,t){const r=e.sessions.model,o=(0,i.pick)(t,r.inputNames);if(r.inputNames.includes("inputs_embeds")&&!o.inputs_embeds){if(!t.input_ids)throw new Error("Both `input_ids` and `inputs_embeds` are missing in the model inputs.");o.inputs_embeds=await e.encode_text({input_ids:t.input_ids})}if(r.inputNames.includes("token_type_ids")&&!o.token_type_ids){if(!o.input_ids)throw new Error("Both `input_ids` and `token_type_ids` are missing in the model inputs.");o.token_type_ids=(0,u.zeros_like)(o.input_ids)}if(r.inputNames.includes("pixel_mask")&&!o.pixel_mask){if(!o.pixel_values)throw new Error("Both `pixel_values` and `pixel_mask` are missing in the model inputs.");const e=o.pixel_values.dims;o.pixel_mask=(0,u.ones)([e[0],e[2],e[3]])}return await $(r,o)}async function U(e,t){const r=await e.encode(t);return await e.decode(r)}async function q(e,t,r=!1){const o=e.sessions[r?"decoder_model_merged":"model"],{past_key_values:n,...s}=t;if(o.inputNames.includes("use_cache_branch")&&(s.use_cache_branch=z(!!n)),o.inputNames.includes("position_ids")&&s.attention_mask&&!s.position_ids){const t=["paligemma","gemma3_text","gemma3"].includes(e.config.model_type)?1:0;s.position_ids=function(e,t=null,r=0){const{input_ids:o,inputs_embeds:n,attention_mask:s}=e,{data:a,dims:i}=Z(s,r);let l=new u.Tensor("int64",a,i);if(t){const e=-(o??n).dims.at(1);l=l.slice(null,[e,null])}return l}(s,n,t)}e.addPastKeyValues(s,n);const a=(0,i.pick)(s,o.inputNames);return await $(o,a)}function W({modality_token_id:e,inputs_embeds:t,modality_features:r,input_ids:o,attention_mask:n}){const s=o.tolist().map(t=>t.reduce((t,r,o)=>(r==e&&t.push(o),t),[])),a=s.reduce((e,t)=>e+t.length,0),i=r.dims[0];if(a!==i)throw new Error(`Number of tokens and features do not match: tokens: ${a}, features ${i}`);let l=0;for(let e=0;e<s.length;++e){const o=s[e],n=t[e];for(let e=0;e<o.length;++e)n[o[e]].data.set(r[l++].data)}return{inputs_embeds:t,attention_mask:n}}function H({image_token_id:e,inputs_embeds:t,image_features:r,input_ids:o,attention_mask:n}){return W({modality_token_id:e,inputs_embeds:t,modality_features:r,input_ids:o,attention_mask:n})}function X({audio_token_id:e,inputs_embeds:t,audio_features:r,input_ids:o,attention_mask:n}){return W({modality_token_id:e,inputs_embeds:t,modality_features:r,input_ids:o,attention_mask:n})}async function Q(e,{encode_function:t,merge_function:r,modality_input_name:o,modality_output_name:n,input_ids:s=null,attention_mask:a=null,position_ids:i=null,inputs_embeds:l=null,past_key_values:c=null,generation_config:_=null,logits_processor:p=null,...d}){const h=d[o];if(!l)if(l=await e.encode_text({input_ids:s,...d}),h&&1!==s.dims[1]){const e=await t({[o]:h,...d});({inputs_embeds:l,attention_mask:a}=r({[n]:e,inputs_embeds:l,input_ids:s,attention_mask:a}))}else if(c&&h&&1===s.dims[1]){const e=s.dims[1],t=Object.values(c)[0].dims.at(-2);a=(0,u.cat)([(0,u.ones)([s.dims[0],t]),a.slice(null,[a.dims[1]-e,a.dims[1]])],1)}if(!i&&"qwen2_vl"===e.config.model_type){const{image_grid_thw:t,video_grid_thw:r}=d;[i]=e.get_rope_index(s,t,r,a)}return await q(e,{inputs_embeds:l,past_key_values:c,attention_mask:a,position_ids:i,generation_config:_,logits_processor:p},!0)}async function Y(e,t){return await Q(e,{...t,modality_input_name:"audio_values",modality_output_name:"audio_features",encode_function:e.encode_audio.bind(e),merge_function:e._merge_input_ids_with_audio_features.bind(e)})}async function J(e,t){return await Q(e,{...t,modality_input_name:"pixel_values",modality_output_name:"image_features",encode_function:e.encode_image.bind(e),merge_function:e._merge_input_ids_with_image_features.bind(e)})}function Z(e,t=0){const[r,o]=e.dims,n=e.data,s=new BigInt64Array(n.length);for(let e=0;e<r;++e){const r=e*o;let a=BigInt(t);for(let e=0;e<o;++e){const t=r+e;0n===n[t]?s[t]=BigInt(1):(s[t]=a,a+=n[t])}}return{data:s,dims:e.dims}}function K(e,t,r,o){const n=r.past_key_values?Object.values(r.past_key_values)[0].dims.at(-2):0;if(!r.attention_mask){let e;for(const t of["input_ids","inputs_embeds","position_ids"])if(r[t]){e=r[t].dims;break}if(!e)throw new Error("attention_mask is not provided, and unable to infer its shape from model inputs.");r.attention_mask=(0,u.ones)([e[0],n+e[1]])}if(r.past_key_values){const{input_ids:e,attention_mask:t}=r;t&&t.dims[1]>e.dims[1]||n<e.dims[1]&&(r.input_ids=e.slice(null,[n,null]))}return r}function ee(e,t,r,o){return r.past_key_values&&(t=t.map(e=>[e.at(-1)])),{...r,decoder_input_ids:j(t)}}function te(e,...t){return e.config.is_encoder_decoder?ee(e,...t):K(e,...t)}function re(e,t,r,o){const n=!!r.past_key_values;if(null!==o.guidance_scale&&o.guidance_scale>1&&(n?r.input_ids=(0,u.cat)([r.input_ids,r.input_ids],0):(r.input_ids=(0,u.cat)([r.input_ids,(0,u.full_like)(r.input_ids,BigInt(o.pad_token_id))],0),r.attention_mask=(0,u.cat)([r.attention_mask,(0,u.full_like)(r.attention_mask,0n)],0))),!n&&r.pixel_values||(r.pixel_values=(0,u.full)([0,0,3,384,384],1)),n){const e=0,t=1,o=e>0?1:0,n=1;r.images_seq_mask=new u.Tensor("bool",new Array(e+t).fill(!0).fill(!1,0,t),[n,e+t]),r.images_emb_mask=new u.Tensor("bool",new Array(e).fill(!!o),[n,1,e])}return r}class oe extends a.Callable{main_input_name="input_ids";forward_params=["input_ids","attention_mask"];constructor(e,t,r){super(),this.config=e,this.sessions=t,this.configs=r;const o=D.get(this.constructor),n=O.get(o);switch(this.can_generate=!1,this._forward=null,this._prepare_inputs_for_generation=null,n){case k:this.can_generate=!0,this._forward=q,this._prepare_inputs_for_generation=K;break;case M:case T:case S:this.can_generate=!0,this._forward=R,this._prepare_inputs_for_generation=ee;break;case y:this._forward=R;break;case P:this.can_generate=!0,this._forward=J,this._prepare_inputs_for_generation=te;break;case E:this.can_generate=!0,this._forward=Y,this._prepare_inputs_for_generation=te;break;case C:case I:this.can_generate=!0,this._prepare_inputs_for_generation=te;break;case F:this.can_generate=!0,this._prepare_inputs_for_generation=re;break;case A:this._forward=U;break;default:this._forward=G}this.can_generate&&this.forward_params.push("past_key_values"),this.custom_config=this.config["transformers.js_config"]??{}}async dispose(){const e=[];for(const t of Object.values(this.sessions))t?.handler?.dispose&&e.push(t.handler.dispose());return await Promise.all(e)}static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:n=null,local_files_only:s=!1,revision:a="main",model_file_name:i=null,subfolder:l="onnx",device:_=null,dtype:p=null,use_external_data_format:u=null,session_options:d={}}={}){let h={progress_callback:t,config:r,cache_dir:n,local_files_only:s,revision:a,model_file_name:i,subfolder:l,device:_,dtype:p,use_external_data_format:u,session_options:d};const f=D.get(this),m=O.get(f);let g;if(r=h.config=await o.AutoConfig.from_pretrained(e,h),m===k)g=await Promise.all([N(e,{model:h.model_file_name??"model"},h),B(e,{generation_config:"generation_config.json"},h)]);else if(m===M||m===T)g=await Promise.all([N(e,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},h),B(e,{generation_config:"generation_config.json"},h)]);else if(m===v)g=await Promise.all([N(e,{model:"vision_encoder",prompt_encoder_mask_decoder:"prompt_encoder_mask_decoder"},h)]);else if(m===y)g=await Promise.all([N(e,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},h)]);else if(m===P){const t={embed_tokens:"embed_tokens",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};r.is_encoder_decoder&&(t.model="encoder_model"),g=await Promise.all([N(e,t,h),B(e,{generation_config:"generation_config.json"},h)])}else if(m===E){const t={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",decoder_model_merged:"decoder_model_merged"};g=await Promise.all([N(e,t,h),B(e,{generation_config:"generation_config.json"},h)])}else if(m===I){const t={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};g=await Promise.all([N(e,t,h),B(e,{generation_config:"generation_config.json"},h)])}else if(m===S)g=await Promise.all([N(e,{model:"text_encoder",decoder_model_merged:"decoder_model_merged",encodec_decode:"encodec_decode"},h),B(e,{generation_config:"generation_config.json"},h)]);else if(m===F)g=await Promise.all([N(e,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"language_model",lm_head:"lm_head",gen_head:"gen_head",gen_img_embeds:"gen_img_embeds",image_decode:"image_decode"},h),B(e,{generation_config:"generation_config.json"},h)]);else if(m===C)g=await Promise.all([N(e,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"model",vision_encoder:"vision_encoder"},h),B(e,{generation_config:"generation_config.json"},h)]);else if(m===A)g=await Promise.all([N(e,{encoder_model:"encoder_model",decoder_model:"decoder_model"},h)]);else{if(m!==x){const e=f??r?.model_type;"custom"!==e&&console.warn(`Model type for '${e}' not found, assuming encoder-only architecture. Please report this at ${c.GITHUB_ISSUE_URL}.`)}g=await Promise.all([N(e,{model:h.model_file_name??"model"},h)])}return new this(r,...g)}async _call(e){return await this.forward(e)}async forward(e){return await this._forward(this,e)}get generation_config(){return this.configs?.generation_config??null}_get_logits_processor(e,t,r=null){const o=new _.LogitsProcessorList;if(null!==e.repetition_penalty&&1!==e.repetition_penalty&&o.push(new _.RepetitionPenaltyLogitsProcessor(e.repetition_penalty)),null!==e.no_repeat_ngram_size&&e.no_repeat_ngram_size>0&&o.push(new _.NoRepeatNGramLogitsProcessor(e.no_repeat_ngram_size)),null!==e.bad_words_ids&&o.push(new _.NoBadWordsLogitsProcessor(e.bad_words_ids,e.eos_token_id)),null!==e.min_length&&null!==e.eos_token_id&&e.min_length>0&&o.push(new _.MinLengthLogitsProcessor(e.min_length,e.eos_token_id)),null!==e.min_new_tokens&&null!==e.eos_token_id&&e.min_new_tokens>0&&o.push(new _.MinNewTokensLengthLogitsProcessor(t,e.min_new_tokens,e.eos_token_id)),null!==e.forced_bos_token_id&&o.push(new _.ForcedBOSTokenLogitsProcessor(e.forced_bos_token_id)),null!==e.forced_eos_token_id&&o.push(new _.ForcedEOSTokenLogitsProcessor(e.max_length,e.forced_eos_token_id)),null!==e.begin_suppress_tokens){const r=t>1||null===e.forced_bos_token_id?t:t+1;o.push(new _.SuppressTokensAtBeginLogitsProcessor(e.begin_suppress_tokens,r))}return null!==e.guidance_scale&&e.guidance_scale>1&&o.push(new _.ClassifierFreeGuidanceLogitsProcessor(e.guidance_scale)),0===e.temperature&&e.do_sample&&(console.warn("`do_sample` changed to false because `temperature: 0` implies greedy sampling (always selecting the most likely token), which is incompatible with `do_sample: true`."),e.do_sample=!1),e.do_sample&&null!==e.temperature&&1!==e.temperature&&o.push(new _.TemperatureLogitsWarper(e.temperature)),null!==r&&o.extend(r),o}_prepare_generation_config(e,t,r=p.GenerationConfig){const o={...this.config};for(const e of["decoder","generator","text_config"])e in o&&Object.assign(o,o[e]);const n=new r(o);return Object.assign(n,this.generation_config??{}),e&&Object.assign(n,e),t&&Object.assign(n,(0,i.pick)(t,Object.getOwnPropertyNames(n))),n}_get_stopping_criteria(e,t=null){const r=new f.StoppingCriteriaList;return null!==e.max_length&&r.push(new f.MaxLengthCriteria(e.max_length,this.config.max_position_embeddings??null)),null!==e.eos_token_id&&r.push(new f.EosTokenCriteria(e.eos_token_id)),t&&r.extend(t),r}_validate_model_class(){if(!this.can_generate){const e=[u_,m_,p_,a_],t=D.get(this.constructor),r=new Set,o=this.config.model_type;for(const t of e){const e=t.get(o);e&&r.add(e[0])}let n=`The current model class (${t}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;throw r.size>0&&(n+=` Please use the following class instead: ${[...r].join(", ")}`),Error(n)}}prepare_inputs_for_generation(...e){return this._prepare_inputs_for_generation(this,...e)}_update_model_kwargs_for_generation({generated_input_ids:e,outputs:t,model_inputs:r,is_encoder_decoder:o}){return r.past_key_values=this.getPastKeyValues(t,r.past_key_values),r.input_ids=new u.Tensor("int64",e.flat(),[e.length,1]),o||(r.attention_mask=(0,u.cat)([r.attention_mask,(0,u.ones)([r.attention_mask.dims[0],1])],1)),r.position_ids=null,r}_prepare_model_inputs({inputs:e,bos_token_id:t,model_kwargs:r}){const o=(0,i.pick)(r,this.forward_params),n=this.main_input_name;if(n in o){if(e)throw new Error("`inputs`: {inputs}` were passed alongside {input_name} which is not allowed. Make sure to either pass {inputs} or {input_name}=...")}else o[n]=e;return{inputs_tensor:o[n],model_inputs:o,model_input_name:n}}async _prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:e,model_inputs:t,model_input_name:r,generation_config:o}){if(this.sessions.model.inputNames.includes("inputs_embeds")&&!t.inputs_embeds&&"_prepare_inputs_embeds"in this){const{input_ids:e,pixel_values:r,attention_mask:o,...n}=t,s=await this._prepare_inputs_embeds(t);t={...n,...(0,i.pick)(s,["inputs_embeds","attention_mask"])}}let{last_hidden_state:n}=await G(this,t);if(null!==o.guidance_scale&&o.guidance_scale>1)n=(0,u.cat)([n,(0,u.full_like)(n,0)],0),"attention_mask"in t&&(t.attention_mask=(0,u.cat)([t.attention_mask,(0,u.zeros_like)(t.attention_mask)],0));else if(t.decoder_input_ids){const e=j(t.decoder_input_ids).dims[0];if(e!==n.dims[0]){if(1!==n.dims[0])throw new Error(`The encoder outputs have a different batch size (${n.dims[0]}) than the decoder inputs (${e}).`);n=(0,u.cat)(Array.from({length:e},()=>n),0)}}return t.encoder_outputs=n,t}_prepare_decoder_input_ids_for_generation({batch_size:e,model_input_name:t,model_kwargs:r,decoder_start_token_id:o,bos_token_id:n,generation_config:s}){let{decoder_input_ids:a,...i}=r;if(!(a instanceof u.Tensor)){if(a)Array.isArray(a[0])||(a=Array.from({length:e},()=>a));else if(o??=n,"musicgen"===this.config.model_type)a=Array.from({length:e*this.config.decoder.num_codebooks},()=>[o]);else if(Array.isArray(o)){if(o.length!==e)throw new Error(`\`decoder_start_token_id\` expcted to have length ${e} but got ${o.length}`);a=o}else a=Array.from({length:e},()=>[o]);a=j(a)}return r.decoder_attention_mask=(0,u.ones_like)(a),{input_ids:a,model_inputs:i}}async generate({inputs:e=null,generation_config:t=null,logits_processor:r=null,stopping_criteria:o=null,streamer:n=null,...s}){this._validate_model_class(),t=this._prepare_generation_config(t,s);let{inputs_tensor:a,model_inputs:i,model_input_name:l}=this._prepare_model_inputs({inputs:e,model_kwargs:s});const c=this.config.is_encoder_decoder;let _;c&&("encoder_outputs"in i||(i=await this._prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:a,model_inputs:i,model_input_name:l,generation_config:t}))),c?({input_ids:_,model_inputs:i}=this._prepare_decoder_input_ids_for_generation({batch_size:i[l].dims.at(0),model_input_name:l,model_kwargs:i,decoder_start_token_id:t.decoder_start_token_id,bos_token_id:t.bos_token_id,generation_config:t})):_=i[l];let p=_.dims.at(-1);null!==t.max_new_tokens&&(t.max_length=p+t.max_new_tokens);const d=this._get_logits_processor(t,p,r),h=this._get_stopping_criteria(t,o),f=i[l].dims.at(0),g=m.LogitsSampler.getSampler(t),b=new Array(f).fill(0),w=_.tolist();let x;n&&n.put(w);let y={};for(;;){if(i=this.prepare_inputs_for_generation(w,i,t),x=await this.forward(i),t.output_attentions&&t.return_dict_in_generate){const e=this.getAttentions(x);for(const t in e)t in y||(y[t]=[]),y[t].push(e[t])}const e=d(w,x.logits.slice(null,-1,null)),r=[];for(let t=0;t<e.dims.at(0);++t){const o=e[t],n=await g(o);for(const[e,o]of n){const n=BigInt(e);b[t]+=o,w[t].push(n),r.push([n]);break}}n&&n.put(r);if(h(w).every(e=>e))break;i=this._update_model_kwargs_for_generation({generated_input_ids:r,outputs:x,model_inputs:i,is_encoder_decoder:c})}n&&n.end();const M=this.getPastKeyValues(x,i.past_key_values,!0),T=new u.Tensor("int64",w.flat(),[w.length,w[0].length]);if(t.return_dict_in_generate)return{sequences:T,past_key_values:M,...y};for(const e of Object.values(x))"gpu-buffer"===e.location&&e.dispose();return T}getPastKeyValues(e,t,r=!1){const o=Object.create(null);for(const n in e)if(n.startsWith("present")){const s=n.replace("present_conv","past_conv").replace("present","past_key_values"),a=n.includes("encoder");if(o[s]=a&&t?t[s]:e[n],t&&(!a||r)){const e=t[s];"gpu-buffer"===e.location&&e.dispose()}}return o}getAttentions(e){const t={};for(const r of["cross_attentions","encoder_attentions","decoder_attentions"])for(const o in e)o.startsWith(r)&&(r in t||(t[r]=[]),t[r].push(e[o]));return t}addPastKeyValues(e,t){if(t)Object.assign(e,t);else{const t=this.sessions.decoder_model_merged??this.sessions.model,r=(e[this.main_input_name]??e.attention_mask)?.dims?.[0]??1,n=t?.config?.kv_cache_dtype??"float32",s="float16"===n?u.DataTypeMap.float16:u.DataTypeMap.float32,a=(0,o.getCacheShapes)(this.config,{batch_size:r});for(const t in a){const r=a[t].reduce((e,t)=>e*t,1);e[t]=new u.Tensor(n,new s(r),a[t])}}}async encode_image({pixel_values:e}){return(await $(this.sessions.vision_encoder,{pixel_values:e})).image_features}async encode_text({input_ids:e}){return(await $(this.sessions.embed_tokens,{input_ids:e})).inputs_embeds}async encode_audio({audio_values:e}){return(await $(this.sessions.audio_encoder,{audio_values:e})).audio_features}}class ne{}class se extends ne{constructor({last_hidden_state:e,hidden_states:t=null,attentions:r=null}){super(),this.last_hidden_state=e,this.hidden_states=t,this.attentions=r}}class ae extends oe{}class ie extends ae{}class le extends ae{async _call(e){return new Mp(await super._call(e))}}class ce extends ae{async _call(e){return new wp(await super._call(e))}}class _e extends ae{async _call(e){return new yp(await super._call(e))}}class pe extends ae{async _call(e){return new Tp(await super._call(e))}}class ue extends oe{}class de extends ue{}class he extends ue{async _call(e){return new Mp(await super._call(e))}}class fe extends ue{async _call(e){return new wp(await super._call(e))}}class me extends ue{async _call(e){return new yp(await super._call(e))}}class ge extends ue{async _call(e){return new Tp(await super._call(e))}}class be extends oe{}class we extends be{}class xe extends be{async _call(e){return new Mp(await super._call(e))}}class ye extends be{async _call(e){return new wp(await super._call(e))}}class Me extends be{async _call(e){return new yp(await super._call(e))}}class Te extends oe{}class ke extends Te{}class ve extends Te{}class Pe extends oe{}class Se extends Pe{}class Fe extends oe{}class Ce extends Fe{}class Ee extends Fe{async _call(e){return new Mp(await super._call(e))}}class Ae extends Fe{async _call(e){return new wp(await super._call(e))}}class Ie extends Fe{async _call(e){return new yp(await super._call(e))}}class Oe extends Fe{async _call(e){return new Tp(await super._call(e))}}class Le extends oe{}class De extends Le{}class Ne extends Le{async _call(e){return new Mp(await super._call(e))}}class Be extends Le{async _call(e){return new wp(await super._call(e))}}class $e extends Le{async _call(e){return new yp(await super._call(e))}}class Ve extends Le{async _call(e){return new Tp(await super._call(e))}}class je extends oe{}class ze extends je{}class Re extends je{async _call(e){return new Mp(await super._call(e))}}class Ge extends je{async _call(e){return new wp(await super._call(e))}}class Ue extends je{async _call(e){return new yp(await super._call(e))}}class qe extends je{async _call(e){return new Tp(await super._call(e))}}class We extends oe{}class He extends We{}class Xe extends We{async _call(e){return new Mp(await super._call(e))}}class Qe extends We{async _call(e){return new wp(await super._call(e))}}class Ye extends We{async _call(e){return new yp(await super._call(e))}}class Je extends We{async _call(e){return new Tp(await super._call(e))}}class Ze extends oe{}class Ke extends Ze{}class et extends Ze{async _call(e){return new Mp(await super._call(e))}}class tt extends Ze{async _call(e){return new wp(await super._call(e))}}class rt extends Ze{async _call(e){return new yp(await super._call(e))}}class ot extends Ze{async _call(e){return new Tp(await super._call(e))}}class nt extends oe{}class st extends nt{}class at extends nt{async _call(e){return new Mp(await super._call(e))}}class it extends nt{async _call(e){return new wp(await super._call(e))}}class lt extends nt{async _call(e){return new yp(await super._call(e))}}class ct extends nt{async _call(e){return new Tp(await super._call(e))}}class _t extends oe{}class pt extends _t{}class ut extends _t{async _call(e){return new wp(await super._call(e))}}class dt extends _t{async _call(e){return new yp(await super._call(e))}}class ht extends _t{async _call(e){return new Tp(await super._call(e))}}class ft extends _t{async _call(e){return new Mp(await super._call(e))}}class mt extends oe{}class gt extends mt{}class bt extends mt{async _call(e){return new Mp(await super._call(e))}}class wt extends mt{async _call(e){return new wp(await super._call(e))}}class xt extends mt{async _call(e){return new yp(await super._call(e))}}class yt extends oe{}class Mt extends yt{}class Tt extends yt{async _call(e){return new Mp(await super._call(e))}}class kt extends yt{async _call(e){return new wp(await super._call(e))}}class vt extends yt{async _call(e){return new Tp(await super._call(e))}}class Pt extends oe{}class St extends Pt{}class Ft extends Pt{async _call(e){return new Mp(await super._call(e))}}class Ct extends Pt{async _call(e){return new wp(await super._call(e))}}class Et extends Pt{async _call(e){return new yp(await super._call(e))}}class At extends Pt{async _call(e){return new Tp(await super._call(e))}}class It extends oe{}class Ot extends It{}class Lt extends It{async _call(e){return new Mp(await super._call(e))}}class Dt extends It{async _call(e){return new wp(await super._call(e))}}class Nt extends It{async _call(e){return new Tp(await super._call(e))}}class Bt extends oe{}class $t extends Bt{}class Vt extends Bt{async _call(e){return new wp(await super._call(e))}}class jt extends Bt{async _call(e){return new Tp(await super._call(e))}}class zt extends Bt{async _call(e){return new Mp(await super._call(e))}}class Rt extends oe{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"]}class Gt extends Rt{}class Ut extends Rt{}class qt extends oe{}class Wt extends qt{}class Ht extends qt{}class Xt extends oe{}class Qt extends Xt{}class Yt extends Xt{}class Jt extends oe{}class Zt extends Jt{}class Kt extends Jt{}class er extends Jt{async _call(e){return new wp(await super._call(e))}}class tr extends oe{}class rr extends tr{}class or extends tr{}class nr extends tr{async _call(e){return new wp(await super._call(e))}}class sr extends tr{}class ar extends oe{}class ir extends ar{}class lr extends ar{}class cr extends oe{}class _r extends cr{}class pr extends cr{}class ur extends oe{}class dr extends ur{}class hr extends ur{async _call(e){return new Mp(await super._call(e))}}class fr extends ur{async _call(e){return new wp(await super._call(e))}}class mr extends ur{async _call(e){return new yp(await super._call(e))}}class gr extends ur{async _call(e){return new Tp(await super._call(e))}}class br extends oe{}class wr extends br{}class xr extends br{async _call(e){return new Mp(await super._call(e))}}class yr extends br{async _call(e){return new wp(await super._call(e))}}class Mr extends br{async _call(e){return new yp(await super._call(e))}}class Tr extends br{async _call(e){return new Tp(await super._call(e))}}class kr extends oe{}class vr extends kr{}class Pr extends kr{async _call(e){return new Mp(await super._call(e))}}class Sr extends kr{async _call(e){return new wp(await super._call(e))}}class Fr extends kr{async _call(e){return new yp(await super._call(e))}}class Cr extends kr{async _call(e){return new Tp(await super._call(e))}}class Er extends oe{}class Ar extends Er{}class Ir extends Er{}class Or extends oe{requires_attention_mask=!1;main_input_name="input_features";forward_params=["input_features","attention_mask","decoder_input_ids","decoder_attention_mask","past_key_values"]}class Lr extends Or{}class Dr extends Or{_prepare_generation_config(e,t){return super._prepare_generation_config(e,t,b.WhisperGenerationConfig)}_retrieve_init_tokens(e){const t=[e.decoder_start_token_id];let r=e.language;const o=e.task;if(e.is_multilingual){r||(console.warn("No language specified - defaulting to English (en)."),r="en");const n=`<|${(0,w.whisper_language_to_code)(r)}|>`;t.push(e.lang_to_id[n]),t.push(e.task_to_id[o??"transcribe"])}else if(r||o)throw new Error("Cannot specify `task` or `language` for an English-only model. If the model is intended to be multilingual, pass `is_multilingual=true` to generate, or update the generation config.");return!e.return_timestamps&&e.no_timestamps_token_id&&t.at(-1)!==e.no_timestamps_token_id?t.push(e.no_timestamps_token_id):e.return_timestamps&&t.at(-1)===e.no_timestamps_token_id&&(console.warn("<|notimestamps|> prompt token is removed from generation_config since `return_timestamps` is set to `true`."),t.pop()),t.filter(e=>null!=e)}async generate({inputs:e=null,generation_config:t=null,logits_processor:r=null,stopping_criteria:o=null,...n}){t=this._prepare_generation_config(t,n);const s=n.decoder_input_ids??this._retrieve_init_tokens(t);if(t.return_timestamps&&(r??=new _.LogitsProcessorList,r.push(new _.WhisperTimeStampLogitsProcessor(t,s))),t.begin_suppress_tokens&&(r??=new _.LogitsProcessorList,r.push(new _.SuppressTokensAtBeginLogitsProcessor(t.begin_suppress_tokens,s.length))),t.return_token_timestamps){if(!t.alignment_heads)throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");"translate"===t.task&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),t.output_attentions=!0,t.return_dict_in_generate=!0}const a=await super.generate({inputs:e,generation_config:t,logits_processor:r,decoder_input_ids:s,...n});return t.return_token_timestamps&&(a.token_timestamps=this._extract_token_timestamps(a,t.alignment_heads,t.num_frames)),a}_extract_token_timestamps(e,t,r=null,o=.02){if(!e.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");null==r&&console.warn("`num_frames` has not been set, meaning the entire audio will be analyzed. This may lead to inaccurate token-level timestamps for short audios (< 30 seconds).");let n=this.config.median_filter_width;void 0===n&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),n=7);const s=e.cross_attentions,a=Array.from({length:this.config.decoder_layers},(e,t)=>(0,u.cat)(s.map(e=>e[t]),2)),l=(0,u.stack)(t.map(([e,t])=>{if(e>=a.length)throw new Error(`Layer index ${e} is out of bounds for cross attentions (length ${a.length}).`);return r?a[e].slice(null,t,null,[0,r]):a[e].slice(null,t)})).transpose(1,0,2,3),[c,_]=(0,u.std_mean)(l,-2,0,!0),p=l.clone();for(let e=0;e<p.dims[0];++e){const t=p[e];for(let r=0;r<t.dims[0];++r){const o=t[r],s=c[e][r][0].data,a=_[e][r][0].data;for(let e=0;e<o.dims[0];++e){let t=o[e].data;for(let e=0;e<t.length;++e)t[e]=(t[e]-a[e])/s[e];t.set((0,h.medianFilter)(t,n))}}}const d=[(0,u.mean)(p,1)],f=e.sequences.dims,m=new u.Tensor("float32",new Float32Array(f[0]*f[1]),f);for(let e=0;e<f[0];++e){const t=d[e].neg().squeeze_(0),[r,n]=(0,h.dynamic_time_warping)(t.tolist()),s=Array.from({length:r.length-1},(e,t)=>r[t+1]-r[t]),a=(0,i.mergeArrays)([1],s).map(e=>!!e),l=[];for(let e=0;e<a.length;++e)a[e]&&l.push(n[e]*o);m[e].data.set(l,1)}return m}}class Nr extends Dr{}class Br extends oe{requires_attention_mask=!1;main_input_name="input_values";forward_params=["input_values","decoder_input_ids","past_key_values"]}class $r extends Br{}class Vr extends Br{}class jr extends oe{main_input_name="pixel_values";forward_params=["pixel_values","decoder_input_ids","encoder_hidden_states","past_key_values"]}class zr extends oe{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class Rr extends zr{_merge_input_ids_with_image_features(e){const t=e.image_features.dims.at(-1),r=e.image_features.view(-1,t);return H({image_token_id:this.config.image_token_index,...e,image_features:r})}}class Gr extends Rr{}class Ur extends Rr{}class qr extends oe{forward_params=["input_ids","inputs_embeds","attention_mask","pixel_values","encoder_outputs","decoder_input_ids","decoder_inputs_embeds","decoder_attention_mask","past_key_values"];main_input_name="inputs_embeds"}class Wr extends qr{_merge_input_ids_with_image_features({inputs_embeds:e,image_features:t,input_ids:r,attention_mask:o}){return{inputs_embeds:(0,u.cat)([t,e],1),attention_mask:(0,u.cat)([(0,u.ones)(t.dims.slice(0,2)),o],1)}}async _prepare_inputs_embeds({input_ids:e,pixel_values:t,inputs_embeds:r,attention_mask:o}){if(!e&&!t)throw new Error("Either `input_ids` or `pixel_values` should be provided.");let n,s;return e&&(n=await this.encode_text({input_ids:e})),t&&(s=await this.encode_image({pixel_values:t})),n&&s?({inputs_embeds:r,attention_mask:o}=this._merge_input_ids_with_image_features({inputs_embeds:n,image_features:s,input_ids:e,attention_mask:o})):r=n||s,{inputs_embeds:r,attention_mask:o}}async forward({input_ids:e,pixel_values:t,attention_mask:r,decoder_input_ids:o,decoder_attention_mask:n,encoder_outputs:s,past_key_values:a,inputs_embeds:i,decoder_inputs_embeds:l}){if(i||({inputs_embeds:i,attention_mask:r}=await this._prepare_inputs_embeds({input_ids:e,pixel_values:t,inputs_embeds:i,attention_mask:r})),!s){let{last_hidden_state:e}=await G(this,{inputs_embeds:i,attention_mask:r});s=e}if(!l){if(!o)throw new Error("Either `decoder_input_ids` or `decoder_inputs_embeds` should be provided.");l=await this.encode_text({input_ids:o})}const c={inputs_embeds:l,attention_mask:n,encoder_attention_mask:r,encoder_hidden_states:s,past_key_values:a};return await q(this,c,!0)}}class Hr extends oe{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class Xr extends Hr{_merge_input_ids_with_image_features(e){const t=e.image_features.dims.at(-1),r=e.image_features.view(-1,t);return H({image_token_id:this.config.image_token_index,...e,image_features:r})}}class Qr extends zr{_merge_input_ids_with_image_features(e){const t=e.image_features.dims.at(-1),r=e.image_features.view(-1,t);return H({image_token_id:this.config.image_token_index,...e,image_features:r})}}class Yr extends oe{forward_params=["input_ids","attention_mask","inputs_embeds","per_layer_inputs","position_ids","pixel_values","input_features","input_features_mask","past_key_values"]}class Jr extends Yr{async forward({input_ids:e=null,attention_mask:t=null,pixel_values:r=null,input_features:o=null,input_features_mask:n=null,position_ids:s=null,inputs_embeds:a=null,per_layer_inputs:i=null,past_key_values:l=null,generation_config:c=null,logits_processor:_=null,...p}){if(!(a&&i||(({inputs_embeds:a,per_layer_inputs:i}=await $(this.sessions.embed_tokens,{input_ids:e})),1===e.dims[1]))){if(r){const{image_features:o}=await $(this.sessions.vision_encoder,{pixel_values:r});({inputs_embeds:a,attention_mask:t}=this._merge_input_ids_with_image_features({image_features:o,inputs_embeds:a,input_ids:e,attention_mask:t}))}if(o){const{audio_features:r}=await $(this.sessions.audio_encoder,{input_features:o,input_features_mask:n});({inputs_embeds:a,attention_mask:t}=this._merge_input_ids_with_audio_features({audio_features:r,inputs_embeds:a,input_ids:e,attention_mask:t}))}}return await q(this,{inputs_embeds:a,per_layer_inputs:i,past_key_values:l,attention_mask:t,position_ids:s,generation_config:c,logits_processor:_},!0)}_merge_input_ids_with_image_features(e){const t=e.image_features.dims.at(-1),r=e.image_features.view(-1,t);return H({image_token_id:this.config.image_token_id,...e,image_features:r})}_merge_input_ids_with_audio_features(e){const t=e.audio_features.dims.at(-1),r=e.audio_features.view(-1,t);return X({audio_token_id:this.config.audio_token_id,...e,audio_features:r})}}class Zr extends oe{forward_params=["input_ids","attention_mask","pixel_values","pixel_attention_mask","position_ids","past_key_values"]}class Kr extends Zr{async encode_image({pixel_values:e,pixel_attention_mask:t}){return(await $(this.sessions.vision_encoder,{pixel_values:e,pixel_attention_mask:t})).image_features}_merge_input_ids_with_image_features(e){const t=e.image_features.dims.at(-1),r=e.image_features.view(-1,t);return H({image_token_id:this.config.image_token_id,...e,image_features:r})}}class eo extends Kr{}class to extends oe{forward_params=["input_ids","inputs_embeds","attention_mask","position_ids","pixel_values","image_sizes","past_key_values"]}class ro extends to{async forward({input_ids:e=null,attention_mask:t=null,pixel_values:r=null,image_sizes:o=null,position_ids:n=null,inputs_embeds:s=null,past_key_values:a=null,generation_config:i=null,logits_processor:l=null,...c}){if(!s){let t;if(r&&1!==e.dims[1]){if(!o)throw new Error("`image_sizes` must be provided when `pixel_values` is provided.");({image_features:t}=await $(this.sessions.vision_encoder,{pixel_values:r,image_sizes:o}))}else{const e=this.config.normalized_config.hidden_size;t=new u.Tensor("float32",[],[0,e])}({inputs_embeds:s}=await $(this.sessions.prepare_inputs_embeds,{input_ids:e,image_features:t}))}return await q(this,{inputs_embeds:s,past_key_values:a,attention_mask:t,position_ids:n,generation_config:i,logits_processor:l},!1)}}class oo extends oe{}class no extends oo{}class so extends oo{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"text_model"})}}class ao extends oo{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"text_model"})}}class io extends oo{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"vision_model"})}}class lo extends oo{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"vision_model"})}}class co extends oe{}class _o extends co{}class po extends co{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"text_model"})}}class uo extends oo{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"vision_model"})}}class ho extends oe{}class fo extends ho{}class mo extends oe{}class go extends mo{async forward(e){const t=!e.input_ids,r=!e.pixel_values;if(t&&r)throw new Error("Either `input_ids` or `pixel_values` should be provided.");if(t&&(e.input_ids=(0,u.ones)([e.pixel_values.dims[0],1])),r){const{image_size:t}=this.config.vision_config;e.pixel_values=(0,u.full)([0,3,t,t],0)}const{text_embeddings:o,image_embeddings:n,l2norm_text_embeddings:s,l2norm_image_embeddings:a}=await super.forward(e),i={};return t||(i.text_embeddings=o,i.l2norm_text_embeddings=s),r||(i.image_embeddings=n,i.l2norm_image_embeddings=a),i}}class bo extends mo{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"text_model"})}}class wo extends mo{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"vision_model"})}}class xo extends oe{}class yo extends xo{}class Mo extends xo{}class To extends oe{}class ko extends To{}class vo extends To{}class Po extends oe{}class So extends Po{}class Fo extends Po{}class Co extends oe{}class Eo extends Co{}class Ao extends Co{}class Io extends oe{}class Oo extends Io{}class Lo extends Io{}class Do extends oe{}class No extends Do{}class Bo extends Do{}class $o extends oe{}class Vo extends $o{}class jo extends $o{}class zo extends oe{}class Ro extends zo{}class Go extends zo{}class Uo extends oe{}class qo extends Uo{}class Wo extends Uo{}class Ho extends oe{}class Xo extends Ho{}class Qo extends oe{}class Yo extends Qo{}class Jo extends Qo{}class Zo extends oe{}class Ko extends Zo{}class en extends Zo{}class tn extends oe{}class rn extends tn{}class on extends tn{}class nn extends oe{}class sn extends nn{}class an extends nn{}class ln extends oe{}class cn extends ln{}class _n extends ln{}class pn extends oe{}class un extends pn{}class dn extends pn{}class hn extends oe{}class fn extends hn{}class mn extends hn{}class gn extends oe{}class bn extends gn{}class wn extends gn{}class xn extends oe{}class yn extends xn{}class Mn extends xn{}class Tn extends oe{}class kn extends Tn{}class vn extends Tn{}class Pn extends oe{}class Sn extends Pn{}class Fn extends Pn{}class Cn extends oe{}class En extends Cn{}class An extends Cn{}class In extends oe{}class On extends In{}class Ln extends In{}class Dn extends oe{}class Nn extends Dn{}class Bn extends Dn{}class $n extends oe{}class Vn extends $n{}class jn extends $n{}class zn extends oe{}class Rn extends zn{}class Gn extends zn{}class Un extends oe{}class qn extends Un{}class Wn extends Un{}class Hn extends oe{}class Xn extends Hn{}class Qn extends Hn{}class Yn extends oe{}class Jn extends Yn{}class Zn extends Yn{}class Kn extends oe{forward_params=["input_ids","attention_mask","position_ids","past_key_values","pixel_values","image_grid_thw"]}class es extends Kn{get_rope_index(e,t,r,o){const{vision_config:n,image_token_id:s,video_token_id:a,vision_start_token_id:i}=this.config,l=n.spatial_merge_size??2,c=[];if(t||r){let n=e.tolist();o||(o=(0,u.ones_like)(e));const _=o.tolist(),p=Array.from({length:3},t=>Array.from({length:e.dims[0]},t=>Array.from({length:e.dims[1]},e=>1))),d=t?t.tolist():[],f=r?r.tolist():[];let m=0,g=0;for(let e=0;e<n.length;++e){const t=n[e].filter((t,r)=>1==_[e][r]),r=t.reduce((e,t,r)=>(t==i&&e.push(r),e),[]).map(e=>t[e+1]),o=r.filter(e=>e==s).length,u=r.filter(e=>e==a).length;let b=[],w=0,x=o,y=u;for(let e=0;e<r.length;++e){const e=t.findIndex((e,t)=>t>w&&e==s),r=t.findIndex((e,t)=>t>w&&e==a),o=x>0&&-1!==e?e:t.length+1,n=y>0&&-1!==r?r:t.length+1;let i,c,_,p;o<n?([c,_,p]=d[m],++m,--x,i=o):([c,_,p]=f[g],++g,--y,i=n);const[u,M,T]=[Number(c),Math.floor(Number(_)/l),Math.floor(Number(p)/l)],k=i-w,v=b.length>0?(0,h.max)(b.at(-1))[0]+1:0;b.push(Array.from({length:3*k},(e,t)=>v+t%k));const P=k+v,S=u*M*T,F=Array.from({length:S},(e,t)=>P+Math.floor(t/(M*T))),C=Array.from({length:S},(e,t)=>P+Math.floor(t/T)%M),E=Array.from({length:S},(e,t)=>P+t%T);b.push([F,C,E].flat()),w=i+S}if(w<t.length){const e=b.length>0?(0,h.max)(b.at(-1))[0]+1:0,r=t.length-w;b.push(Array.from({length:3*r},(t,o)=>e+o%r))}const M=b.reduce((e,t)=>e+t.length,0),T=new Array(M);let k=0;for(let e=0;e<3;++e)for(let t=0;t<b.length;++t){const r=b[t],o=r.length/3;for(let t=e*o;t<(e+1)*o;++t)T[k++]=r[t]}let v=0;const P=_[e];for(let t=0;t<P.length;++t)if(1==P[t]){for(let r=0;r<3;++r)p[r][e][t]=T[r*M/3+v];++v}const S=(0,h.max)(T)[0];c.push(S+1-n[e].length)}return[new u.Tensor("int64",p.flat(1/0),[3,e.dims[0],e.dims[1]]),new u.Tensor("int64",c,[c.length,1])]}if(o){const{data:e,dims:t}=Z(o),r=BigInt64Array.from({length:3*e.length},(t,r)=>e[r%e.length]),n=Array.from({length:t[0]},(r,o)=>(0,h.max)(e.subarray(t[1]*o,t[1]*(o+1)))[0]+1n+BigInt(t[1]));return[new u.Tensor("int64",r,[3,...t]),new u.Tensor("int64",n,[n.length,1])]}{const[t,r]=e.dims,o=BigInt64Array.from({length:3*t*r},(e,o)=>BigInt(Math.floor(o%r/t)));return[new u.Tensor("int64",o,[3,...e.dims]),(0,u.zeros)([t,1])]}}async encode_image({pixel_values:e,image_grid_thw:t}){return(await $(this.sessions.vision_encoder,{pixel_values:e,grid_thw:t})).image_features}_merge_input_ids_with_image_features(e){return H({image_token_id:this.config.image_token_id,...e})}prepare_inputs_for_generation(e,t,r){if(t.attention_mask&&!t.position_ids)if(t.past_key_values){t.pixel_values=null;const e=BigInt(Object.values(t.past_key_values)[0].dims.at(-2)),r=t.rope_deltas.map(t=>e+t);t.position_ids=(0,u.stack)([r,r,r],0)}else[t.position_ids,t.rope_deltas]=this.get_rope_index(t.input_ids,t.image_grid_thw,t.video_grid_thw,t.attention_mask);return t}}class ts extends oe{}class rs extends ts{}class os extends ts{}class ns extends oe{}class ss extends ns{}class as extends ns{}class is extends oe{}class ls extends is{}class cs extends is{}class _s extends oe{}class ps extends _s{}class us extends _s{}class ds extends oe{}class hs extends ds{}class fs extends ds{}class ms extends oe{}class gs extends ms{}class bs extends ms{async _call(e){return new wp(await super._call(e))}}class ws extends oe{}class xs extends ws{}class ys extends ws{async _call(e){return new wp(await super._call(e))}}class Ms extends oe{}class Ts extends Ms{}class ks extends oe{}class vs extends ks{}class Ps extends ks{async _call(e){return new wp(await super._call(e))}}class Ss extends oe{}class Fs extends Ss{}class Cs extends oe{}class Es extends Cs{}class As extends Cs{async _call(e){return new wp(await super._call(e))}}class Is extends oe{}class Os extends Is{}class Ls extends oe{}class Ds extends Ls{}class Ns extends Ls{async _call(e){return new wp(await super._call(e))}}class Bs extends oe{}class $s extends Bs{async _call(e){return new Pp(await super._call(e))}}class Vs extends oe{}class js extends Vs{}class zs extends Vs{async _call(e){return new wp(await super._call(e))}}class Rs extends oe{}class Gs extends Rs{}class Us extends Rs{async _call(e){return new wp(await super._call(e))}}class qs extends oe{}class Ws extends qs{}class Hs extends qs{}class Xs extends oe{}class Qs extends Xs{}class Ys extends Xs{}class Js extends oe{}class Zs extends Js{}class Ks extends Js{async _call(e){return new wp(await super._call(e))}}class ea extends oe{}class ta extends ea{}class ra extends ea{async _call(e){return new na(await super._call(e))}}class oa extends ea{async _call(e){return new sa(await super._call(e))}}class na extends ne{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class sa extends ne{constructor({logits:e,pred_boxes:t,pred_masks:r}){super(),this.logits=e,this.pred_boxes=t,this.pred_masks=r}}class aa extends oe{}class ia extends aa{}class la extends aa{async _call(e){return new ca(await super._call(e))}}class ca extends ne{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class _a extends oe{}class pa extends _a{}class ua extends _a{async _call(e){return new da(await super._call(e))}}class da extends ca{}class ha extends oe{}class fa extends ha{}class ma extends ha{async _call(e){return new ga(await super._call(e))}}class ga extends ca{}class ba extends oe{}class wa extends ba{}class xa extends ba{async _call(e){return new ca(await super._call(e))}}class ya extends oe{}class Ma extends ya{}class Ta extends ya{async _call(e){return new ka(await super._call(e))}}class ka extends na{}class va extends oe{}class Pa extends va{}class Sa extends va{async _call(e){return new wp(await super._call(e))}}class Fa extends oe{}class Ca extends Fa{}class Ea extends Fa{async _call(e){return new wp(await super._call(e))}}class Aa extends oe{}class Ia extends Aa{}class Oa extends Aa{async _call(e){return new wp(await super._call(e))}}class La extends oe{}class Da extends La{}class Na extends La{async _call(e){return new wp(await super._call(e))}}class Ba extends La{}class $a extends oe{}class Va extends $a{}class ja extends $a{}class za extends oe{}class Ra extends za{}class Ga extends za{}class Ua extends oe{}class qa extends Ua{}class Wa extends oe{}class Ha extends Wa{}class Xa extends Wa{}class Qa extends Wa{}class Ya extends oe{}class Ja extends Ya{}class Za extends oe{}class Ka extends Za{}class ei extends oe{}class ti extends ei{}class ri extends oe{}class oi extends ri{}class ni extends ri{}class si extends oe{}class ai extends si{}class ii extends si{}class li extends oe{}class ci extends li{}class _i extends oe{}class pi extends _i{}class ui extends _i{async _call(e){return new wp(await super._call(e))}}class di extends oe{}class hi extends di{}class fi extends di{async _call(e){return new wp(await super._call(e))}}class mi extends oe{}class gi extends mi{}class bi extends mi{async _call(e){return new wp(await super._call(e))}}class wi extends oe{}class xi extends wi{}class yi extends wi{async _call(e){return new wp(await super._call(e))}}class Mi extends oe{}class Ti extends Mi{}class ki extends oe{}class vi extends ki{}class Pi extends oe{}class Si extends Pi{}class Fi extends oe{}class Ci extends Fi{}class Ei extends Fi{async _call(e){return new Ai(await super._call(e))}}class Ai extends ne{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class Ii extends oe{}class Oi extends Ii{async get_image_embeddings({pixel_values:e}){return await G(this,{pixel_values:e})}async forward(e){if(e.image_embeddings&&e.image_positional_embeddings||(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels&&e.input_points){const t=e.input_points.dims.slice(0,-1),r=t.reduce((e,t)=>e*t,1);e.input_labels=new u.Tensor("int64",new BigInt64Array(r).fill(1n),t)}const t={image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings};return e.input_points&&(t.input_points=e.input_points),e.input_labels&&(t.input_labels=e.input_labels),e.input_boxes&&(t.input_boxes=e.input_boxes),await $(this.sessions.prompt_encoder_mask_decoder,t)}async _call(e){return new Li(await super._call(e))}}class Li extends ne{constructor({iou_scores:e,pred_masks:t}){super(),this.iou_scores=e,this.pred_masks=t}}class Di extends oe{}class Ni extends Di{}class Bi extends Di{}class $i extends oe{}class Vi extends $i{}class ji extends $i{}class zi extends oe{}class Ri extends zi{}class Gi extends zi{async _call(e){return new kp(await super._call(e))}}class Ui extends zi{async _call(e){return new wp(await super._call(e))}}class qi extends zi{async _call(e){return new yp(await super._call(e))}}class Wi extends oe{}class Hi extends Wi{}class Xi extends Wi{async _call(e){return new yp(await super._call(e))}}class Qi extends oe{}class Yi extends Qi{}class Ji extends oe{}class Zi extends Ji{}class Ki extends Ji{async _call(e){return new kp(await super._call(e))}}class el extends Ji{async _call(e){return new wp(await super._call(e))}}class tl extends oe{}class rl extends tl{}class ol extends tl{async _call(e){return new kp(await super._call(e))}}class nl extends tl{async _call(e){return new wp(await super._call(e))}}class sl extends tl{async _call(e){return new yp(await super._call(e))}}class al extends oe{}class il extends al{}class ll extends al{async _call(e){return new kp(await super._call(e))}}class cl extends al{async _call(e){return new wp(await super._call(e))}}class _l extends oe{}class pl extends zi{}class ul extends zi{async _call(e){return new kp(await super._call(e))}}class dl extends zi{async _call(e){return new wp(await super._call(e))}}class hl extends oe{}class fl extends hl{}class ml extends hl{async _call(e){return new kp(await super._call(e))}}class gl extends hl{async _call(e){return new wp(await super._call(e))}}class bl extends hl{async _call(e){return new xp(await super._call(e))}}class wl extends hl{async _call(e){return new yp(await super._call(e))}}class xl extends oe{}class yl extends xl{}class Ml extends oe{}class Tl extends Ml{}class kl extends Ml{}class vl extends Ml{async generate_speech(e,t,{threshold:r=.5,minlenratio:o=0,maxlenratio:n=20,vocoder:s=null}={}){const a={input_ids:e},{encoder_outputs:i,encoder_attention_mask:l}=await G(this,a),c=i.dims[1]/this.config.reduction_factor,_=Math.floor(c*n),p=Math.floor(c*o),d=this.config.num_mel_bins;let h=[],f=null,m=null,g=0;for(;;){++g;const e=z(!!m);let o;o=m?m.output_sequence_out:new u.Tensor("float32",new Float32Array(d),[1,1,d]);let n={use_cache_branch:e,output_sequence:o,encoder_attention_mask:l,speaker_embeddings:t,encoder_hidden_states:i};this.addPastKeyValues(n,f),m=await $(this.sessions.decoder_model_merged,n),f=this.getPastKeyValues(m,f);const{prob:s,spectrum:a}=m;if(h.push(a),g>=p&&(Array.from(s.data).filter(e=>e>=r).length>0||g>=_))break}const b=(0,u.cat)(h),{waveform:w}=await $(s.sessions.model,{spectrogram:b});return{spectrogram:b,waveform:w}}}class Pl extends oe{main_input_name="spectrogram"}class Sl extends oe{}class Fl extends Sl{}class Cl extends oe{}class El extends Cl{}class Al extends Cl{}class Il extends oe{}class Ol extends Il{}class Ll extends Il{}class Dl extends oe{}class Nl extends Dl{}class Bl extends Dl{}class $l extends oe{}class Vl extends $l{}class jl extends $l{}class zl extends oe{}class Rl extends zl{}class Gl extends zl{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"text_model"})}}class Ul extends zl{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"audio_model"})}}class ql extends oe{}class Wl extends ql{async _call(e){return new Sp(await super._call(e))}}class Hl extends oe{}class Xl extends Hl{}class Ql extends Hl{}class Yl extends Hl{}class Jl extends oe{}class Zl extends Jl{}class Kl extends Jl{}class ec extends oe{}class tc extends ec{}class rc extends ec{async _call(e){return new wp(await super._call(e))}}class oc extends oe{}class nc extends oc{}class sc extends oc{}class ac extends oe{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"];_apply_and_filter_by_delay_pattern_mask(e){const[t,r]=e.dims,o=this.config.decoder.num_codebooks,n=r-o;let s=0;for(let t=0;t<e.size;++t){if(e.data[t]===this.config.decoder.pad_token_id)continue;const a=t%r-Math.floor(t/r)%o;a>0&&a<=n&&(e.data[s++]=e.data[t])}const a=Math.floor(t/o),i=s/(a*o);return new u.Tensor(e.type,e.data.slice(0,s),[a,o,i])}prepare_inputs_for_generation(e,t,r){let o=structuredClone(e);for(let e=0;e<o.length;++e)for(let t=0;t<o[e].length;++t)e%this.config.decoder.num_codebooks>=t&&(o[e][t]=BigInt(this.config.decoder.pad_token_id));null!==r.guidance_scale&&r.guidance_scale>1&&(o=o.concat(o));return super.prepare_inputs_for_generation(o,t,r)}async generate(e){const t=await super.generate(e),r=this._apply_and_filter_by_delay_pattern_mask(t).unsqueeze_(0),{audio_values:o}=await $(this.sessions.encodec_decode,{audio_codes:r});return o}}class ic extends oe{}class lc extends ic{}class cc extends ic{async _call(e){return new wp(await super._call(e))}}class _c extends ic{}class pc extends oe{}class uc extends pc{}class dc extends pc{async _call(e){return new wp(await super._call(e))}}class hc extends pc{}class fc extends oe{}class mc extends fc{}class gc extends fc{async _call(e){return new wp(await super._call(e))}}class bc extends fc{}class wc extends oe{}class xc extends wc{}class yc extends wc{async _call(e){return new wp(await super._call(e))}}class Mc extends wc{}class Tc extends oe{}class kc extends Tc{}class vc extends oe{}class Pc extends vc{forward_params=["input_ids","pixel_values","images_seq_mask","images_emb_mask","attention_mask","position_ids","past_key_values"];constructor(...e){super(...e),this._generation_mode="text"}async forward(e){const t=this._generation_mode??"text";let r;if("text"!==t&&e.past_key_values){const t=this.sessions.gen_img_embeds,o=(0,i.pick)({image_ids:e.input_ids},t.inputNames);r=await $(t,o)}else{const t=this.sessions.prepare_inputs_embeds,o=(0,i.pick)(e,t.inputNames);r=await $(t,o)}const o={...e,...r},n=await q(this,o),s=this.sessions["text"===t?"lm_head":"gen_head"];if(!s)throw new Error(`Unable to find "${s}" generation head`);const a=await $(s,(0,i.pick)(n,s.inputNames));return{...r,...n,...a}}async generate(e){return this._generation_mode="text",super.generate(e)}async generate_images(e){this._generation_mode="image";const t=(e.inputs??e[this.main_input_name]).dims[1],r=(await super.generate(e)).slice(null,[t,null]),o=this.sessions.image_decode,{decoded_image:n}=await $(o,{generated_tokens:r}),s=n.add_(1).mul_(127.5).clamp_(0,255).to("uint8"),a=[];for(const e of s){const t=d.RawImage.fromTensor(e);a.push(t)}return a}}class Sc extends ne{constructor({char_logits:e,bpe_logits:t,wp_logits:r}){super(),this.char_logits=e,this.bpe_logits=t,this.wp_logits=r}get logits(){return[this.char_logits,this.bpe_logits,this.wp_logits]}}class Fc extends oe{}class Cc extends Fc{async _call(e){return new Sc(await super._call(e))}}class Ec extends oe{}class Ac extends Ec{}class Ic extends Ec{}class Oc extends oe{}class Lc extends Oc{}class Dc extends Oc{}class Nc extends oe{forward_params=["input_ids","attention_mask","position_ids","audio_values","past_key_values"]}class Bc extends Nc{_merge_input_ids_with_audio_features(e){const t=e.audio_features.dims.at(-1),r=e.audio_features.view(-1,t);return X({audio_token_id:this.config.ignore_index??this.config.audio_token_id,...e,audio_features:r})}}class $c extends Bc{}class Vc extends oe{main_input_name="input_values";forward_params=["input_values"]}class jc extends ne{constructor({audio_codes:e}){super(),this.audio_codes=e}}class zc extends ne{constructor({audio_values:e}){super(),this.audio_values=e}}class Rc extends Vc{async encode(e){return new jc(await $(this.sessions.encoder_model,e))}async decode(e){return new zc(await $(this.sessions.decoder_model,e))}}class Gc extends Vc{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"encoder_model"})}}class Uc extends Vc{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"decoder_model"})}}class qc extends oe{main_input_name="input_values";forward_params=["input_values"]}class Wc extends ne{constructor({audio_codes:e}){super(),this.audio_codes=e}}class Hc extends ne{constructor({audio_values:e}){super(),this.audio_values=e}}class Xc extends qc{async encode(e){return new Wc(await $(this.sessions.encoder_model,e))}async decode(e){return new Hc(await $(this.sessions.decoder_model,e))}}class Qc extends qc{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"encoder_model"})}}class Yc extends qc{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"decoder_model"})}}class Jc extends oe{main_input_name="input_values";forward_params=["input_values"]}class Zc extends Jc{async encode(e){return await $(this.sessions.encoder_model,e)}async decode(e){return await $(this.sessions.decoder_model,e)}}class Kc extends Jc{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"encoder_model"})}}class e_ extends Jc{static async from_pretrained(e,t={}){return super.from_pretrained(e,{...t,model_file_name:t.model_file_name??"decoder_model"})}}class t_{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:n=null,local_files_only:s=!1,revision:a="main",model_file_name:i=null,subfolder:l="onnx",device:c=null,dtype:_=null,use_external_data_format:p=null,session_options:u={}}={}){const d={progress_callback:t,config:r,cache_dir:n,local_files_only:s,revision:a,model_file_name:i,subfolder:l,device:c,dtype:_,use_external_data_format:p,session_options:u};if(d.config=await o.AutoConfig.from_pretrained(e,d),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);const h=d.config.model_type;for(const t of this.MODEL_CLASS_MAPPINGS){let r=t.get(h);if(!r){for(const e of t.values())if(e[0]===h){r=e;break}if(!r)continue}return await r[1].from_pretrained(e,d)}if(this.BASE_IF_FAIL)return j_.has(h)||console.warn(`Unknown model class "${h}", attempting to construct from base class.`),await oe.from_pretrained(e,d);throw Error(`Unsupported model type: ${h}`)}}const r_=new Map([["bert",["BertModel",ie]],["neobert",["NeoBertModel",de]],["modernbert",["ModernBertModel",we]],["nomic_bert",["NomicBertModel",Se]],["roformer",["RoFormerModel",Ce]],["electra",["ElectraModel",ze]],["esm",["EsmModel",gt]],["convbert",["ConvBertModel",De]],["camembert",["CamembertModel",He]],["deberta",["DebertaModel",Ke]],["deberta-v2",["DebertaV2Model",st]],["mpnet",["MPNetModel",St]],["albert",["AlbertModel",$t]],["distilbert",["DistilBertModel",pt]],["roberta",["RobertaModel",dr]],["xlm",["XLMModel",wr]],["xlm-roberta",["XLMRobertaModel",vr]],["clap",["ClapModel",Rl]],["clip",["CLIPModel",no]],["clipseg",["CLIPSegModel",yo]],["chinese_clip",["ChineseCLIPModel",fo]],["siglip",["SiglipModel",_o]],["jina_clip",["JinaCLIPModel",go]],["mobilebert",["MobileBertModel",Mt]],["squeezebert",["SqueezeBertModel",Ot]],["wav2vec2",["Wav2Vec2Model",Ri]],["wav2vec2-bert",["Wav2Vec2BertModel",il]],["unispeech",["UniSpeechModel",Zi]],["unispeech-sat",["UniSpeechSatModel",rl]],["hubert",["HubertModel",pl]],["wavlm",["WavLMModel",fl]],["audio-spectrogram-transformer",["ASTModel",Ar]],["vits",["VitsModel",Wl]],["pyannote",["PyAnnoteModel",Hi]],["wespeaker-resnet",["WeSpeakerResNetModel",Yi]],["detr",["DetrModel",ta]],["rt_detr",["RTDetrModel",ia]],["rt_detr_v2",["RTDetrV2Model",pa]],["rf_detr",["RFDetrModel",fa]],["d_fine",["DFineModel",wa]],["table-transformer",["TableTransformerModel",Ma]],["vit",["ViTModel",gs]],["ijepa",["IJepaModel",xs]],["pvt",["PvtModel",vs]],["vit_msn",["ViTMSNModel",Es]],["vit_mae",["ViTMAEModel",Fs]],["groupvit",["GroupViTModel",Os]],["fastvit",["FastViTModel",Ds]],["mobilevit",["MobileViTModel",js]],["mobilevitv2",["MobileViTV2Model",Gs]],["owlvit",["OwlViTModel",Ws]],["owlv2",["Owlv2Model",Qs]],["beit",["BeitModel",Zs]],["deit",["DeiTModel",Pa]],["hiera",["HieraModel",Ca]],["convnext",["ConvNextModel",pi]],["convnextv2",["ConvNextV2Model",hi]],["dinov2",["Dinov2Model",gi]],["dinov2_with_registers",["Dinov2WithRegistersModel",xi]],["dinov3_vit",["DINOv3ViTModel",Ti]],["dinov3_convnext",["DINOv3ConvNextModel",vi]],["resnet",["ResNetModel",Ia]],["swin",["SwinModel",Da]],["swin2sr",["Swin2SRModel",Va]],["donut-swin",["DonutSwinModel",ci]],["yolos",["YolosModel",Ci]],["dpt",["DPTModel",Ra]],["glpn",["GLPNModel",ai]],["hifigan",["SpeechT5HifiGan",Pl]],["efficientnet",["EfficientNetModel",tc]],["decision_transformer",["DecisionTransformerModel",kc]],["patchtst",["PatchTSTForPrediction",Ac]],["patchtsmixer",["PatchTSMixerForPrediction",Lc]],["mobilenet_v1",["MobileNetV1Model",lc]],["mobilenet_v2",["MobileNetV2Model",uc]],["mobilenet_v3",["MobileNetV3Model",mc]],["mobilenet_v4",["MobileNetV4Model",xc]],["maskformer",["MaskFormerModel",oi]],["mgp-str",["MgpstrForSceneTextRecognition",Cc]],["style_text_to_speech_2",["StyleTextToSpeech2Model",yl]]]),o_=new Map([["t5",["T5Model",Gt]],["longt5",["LongT5Model",Wt]],["mt5",["MT5Model",Qt]],["bart",["BartModel",Zt]],["mbart",["MBartModel",rr]],["marian",["MarianModel",Ni]],["whisper",["WhisperModel",Lr]],["m2m_100",["M2M100Model",Vi]],["blenderbot",["BlenderbotModel",ir]],["blenderbot-small",["BlenderbotSmallModel",_r]]]),n_=new Map([["mimi",["MimiModel",Rc]],["dac",["DacModel",Xc]],["snac",["SnacModel",Zc]]]),s_=new Map([["bloom",["BloomModel",ls]],["jais",["JAISModel",So]],["gpt2",["GPT2Model",ko]],["gptj",["GPTJModel",No]],["gpt_bigcode",["GPTBigCodeModel",Vo]],["gpt_neo",["GPTNeoModel",Eo]],["gpt_neox",["GPTNeoXModel",Oo]],["codegen",["CodeGenModel",Ro]],["llama",["LlamaModel",qo]],["arcee",["ArceeModel",Yo]],["lfm2",["Lfm2Model",Ko]],["smollm3",["SmolLM3Model",rn]],["exaone",["ExaoneModel",un]],["olmo",["OlmoModel",bn]],["olmo2",["Olmo2Model",yn]],["mobilellm",["MobileLLMModel",fn]],["granite",["GraniteModel",kn]],["granitemoehybrid",["GraniteMoeHybridModel",Sn]],["cohere",["CohereModel",En]],["gemma",["GemmaModel",On]],["gemma2",["Gemma2Model",Nn]],["vaultgemma",["VaultGemmaModel",Vn]],["gemma3_text",["Gemma3Model",Rn]],["helium",["HeliumModel",sn]],["glm",["GlmModel",cn]],["openelm",["OpenELMModel",qn]],["qwen2",["Qwen2Model",Xn]],["qwen3",["Qwen3Model",Jn]],["phi",["PhiModel",rs]],["phi3",["Phi3Model",ss]],["mpt",["MptModel",ps]],["opt",["OPTModel",hs]],["mistral",["MistralModel",El]],["ernie4_5",["Ernie4_5_Model",Ol]],["starcoder2",["Starcoder2Model",Nl]],["falcon",["FalconModel",Vl]],["stablelm",["StableLmModel",Zl]],["modernbert-decoder",["ModernBertDecoderModel",ke]]]),a_=new Map([["speecht5",["SpeechT5ForSpeechToText",kl]],["whisper",["WhisperForConditionalGeneration",Dr]],["lite-whisper",["LiteWhisperForConditionalGeneration",Nr]],["moonshine",["MoonshineForConditionalGeneration",Vr]]]),i_=new Map([["speecht5",["SpeechT5ForTextToSpeech",vl]]]),l_=new Map([["vits",["VitsModel",Wl]],["musicgen",["MusicgenForConditionalGeneration",ac]]]),c_=new Map([["bert",["BertForSequenceClassification",ce]],["neobert",["NeoBertForSequenceClassification",fe]],["modernbert",["ModernBertForSequenceClassification",ye]],["roformer",["RoFormerForSequenceClassification",Ae]],["electra",["ElectraForSequenceClassification",Ge]],["esm",["EsmForSequenceClassification",wt]],["convbert",["ConvBertForSequenceClassification",Be]],["camembert",["CamembertForSequenceClassification",Qe]],["deberta",["DebertaForSequenceClassification",tt]],["deberta-v2",["DebertaV2ForSequenceClassification",it]],["mpnet",["MPNetForSequenceClassification",Ct]],["albert",["AlbertForSequenceClassification",Vt]],["distilbert",["DistilBertForSequenceClassification",ut]],["roberta",["RobertaForSequenceClassification",fr]],["xlm",["XLMForSequenceClassification",yr]],["xlm-roberta",["XLMRobertaForSequenceClassification",Sr]],["bart",["BartForSequenceClassification",er]],["mbart",["MBartForSequenceClassification",nr]],["mobilebert",["MobileBertForSequenceClassification",kt]],["squeezebert",["SqueezeBertForSequenceClassification",Dt]]]),__=new Map([["bert",["BertForTokenClassification",_e]],["neobert",["NeoBertForTokenClassification",me]],["modernbert",["ModernBertForTokenClassification",Me]],["roformer",["RoFormerForTokenClassification",Ie]],["electra",["ElectraForTokenClassification",Ue]],["esm",["EsmForTokenClassification",xt]],["convbert",["ConvBertForTokenClassification",$e]],["camembert",["CamembertForTokenClassification",Ye]],["deberta",["DebertaForTokenClassification",rt]],["deberta-v2",["DebertaV2ForTokenClassification",lt]],["mpnet",["MPNetForTokenClassification",Et]],["distilbert",["DistilBertForTokenClassification",dt]],["roberta",["RobertaForTokenClassification",mr]],["xlm",["XLMForTokenClassification",Mr]],["xlm-roberta",["XLMRobertaForTokenClassification",Fr]]]),p_=new Map([["t5",["T5ForConditionalGeneration",Ut]],["longt5",["LongT5ForConditionalGeneration",Ht]],["mt5",["MT5ForConditionalGeneration",Yt]],["bart",["BartForConditionalGeneration",Kt]],["mbart",["MBartForConditionalGeneration",or]],["marian",["MarianMTModel",Bi]],["m2m_100",["M2M100ForConditionalGeneration",ji]],["blenderbot",["BlenderbotForConditionalGeneration",lr]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",pr]]]),u_=new Map([["bloom",["BloomForCausalLM",cs]],["gpt2",["GPT2LMHeadModel",vo]],["jais",["JAISLMHeadModel",Fo]],["gptj",["GPTJForCausalLM",Bo]],["gpt_bigcode",["GPTBigCodeForCausalLM",jo]],["gpt_neo",["GPTNeoForCausalLM",Ao]],["gpt_neox",["GPTNeoXForCausalLM",Lo]],["codegen",["CodeGenForCausalLM",Go]],["llama",["LlamaForCausalLM",Wo]],["llama4_text",["Llama4ForCausalLM",Xo]],["arcee",["ArceeForCausalLM",Jo]],["lfm2",["Lfm2ForCausalLM",en]],["smollm3",["SmolLM3ForCausalLM",on]],["exaone",["ExaoneForCausalLM",dn]],["olmo",["OlmoForCausalLM",wn]],["olmo2",["Olmo2ForCausalLM",Mn]],["mobilellm",["MobileLLMForCausalLM",mn]],["granite",["GraniteForCausalLM",vn]],["granitemoehybrid",["GraniteMoeHybridForCausalLM",Fn]],["cohere",["CohereForCausalLM",An]],["gemma",["GemmaForCausalLM",Ln]],["gemma2",["Gemma2ForCausalLM",Bn]],["vaultgemma",["VaultGemmaForCausalLM",jn]],["gemma3_text",["Gemma3ForCausalLM",Gn]],["helium",["HeliumForCausalLM",an]],["glm",["GlmForCausalLM",_n]],["openelm",["OpenELMForCausalLM",Wn]],["qwen2",["Qwen2ForCausalLM",Qn]],["qwen3",["Qwen3ForCausalLM",Zn]],["phi",["PhiForCausalLM",os]],["phi3",["Phi3ForCausalLM",as]],["mpt",["MptForCausalLM",us]],["opt",["OPTForCausalLM",fs]],["mbart",["MBartForCausalLM",sr]],["mistral",["MistralForCausalLM",Al]],["ernie4_5",["Ernie4_5_ForCausalLM",Ll]],["starcoder2",["Starcoder2ForCausalLM",Bl]],["falcon",["FalconForCausalLM",jl]],["trocr",["TrOCRForCausalLM",Fl]],["stablelm",["StableLmForCausalLM",Kl]],["modernbert-decoder",["ModernBertDecoderForCausalLM",ve]],["phi3_v",["Phi3VForCausalLM",ro]]]),d_=new Map([["multi_modality",["MultiModalityCausalLM",Pc]]]),h_=new Map([["bert",["BertForMaskedLM",le]],["neobert",["NeoBertForMaskedLM",he]],["modernbert",["ModernBertForMaskedLM",xe]],["roformer",["RoFormerForMaskedLM",Ee]],["electra",["ElectraForMaskedLM",Re]],["esm",["EsmForMaskedLM",bt]],["convbert",["ConvBertForMaskedLM",Ne]],["camembert",["CamembertForMaskedLM",Xe]],["deberta",["DebertaForMaskedLM",et]],["deberta-v2",["DebertaV2ForMaskedLM",at]],["mpnet",["MPNetForMaskedLM",Ft]],["albert",["AlbertForMaskedLM",zt]],["distilbert",["DistilBertForMaskedLM",ft]],["roberta",["RobertaForMaskedLM",hr]],["xlm",["XLMWithLMHeadModel",xr]],["xlm-roberta",["XLMRobertaForMaskedLM",Pr]],["mobilebert",["MobileBertForMaskedLM",Tt]],["squeezebert",["SqueezeBertForMaskedLM",Lt]]]),f_=new Map([["bert",["BertForQuestionAnswering",pe]],["neobert",["NeoBertForQuestionAnswering",ge]],["roformer",["RoFormerForQuestionAnswering",Oe]],["electra",["ElectraForQuestionAnswering",qe]],["convbert",["ConvBertForQuestionAnswering",Ve]],["camembert",["CamembertForQuestionAnswering",Je]],["deberta",["DebertaForQuestionAnswering",ot]],["deberta-v2",["DebertaV2ForQuestionAnswering",ct]],["mpnet",["MPNetForQuestionAnswering",At]],["albert",["AlbertForQuestionAnswering",jt]],["distilbert",["DistilBertForQuestionAnswering",ht]],["roberta",["RobertaForQuestionAnswering",gr]],["xlm",["XLMForQuestionAnswering",Tr]],["xlm-roberta",["XLMRobertaForQuestionAnswering",Cr]],["mobilebert",["MobileBertForQuestionAnswering",vt]],["squeezebert",["SqueezeBertForQuestionAnswering",Nt]]]),m_=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",jr]],["idefics3",["Idefics3ForConditionalGeneration",Kr]],["smolvlm",["SmolVLMForConditionalGeneration",eo]]]),g_=new Map([["llava",["LlavaForConditionalGeneration",Rr]],["llava_onevision",["LlavaOnevisionForConditionalGeneration",Gr]],["moondream1",["Moondream1ForConditionalGeneration",Ur]],["florence2",["Florence2ForConditionalGeneration",Wr]],["qwen2-vl",["Qwen2VLForConditionalGeneration",es]],["idefics3",["Idefics3ForConditionalGeneration",Kr]],["smolvlm",["SmolVLMForConditionalGeneration",eo]],["paligemma",["PaliGemmaForConditionalGeneration",Xr]],["llava_qwen2",["LlavaQwen2ForCausalLM",Qr]],["gemma3n",["Gemma3nForConditionalGeneration",Jr]]]),b_=new Map([["ultravox",["UltravoxModel",Bc]],["voxtral",["VoxtralForConditionalGeneration",$c]]]),w_=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",jr]]]),x_=new Map([["vit",["ViTForImageClassification",bs]],["ijepa",["IJepaForImageClassification",ys]],["pvt",["PvtForImageClassification",Ps]],["vit_msn",["ViTMSNForImageClassification",As]],["fastvit",["FastViTForImageClassification",Ns]],["mobilevit",["MobileViTForImageClassification",zs]],["mobilevitv2",["MobileViTV2ForImageClassification",Us]],["beit",["BeitForImageClassification",Ks]],["deit",["DeiTForImageClassification",Sa]],["hiera",["HieraForImageClassification",Ea]],["convnext",["ConvNextForImageClassification",ui]],["convnextv2",["ConvNextV2ForImageClassification",fi]],["dinov2",["Dinov2ForImageClassification",bi]],["dinov2_with_registers",["Dinov2WithRegistersForImageClassification",yi]],["resnet",["ResNetForImageClassification",Oa]],["swin",["SwinForImageClassification",Na]],["segformer",["SegformerForImageClassification",Ql]],["efficientnet",["EfficientNetForImageClassification",rc]],["mobilenet_v1",["MobileNetV1ForImageClassification",cc]],["mobilenet_v2",["MobileNetV2ForImageClassification",dc]],["mobilenet_v3",["MobileNetV3ForImageClassification",gc]],["mobilenet_v4",["MobileNetV4ForImageClassification",yc]]]),y_=new Map([["detr",["DetrForObjectDetection",ra]],["rt_detr",["RTDetrForObjectDetection",la]],["rt_detr_v2",["RTDetrV2ForObjectDetection",ua]],["rf_detr",["RFDetrForObjectDetection",ma]],["d_fine",["DFineForObjectDetection",xa]],["table-transformer",["TableTransformerForObjectDetection",Ta]],["yolos",["YolosForObjectDetection",Ei]]]),M_=new Map([["owlvit",["OwlViTForObjectDetection",Hs]],["owlv2",["Owlv2ForObjectDetection",Ys]],["grounding-dino",["GroundingDinoForObjectDetection",Si]]]),T_=new Map([["detr",["DetrForSegmentation",oa]],["clipseg",["CLIPSegForImageSegmentation",Mo]]]),k_=new Map([["segformer",["SegformerForSemanticSegmentation",Yl]],["sapiens",["SapiensForSemanticSegmentation",Ha]],["swin",["SwinForSemanticSegmentation",Ba]],["mobilenet_v1",["MobileNetV1ForSemanticSegmentation",_c]],["mobilenet_v2",["MobileNetV2ForSemanticSegmentation",hc]],["mobilenet_v3",["MobileNetV3ForSemanticSegmentation",bc]],["mobilenet_v4",["MobileNetV4ForSemanticSegmentation",Mc]]]),v_=new Map([["detr",["DetrForSegmentation",oa]],["maskformer",["MaskFormerForInstanceSegmentation",ni]]]),P_=new Map([["sam",["SamModel",Oi]]]),S_=new Map([["wav2vec2",["Wav2Vec2ForCTC",Gi]],["wav2vec2-bert",["Wav2Vec2BertForCTC",ll]],["unispeech",["UniSpeechForCTC",Ki]],["unispeech-sat",["UniSpeechSatForCTC",ol]],["wavlm",["WavLMForCTC",ml]],["hubert",["HubertForCTC",ul]]]),F_=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Ui]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",cl]],["unispeech",["UniSpeechForSequenceClassification",el]],["unispeech-sat",["UniSpeechSatForSequenceClassification",nl]],["wavlm",["WavLMForSequenceClassification",gl]],["hubert",["HubertForSequenceClassification",dl]],["audio-spectrogram-transformer",["ASTForAudioClassification",Ir]]]),C_=new Map([["wavlm",["WavLMForXVector",bl]]]),E_=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",sl]],["wavlm",["WavLMForAudioFrameClassification",wl]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",qi]],["pyannote",["PyAnnoteForAudioFrameClassification",Xi]]]),A_=new Map([["vitmatte",["VitMatteForImageMatting",$s]]]),I_=new Map([["patchtst",["PatchTSTForPrediction",Ic]],["patchtsmixer",["PatchTSMixerForPrediction",Dc]]]),O_=new Map([["swin2sr",["Swin2SRForImageSuperResolution",ja]]]),L_=new Map([["dpt",["DPTForDepthEstimation",Ga]],["depth_anything",["DepthAnythingForDepthEstimation",qa]],["glpn",["GLPNForDepthEstimation",ii]],["sapiens",["SapiensForDepthEstimation",Xa]],["depth_pro",["DepthProForDepthEstimation",Ja]],["metric3d",["Metric3DForDepthEstimation",Ka]],["metric3dv2",["Metric3Dv2ForDepthEstimation",ti]]]),D_=new Map([["sapiens",["SapiensForNormalEstimation",Qa]]]),N_=new Map([["vitpose",["VitPoseForPoseEstimation",Ts]]]),B_=new Map([["clip",["CLIPVisionModelWithProjection",lo]],["siglip",["SiglipVisionModel",uo]],["jina_clip",["JinaCLIPVisionModel",wo]]]),$_=[[r_,x],[o_,y],[s_,k],[n_,A],[c_,x],[__,x],[p_,M],[a_,M],[u_,k],[d_,F],[h_,x],[f_,x],[m_,T],[g_,P],[b_,E],[x_,x],[T_,x],[v_,x],[k_,x],[A_,x],[I_,x],[O_,x],[L_,x],[D_,x],[N_,x],[y_,x],[M_,x],[P_,v],[S_,x],[F_,x],[i_,M],[l_,x],[C_,x],[E_,x],[B_,x]];for(const[e,t]of $_)for(const[r,o]of e.values())O.set(r,t),D.set(o,r),L.set(r,o);const V_=[["MusicgenForConditionalGeneration",ac,S],["Phi3VForCausalLM",ro,C],["CLIPTextModelWithProjection",ao,x],["SiglipTextModel",po,x],["JinaCLIPTextModel",bo,x],["ClapTextModelWithProjection",Gl,x],["ClapAudioModelWithProjection",Ul,x],["DacEncoderModel",Qc,x],["DacDecoderModel",Yc,x],["MimiEncoderModel",Gc,x],["MimiDecoderModel",Uc,x],["SnacEncoderModel",Kc,x],["SnacDecoderModel",e_,x],["Gemma3nForConditionalGeneration",Jr,I]];for(const[e,t,r]of V_)O.set(e,r),D.set(t,e),L.set(e,t);const j_=new Map([["modnet",T_],["birefnet",T_],["isnet",T_],["ben",T_]]);for(const[e,t]of j_.entries())t.set(e,["PreTrainedModel",oe]),O.set(e,x),D.set(oe,e),L.set(e,oe);class z_ extends t_{static MODEL_CLASS_MAPPINGS=$_.map(e=>e[0]);static BASE_IF_FAIL=!0}class R_ extends t_{static MODEL_CLASS_MAPPINGS=[c_]}class G_ extends t_{static MODEL_CLASS_MAPPINGS=[__]}class U_ extends t_{static MODEL_CLASS_MAPPINGS=[p_]}class q_ extends t_{static MODEL_CLASS_MAPPINGS=[a_]}class W_ extends t_{static MODEL_CLASS_MAPPINGS=[i_]}class H_ extends t_{static MODEL_CLASS_MAPPINGS=[l_]}class X_ extends t_{static MODEL_CLASS_MAPPINGS=[u_]}class Q_ extends t_{static MODEL_CLASS_MAPPINGS=[h_]}class Y_ extends t_{static MODEL_CLASS_MAPPINGS=[f_]}class J_ extends t_{static MODEL_CLASS_MAPPINGS=[m_]}class Z_ extends t_{static MODEL_CLASS_MAPPINGS=[x_]}class K_ extends t_{static MODEL_CLASS_MAPPINGS=[T_]}class ep extends t_{static MODEL_CLASS_MAPPINGS=[k_]}class tp extends t_{static MODEL_CLASS_MAPPINGS=[v_]}class rp extends t_{static MODEL_CLASS_MAPPINGS=[y_]}class op extends t_{static MODEL_CLASS_MAPPINGS=[M_]}class np extends t_{static MODEL_CLASS_MAPPINGS=[P_]}class sp extends t_{static MODEL_CLASS_MAPPINGS=[S_]}class ap extends t_{static MODEL_CLASS_MAPPINGS=[F_]}class ip extends t_{static MODEL_CLASS_MAPPINGS=[C_]}class lp extends t_{static MODEL_CLASS_MAPPINGS=[E_]}class cp extends t_{static MODEL_CLASS_MAPPINGS=[w_]}class _p extends t_{static MODEL_CLASS_MAPPINGS=[A_]}class pp extends t_{static MODEL_CLASS_MAPPINGS=[O_]}class up extends t_{static MODEL_CLASS_MAPPINGS=[L_]}class dp extends t_{static MODEL_CLASS_MAPPINGS=[D_]}class hp extends t_{static MODEL_CLASS_MAPPINGS=[N_]}class fp extends t_{static MODEL_CLASS_MAPPINGS=[B_]}class mp extends t_{static MODEL_CLASS_MAPPINGS=[g_]}class gp extends t_{static MODEL_CLASS_MAPPINGS=[b_]}class bp extends ne{constructor({logits:e,past_key_values:t,encoder_outputs:r,decoder_attentions:o=null,cross_attentions:n=null}){super(),this.logits=e,this.past_key_values=t,this.encoder_outputs=r,this.decoder_attentions=o,this.cross_attentions=n}}class wp extends ne{constructor({logits:e,...t}){super(),this.logits=e;const r=Object.values(t);r.length>0&&(this.attentions=r)}}class xp extends ne{constructor({logits:e,embeddings:t}){super(),this.logits=e,this.embeddings=t}}class yp extends ne{constructor({logits:e}){super(),this.logits=e}}class Mp extends ne{constructor({logits:e}){super(),this.logits=e}}class Tp extends ne{constructor({start_logits:e,end_logits:t}){super(),this.start_logits=e,this.end_logits=t}}class kp extends ne{constructor({logits:e}){super(),this.logits=e}}class vp extends ne{constructor({logits:e,past_key_values:t}){super(),this.logits=e,this.past_key_values=t}}class Pp extends ne{constructor({alphas:e}){super(),this.alphas=e}}class Sp extends ne{constructor({waveform:e,spectrogram:t}){super(),this.waveform=e,this.spectrogram=t}}},"./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>s});var o=r("./src/base/feature_extraction_utils.js"),n=(r("./src/utils/tensor.js"),r("./src/utils/audio.js"));class s extends o.FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,r=(0,n.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);this.mel_filters=r,this.window=(0,n.window_function)(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}async _extract_fbank_features(e,t){return(0,n.spectrogram)(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1.192092955078125e-7,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e){(0,o.validate_audio_inputs)(e,"ASTFeatureExtractor");const t=await this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){const e=2*this.std,r=t.data;for(let t=0;t<r.length;++t)r[t]=(r[t]-this.mean)/e}return{input_values:t.unsqueeze_(0)}}}},"./src/models/auto/feature_extraction_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoFeatureExtractor:()=>a});var o=r("./src/utils/constants.js"),n=r("./src/utils/hub.js"),s=(r("./src/base/feature_extraction_utils.js"),r("./src/models/feature_extractors.js"));class a{static async from_pretrained(e,t={}){const r=await(0,n.getModelJSON)(e,o.FEATURE_EXTRACTOR_NAME,!0,t),a=r.feature_extractor_type,i=s[a];if(!i)throw new Error(`Unknown feature_extractor_type: '${a}'. Please report this at ${o.GITHUB_ISSUE_URL}.`);return new i(r)}}},"./src/models/auto/image_processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoImageProcessor:()=>i});var o=r("./src/utils/constants.js"),n=r("./src/utils/hub.js"),s=r("./src/base/image_processors_utils.js"),a=r("./src/models/image_processors.js");class i{static async from_pretrained(e,t={}){const r=await(0,n.getModelJSON)(e,o.IMAGE_PROCESSOR_NAME,!0,t),i=r.image_processor_type??r.feature_extractor_type;let l=a[i?.replace(/Fast$/,"")];return l||(void 0!==i&&console.warn(`Image processor type '${i}' not found, assuming base ImageProcessor. Please report this at ${o.GITHUB_ISSUE_URL}.`),l=s.ImageProcessor),new l(r)}}},"./src/models/auto/processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoProcessor:()=>c});var o=r("./src/utils/constants.js"),n=r("./src/utils/hub.js"),s=r("./src/base/processing_utils.js"),a=r("./src/models/processors.js"),i=r("./src/models/image_processors.js"),l=r("./src/models/feature_extractors.js");class c{static async from_pretrained(e,t={}){const r=await(0,n.getModelJSON)(e,o.IMAGE_PROCESSOR_NAME,!0,t),{image_processor_type:c,feature_extractor_type:_,processor_class:p}=r;if(p&&a[p])return a[p].from_pretrained(e,t);if(!c&&!_)throw new Error("No `image_processor_type` or `feature_extractor_type` found in the config.");const u={};if(c){const e=i[c.replace(/Fast$/,"")];if(!e)throw new Error(`Unknown image_processor_type: '${c}'.`);u.image_processor=new e(r)}if(_){const e=i[_];if(e)u.image_processor=new e(r);else{const e=l[_];if(!e)throw new Error(`Unknown feature_extractor_type: '${_}'.`);u.feature_extractor=new e(r)}}return new s.Processor({},u,null)}}},"./src/models/beit/image_processing_beit.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}},"./src/models/bit/image_processing_bit.js":(e,t,r)=>{r.r(t),r.d(t,{BitImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}},"./src/models/chinese_clip/image_processing_chinese_clip.js":(e,t,r)=>{r.r(t),r.d(t,{ChineseCLIPFeatureExtractor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}},"./src/models/clap/feature_extraction_clap.js":(e,t,r)=>{r.r(t),r.d(t,{ClapFeatureExtractor:()=>s});var o=r("./src/base/feature_extraction_utils.js"),n=(r("./src/utils/tensor.js"),r("./src/utils/audio.js"));class s extends o.FeatureExtractor{constructor(e){super(e),this.mel_filters=(0,n.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=(0,n.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=(0,n.window_function)(this.config.fft_window_size,"hann")}async _get_input_mel(e,t,r,o){let n,s=!1;const a=e.length-t;if(a>0){if("rand_trunc"!==r)throw new Error(`Truncation strategy "${r}" not implemented`);{s=!0;const r=Math.floor(Math.random()*(a+1));e=e.subarray(r,r+t),n=await this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples)}}else{if(a<0){let r=new Float64Array(t);if(r.set(e),"repeat"===o)for(let o=e.length;o<t;o+=e.length)r.set(e.subarray(0,Math.min(e.length,t-o)),o);else if("repeatpad"===o)for(let t=e.length;t<-a;t+=e.length)r.set(e,t);e=r}if("fusion"===r)throw new Error(`Truncation strategy "${r}" not implemented`);n=await this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples)}return n.unsqueeze_(0)}async _extract_fbank_features(e,t,r=null){return(0,n.spectrogram)(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:t,log_mel:"dB",max_num_frames:r,do_pad:!1,transpose:!0})}async _call(e,{max_length:t=null}={}){(0,o.validate_audio_inputs)(e,"ClapFeatureExtractor");return{input_features:(await this._get_input_mel(e,t??this.config.nb_max_samples,this.config.truncation,this.config.padding)).unsqueeze_(0)}}}},"./src/models/clip/image_processing_clip.js":(e,t,r)=>{r.r(t),r.d(t,{CLIPFeatureExtractor:()=>s,CLIPImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}class s extends n{}},"./src/models/convnext/image_processing_convnext.js":(e,t,r)=>{r.r(t),r.d(t,{ConvNextFeatureExtractor:()=>s,ConvNextImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{constructor(e){super(e),this.crop_pct=this.config.crop_pct??.875}async resize(e){const t=this.size?.shortest_edge;if(void 0===t)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(t<384){const r=Math.floor(t/this.crop_pct),[o,n]=this.get_resize_output_image_size(e,{shortest_edge:r});e=await e.resize(o,n,{resample:this.resample}),e=await e.center_crop(t,t)}else e=await e.resize(t,t,{resample:this.resample});return e}}class s extends n{}},"./src/models/dac/feature_extraction_dac.js":(e,t,r)=>{r.r(t),r.d(t,{DacFeatureExtractor:()=>n});var o=r("./src/models/encodec/feature_extraction_encodec.js");class n extends o.EncodecFeatureExtractor{}},"./src/models/deit/image_processing_deit.js":(e,t,r)=>{r.r(t),r.d(t,{DeiTFeatureExtractor:()=>s,DeiTImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}class s extends n{}},"./src/models/detr/image_processing_detr.js":(e,t,r)=>{r.r(t),r.d(t,{DetrFeatureExtractor:()=>a,DetrImageProcessor:()=>s});var o=r("./src/base/image_processors_utils.js"),n=r("./src/utils/tensor.js");class s extends o.ImageProcessor{async _call(e){const t=await super._call(e),r=[t.pixel_values.dims[0],64,64],o=(0,n.full)(r,1n);return{...t,pixel_mask:o}}post_process_object_detection(...e){return(0,o.post_process_object_detection)(...e)}post_process_panoptic_segmentation(...e){return(0,o.post_process_panoptic_segmentation)(...e)}post_process_instance_segmentation(...e){return(0,o.post_process_instance_segmentation)(...e)}}class a extends s{}},"./src/models/dinov3_vit/image_processing_dinov3_vit.js":(e,t,r)=>{r.r(t),r.d(t,{DINOv3ViTImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}},"./src/models/donut/image_processing_donut.js":(e,t,r)=>{r.r(t),r.d(t,{DonutFeatureExtractor:()=>s,DonutImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{pad_image(e,t,r,o={}){const[n,s,a]=t;let i=this.image_mean;Array.isArray(this.image_mean)||(i=new Array(a).fill(i));let l=this.image_std;Array.isArray(l)||(l=new Array(a).fill(i));const c=i.map((e,t)=>-e/l[t]);return super.pad_image(e,t,r,{center:!0,constant_values:c,...o})}}class s extends n{}},"./src/models/dpt/image_processing_dpt.js":(e,t,r)=>{r.r(t),r.d(t,{DPTFeatureExtractor:()=>s,DPTImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}class s extends n{}},"./src/models/efficientnet/image_processing_efficientnet.js":(e,t,r)=>{r.r(t),r.d(t,{EfficientNetImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(e=>e*e))}}},"./src/models/encodec/feature_extraction_encodec.js":(e,t,r)=>{r.r(t),r.d(t,{EncodecFeatureExtractor:()=>s});var o=r("./src/base/feature_extraction_utils.js"),n=r("./src/utils/tensor.js");class s extends o.FeatureExtractor{async _call(e){(0,o.validate_audio_inputs)(e,"EncodecFeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));const t=this.config.feature_size;if(e.length%t!==0)throw new Error(`The length of the audio data must be a multiple of the number of channels (${t}).`);const r=[1,t,e.length/t];return{input_values:new n.Tensor("float32",e,r)}}}},"./src/models/feature_extractors.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>o.ASTFeatureExtractor,ClapFeatureExtractor:()=>s.ClapFeatureExtractor,DacFeatureExtractor:()=>a.DacFeatureExtractor,EncodecFeatureExtractor:()=>n.EncodecFeatureExtractor,Gemma3nAudioFeatureExtractor:()=>i.Gemma3nAudioFeatureExtractor,ImageFeatureExtractor:()=>m.ImageProcessor,MoonshineFeatureExtractor:()=>l.MoonshineFeatureExtractor,PyAnnoteFeatureExtractor:()=>c.PyAnnoteFeatureExtractor,SeamlessM4TFeatureExtractor:()=>_.SeamlessM4TFeatureExtractor,SnacFeatureExtractor:()=>p.SnacFeatureExtractor,SpeechT5FeatureExtractor:()=>u.SpeechT5FeatureExtractor,Wav2Vec2FeatureExtractor:()=>d.Wav2Vec2FeatureExtractor,WeSpeakerFeatureExtractor:()=>h.WeSpeakerFeatureExtractor,WhisperFeatureExtractor:()=>f.WhisperFeatureExtractor});var o=r("./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js"),n=r("./src/models/encodec/feature_extraction_encodec.js"),s=r("./src/models/clap/feature_extraction_clap.js"),a=r("./src/models/dac/feature_extraction_dac.js"),i=r("./src/models/gemma3n/feature_extraction_gemma3n.js"),l=r("./src/models/moonshine/feature_extraction_moonshine.js"),c=r("./src/models/pyannote/feature_extraction_pyannote.js"),_=r("./src/models/seamless_m4t/feature_extraction_seamless_m4t.js"),p=r("./src/models/snac/feature_extraction_snac.js"),u=r("./src/models/speecht5/feature_extraction_speecht5.js"),d=r("./src/models/wav2vec2/feature_extraction_wav2vec2.js"),h=r("./src/models/wespeaker/feature_extraction_wespeaker.js"),f=r("./src/models/whisper/feature_extraction_whisper.js"),m=r("./src/base/image_processors_utils.js")},"./src/models/florence2/processing_florence2.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>a});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends o.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=n.AutoImageProcessor;constructor(e,t,r){super(e,t,r);const{tasks_answer_post_processing_type:o,task_prompts_without_inputs:n,task_prompts_with_input:s}=this.image_processor.config;this.tasks_answer_post_processing_type=new Map(Object.entries(o??{})),this.task_prompts_without_inputs=new Map(Object.entries(n??{})),this.task_prompts_with_input=new Map(Object.entries(s??{})),this.regexes={quad_boxes:/(.+?)<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm,bboxes:/([^<]+)?<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm},this.size_per_bin=1e3}construct_prompts(e){"string"==typeof e&&(e=[e]);const t=[];for(const r of e)if(this.task_prompts_without_inputs.has(r))t.push(this.task_prompts_without_inputs.get(r));else{for(const[e,o]of this.task_prompts_with_input)if(r.includes(e)){t.push(o.replaceAll("{input}",r).replaceAll(e,""));break}t.length!==e.length&&t.push(r)}return t}post_process_generation(e,t,r){const o=this.tasks_answer_post_processing_type.get(t)??"pure_text";let n;switch(e=e.replaceAll("<s>","").replaceAll("</s>",""),o){case"pure_text":n=e;break;case"description_with_bboxes":case"bboxes":case"phrase_grounding":case"ocr":const s="ocr"===o?"quad_boxes":"bboxes",a=e.matchAll(this.regexes[s]),i=[],l=[];for(const[e,t,...o]of a)i.push(t?t.trim():i.at(-1)??""),l.push(o.map((e,t)=>(Number(e)+.5)/this.size_per_bin*r[t%2]));n={labels:i,[s]:l};break;default:throw new Error(`Task "${t}" (of type "${o}") not yet implemented.`)}return{[t]:n}}async _call(e,t=null,r={}){if(!e&&!t)throw new Error("Either text or images must be provided");return{...await this.image_processor(e,r),...t?this.tokenizer(this.construct_prompts(t),r):{}}}}},"./src/models/gemma3n/feature_extraction_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nAudioFeatureExtractor:()=>a});var o=r("./src/base/feature_extraction_utils.js"),n=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class a extends o.FeatureExtractor{constructor(e){super(e);const{fft_length:t,feature_size:r,min_frequency:o,max_frequency:n,sampling_rate:a,frame_length:i}=this.config,l=(0,s.mel_filter_bank)(Math.floor(1+t/2),r,o,n,a,null,"htk",!1);this.mel_filters=l,this.window=(0,s.window_function)(i,"hann")}async _extract_fbank_features(e,t){return(0,s.spectrogram)(e,this.window,this.config.frame_length,this.config.hop_length,{fft_length:this.config.fft_length,center:!1,onesided:!0,preemphasis:this.config.preemphasis,preemphasis_htk_flavor:this.config.preemphasis_htk_flavor,mel_filters:this.mel_filters,log_mel:"log",mel_floor:this.config.mel_floor,remove_dc_offset:!1,transpose:!0})}async _call(e,{max_length:t=48e4,truncation:r=!0,padding:s=!0,pad_to_multiple_of:a=128}={}){if((0,o.validate_audio_inputs)(e,"Gemma3nAudioFeatureExtractor"),r&&e.length>t&&(e=e.slice(0,t)),s&&e.length%a!==0){const t=a-e.length%a,r=new Float64Array(e.length+t);r.set(e),0!==this.config.padding_value&&r.fill(this.config.padding_value,e.length),e=r}const i=await this._extract_fbank_features(e,this.config.max_length),l=(0,n.full)([1,i.dims[0]],!0);return{input_features:i.unsqueeze_(0),input_features_mask:l}}}},"./src/models/gemma3n/processing_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nProcessor:()=>i});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/models/auto/feature_extraction_auto.js"),a=r("./src/tokenizers.js");r("./src/utils/image.js"),r("./src/utils/audio.js");class i extends o.Processor{static image_processor_class=n.AutoImageProcessor;static feature_extractor_class=s.AutoFeatureExtractor;static tokenizer_class=a.AutoTokenizer;static uses_processor_config=!0;static uses_chat_template_file=!0;constructor(e,t,r){super(e,t,r),this.audio_seq_length=this.config.audio_seq_length,this.image_seq_length=this.config.image_seq_length;const{audio_token_id:o,boa_token:n,audio_token:s,eoa_token:a,image_token_id:i,boi_token:l,image_token:c,eoi_token:_}=this.tokenizer.config;this.audio_token_id=o,this.boa_token=n,this.audio_token=s;const p=s.repeat(this.audio_seq_length);this.full_audio_sequence=`\n\n${n}${p}${a}\n\n`,this.image_token_id=i,this.boi_token=l,this.image_token=c;const u=c.repeat(this.image_seq_length);this.full_image_sequence=`\n\n${l}${u}${_}\n\n`}async _call(e,t=null,r=null,o={}){let n,s;return"string"==typeof e&&(e=[e]),r&&(n=await this.feature_extractor(r,o),e=e.map(e=>e.replaceAll(this.audio_token,this.full_audio_sequence))),t&&(s=await this.image_processor(t,o),e=e.map(e=>e.replaceAll(this.image_token,this.full_image_sequence))),{...this.tokenizer(e,o),...s,...n}}}},"./src/models/glpn/image_processing_glpn.js":(e,t,r)=>{r.r(t),r.d(t,{GLPNFeatureExtractor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}},"./src/models/grounding_dino/image_processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoImageProcessor:()=>s});var o=r("./src/base/image_processors_utils.js"),n=r("./src/utils/tensor.js");class s extends o.ImageProcessor{async _call(e){const t=await super._call(e),r=t.pixel_values.dims,o=(0,n.ones)([r[0],r[2],r[3]]);return{...t,pixel_mask:o}}}},"./src/models/grounding_dino/processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoProcessor:()=>l});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/base/image_processors_utils.js");function i(e,t){const r=e.dims.at(-1)-1,o=e.tolist();o.fill(!1,0,1),o.fill(!1,r);const n=t.tolist();return o.map((e,t)=>e?t:null).filter(e=>null!==e).map(e=>n[e])}class l extends o.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=n.AutoImageProcessor;async _call(e,t,r={}){const o=e?await this.image_processor(e,r):{};return{...t?this.tokenizer(t,r):{},...o}}post_process_grounded_object_detection(e,t,{box_threshold:r=.25,text_threshold:o=.25,target_sizes:n=null}={}){const{logits:s,pred_boxes:l}=e,c=s.dims[0];if(null!==n&&n.length!==c)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const _=s.dims.at(1),p=s.sigmoid(),u=p.max(-1).tolist(),d=l.tolist().map(e=>e.map(e=>(0,a.center_to_corners_format)(e))),h=[];for(let e=0;e<c;++e){const s=null!==n?n[e]:null;null!==s&&(d[e]=d[e].map(e=>e.map((e,t)=>e*s[(t+1)%2])));const a=u[e],l=[],c=[],f=[];for(let n=0;n<_;++n){const s=a[n];if(s<=r)continue;const _=d[e][n],u=p[e][n];l.push(s),f.push(_);const h=i(u.gt(o),t[e]);c.push(h)}h.push({scores:l,boxes:f,labels:this.batch_decode(c)})}return h}}},"./src/models/idefics3/image_processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3ImageProcessor:()=>s});var o=r("./src/base/image_processors_utils.js"),n=r("./src/utils/tensor.js");class s extends o.ImageProcessor{constructor(e){super(e),this.do_image_splitting=e.do_image_splitting??!0,this.max_image_size=e.max_image_size}get_resize_for_vision_encoder(e,t){let[r,o]=e.dims.slice(-2);const n=o/r;return o>=r?(o=Math.ceil(o/t)*t,r=Math.floor(o/n),r=Math.ceil(r/t)*t):(r=Math.ceil(r/t)*t,o=Math.floor(r*n),o=Math.ceil(o/t)*t),{height:r,width:o}}async _call(e,{do_image_splitting:t=null,return_row_col_info:r=!1}={}){let o;if(Array.isArray(e)){if(0===e.length||!e[0])throw new Error("No images provided.");o=Array.isArray(e[0])?e:[e]}else o=[[e]];let s=[],a=[],i=[];const l=[],c=[];for(const e of o){let r=await Promise.all(e.map(e=>this.preprocess(e)));l.push(...r.map(e=>e.original_size)),c.push(...r.map(e=>e.reshaped_input_size)),r.forEach(e=>e.pixel_values.unsqueeze_(0));const{longest_edge:o}=this.max_image_size;let _;if(t??this.do_image_splitting){let e=new Array(r.length),t=new Array(r.length);_=await Promise.all(r.map(async(r,s)=>{const a=this.get_resize_for_vision_encoder(r.pixel_values,o),i=await(0,n.interpolate_4d)(r.pixel_values,{size:[a.height,a.width]}),{frames:l,num_splits_h:c,num_splits_w:_}=await this.split_image(i,this.max_image_size);return e[s]=c,t[s]=_,(0,n.cat)(l,0)})),a.push(e),i.push(t)}else{const e=[o,o];_=await Promise.all(r.map(t=>(0,n.interpolate_4d)(t.pixel_values,{size:e}))),a.push(new Array(r.length).fill(0)),i.push(new Array(r.length).fill(0))}s.push((0,n.cat)(_,0))}const _=s.length,[p,u,d,h]=s[0].dims;let f,m;if(1===_)f=s[0].unsqueeze_(0),m=(0,n.full)([_,p,d,h],!0);else{const e=Math.max(...s.map(e=>e.dims.at(0)));m=(0,n.full)([_,e,d,h],!0);const t=m.data,r=e*d*h;for(let o=0;o<_;++o){const a=s[o].dims[0];if(a<e){s[o]=(0,n.cat)([s[o],(0,n.full)([e-a,u,d,h],0)],0);const i=o*r+a*d*h,l=(o+1)*r;t.fill(!1,i,l)}}f=(0,n.stack)(s,0)}return{pixel_values:f,pixel_attention_mask:m,original_sizes:l,reshaped_input_sizes:c,...r?{rows:a,cols:i}:{}}}async split_image(e,{longest_edge:t}){const r=t,o=t,s=[],[a,i]=e.dims.slice(-2);let l=0,c=0;if(a>r||i>o){l=Math.ceil(a/r),c=Math.ceil(i/o);const t=Math.ceil(a/l),_=Math.ceil(i/c);for(let r=0;r<l;++r)for(let o=0;o<c;++o){let p,u,d,h;r===l-1?(u=a-t,h=a):(u=r*t,h=(r+1)*t),o===c-1?(p=i-_,d=i):(p=o*_,d=(o+1)*_);const f=[u,p],m=[h,d],g=await(0,n.slice)(e,f,m,[2,3]);s.push(g)}const p=r,u=o;a===p&&i===u||(e=await(0,n.interpolate_4d)(e,{size:[p,u]}))}return s.push(e),{frames:s,num_splits_h:l,num_splits_w:c}}}},"./src/models/idefics3/processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3Processor:()=>l});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=(r("./src/utils/image.js"),r("./src/utils/core.js"));function i(e,t,r,o,n,s){return 0===e&&0===t?function(e,t,r,o){return`${t}${o}`+r.repeat(e)+`${t}`}(r,o,n,s):function(e,t,r,o,n,s){let a="";for(let s=0;s<t;++s){for(let t=0;t<r;++t)a+=o+`<row_${s+1}_col_${t+1}>`+n.repeat(e);a+="\n"}return a+=`\n${o}${s}`+n.repeat(e)+`${o}`,a}(r,e,t,o,n,s)}class l extends o.Processor{static image_processor_class=n.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;static uses_processor_config=!0;fake_image_token="<fake_token_around_image>";image_token="<image>";global_img_token="<global-img>";async _call(e,t=null,r={}){let o;r.return_row_col_info??=!0,t&&(o=await this.image_processor(t,r)),Array.isArray(e)||(e=[e]);const n=o.rows??[new Array(e.length).fill(0)],s=o.cols??[new Array(e.length).fill(0)],l=this.config.image_seq_len,c=[],_=[];for(let t=0;t<e.length;++t){const r=e[t],o=n[t],p=s[t];c.push((0,a.count)(r,this.image_token));const u=o.map((e,t)=>i(e,p[t],l,this.fake_image_token,this.image_token,this.global_img_token)),d=r.split(this.image_token);if(0===d.length)throw new Error("The image token should be present in the text.");let h=d[0];for(let e=0;e<u.length;++e)h+=u[e]+d[e+1];_.push(h)}return{...this.tokenizer(_),...o}}}},"./src/models/image_processors.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>o.BeitFeatureExtractor,BitImageProcessor:()=>n.BitImageProcessor,CLIPFeatureExtractor:()=>a.CLIPFeatureExtractor,CLIPImageProcessor:()=>a.CLIPImageProcessor,ChineseCLIPFeatureExtractor:()=>s.ChineseCLIPFeatureExtractor,ConvNextFeatureExtractor:()=>i.ConvNextFeatureExtractor,ConvNextImageProcessor:()=>i.ConvNextImageProcessor,DINOv3ViTImageProcessor:()=>_.DINOv3ViTImageProcessor,DPTFeatureExtractor:()=>u.DPTFeatureExtractor,DPTImageProcessor:()=>u.DPTImageProcessor,DeiTFeatureExtractor:()=>l.DeiTFeatureExtractor,DeiTImageProcessor:()=>l.DeiTImageProcessor,DetrFeatureExtractor:()=>c.DetrFeatureExtractor,DetrImageProcessor:()=>c.DetrImageProcessor,DonutFeatureExtractor:()=>p.DonutFeatureExtractor,DonutImageProcessor:()=>p.DonutImageProcessor,EfficientNetImageProcessor:()=>d.EfficientNetImageProcessor,GLPNFeatureExtractor:()=>h.GLPNFeatureExtractor,GroundingDinoImageProcessor:()=>f.GroundingDinoImageProcessor,Idefics3ImageProcessor:()=>m.Idefics3ImageProcessor,JinaCLIPImageProcessor:()=>b.JinaCLIPImageProcessor,LlavaOnevisionImageProcessor:()=>w.LlavaOnevisionImageProcessor,Mask2FormerImageProcessor:()=>x.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>y.MaskFormerFeatureExtractor,MaskFormerImageProcessor:()=>y.MaskFormerImageProcessor,MobileNetV1FeatureExtractor:()=>M.MobileNetV1FeatureExtractor,MobileNetV1ImageProcessor:()=>M.MobileNetV1ImageProcessor,MobileNetV2FeatureExtractor:()=>T.MobileNetV2FeatureExtractor,MobileNetV2ImageProcessor:()=>T.MobileNetV2ImageProcessor,MobileNetV3FeatureExtractor:()=>k.MobileNetV3FeatureExtractor,MobileNetV3ImageProcessor:()=>k.MobileNetV3ImageProcessor,MobileNetV4FeatureExtractor:()=>v.MobileNetV4FeatureExtractor,MobileNetV4ImageProcessor:()=>v.MobileNetV4ImageProcessor,MobileViTFeatureExtractor:()=>P.MobileViTFeatureExtractor,MobileViTImageProcessor:()=>P.MobileViTImageProcessor,NougatImageProcessor:()=>S.NougatImageProcessor,OwlViTFeatureExtractor:()=>C.OwlViTFeatureExtractor,OwlViTImageProcessor:()=>C.OwlViTImageProcessor,Owlv2ImageProcessor:()=>F.Owlv2ImageProcessor,Phi3VImageProcessor:()=>E.Phi3VImageProcessor,PvtImageProcessor:()=>A.PvtImageProcessor,Qwen2VLImageProcessor:()=>I.Qwen2VLImageProcessor,RTDetrImageProcessor:()=>O.RTDetrImageProcessor,SamImageProcessor:()=>L.SamImageProcessor,SegformerFeatureExtractor:()=>D.SegformerFeatureExtractor,SegformerImageProcessor:()=>D.SegformerImageProcessor,SiglipImageProcessor:()=>N.SiglipImageProcessor,SmolVLMImageProcessor:()=>B.SmolVLMImageProcessor,Swin2SRImageProcessor:()=>$.Swin2SRImageProcessor,VLMImageProcessor:()=>g.VLMImageProcessor,ViTFeatureExtractor:()=>V.ViTFeatureExtractor,ViTImageProcessor:()=>V.ViTImageProcessor,VitMatteImageProcessor:()=>j.VitMatteImageProcessor,VitPoseImageProcessor:()=>z.VitPoseImageProcessor,YolosFeatureExtractor:()=>R.YolosFeatureExtractor,YolosImageProcessor:()=>R.YolosImageProcessor});var o=r("./src/models/beit/image_processing_beit.js"),n=r("./src/models/bit/image_processing_bit.js"),s=r("./src/models/chinese_clip/image_processing_chinese_clip.js"),a=r("./src/models/clip/image_processing_clip.js"),i=r("./src/models/convnext/image_processing_convnext.js"),l=r("./src/models/deit/image_processing_deit.js"),c=r("./src/models/detr/image_processing_detr.js"),_=r("./src/models/dinov3_vit/image_processing_dinov3_vit.js"),p=r("./src/models/donut/image_processing_donut.js"),u=r("./src/models/dpt/image_processing_dpt.js"),d=r("./src/models/efficientnet/image_processing_efficientnet.js"),h=r("./src/models/glpn/image_processing_glpn.js"),f=r("./src/models/grounding_dino/image_processing_grounding_dino.js"),m=r("./src/models/idefics3/image_processing_idefics3.js"),g=r("./src/models/janus/image_processing_janus.js"),b=r("./src/models/jina_clip/image_processing_jina_clip.js"),w=r("./src/models/llava_onevision/image_processing_llava_onevision.js"),x=r("./src/models/mask2former/image_processing_mask2former.js"),y=r("./src/models/maskformer/image_processing_maskformer.js"),M=r("./src/models/mobilenet_v1/image_processing_mobilenet_v1.js"),T=r("./src/models/mobilenet_v2/image_processing_mobilenet_v2.js"),k=r("./src/models/mobilenet_v3/image_processing_mobilenet_v3.js"),v=r("./src/models/mobilenet_v4/image_processing_mobilenet_v4.js"),P=r("./src/models/mobilevit/image_processing_mobilevit.js"),S=r("./src/models/nougat/image_processing_nougat.js"),F=r("./src/models/owlv2/image_processing_owlv2.js"),C=r("./src/models/owlvit/image_processing_owlvit.js"),E=r("./src/models/phi3_v/image_processing_phi3_v.js"),A=r("./src/models/pvt/image_processing_pvt.js"),I=r("./src/models/qwen2_vl/image_processing_qwen2_vl.js"),O=r("./src/models/rt_detr/image_processing_rt_detr.js"),L=r("./src/models/sam/image_processing_sam.js"),D=r("./src/models/segformer/image_processing_segformer.js"),N=r("./src/models/siglip/image_processing_siglip.js"),B=r("./src/models/smolvlm/image_processing_smolvlm.js"),$=r("./src/models/swin2sr/image_processing_swin2sr.js"),V=r("./src/models/vit/image_processing_vit.js"),j=r("./src/models/vitmatte/image_processing_vitmatte.js"),z=r("./src/models/vitpose/image_processing_vitpose.js"),R=r("./src/models/yolos/image_processing_yolos.js")},"./src/models/janus/image_processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLMImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{constructor(e){super({do_pad:!0,pad_size:{width:e.image_size,height:e.image_size},...e}),this.constant_values=this.config.background_color.map(e=>e*this.rescale_factor)}pad_image(e,t,r,o){return super.pad_image(e,t,r,{constant_values:this.constant_values,center:!0,...o})}}},"./src/models/janus/processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLChatProcessor:()=>c});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/utils/core.js"),i=r("./src/utils/tensor.js"),l=r("./src/utils/image.js");class c extends o.Processor{static image_processor_class=n.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;static uses_processor_config=!0;constructor(e,t,r){super(e,t,r),this.image_tag=this.config.image_tag,this.image_start_tag=this.config.image_start_tag,this.image_end_tag=this.config.image_end_tag,this.num_image_tokens=this.config.num_image_tokens}async _call(e,{images:t=null,chat_template:r="default"}={}){t?Array.isArray(t)||(t=[t]):t=await Promise.all(e.filter(e=>e.images).flatMap(e=>e.images).map(e=>l.RawImage.read(e)));const o=this.tokenizer,n=e=>o.encode(e,{add_special_tokens:!1}),s=o.apply_chat_template(e,{tokenize:!1,add_generation_prompt:!0,chat_template:r}).split(this.image_tag),c=s.length-1;if(t.length!==c)throw new Error(`Number of images provided (${t.length}) does not match number of "${this.image_tag}" image tags (${c})`);const[_,p,u]=o.model.convert_tokens_to_ids([this.image_tag,this.image_start_tag,this.image_end_tag]);let d=n(s[0]),h=new Array(d.length).fill(!1);for(let e=1;e<s.length;++e){const t=new Array(this.num_image_tokens).fill(_),r=n(s[e]);d=(0,a.mergeArrays)(d,[p],t,[u],r);const o=new Array(this.num_image_tokens).fill(!0);h=(0,a.mergeArrays)(h,[!1],o,[!1],new Array(r.length).fill(!1))}const f=[1,d.length],m={input_ids:new i.Tensor("int64",d,f),attention_mask:new i.Tensor("int64",new Array(d.length).fill(1),f),images_seq_mask:new i.Tensor("bool",h,f),images_emb_mask:new i.Tensor("bool",new Array(c*this.num_image_tokens).fill(!0),[1,c,this.num_image_tokens])};if(t&&t.length>0){const e=await this.image_processor(t);return e.pixel_values.unsqueeze_(0),{...m,...e}}return m}}},"./src/models/jina_clip/image_processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{constructor(e){const{resize_mode:t,fill_color:r,interpolation:o,size:n,...s}=e;super({...s,size:"squash"===t?{width:n,height:n}:"shortest"===t?{shortest_edge:n}:{longest_edge:n},resample:"bicubic"===o?3:2,do_center_crop:!0,crop_size:n,do_normalize:!0})}}},"./src/models/jina_clip/processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPProcessor:()=>a});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends o.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=n.AutoImageProcessor;async _call(e=null,t=null,r={}){if(!e&&!t)throw new Error("Either text or images must be provided");return{...e?this.tokenizer(e,r):{},...t?await this.image_processor(t,r):{}}}}},"./src/models/llava/processing_llava.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaProcessor:()=>a});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends o.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=n.AutoImageProcessor;static uses_processor_config=!0;async _call(e,t=null,r={}){const o=await this.image_processor(e,r);if(t){const[e,r]=o.pixel_values.dims.slice(-2),{image_token:n,patch_size:s,num_additional_image_tokens:a}=this.config,i=Math.floor(e/s)*Math.floor(r/s)+a;t=structuredClone(t),Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;++e)t[e]=t[e].replace(n,n.repeat(i))}const n=t?this.tokenizer(t,r):{};return{...o,...n}}}},"./src/models/llava_onevision/image_processing_llava_onevision.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaOnevisionImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}},"./src/models/mask2former/image_processing_mask2former.js":(e,t,r)=>{r.r(t),r.d(t,{Mask2FormerImageProcessor:()=>n});var o=r("./src/models/maskformer/image_processing_maskformer.js");class n extends o.MaskFormerImageProcessor{}},"./src/models/maskformer/image_processing_maskformer.js":(e,t,r)=>{r.r(t),r.d(t,{MaskFormerFeatureExtractor:()=>s,MaskFormerImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{post_process_panoptic_segmentation(...e){return(0,o.post_process_panoptic_segmentation)(...e)}post_process_instance_segmentation(...e){return(0,o.post_process_instance_segmentation)(...e)}}class s extends n{}},"./src/models/mgp_str/processing_mgp_str.js":(e,t,r)=>{r.r(t),r.d(t,{MgpstrProcessor:()=>l});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/utils/maths.js");const i={char:["char_decode",1],bpe:["bpe_decode",2],wp:["wp_decode",102]};class l extends o.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=n.AutoImageProcessor;get char_tokenizer(){return this.components.char_tokenizer}get bpe_tokenizer(){return this.components.bpe_tokenizer}get wp_tokenizer(){return this.components.wp_tokenizer}_decode_helper(e,t){if(!i.hasOwnProperty(t))throw new Error(`Format ${t} is not supported.`);const[r,o]=i[t],n=this[r].bind(this),[s,l]=e.dims,c=[],_=[],p=e.tolist();for(let e=0;e<s;++e){const t=p[e],r=[],n=[];for(let e=1;e<l;++e){const[s,i]=(0,a.max)((0,a.softmax)(t[e]));if(n.push(s),i==o)break;r.push(i)}const s=n.length>0?n.reduce((e,t)=>e*t,1):0;_.push(r),c.push(s)}return[n(_),c]}char_decode(e){return this.char_tokenizer.batch_decode(e).map(e=>e.replaceAll(" ",""))}bpe_decode(e){return this.bpe_tokenizer.batch_decode(e)}wp_decode(e){return this.wp_tokenizer.batch_decode(e).map(e=>e.replaceAll(" ",""))}batch_decode([e,t,r]){const[o,n]=this._decode_helper(e,"char"),[s,i]=this._decode_helper(t,"bpe"),[l,c]=this._decode_helper(r,"wp"),_=[],p=[];for(let e=0;e<o.length;++e){const[t,r]=(0,a.max)([n[e],i[e],c[e]]);_.push([o[e],s[e],l[e]][r]),p.push(t)}return{generated_text:_,scores:p,char_preds:o,bpe_preds:s,wp_preds:l}}static async from_pretrained(...e){const t=await super.from_pretrained(...e),r=await s.AutoTokenizer.from_pretrained("Xenova/gpt2"),o=await s.AutoTokenizer.from_pretrained("Xenova/bert-base-uncased");return t.components={image_processor:t.image_processor,char_tokenizer:t.tokenizer,bpe_tokenizer:r,wp_tokenizer:o},t}async _call(e,t=null){const r=await this.image_processor(e);return t&&(r.labels=this.tokenizer(t).input_ids),r}}},"./src/models/mobilenet_v1/image_processing_mobilenet_v1.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV1FeatureExtractor:()=>s,MobileNetV1ImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}class s extends n{}},"./src/models/mobilenet_v2/image_processing_mobilenet_v2.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV2FeatureExtractor:()=>s,MobileNetV2ImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}class s extends n{}},"./src/models/mobilenet_v3/image_processing_mobilenet_v3.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV3FeatureExtractor:()=>s,MobileNetV3ImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}class s extends n{}},"./src/models/mobilenet_v4/image_processing_mobilenet_v4.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV4FeatureExtractor:()=>s,MobileNetV4ImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}class s extends n{}},"./src/models/mobilevit/image_processing_mobilevit.js":(e,t,r)=>{r.r(t),r.d(t,{MobileViTFeatureExtractor:()=>s,MobileViTImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}class s extends n{}},"./src/models/moonshine/feature_extraction_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineFeatureExtractor:()=>s});var o=r("./src/base/feature_extraction_utils.js"),n=r("./src/utils/tensor.js");class s extends o.FeatureExtractor{async _call(e){(0,o.validate_audio_inputs)(e,"MoonshineFeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));const t=[1,e.length];return{input_values:new n.Tensor("float32",e,t)}}}},"./src/models/moonshine/processing_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineProcessor:()=>a});var o=r("./src/models/auto/feature_extraction_auto.js"),n=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{static tokenizer_class=n.AutoTokenizer;static feature_extractor_class=o.AutoFeatureExtractor;async _call(e){return await this.feature_extractor(e)}}},"./src/models/nougat/image_processing_nougat.js":(e,t,r)=>{r.r(t),r.d(t,{NougatImageProcessor:()=>n});var o=r("./src/models/donut/image_processing_donut.js");class n extends o.DonutImageProcessor{}},"./src/models/owlv2/image_processing_owlv2.js":(e,t,r)=>{r.r(t),r.d(t,{Owlv2ImageProcessor:()=>n});var o=r("./src/models/owlvit/image_processing_owlvit.js");class n extends o.OwlViTImageProcessor{}},"./src/models/owlvit/image_processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTFeatureExtractor:()=>s,OwlViTImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{post_process_object_detection(...e){return(0,o.post_process_object_detection)(...e)}}class s extends n{}},"./src/models/owlvit/processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTProcessor:()=>a});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends o.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=n.AutoImageProcessor}},"./src/models/paligemma/processing_paligemma.js":(e,t,r)=>{r.r(t),r.d(t,{PaliGemmaProcessor:()=>i});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");const a="<image>";class i extends o.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=n.AutoImageProcessor;static uses_processor_config=!1;async _call(e,t=null,r={}){t||(console.warn("You are using PaliGemma without a text prefix. It will perform as a picture-captioning model."),t=""),Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);const o=this.tokenizer.bos_token,n=this.image_processor.config.image_seq_length;let s;t.some(e=>e.includes(a))?s=t.map(e=>{const t=e.replaceAll(a,a.repeat(n)),r=t.lastIndexOf(a),s=-1===r?0:r+7;return t.slice(0,s)+o+t.slice(s)+"\n"}):(console.warn("You are passing both `text` and `images` to `PaliGemmaProcessor`. The processor expects special image tokens in the text, as many tokens as there are images per each text. It is recommended to add `<image>` tokens in the very beginning of your text. For this call, we will infer how many images each text has and add special tokens."),s=t.map(t=>function(e,t,r,o,n){return`${o.repeat(r*n)}${t}${e}\n`}(t,o,n,a,e.length)));const i=this.tokenizer(s,r);return{...await this.image_processor(e,r),...i}}}},"./src/models/phi3_v/image_processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VImageProcessor:()=>_});var o=r("./src/base/image_processors_utils.js"),n=r("./src/utils/tensor.js");const s=336,a=[2,3],{ceil:i,floor:l,sqrt:c}=Math;class _ extends o.ImageProcessor{constructor(e){super({...e,do_normalize:!0,do_pad:!0,pad_size:"custom",do_convert_rgb:!0,do_resize:!0}),this._num_crops=e.num_crops}calc_num_image_tokens_from_image_size(e,t){const{num_img_tokens:r}=this.config;return l((l(t/s)*l(e/s)+1)*r+1+(l(t/s)+1)*c(r))}get_resize_output_image_size(e,t){const r=this._num_crops,[o,n]=e.size;let s=o/n,a=1;for(;a*Math.ceil(a/s)<=r;)a+=1;a-=1;const i=Math.floor(336*a);return[i,Math.floor(i/s)]}pad_image(e,t,r,o={}){const[n,a]=t,l=s*i(n/s),c=s*i(a/s),_=[1,1,1].map((e,t)=>(e-this.image_mean[t])/this.image_std[t]);return super.pad_image(e,t,{width:c,height:l},{center:!0,constant_values:_,...o})}async _call(e,{num_crops:t=null}={}){if(this._num_crops=t??=this.config.num_crops,t<4||c(t)%1!=0)throw new Error("num_crops must be a square number >= 4");Array.isArray(e)||(e=[e]);const r=e.length,o=await Promise.all(e.map(e=>this.preprocess(e))),_=o.map(e=>e.original_size),p=o.map(e=>e.reshaped_input_size),u=[];for(const{pixel_values:e}of o){e.unsqueeze_(0);const[r,o]=e.dims.slice(-2),i=await(0,n.interpolate_4d)(e,{size:[s,s],mode:"bicubic"});if(t>0){const _=[],p=c(t),d=l(o/p),h=l(r/p);for(let t=0;t<p;++t)for(let s=0;s<p;++s){let i,l,c,u;t===p-1?(l=r-h,u=r):(l=t*h,u=(t+1)*h),s===p-1?(i=o-d,c=o):(i=s*d,c=(s+1)*d);const f=[l,i],m=[u,c],g=await(0,n.slice)(e,f,m,a);_.push(g)}const f=await(0,n.interpolate_4d)((0,n.cat)(_,0),{size:[s,s],mode:"bicubic"});u.push((0,n.cat)([i,f],0))}else u.push(i)}const d=(0,n.stack)(u,0),h=p.map(e=>e.map(e=>s*i(e/s)));return{pixel_values:d,original_sizes:_,reshaped_input_sizes:p,image_sizes:new n.Tensor("int64",h.flat(),[r,2]),num_img_tokens:h.map(([e,t])=>this.calc_num_image_tokens_from_image_size(t,e))}}}},"./src/models/phi3_v/processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VProcessor:()=>l});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");const a="<|image|>",i=/<\|image_\d+\|>/g;class l extends o.Processor{static image_processor_class=n.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;async _call(e,t=null,{padding:r=!0,truncation:o=!0,num_crops:n=null}={}){let s,l;if(Array.isArray(e)||(e=[e]),t){l=await this.image_processor(t,{num_crops:n});const{num_img_tokens:c}=l,_=e.map((e,t)=>e.split(i).join(a.repeat(c[t])));s=this.tokenizer(_,{padding:r,truncation:o});const p=this.tokenizer.model.convert_tokens_to_ids([a])[0];s.input_ids.map_(e=>e==p?-e:e)}else s=this.tokenizer(e);return{...s,...l}}}},"./src/models/processors.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>o.Florence2Processor,Gemma3nProcessor:()=>n.Gemma3nProcessor,GroundingDinoProcessor:()=>s.GroundingDinoProcessor,Idefics3Processor:()=>a.Idefics3Processor,JinaCLIPProcessor:()=>l.JinaCLIPProcessor,LlavaProcessor:()=>c.LlavaProcessor,MgpstrProcessor:()=>_.MgpstrProcessor,MoonshineProcessor:()=>p.MoonshineProcessor,OwlViTProcessor:()=>u.OwlViTProcessor,PaliGemmaProcessor:()=>h.PaliGemmaProcessor,Phi3VProcessor:()=>d.Phi3VProcessor,PyAnnoteProcessor:()=>f.PyAnnoteProcessor,Qwen2VLProcessor:()=>m.Qwen2VLProcessor,SamProcessor:()=>g.SamProcessor,SmolVLMProcessor:()=>b.SmolVLMProcessor,SpeechT5Processor:()=>w.SpeechT5Processor,UltravoxProcessor:()=>x.UltravoxProcessor,VLChatProcessor:()=>i.VLChatProcessor,VoxtralProcessor:()=>y.VoxtralProcessor,Wav2Vec2Processor:()=>M.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>T.Wav2Vec2ProcessorWithLM,WhisperProcessor:()=>k.WhisperProcessor});var o=r("./src/models/florence2/processing_florence2.js"),n=r("./src/models/gemma3n/processing_gemma3n.js"),s=r("./src/models/grounding_dino/processing_grounding_dino.js"),a=r("./src/models/idefics3/processing_idefics3.js"),i=r("./src/models/janus/processing_janus.js"),l=r("./src/models/jina_clip/processing_jina_clip.js"),c=r("./src/models/llava/processing_llava.js"),_=r("./src/models/mgp_str/processing_mgp_str.js"),p=r("./src/models/moonshine/processing_moonshine.js"),u=r("./src/models/owlvit/processing_owlvit.js"),d=r("./src/models/phi3_v/processing_phi3_v.js"),h=r("./src/models/paligemma/processing_paligemma.js"),f=r("./src/models/pyannote/processing_pyannote.js"),m=r("./src/models/qwen2_vl/processing_qwen2_vl.js"),g=r("./src/models/sam/processing_sam.js"),b=r("./src/models/smolvlm/processing_smolvlm.js"),w=r("./src/models/speecht5/processing_speecht5.js"),x=r("./src/models/ultravox/processing_ultravox.js"),y=r("./src/models/voxtral/processing_voxtral.js"),M=r("./src/models/wav2vec2/processing_wav2vec2.js"),T=r("./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js"),k=r("./src/models/whisper/processing_whisper.js")},"./src/models/pvt/image_processing_pvt.js":(e,t,r)=>{r.r(t),r.d(t,{PvtImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}},"./src/models/pyannote/feature_extraction_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteFeatureExtractor:()=>a});var o=r("./src/base/feature_extraction_utils.js"),n=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");class a extends o.FeatureExtractor{async _call(e){(0,o.validate_audio_inputs)(e,"PyAnnoteFeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));const t=[1,1,e.length];return{input_values:new n.Tensor("float32",e,t)}}samples_to_frames(e){return(e-this.config.offset)/this.config.step}post_process_speaker_diarization(e,t){const r=t/this.samples_to_frames(t)/this.config.sampling_rate,o=[];for(const t of e.tolist()){const e=[];let n=-1;for(let r=0;r<t.length;++r){const o=(0,s.softmax)(t[r]),[a,i]=(0,s.max)(o),[l,c]=[r,r+1];i!==n?(n=i,e.push({id:i,start:l,end:c,score:a})):(e.at(-1).end=c,e.at(-1).score+=a)}o.push(e.map(({id:e,start:t,end:o,score:n})=>({id:e,start:t*r,end:o*r,confidence:n/(o-t)})))}return o}}},"./src/models/pyannote/processing_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteProcessor:()=>s});var o=r("./src/base/processing_utils.js"),n=r("./src/models/pyannote/feature_extraction_pyannote.js");class s extends o.Processor{static feature_extractor_class=n.PyAnnoteFeatureExtractor;async _call(e){return await this.feature_extractor(e)}post_process_speaker_diarization(...e){return this.feature_extractor.post_process_speaker_diarization(...e)}get sampling_rate(){return this.feature_extractor.config.sampling_rate}}},"./src/models/qwen2_vl/image_processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLImageProcessor:()=>s});var o=r("./src/base/image_processors_utils.js"),n=r("./src/utils/tensor.js");class s extends o.ImageProcessor{async _call(e,...t){const{pixel_values:r,original_sizes:o,reshaped_input_sizes:s}=await super._call(e,...t);let a=r;const{temporal_patch_size:i,merge_size:l,patch_size:c}=this.config;1===a.dims[0]&&(a=(0,n.cat)(Array.from({length:i},()=>a),0));const _=a.dims[0]/i,p=a.dims[1],u=Math.floor(a.dims[2]/c),d=Math.floor(a.dims[3]/c);return{pixel_values:a.view(_,i,p,Math.floor(u/l),l,c,Math.floor(d/l),l,c).permute(0,3,6,4,7,2,1,5,8).view(_*u*d,p*i*c*c),image_grid_thw:new n.Tensor("int64",[_,u,d],[1,3]),original_sizes:o,reshaped_input_sizes:s}}}},"./src/models/qwen2_vl/processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLProcessor:()=>a});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");class a extends o.Processor{static image_processor_class=n.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;async _call(e,t=null,...r){let o,n;if(Array.isArray(e)||(e=[e]),t&&(o=await this.image_processor(t),n=o.image_grid_thw),n){let t=this.image_processor.config.merge_size**2,r=0;const o=n.tolist();e=e.map(e=>{for(;e.includes("<|image_pad|>");){const n=Number(o[r++].reduce((e,t)=>e*t,1n));e=e.replace("<|image_pad|>","<|placeholder|>".repeat(Math.floor(n/t)))}return e.replaceAll("<|placeholder|>","<|image_pad|>")})}return{...this.tokenizer(e),...o}}}},"./src/models/rt_detr/image_processing_rt_detr.js":(e,t,r)=>{r.r(t),r.d(t,{RTDetrImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{post_process_object_detection(...e){return(0,o.post_process_object_detection)(...e)}}},"./src/models/sam/image_processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamImageProcessor:()=>a});var o=r("./src/base/image_processors_utils.js"),n=r("./src/utils/core.js"),s=r("./src/utils/tensor.js");class a extends o.ImageProcessor{reshape_input_points(e,t,r,o=!1){e=structuredClone(e);let a=(0,n.calculateDimensions)(e);if(3===a.length)o||(a=[1,...a]),e=[e];else if(4!==a.length)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let o=0;o<e.length;++o){let n=t[o],s=r[o],a=[s[0]/n[0],s[1]/n[1]];for(let t=0;t<e[o].length;++t)for(let r=0;r<e[o][t].length;++r)for(let n=0;n<e[o][t][r].length;++n)e[o][t][r][n]*=a[n%2]}return new s.Tensor("float32",Float32Array.from(e.flat(1/0)),a)}add_input_labels(e,t){let r=(0,n.calculateDimensions)(e);if(2===r.length)r=[1,...r],e=[e];else if(3!==r.length)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(r.some((e,r)=>e!==t.dims[r]))throw Error(`The first ${r.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new s.Tensor("int64",e.flat(1/0).map(BigInt),r)}async _call(e,{input_points:t=null,input_labels:r=null,input_boxes:o=null}={}){const n=await super._call(e);if(t&&(n.input_points=this.reshape_input_points(t,n.original_sizes,n.reshaped_input_sizes)),r){if(!n.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");n.input_labels=this.add_input_labels(r,n.input_points)}return o&&(n.input_boxes=this.reshape_input_points(o,n.original_sizes,n.reshaped_input_sizes,!0)),n}async post_process_masks(e,t,r,{mask_threshold:o=0,binarize:n=!0,pad_size:a=null}={}){const i=[],l=[(a=a??this.pad_size).height,a.width];for(let a=0;a<t.length;++a){const c=t[a],_=r[a];let p=await(0,s.interpolate_4d)(e[a],{mode:"bilinear",size:l});if(p=p.slice(null,null,[0,_[0]],[0,_[1]]),p=await(0,s.interpolate_4d)(p,{mode:"bilinear",size:c}),n){const e=p.data,t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)e[r]>o&&(t[r]=1);p=new s.Tensor("bool",t,p.dims)}i.push(p)}return i}generate_crop_boxes(e,t,{crop_n_layers:r=0,overlap_ratio:o=512/1500,points_per_crop:n=32,crop_n_points_downscale_factor:s=1}={}){}}},"./src/models/sam/processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamProcessor:()=>s});var o=r("./src/base/processing_utils.js"),n=r("./src/models/auto/image_processing_auto.js");class s extends o.Processor{static image_processor_class=n.AutoImageProcessor;async _call(...e){return await this.image_processor(...e)}post_process_masks(...e){return this.image_processor.post_process_masks(...e)}reshape_input_points(...e){return this.image_processor.reshape_input_points(...e)}}},"./src/models/seamless_m4t/feature_extraction_seamless_m4t.js":(e,t,r)=>{r.r(t),r.d(t,{SeamlessM4TFeatureExtractor:()=>a});var o=r("./src/base/feature_extraction_utils.js"),n=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class a extends o.FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,r=(0,s.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);this.mel_filters=r,this.window=(0,s.window_function)(400,"povey",{periodic:!1})}async _extract_fbank_features(e,t){return e=e.map(e=>32768*e),(0,s.spectrogram)(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1.192092955078125e-7,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e,{padding:t=!0,pad_to_multiple_of:r=2,do_normalize_per_mel_bins:s=!0,return_attention_mask:a=!0}={}){(0,o.validate_audio_inputs)(e,"SeamlessM4TFeatureExtractor");let i,l=await this._extract_fbank_features(e,this.config.max_length);if(s){const[e,t]=l.dims,r=l.data;for(let o=0;o<t;++o){let n=0;for(let s=0;s<e;++s)n+=r[s*t+o];const s=n/e;let a=0;for(let n=0;n<e;++n)a+=(r[n*t+o]-s)**2;a/=e-1;const i=Math.sqrt(a+1e-7);for(let n=0;n<e;++n){const e=n*t+o;r[e]=(r[e]-s)/i}}}if(t){const[e,t]=l.dims,o=l.data,s=e%r;if(s>0){const r=new Float32Array(t*(e+s));r.set(o),r.fill(this.config.padding_value,o.length);const c=e+s;l=new n.Tensor(l.type,r,[c,t]),a&&(i=new n.Tensor("int64",new BigInt64Array(c),[1,c]),i.data.fill(1n,0,e))}}const[c,_]=l.dims,p=this.config.stride;if(0!==c%p)throw new Error(`The number of frames (${c}) must be a multiple of the stride (${p}).`);const u=l.view(1,Math.floor(c/p),_*p),d={input_features:u};if(a){const e=u.dims[1],t=new BigInt64Array(e);if(i){const e=i.data;for(let r=1,o=0;r<c;r+=p,++o)t[o]=e[r]}else t.fill(1n);d.attention_mask=new n.Tensor("int64",t,[1,e])}return d}}},"./src/models/segformer/image_processing_segformer.js":(e,t,r)=>{r.r(t),r.d(t,{SegformerFeatureExtractor:()=>s,SegformerImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{post_process_semantic_segmentation(...e){return(0,o.post_process_semantic_segmentation)(...e)}}class s extends n{}},"./src/models/siglip/image_processing_siglip.js":(e,t,r)=>{r.r(t),r.d(t,{SiglipImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}},"./src/models/smolvlm/image_processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMImageProcessor:()=>o.Idefics3ImageProcessor});var o=r("./src/models/idefics3/image_processing_idefics3.js")},"./src/models/smolvlm/processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMProcessor:()=>o.Idefics3Processor});var o=r("./src/models/idefics3/processing_idefics3.js")},"./src/models/snac/feature_extraction_snac.js":(e,t,r)=>{r.r(t),r.d(t,{SnacFeatureExtractor:()=>n});var o=r("./src/models/dac/feature_extraction_dac.js");class n extends o.DacFeatureExtractor{}},"./src/models/speecht5/feature_extraction_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5FeatureExtractor:()=>n});var o=r("./src/base/feature_extraction_utils.js");class n extends o.FeatureExtractor{}},"./src/models/speecht5/processing_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5Processor:()=>a});var o=r("./src/base/processing_utils.js"),n=r("./src/tokenizers.js"),s=r("./src/models/auto/feature_extraction_auto.js");class a extends o.Processor{static tokenizer_class=n.AutoTokenizer;static feature_extractor_class=s.AutoFeatureExtractor;async _call(e){return await this.feature_extractor(e)}}},"./src/models/swin2sr/image_processing_swin2sr.js":(e,t,r)=>{r.r(t),r.d(t,{Swin2SRImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{pad_image(e,t,r,o={}){const[n,s,a]=t;return super.pad_image(e,t,{width:s+(r-s%r)%r,height:n+(r-n%r)%r},{mode:"symmetric",center:!1,constant_values:-1,...o})}}},"./src/models/ultravox/processing_ultravox.js":(e,t,r)=>{r.r(t),r.d(t,{UltravoxProcessor:()=>a});var o=r("./src/models/auto/feature_extraction_auto.js"),n=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{static tokenizer_class=n.AutoTokenizer;static feature_extractor_class=o.AutoFeatureExtractor;static uses_processor_config=!0;async _call(e,t=null,r={}){if(Array.isArray(e))throw new Error("Batched inputs are not supported yet.");let o={};if(t){const n=t.length,{input_features:s}=await this.feature_extractor(t,{...r,max_length:n}),a=Math.round(n/this.config.encoder_ds_factor+1e-4),i=1+Math.ceil(a/this.config.stack_factor);o.audio_token_len=[i],o.audio_values=s;const l=this.config.audio_placeholder;if(!e.includes(l))throw new Error(`The input text does not contain the image token ${l}.`);e=e.replaceAll(l,l.repeat(i))}return{...this.tokenizer(e,{add_special_tokens:!1,...r}),...o}}}},"./src/models/vit/image_processing_vit.js":(e,t,r)=>{r.r(t),r.d(t,{ViTFeatureExtractor:()=>s,ViTImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{}class s extends n{}},"./src/models/vitmatte/image_processing_vitmatte.js":(e,t,r)=>{r.r(t),r.d(t,{VitMatteImageProcessor:()=>s});var o=r("./src/base/image_processors_utils.js"),n=r("./src/utils/tensor.js");class s extends o.ImageProcessor{async _call(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);const r=await Promise.all(e.map(e=>this.preprocess(e))),o=await Promise.all(t.map(e=>this.preprocess(e,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:(0,n.stack)(r.map((e,t)=>(0,n.cat)([e.pixel_values,o[t].pixel_values],0)),0),original_sizes:r.map(e=>e.original_size),reshaped_input_sizes:r.map(e=>e.reshaped_input_size)}}}},"./src/models/vitpose/image_processing_vitpose.js":(e,t,r)=>{r.r(t),r.d(t,{VitPoseImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{post_process_pose_estimation(e,t,{threshold:r=null}={}){const o=e.tolist(),[n,s,a,i]=e.dims,l=[];for(let e=0;e<n;++e){const n=o[e],s=t[e],c=[];for(let e=0;e<s.length;++e){const t=s[e],o=[],l=[],_=[],p=t.at(-2)/i,u=t.at(-1)/a;for(let e=0;e<n.length;++e){let[t,s]=[0,0],a=0,i=-1/0;const c=n[e];for(let e=0;e<c.length;++e){const r=c[e];for(let o=0;o<r.length;++o){const n=r[o];a+=n,i=Math.max(i,n),t+=(o+.5)*n,s+=e*n}}if(null!=r&&i<r)continue;const d=[p*t/a,u*s/a];o.push(d),_.push(e),l.push(i)}c.push({bbox:t,scores:l,labels:_,keypoints:o})}l.push(c)}return l}}},"./src/models/voxtral/processing_voxtral.js":(e,t,r)=>{r.r(t),r.d(t,{VoxtralProcessor:()=>l});var o=r("./src/models/auto/feature_extraction_auto.js"),n=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js"),a=r("./src/utils/tensor.js");const i="[AUDIO]";class l extends s.Processor{static tokenizer_class=n.AutoTokenizer;static feature_extractor_class=o.AutoFeatureExtractor;static uses_processor_config=!1;async _call(e,t=null,r={}){if(Array.isArray(e))throw new Error("Batched inputs are not supported yet.");const o={};if(t){if(!e.includes(i))throw new Error(`The input text does not contain the audio token ${i}.`);Array.isArray(t)||(t=[t]);const n=e.split(i),s=n.length-1;if(s!==t.length)throw new Error(`The number of audio inputs (${t.length}) does not match the number of audio tokens in the text (${s}).`);const l=this.feature_extractor.config.n_samples,c=t.map(e=>function(e,t){const r=[];for(let o=0;o<e.length;o+=t)r.push(e.subarray(o,Math.min(o+t,e.length)));return r}(e,l)),_=c.map(e=>e.length),p=c.flat(),u=(await Promise.all(p.map(e=>this.feature_extractor(e,r)))).map(e=>e.input_features);o.audio_values=u.length>1?(0,a.cat)(u,0):u[0];let d=n[0];for(let e=0;e<_.length;++e){d+="[BEGIN_AUDIO]";for(let t=0;t<_[e];++t)d+=i.repeat(375);d+=n[e+1]}e=d}return{...this.tokenizer(e,{add_special_tokens:!1,...r}),...o}}}},"./src/models/wav2vec2/feature_extraction_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2FeatureExtractor:()=>s});var o=r("./src/base/feature_extraction_utils.js"),n=r("./src/utils/tensor.js");class s extends o.FeatureExtractor{_zero_mean_unit_var_norm(e){const t=e.reduce((e,t)=>e+t,0)/e.length,r=e.reduce((e,r)=>e+(r-t)**2,0)/e.length;return e.map(e=>(e-t)/Math.sqrt(r+1e-7))}async _call(e){(0,o.validate_audio_inputs)(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let t=e;this.config.do_normalize&&(t=this._zero_mean_unit_var_norm(t));const r=[1,t.length];return{input_values:new n.Tensor("float32",t,r),attention_mask:new n.Tensor("int64",new BigInt64Array(t.length).fill(1n),r)}}}},"./src/models/wav2vec2/processing_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2Processor:()=>a});var o=r("./src/tokenizers.js"),n=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=n.AutoFeatureExtractor;async _call(e){return await this.feature_extractor(e)}}},"./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2ProcessorWithLM:()=>a});var o=r("./src/tokenizers.js"),n=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=n.AutoFeatureExtractor;async _call(e){return await this.feature_extractor(e)}}},"./src/models/wespeaker/feature_extraction_wespeaker.js":(e,t,r)=>{r.r(t),r.d(t,{WeSpeakerFeatureExtractor:()=>s});var o=r("./src/base/feature_extraction_utils.js"),n=(r("./src/utils/tensor.js"),r("./src/utils/audio.js"));class s extends o.FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,r=(0,n.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);this.mel_filters=r,this.window=(0,n.window_function)(400,"hamming",{periodic:!1}),this.min_num_frames=this.config.min_num_frames}async _extract_fbank_features(e){return e=e.map(e=>32768*e),(0,n.spectrogram)(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1.192092955078125e-7,remove_dc_offset:!0,transpose:!0,min_num_frames:this.min_num_frames})}async _call(e){(0,o.validate_audio_inputs)(e,"WeSpeakerFeatureExtractor");const t=(await this._extract_fbank_features(e)).unsqueeze_(0);if(null===this.config.fbank_centering_span){const e=t.mean(1).data,r=t.data,[o,n,s]=t.dims;for(let t=0;t<o;++t){const o=t*n*s,a=t*s;for(let t=0;t<n;++t){const n=o+t*s;for(let t=0;t<s;++t)r[n+t]-=e[a+t]}}}return{input_features:t}}}},"./src/models/whisper/common_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WHISPER_LANGUAGE_MAPPING:()=>n,WHISPER_TO_LANGUAGE_CODE_MAPPING:()=>s,whisper_language_to_code:()=>a});const o=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],n=new Map(o),s=new Map([...o.map(([e,t])=>[t,e]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);function a(e){e=e.toLowerCase();let t=s.get(e);if(void 0===t){const r=e.match(/^<\|([a-z]{2})\|>$/);if(r&&(e=r[1]),!n.has(e)){const t=2===e.length?n.keys():n.values();throw new Error(`Language "${e}" is not supported. Must be one of: ${JSON.stringify(Array.from(t))}`)}t=e}return t}},"./src/models/whisper/feature_extraction_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperFeatureExtractor:()=>a});var o=r("./src/base/feature_extraction_utils.js"),n=(r("./src/utils/tensor.js"),r("./src/utils/audio.js")),s=r("./src/utils/maths.js");class a extends o.FeatureExtractor{constructor(e){super(e),this.config.mel_filters??=(0,n.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=(0,n.window_function)(this.config.n_fft,"hann")}async _extract_fbank_features(e){const t=await(0,n.spectrogram)(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:Math.min(Math.floor(e.length/this.config.hop_length),this.config.nb_max_frames)}),r=t.data,o=(0,s.max)(r)[0];for(let e=0;e<r.length;++e)r[e]=(Math.max(r[e],o-8)+4)/4;return t}async _call(e,{max_length:t=null}={}){let r;(0,o.validate_audio_inputs)(e,"WhisperFeatureExtractor");const n=t??this.config.n_samples;e.length>n?(e.length>this.config.n_samples&&console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),r=e.slice(0,n)):(r=new Float32Array(n),r.set(e));return{input_features:(await this._extract_fbank_features(r)).unsqueeze_(0)}}}},"./src/models/whisper/generation_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperGenerationConfig:()=>n});var o=r("./src/generation/configuration_utils.js");class n extends o.GenerationConfig{return_timestamps=null;return_token_timestamps=null;num_frames=null;alignment_heads=null;task=null;language=null;no_timestamps_token_id=null;prompt_ids=null;is_multilingual=null;lang_to_id=null;task_to_id=null;max_initial_timestamp_index=1}},"./src/models/whisper/processing_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperProcessor:()=>a});var o=r("./src/models/auto/feature_extraction_auto.js"),n=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{static tokenizer_class=n.AutoTokenizer;static feature_extractor_class=o.AutoFeatureExtractor;async _call(e){return await this.feature_extractor(e)}}},"./src/models/yolos/image_processing_yolos.js":(e,t,r)=>{r.r(t),r.d(t,{YolosFeatureExtractor:()=>s,YolosImageProcessor:()=>n});var o=r("./src/base/image_processors_utils.js");class n extends o.ImageProcessor{post_process_object_detection(...e){return(0,o.post_process_object_detection)(...e)}}class s extends n{}},"./src/ops/registry.js":(e,t,r)=>{r.r(t),r.d(t,{TensorOpRegistry:()=>a});var o=r("./src/backends/onnx.js"),n=r("./src/utils/tensor.js");const s=async(e,t,r)=>{const s=await(0,o.createInferenceSession)(new Uint8Array(e),t);return async e=>{const t=(0,o.isONNXProxy)(),a=Object.fromEntries(Object.entries(e).map(([e,r])=>[e,(t?r.clone():r).ort_tensor])),i=await(0,o.runInferenceSession)(s,a);return Array.isArray(r)?r.map(e=>new n.Tensor(i[e])):new n.Tensor(i[r])}};class a{static session_options={};static get nearest_interpolate_4d(){return this._nearest_interpolate_4d||(this._nearest_interpolate_4d=s([8,10,18,0,58,129,1,10,41,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,18,10,4,109,111,100,101,34,7,110,101,97,114,101,115,116,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,21],this.session_options,"y")),this._nearest_interpolate_4d}static get bilinear_interpolate_4d(){return this._bilinear_interpolate_4d||(this._bilinear_interpolate_4d=s([8,9,18,0,58,128,1,10,40,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,17,10,4,109,111,100,101,34,6,108,105,110,101,97,114,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bilinear_interpolate_4d}static get bicubic_interpolate_4d(){return this._bicubic_interpolate_4d||(this._bicubic_interpolate_4d=s([8,9,18,0,58,127,10,39,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,16,10,4,109,111,100,101,34,5,99,117,98,105,99,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bicubic_interpolate_4d}static get matmul(){return this._matmul||(this._matmul=s([8,9,18,0,58,55,10,17,10,1,97,10,1,98,18,1,99,34,6,77,97,116,77,117,108,18,1,114,90,9,10,1,97,18,4,10,2,8,1,90,9,10,1,98,18,4,10,2,8,1,98,9,10,1,99,18,4,10,2,8,1,66,2,16,20],this.session_options,"c")),this._matmul}static get stft(){return this._stft||(this._stft=s([8,7,18,0,58,148,1,10,38,10,1,115,10,1,106,10,1,119,10,1,108,18,1,111,34,4,83,84,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,115,90,26,10,1,115,18,21,10,19,8,1,18,15,10,3,18,1,98,10,3,18,1,115,10,3,18,1,99,90,11,10,1,106,18,6,10,4,8,7,18,0,90,16,10,1,119,18,11,10,9,8,1,18,5,10,3,18,1,119,90,11,10,1,108,18,6,10,4,8,7,18,0,98,31,10,1,111,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,102,10,3,18,1,100,10,3,18,1,99,66,2,16,17],this.session_options,"o")),this._stft}static get rfft(){return this._rfft||(this._rfft=s([8,9,18,0,58,97,10,33,10,1,120,10,0,10,1,97,18,1,121,34,3,68,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,100,90,21,10,1,120,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,90,11,10,1,97,18,6,10,4,8,7,18,0,98,21,10,1,121,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,66,2,16,20],this.session_options,"y")),this._rfft}static get top_k(){return this._top_k||(this._top_k=s([8,10,18,0,58,73,10,18,10,1,120,10,1,107,18,1,118,18,1,105,34,4,84,111,112,75,18,1,116,90,9,10,1,120,18,4,10,2,8,1,90,15,10,1,107,18,10,10,8,8,7,18,4,10,2,8,1,98,9,10,1,118,18,4,10,2,8,1,98,9,10,1,105,18,4,10,2,8,7,66,2,16,21],this.session_options,["v","i"])),this._top_k}static get slice(){return this._slice||(this._slice=s([8,7,18,0,58,96,10,25,10,1,120,10,1,115,10,1,101,10,1,97,10,1,116,18,1,121,34,5,83,108,105,99,101,18,1,114,90,9,10,1,120,18,4,10,2,8,1,90,9,10,1,115,18,4,10,2,8,7,90,9,10,1,101,18,4,10,2,8,7,90,9,10,1,97,18,4,10,2,8,7,90,9,10,1,116,18,4,10,2,8,7,98,9,10,1,121,18,4,10,2,8,1,66,2,16,13],this.session_options,"y")),this._slice}}},"./src/pipelines.js":(e,t,r)=>{r.r(t),r.d(t,{AudioClassificationPipeline:()=>F,AutomaticSpeechRecognitionPipeline:()=>E,BackgroundRemovalPipeline:()=>L,DepthEstimationPipeline:()=>z,DocumentQuestionAnsweringPipeline:()=>$,FeatureExtractionPipeline:()=>P,FillMaskPipeline:()=>w,ImageClassificationPipeline:()=>I,ImageFeatureExtractionPipeline:()=>S,ImageSegmentationPipeline:()=>O,ImageToImagePipeline:()=>j,ImageToTextPipeline:()=>A,ObjectDetectionPipeline:()=>N,Pipeline:()=>f,QuestionAnsweringPipeline:()=>b,SummarizationPipeline:()=>y,Text2TextGenerationPipeline:()=>x,TextClassificationPipeline:()=>m,TextGenerationPipeline:()=>k,TextToAudioPipeline:()=>V,TokenClassificationPipeline:()=>g,TranslationPipeline:()=>M,ZeroShotAudioClassificationPipeline:()=>C,ZeroShotClassificationPipeline:()=>v,ZeroShotImageClassificationPipeline:()=>D,ZeroShotObjectDetectionPipeline:()=>B,pipeline:()=>U});var o=r("./src/tokenizers.js"),n=r("./src/models.js"),s=r("./src/models/auto/processing_auto.js"),a=(r("./src/base/processing_utils.js"),r("./src/utils/generic.js")),i=r("./src/utils/core.js"),l=r("./src/utils/maths.js"),c=r("./src/utils/audio.js"),_=r("./src/utils/tensor.js"),p=r("./src/utils/image.js");async function u(e){return Array.isArray(e)||(e=[e]),await Promise.all(e.map(e=>p.RawImage.read(e)))}async function d(e,t){return Array.isArray(e)||(e=[e]),await Promise.all(e.map(e=>"string"==typeof e||e instanceof URL?(0,c.read_audio)(e,t):e instanceof Float64Array?new Float32Array(e):e))}function h(e,t){t&&(e=e.map(e=>0|e));const[r,o,n,s]=e;return{xmin:r,ymin:o,xmax:n,ymax:s}}class f extends a.Callable{constructor({task:e,model:t,tokenizer:r=null,processor:o=null}){super(),this.task=e,this.model=t,this.tokenizer=r,this.processor=o}async dispose(){await this.model.dispose()}}class m extends f{constructor(e){super(e)}async _call(e,{top_k:t=1}={}){const r=this.tokenizer(e,{padding:!0,truncation:!0}),o=await this.model(r),n="multi_label_classification"===this.model.config.problem_type?e=>e.sigmoid():e=>new _.Tensor("float32",(0,l.softmax)(e.data),e.dims),s=this.model.config.id2label,a=[];for(const e of o.logits){const r=n(e),o=await(0,_.topk)(r,t),i=o[0].tolist(),l=o[1].tolist().map((e,t)=>({label:s?s[e]:`LABEL_${e}`,score:i[t]}));1===t?a.push(...l):a.push(l)}return Array.isArray(e)||1===t?a:a[0]}}class g extends f{constructor(e){super(e)}async _call(e,{ignore_labels:t=["O"]}={}){const r=Array.isArray(e),o=this.tokenizer(r?e:[e],{padding:!0,truncation:!0}),n=(await this.model(o)).logits,s=this.model.config.id2label,a=[];for(let e=0;e<n.dims[0];++e){const r=o.input_ids[e],i=n[e],c=[];for(let e=0;e<i.dims[0];++e){const o=i[e],n=(0,l.max)(o.data)[1],a=s?s[n]:`LABEL_${n}`;if(t.includes(a))continue;const _=this.tokenizer.decode([r[e].item()],{skip_special_tokens:!0});if(""===_)continue;const p=(0,l.softmax)(o.data);c.push({entity:a,score:p[n],index:e,word:_})}a.push(c)}return r?a:a[0]}}class b extends f{constructor(e){super(e)}async _call(e,t,{top_k:r=1}={}){const o=this.tokenizer(e,{text_pair:t,padding:!0,truncation:!0}),{start_logits:n,end_logits:s}=await this.model(o),a=o.input_ids.tolist(),c=o.attention_mask.tolist(),_=this.tokenizer.all_special_ids,p=[];for(let e=0;e<n.dims[0];++e){const t=a[e],o=t.findIndex(e=>e==this.tokenizer.sep_token_id),u=(c[e].map((e,r)=>1==e&&(0===r||r>o&&-1===_.findIndex(e=>e==t[r]))),n[e].tolist()),d=s[e].tolist();for(let r=1;r<u.length;++r)(0==c[e]||r<=o||-1!==_.findIndex(e=>e==t[r]))&&(u[r]=-1/0,d[r]=-1/0);const h=(0,l.softmax)(u).map((e,t)=>[e,t]),f=(0,l.softmax)(d).map((e,t)=>[e,t]);h[0][0]=0,f[0][0]=0;const m=(0,i.product)(h,f).filter(e=>e[0][1]<=e[1][1]).map(e=>[e[0][1],e[1][1],e[0][0]*e[1][0]]).sort((e,t)=>t[2]-e[2]);for(let e=0;e<Math.min(m.length,r);++e){const[r,o,n]=m[e],s=t.slice(r,o+1),a=this.tokenizer.decode(s,{skip_special_tokens:!0});p.push({answer:a,score:n})}}return 1===r?p[0]:p}}class w extends f{constructor(e){super(e)}async _call(e,{top_k:t=5}={}){const r=this.tokenizer(e,{padding:!0,truncation:!0}),{logits:o}=await this.model(r),n=[],s=r.input_ids.tolist();for(let e=0;e<s.length;++e){const r=s[e],a=r.findIndex(e=>e==this.tokenizer.mask_token_id);if(-1===a)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const i=o[e][a],c=await(0,_.topk)(new _.Tensor("float32",(0,l.softmax)(i.data),i.dims),t),p=c[0].tolist(),u=c[1].tolist();n.push(u.map((e,t)=>{const o=r.slice();return o[a]=e,{score:p[t],token:Number(e),token_str:this.tokenizer.decode([e]),sequence:this.tokenizer.decode(o,{skip_special_tokens:!0})}}))}return Array.isArray(e)?n:n[0]}}class x extends f{_key="generated_text";constructor(e){super(e)}async _call(e,t={}){Array.isArray(e)||(e=[e]),this.model.config.prefix&&(e=e.map(e=>this.model.config.prefix+e));const r=this.model.config.task_specific_params;r&&r[this.task]&&r[this.task].prefix&&(e=e.map(e=>r[this.task].prefix+e));const o=this.tokenizer,n={padding:!0,truncation:!0};let s;s=this instanceof M&&"_build_translation_inputs"in o?o._build_translation_inputs(e,n,t):o(e,n);const a=await this.model.generate({...s,...t});return o.batch_decode(a,{skip_special_tokens:!0}).map(e=>({[this._key]:e}))}}class y extends x{_key="summary_text";constructor(e){super(e)}}class M extends x{_key="translation_text";constructor(e){super(e)}}function T(e){return Array.isArray(e)&&e.every(e=>"role"in e&&"content"in e)}class k extends f{constructor(e){super(e)}async _call(e,t={}){let r,o=!1,n=!1,s=t.add_special_tokens??(this.tokenizer.add_bos_token||this.tokenizer.add_eos_token)??!1;if("string"==typeof e)r=e=[e];else if(Array.isArray(e)&&e.every(e=>"string"==typeof e))o=!0,r=e;else{if(T(e))e=[e];else{if(!Array.isArray(e)||!e.every(T))throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");o=!0}n=!0,r=e.map(e=>this.tokenizer.apply_chat_template(e,{tokenize:!1,add_generation_prompt:!0})),s=!1}const a=!n&&(t.return_full_text??!0);this.tokenizer.padding_side="left";const i=this.tokenizer(r,{add_special_tokens:s,padding:!0,truncation:!0}),l=await this.model.generate({...i,...t}),c=this.tokenizer.batch_decode(l,{skip_special_tokens:!0});let _;!a&&i.input_ids.dims.at(-1)>0&&(_=this.tokenizer.batch_decode(i.input_ids,{skip_special_tokens:!0}).map(e=>e.length));const p=Array.from({length:e.length},e=>[]);for(let t=0;t<c.length;++t){const r=Math.floor(t/l.dims[0]*e.length);_&&(c[t]=c[t].slice(_[r])),p[r].push({generated_text:n?[...e[r],{role:"assistant",content:c[t]}]:c[t]})}return o||1!==p.length?p:p[0]}}class v extends f{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([e,t])=>[e.toLowerCase(),t])),this.entailment_id=this.label2id.entailment,void 0===this.entailment_id&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,void 0===this.contradiction_id&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,t,{hypothesis_template:r="This example is {}.",multi_label:o=!1}={}){const n=Array.isArray(e);n||(e=[e]),Array.isArray(t)||(t=[t]);const s=t.map(e=>r.replace("{}",e)),a=o||1===t.length,i=[];for(const r of e){const e=[];for(const t of s){const o=this.tokenizer(r,{text_pair:t,padding:!0,truncation:!0}),n=await this.model(o);a?e.push([n.logits.data[this.contradiction_id],n.logits.data[this.entailment_id]]):e.push(n.logits.data[this.entailment_id])}const o=(a?e.map(e=>(0,l.softmax)(e)[1]):(0,l.softmax)(e)).map((e,t)=>[e,t]).sort((e,t)=>t[0]-e[0]);i.push({sequence:r,labels:o.map(e=>t[e[1]]),scores:o.map(e=>e[0])})}return n?i:i[0]}}class P extends f{constructor(e){super(e)}async _call(e,{pooling:t="none",normalize:r=!1,quantize:o=!1,precision:n="binary"}={}){const s=this.tokenizer(e,{padding:!0,truncation:!0}),a=await this.model(s);let i=a.last_hidden_state??a.logits??a.token_embeddings;switch(t){case"none":break;case"mean":i=(0,_.mean_pooling)(i,s.attention_mask);break;case"first_token":case"cls":i=i.slice(null,0);break;case"last_token":case"eos":i=i.slice(null,-1);break;default:throw Error(`Pooling method '${t}' not supported.`)}return r&&(i=i.normalize(2,-1)),o&&(i=(0,_.quantize_embeddings)(i,n)),i}}class S extends f{constructor(e){super(e)}async _call(e,{pool:t=null}={}){const r=await u(e),{pixel_values:o}=await this.processor(r),n=await this.model({pixel_values:o});let s;if(t){if(!("pooler_output"in n))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");s=n.pooler_output}else s=n.last_hidden_state??n.logits??n.image_embeds;return s}}class F extends f{constructor(e){super(e)}async _call(e,{top_k:t=5}={}){const r=this.processor.feature_extractor.config.sampling_rate,o=await d(e,r),n=this.model.config.id2label,s=[];for(const e of o){const r=await this.processor(e),o=(await this.model(r)).logits[0],a=await(0,_.topk)(new _.Tensor("float32",(0,l.softmax)(o.data),o.dims),t),i=a[0].tolist(),c=a[1].tolist().map((e,t)=>({label:n?n[e]:`LABEL_${e}`,score:i[t]}));s.push(c)}return Array.isArray(e)?s:s[0]}}class C extends f{constructor(e){super(e)}async _call(e,t,{hypothesis_template:r="This is a sound of {}."}={}){const o=!Array.isArray(e);o&&(e=[e]);const n=t.map(e=>r.replace("{}",e)),s=this.tokenizer(n,{padding:!0,truncation:!0}),a=this.processor.feature_extractor.config.sampling_rate,i=await d(e,a),c=[];for(const e of i){const r=await this.processor(e),o=await this.model({...s,...r}),n=(0,l.softmax)(o.logits_per_audio.data);c.push([...n].map((e,r)=>({score:e,label:t[r]})))}return o?c[0]:c}}class E extends f{constructor(e){super(e)}async _call(e,t={}){switch(this.model.config.model_type){case"whisper":case"lite-whisper":return this._call_whisper(e,t);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(e,t);case"moonshine":return this._call_moonshine(e,t);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,t){t.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),t.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const r=!Array.isArray(e);r&&(e=[e]);const o=this.processor.feature_extractor.config.sampling_rate,n=await d(e,o),s=[];for(const e of n){const t=await this.processor(e),r=(await this.model(t)).logits[0],o=[];for(const e of r)o.push((0,l.max)(e.data)[1]);const n=this.tokenizer.decode(o);s.push({text:n})}return r?s[0]:s}async _call_whisper(e,t){const r=t.return_timestamps??!1,o=t.chunk_length_s??0,n=t.force_full_sequences??!1;let s=t.stride_length_s??null;const a={...t};"word"===r&&(a.return_token_timestamps=!0,a.return_timestamps=!1);const i=!Array.isArray(e);i&&(e=[e]);const c=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,_=this.processor.feature_extractor.config.hop_length,p=this.processor.feature_extractor.config.sampling_rate,u=await d(e,p),h=[];for(const e of u){let t=[];if(o>0){if(null===s)s=o/6;else if(o<=s)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const r=p*o,n=p*s,a=r-2*n;let i=0;for(;;){const o=i+r,s=e.subarray(i,o),l=await this.processor(s),c=0===i,_=o>=e.length;if(t.push({stride:[s.length,c?0:n,_?0:n],input_features:l.input_features,is_last:_}),_)break;i+=a}}else t=[{stride:[e.length,0,0],input_features:(await this.processor(e)).input_features,is_last:!0}];for(const e of t){a.num_frames=Math.floor(e.stride[0]/_);const t=await this.model.generate({inputs:e.input_features,...a});"word"===r?(e.tokens=t.sequences.tolist()[0],e.token_timestamps=t.token_timestamps.tolist()[0].map(e=>(0,l.round)(e,2))):e.tokens=t[0].tolist(),e.stride=e.stride.map(e=>e/p)}const[i,u]=this.tokenizer._decode_asr(t,{time_precision:c,return_timestamps:r,force_full_sequences:n});h.push({text:i,...u})}return i?h[0]:h}async _call_moonshine(e,t){const r=!Array.isArray(e);r&&(e=[e]);const o=this.processor.feature_extractor.config.sampling_rate,n=await d(e,o),s=[];for(const e of n){const r=await this.processor(e),n=6*Math.floor(e.length/o),a=await this.model.generate({max_new_tokens:n,...t,...r}),i=this.processor.batch_decode(a,{skip_special_tokens:!0})[0];s.push({text:i})}return r?s[0]:s}}class A extends f{constructor(e){super(e)}async _call(e,t={}){const r=Array.isArray(e),o=await u(e),{pixel_values:n}=await this.processor(o),s=[];for(const e of n){e.dims=[1,...e.dims];const r=await this.model.generate({inputs:e,...t}),o=this.tokenizer.batch_decode(r,{skip_special_tokens:!0}).map(e=>({generated_text:e.trim()}));s.push(o)}return r?s:s[0]}}class I extends f{constructor(e){super(e)}async _call(e,{top_k:t=5}={}){const r=await u(e),{pixel_values:o}=await this.processor(r),n=await this.model({pixel_values:o}),s=this.model.config.id2label,a=[];for(const e of n.logits){const r=await(0,_.topk)(new _.Tensor("float32",(0,l.softmax)(e.data),e.dims),t),o=r[0].tolist(),n=r[1].tolist().map((e,t)=>({label:s?s[e]:`LABEL_${e}`,score:o[t]}));a.push(n)}return Array.isArray(e)?a:a[0]}}class O extends f{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:t=.5,mask_threshold:r=.5,overlap_mask_area_threshold:o=.8,label_ids_to_fuse:n=null,target_sizes:s=null,subtask:a=null}={}){if(Array.isArray(e)&&1!==e.length)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const i=await u(e),l=i.map(e=>[e.height,e.width]),c=await this.processor(i),{inputNames:_,outputNames:d}=this.model.sessions.model;if(!_.includes("pixel_values")){if(1!==_.length)throw Error(`Expected a single input name, but got ${_.length} inputs: ${_}.`);const e=_[0];if(e in c)throw Error(`Input name ${e} already exists in the inputs.`);c[e]=c.pixel_values}const h=await this.model(c);let f=null;if(null!==a)f=this.subtasks_mapping[a];else if(this.processor.image_processor)for(const[e,t]of Object.entries(this.subtasks_mapping))if(t in this.processor.image_processor){f=this.processor.image_processor[t].bind(this.processor.image_processor),a=e;break}const m=this.model.config.id2label,g=[];if(a)if("panoptic"===a||"instance"===a){const e=f(h,t,r,o,n,s??l)[0],a=e.segmentation;for(const t of e.segments_info){const e=new Uint8ClampedArray(a.data.length);for(let r=0;r<a.data.length;++r)a.data[r]===t.id&&(e[r]=255);const r=new p.RawImage(e,a.dims[1],a.dims[0],1);g.push({score:t.score,label:m[t.label_id],mask:r})}}else{if("semantic"!==a)throw Error(`Subtask ${a} not supported.`);{const{segmentation:e,labels:t}=f(h,s??l)[0];for(const r of t){const t=new Uint8ClampedArray(e.data.length);for(let o=0;o<e.data.length;++o)e.data[o]===r&&(t[o]=255);const o=new p.RawImage(t,e.dims[1],e.dims[0],1);g.push({score:null,label:m[r],mask:o})}}}else{const e=1e-5,t=h[d[0]];for(let r=0;r<l.length;++r){const o=l[r],n=t[r];n.data.some(t=>t<-e||t>1+e)&&n.sigmoid_();const s=await p.RawImage.fromTensor(n.mul_(255).to("uint8")).resize(o[1],o[0]);g.push({label:null,score:null,mask:s})}}return g}}class L extends O{constructor(e){super(e)}async _call(e,t={}){if(Array.isArray(e)&&1!==e.length)throw Error("Background removal pipeline currently only supports a batch size of 1.");const r=await u(e),o=await super._call(e,t);return r.map((e,t)=>{const r=e.clone();return r.putAlpha(o[t].mask),r})}}class D extends f{constructor(e){super(e)}async _call(e,t,{hypothesis_template:r="This is a photo of {}"}={}){const o=Array.isArray(e),n=await u(e),s=t.map(e=>r.replace("{}",e)),a=this.tokenizer(s,{padding:"siglip"!==this.model.config.model_type||"max_length",truncation:!0}),{pixel_values:i}=await this.processor(n),c=await this.model({...a,pixel_values:i}),_="siglip"===this.model.config.model_type?e=>e.sigmoid().data:e=>(0,l.softmax)(e.data),p=[];for(const e of c.logits_per_image){const r=[..._(e)].map((e,r)=>({score:e,label:t[r]}));r.sort((e,t)=>t.score-e.score),p.push(r)}return o?p:p[0]}}class N extends f{constructor(e){super(e)}async _call(e,{threshold:t=.9,percentage:r=!1}={}){const o=Array.isArray(e);if(o&&1!==e.length)throw Error("Object detection pipeline currently only supports a batch size of 1.");const n=await u(e),s=r?null:n.map(e=>[e.height,e.width]),{pixel_values:a,pixel_mask:i}=await this.processor(n),l=await this.model({pixel_values:a,pixel_mask:i}),c=this.processor.image_processor.post_process_object_detection(l,t,s),_=this.model.config.id2label,p=c.map(e=>e.boxes.map((t,o)=>({score:e.scores[o],label:_[e.classes[o]],box:h(t,!r)})));return o?p:p[0]}}class B extends f{constructor(e){super(e)}async _call(e,t,{threshold:r=.1,top_k:o=null,percentage:n=!1}={}){const s=Array.isArray(e),a=await u(e),i=this.tokenizer(t,{padding:!0,truncation:!0}),l=await this.processor(a),c=[];for(let e=0;e<a.length;++e){const s=a[e],_=n?null:[[s.height,s.width]],p=l.pixel_values[e].unsqueeze_(0),u=await this.model({...i,pixel_values:p});let d;if("post_process_grounded_object_detection"in this.processor){const e=this.processor.post_process_grounded_object_detection(u,i.input_ids,{box_threshold:r,text_threshold:r,target_sizes:_})[0];d=e.boxes.map((t,r)=>({score:e.scores[r],label:e.labels[r],box:h(t,!n)}))}else{const e=this.processor.image_processor.post_process_object_detection(u,r,_,!0)[0];d=e.boxes.map((r,o)=>({score:e.scores[o],label:t[e.classes[o]],box:h(r,!n)}))}d.sort((e,t)=>t.score-e.score),null!==o&&(d=d.slice(0,o)),c.push(d)}return s?c:c[0]}}class $ extends f{constructor(e){super(e)}async _call(e,t,r={}){const o=(await u(e))[0],{pixel_values:n}=await this.processor(o),s=`<s_docvqa><s_question>${t}</s_question><s_answer>`,a=this.tokenizer(s,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,i=await this.model.generate({inputs:n,max_length:this.model.config.decoder.max_position_embeddings,decoder_input_ids:a,...r}),l=this.tokenizer.batch_decode(i)[0].match(/<s_answer>(.*?)<\/s_answer>/);let c=null;return l&&l.length>=2&&(c=l[1].trim()),[{answer:c}]}}class V extends f{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(e){super(e),this.vocoder=e.vocoder??null}async _call(e,{speaker_embeddings:t=null}={}){return this.processor?this._call_text_to_spectrogram(e,{speaker_embeddings:t}):this._call_text_to_waveform(e)}async _call_text_to_waveform(e){const t=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:r}=await this.model(t),o=this.model.config.sampling_rate;return new c.RawAudio(r.data,o)}async _call_text_to_spectrogram(e,{speaker_embeddings:t}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await n.AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{dtype:"fp32"})),("string"==typeof t||t instanceof URL)&&(t=new Float32Array(await(await fetch(t)).arrayBuffer())),t instanceof Float32Array)t=new _.Tensor("float32",t,[1,t.length]);else if(!(t instanceof _.Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:r}=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:o}=await this.model.generate_speech(r,t,{vocoder:this.vocoder}),s=this.processor.feature_extractor.config.sampling_rate;return new c.RawAudio(o.data,s)}}class j extends f{constructor(e){super(e)}async _call(e){const t=await u(e),r=await this.processor(t),o=await this.model(r),n=[];for(const e of o.reconstruction){const t=e.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");n.push(p.RawImage.fromTensor(t))}return n.length>1?n:n[0]}}class z extends f{constructor(e){super(e)}async _call(e){const t=await u(e),r=await this.processor(t),{predicted_depth:o}=await this.model(r),n=[];for(let e=0;e<t.length;++e){const r=o[e],[s,a]=r.dims.slice(-2),[i,l]=t[e].size,c=(await(0,_.interpolate_4d)(r.view(1,1,s,a),{size:[l,i],mode:"bilinear"})).view(l,i),u=c.min().item(),d=c.max().item(),h=c.sub(u).div_(d-u).mul_(255).to("uint8").unsqueeze(0),f=p.RawImage.fromTensor(h);n.push({predicted_depth:c,depth:f})}return n.length>1?n:n[0]}}const R=Object.freeze({"text-classification":{tokenizer:o.AutoTokenizer,pipeline:m,model:n.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:o.AutoTokenizer,pipeline:g,model:n.AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:o.AutoTokenizer,pipeline:b,model:n.AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:o.AutoTokenizer,pipeline:w,model:n.AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:o.AutoTokenizer,pipeline:y,model:n.AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:o.AutoTokenizer,pipeline:M,model:n.AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:o.AutoTokenizer,pipeline:x,model:n.AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:o.AutoTokenizer,pipeline:k,model:n.AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:o.AutoTokenizer,pipeline:v,model:n.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:F,model:n.AutoModelForAudioClassification,processor:s.AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:o.AutoTokenizer,pipeline:C,model:n.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:o.AutoTokenizer,pipeline:E,model:[n.AutoModelForSpeechSeq2Seq,n.AutoModelForCTC],processor:s.AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:o.AutoTokenizer,pipeline:V,model:[n.AutoModelForTextToWaveform,n.AutoModelForTextToSpectrogram],processor:[s.AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:o.AutoTokenizer,pipeline:A,model:n.AutoModelForVision2Seq,processor:s.AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:I,model:n.AutoModelForImageClassification,processor:s.AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:O,model:[n.AutoModelForImageSegmentation,n.AutoModelForSemanticSegmentation,n.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"background-removal":{pipeline:L,model:[n.AutoModelForImageSegmentation,n.AutoModelForSemanticSegmentation,n.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/modnet"},type:"image"},"zero-shot-image-classification":{tokenizer:o.AutoTokenizer,pipeline:D,model:n.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:N,model:n.AutoModelForObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:o.AutoTokenizer,pipeline:B,model:n.AutoModelForZeroShotObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:o.AutoTokenizer,pipeline:$,model:n.AutoModelForDocumentQuestionAnswering,processor:s.AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:j,model:n.AutoModelForImageToImage,processor:s.AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:z,model:n.AutoModelForDepthEstimation,processor:s.AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:o.AutoTokenizer,pipeline:P,model:n.AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:s.AutoProcessor,pipeline:S,model:[n.AutoModelForImageFeatureExtraction,n.AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),G=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function U(e,t=null,{progress_callback:r=null,config:o=null,cache_dir:n=null,local_files_only:s=!1,revision:a="main",device:l=null,dtype:c=null,subfolder:_="onnx",use_external_data_format:p=null,model_file_name:u=null,session_options:d={}}={}){e=G[e]??e;const h=R[e.split("_",1)[0]];if(!h)throw Error(`Unsupported pipeline: ${e}. Must be one of [${Object.keys(R)}]`);t||(t=h.default.model,console.log(`No model specified. Using default model: "${t}".`));const f={progress_callback:r,config:o,cache_dir:n,local_files_only:s,revision:a,device:l,dtype:c,subfolder:_,use_external_data_format:p,model_file_name:u,session_options:d},m=new Map([["tokenizer",h.tokenizer],["model",h.model],["processor",h.processor]]),g=await async function(e,t,r){const o=Object.create(null),n=[];for(const[s,a]of e.entries()){if(!a)continue;let e;e=Array.isArray(a)?new Promise(async(e,o)=>{let n;for(const s of a){if(null===s)return void e(null);try{return void e(await s.from_pretrained(t,r))}catch(e){if(e.message?.includes("Unsupported model type"))n=e;else{if(!e.message?.includes("Could not locate file"))return void o(e);n=e}}}o(n)}):a.from_pretrained(t,r),o[s]=e,n.push(e)}await Promise.all(n);for(const[e,t]of Object.entries(o))o[e]=await t;return o}(m,t,f);g.task=e,(0,i.dispatchCallback)(r,{status:"ready",task:e,model:t});return new(0,h.pipeline)(g)}},"./src/tokenizers.js":(e,t,r)=>{r.r(t),r.d(t,{AlbertTokenizer:()=>ke,AutoTokenizer:()=>gt,BartTokenizer:()=>$e,BertTokenizer:()=>Te,BlenderbotSmallTokenizer:()=>_t,BlenderbotTokenizer:()=>ct,BloomTokenizer:()=>Re,CLIPTokenizer:()=>st,CamembertTokenizer:()=>Oe,CodeGenTokenizer:()=>nt,CodeLlamaTokenizer:()=>qe,CohereTokenizer:()=>ht,ConvBertTokenizer:()=>Ee,DebertaTokenizer:()=>Se,DebertaV2Tokenizer:()=>Fe,DistilBertTokenizer:()=>Ie,ElectraTokenizer:()=>De,Ernie4_5_Tokenizer:()=>mt,EsmTokenizer:()=>Ye,FalconTokenizer:()=>Xe,GPT2Tokenizer:()=>Be,GPTNeoXTokenizer:()=>Qe,GemmaTokenizer:()=>Ze,Grok1Tokenizer:()=>Ke,HerbertTokenizer:()=>Ce,LlamaTokenizer:()=>Ue,M2M100Tokenizer:()=>rt,MBart50Tokenizer:()=>je,MBartTokenizer:()=>Ve,MPNetTokenizer:()=>He,MarianTokenizer:()=>it,MgpstrTokenizer:()=>ft,MobileBertTokenizer:()=>ve,NllbTokenizer:()=>tt,NougatTokenizer:()=>ut,PreTrainedTokenizer:()=>Me,Qwen2Tokenizer:()=>Je,RoFormerTokenizer:()=>Ae,RobertaTokenizer:()=>ze,SiglipTokenizer:()=>at,SpeechT5Tokenizer:()=>pt,SqueezeBertTokenizer:()=>Pe,T5Tokenizer:()=>Ne,TokenizerModel:()=>T,VitsTokenizer:()=>dt,Wav2Vec2CTCTokenizer:()=>lt,WhisperTokenizer:()=>ot,XLMRobertaTokenizer:()=>We,XLMTokenizer:()=>Le,is_chinese_char:()=>g});var o=r("./src/utils/generic.js"),n=r("./src/utils/core.js"),s=r("./src/utils/hub.js"),a=r("./src/utils/maths.js"),i=r("./src/utils/tensor.js"),l=r("./src/utils/data-structures.js"),c=r("./node_modules/@huggingface/jinja/dist/index.js"),_=r("./src/models/whisper/common_whisper.js");async function p(e,t){const r=await Promise.all([(0,s.getModelJSON)(e,"tokenizer.json",!0,t),(0,s.getModelJSON)(e,"tokenizer_config.json",!0,t)]);return null!==t.legacy&&(r[1].legacy=t.legacy),r}function u(e,t=!0){if(void 0!==e.Regex){let t=e.Regex.replace(/\\([#&~])/g,"$1");for(const[e,r]of y)t=t.replaceAll(e,r);return new RegExp(t,"gu")}if(void 0!==e.String){const r=(0,n.escapeRegExp)(e.String);return new RegExp(t?r:`(${r})`,"gu")}return console.warn("Unknown pattern type:",e),null}function d(e){return new Map(Object.entries(e))}function h(e){const t=e.dims;switch(t.length){case 1:return e.tolist();case 2:if(1!==t[0])throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return e.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${t.length}.`)}}function f(e){return e.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function m(e){return e.replace(/\p{M}/gu,"")}function g(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}const b="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",w=new RegExp(`^[${b}]+$`,"gu"),x=".,!?…。，、।۔،",y=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"],[` ?[^(\\s|[${x}])]+`,` ?[^\\s${x}]+`]]);class M{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class T extends o.Callable{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...t){switch(e.type){case"WordPiece":return new k(e);case"Unigram":return new v(e,...t);case"BPE":return new F(e);default:if(e.vocab)return Array.isArray(e.vocab)?new v(e,...t):Object.hasOwn(e,"continuing_subword_prefix")&&Object.hasOwn(e,"unk_token")?Object.hasOwn(e,"merges")?new F(e):new k(e):new C(e,...t);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){return e=this.encode(e),this.fuse_unk&&(e=function(e,t,r){const o=[];let n=0;for(;n<e.length;)if(o.push(e[n]),(t.get(e[n])??r)===r)for(;++n<e.length&&(t.get(e[n])??r)===r;)t.get(o.at(-1))!==r&&(o[o.length-1]+=e[n]);else++n;return o}(e,this.tokens_to_ids,this.unk_token_id)),e}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(e=>this.tokens_to_ids.get(e)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(e=>this.vocab[e]??this.unk_token)}}class k extends T{constructor(e){super(e),this.tokens_to_ids=d(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[e,t]of this.tokens_to_ids)this.vocab[t]=e}encode(e){const t=[];for(const r of e){const e=[...r];if(e.length>this.max_input_chars_per_word){t.push(this.unk_token);continue}let o=!1,n=0;const s=[];for(;n<e.length;){let t=e.length,r=null;for(;n<t;){let o=e.slice(n,t).join("");if(n>0&&(o=this.config.continuing_subword_prefix+o),this.tokens_to_ids.has(o)){r=o;break}--t}if(null===r){o=!0;break}s.push(r),n=t}o?t.push(this.unk_token):t.push(...s)}return t}}class v extends T{constructor(e,t){super(e);const r=e.vocab.length;this.vocab=new Array(r),this.scores=new Array(r);for(let t=0;t<r;++t)[this.vocab[t],this.scores[t]]=e.vocab[t];this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((e,t)=>[e,t])),this.bos_token=" ",this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=t.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.unk_token=this.vocab[this.unk_token_id],this.minScore=(0,a.min)(this.scores)[0],this.unk_score=this.minScore-10,this.scores[this.unk_token_id]=this.unk_score,this.trie=new l.CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const t=e.chars;let r=0;for(;r<t.length;){let o=!1;const s=[],a=t.slice(r).join(""),i=this.trie.commonPrefixSearch(a);for(const t of i){s.push(t);const a=this.tokens_to_ids.get(t),i=this.scores[a],l=(0,n.len)(t);e.insert(r,l,i,a),o||1!==l||(o=!0)}o||e.insert(r,1,this.unk_score,this.unk_token_id),r+=1}}tokenize(e){const t=new l.TokenLattice(e,this.bos_token_id,this.eos_token_id);return this.populateNodes(t),t.tokens()}encode(e){const t=[];for(const r of e){const e=this.tokenize(r);t.push(...e)}return t}}const P=(()=>{const e=[...Array.from({length:"~".charCodeAt(0)-"!".charCodeAt(0)+1},(e,t)=>t+"!".charCodeAt(0)),...Array.from({length:"¬".charCodeAt(0)-"¡".charCodeAt(0)+1},(e,t)=>t+"¡".charCodeAt(0)),...Array.from({length:"ÿ".charCodeAt(0)-"®".charCodeAt(0)+1},(e,t)=>t+"®".charCodeAt(0))],t=e.slice();let r=0;for(let o=0;o<256;++o)e.includes(o)||(e.push(o),t.push(256+r),r+=1);const o=t.map(e=>String.fromCharCode(e));return Object.fromEntries(e.map((e,t)=>[e,o[t]]))})(),S=(0,n.reverseDictionary)(P);class F extends T{constructor(e){super(e),this.tokens_to_ids=d(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[e,t]of this.tokens_to_ids)this.vocab[t]=e;const t=Array.isArray(e.merges[0]);this.merges=t?e.merges:e.merges.map(e=>e.split(" ",2)),this.bpe_ranks=new Map(this.merges.map((e,t)=>[JSON.stringify(e),t])),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.max_length_to_cache=256,this.cache_capacity=1e4,this.cache=new l.LRUCache(this.cache_capacity)}clear_cache(){this.cache.clear()}bpe(e){if(0===e.length)return[];const t=this.cache.get(e);if(void 0!==t)return t;const r=Array.from(e);this.end_of_word_suffix&&(r[r.length-1]+=this.end_of_word_suffix);let o=[];if(r.length>1){const e=new l.PriorityQueue((e,t)=>e.score<t.score);let t={token:r[0],bias:0,prev:null,next:null},n=t;for(let t=1;t<r.length;++t){const o={bias:t/r.length,token:r[t],prev:n,next:null};n.next=o,this._add_node(e,n),n=o}for(;!e.isEmpty();){const r=e.pop();if(r.deleted||!r.next||r.next.deleted)continue;if(r.deleted=!0,r.next.deleted=!0,r.prev){const e={...r.prev};r.prev.deleted=!0,r.prev=e,e.prev?e.prev.next=e:t=e}const o={token:r.token+r.next.token,bias:r.bias,prev:r.prev,next:r.next.next};o.prev?(o.prev.next=o,this._add_node(e,o.prev)):t=o,o.next&&(o.next.prev=o,this._add_node(e,o))}for(let e=t;null!==e;e=e.next)o.push(e.token)}else o=r;if(this.continuing_subword_suffix)for(let e=0;e<o.length-1;++e)o[e]+=this.continuing_subword_suffix;return e.length<this.max_length_to_cache&&this.cache.put(e,o),o}_add_node(e,t){const r=this.bpe_ranks.get(JSON.stringify([t.token,t.next.token]));void 0!==r&&(t.score=r+t.bias,e.push(t))}encode(e){const t=[];for(const r of e){if(this.ignore_merges&&this.tokens_to_ids.has(r)){t.push(r);continue}const e=this.bpe(r);for(const r of e)if(this.tokens_to_ids.has(r))t.push(r);else if(this.byte_fallback){const e=Array.from(this.text_encoder.encode(r)).map(e=>`<0x${e.toString(16).toUpperCase().padStart(2,"0")}>`);e.every(e=>this.tokens_to_ids.has(e))?t.push(...e):t.push(this.unk_token)}else t.push(this.unk_token)}return t}}class C extends T{constructor(e,t){super(e),this.tokens_to_ids=d(t.target_lang?e.vocab[t.target_lang]:e.vocab),this.bos_token=t.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=t.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=t.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=t.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[e,t]of this.tokens_to_ids)this.vocab[t]=e}encode(e){return e}}class E extends o.Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(null===e)return null;switch(e.type){case"BertNormalizer":return new R(e);case"Precompiled":return new he(e);case"Sequence":return new z(e);case"Replace":return new A(e);case"NFC":return new O(e);case"NFD":return new L(e);case"NFKC":return new D(e);case"NFKD":return new N(e);case"Strip":return new B(e);case"StripAccents":return new $(e);case"Lowercase":return new V(e);case"Prepend":return new j(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class A extends E{normalize(e){const t=u(this.config.pattern);return null===t?e:e.replaceAll(t,this.config.content)}}class I extends E{form=void 0;normalize(e){return e=e.normalize(this.form)}}class O extends I{form="NFC"}class L extends I{form="NFD"}class D extends I{form="NFKC"}class N extends I{form="NFKD"}class B extends E{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class $ extends E{normalize(e){return e=m(e)}}class V extends E{normalize(e){return e=e.toLowerCase()}}class j extends E{normalize(e){return e=this.config.prepend+e}}class z extends E{constructor(e){super(e),this.normalizers=e.normalizers.map(e=>E.fromConfig(e))}normalize(e){return this.normalizers.reduce((e,t)=>t.normalize(e),e)}}class R extends E{_tokenize_chinese_chars(e){const t=[];for(let r=0;r<e.length;++r){const o=e[r];g(o.charCodeAt(0))?(t.push(" "),t.push(o),t.push(" ")):t.push(o)}return t.join("")}stripAccents(e){return e.normalize("NFD").replace(/\p{Mn}/gu,"")}_is_control(e){switch(e){case"\t":case"\n":case"\r":return!1;default:return/^\p{Cc}|\p{Cf}|\p{Co}|\p{Cs}$/u.test(e)}}_clean_text(e){const t=[];for(const r of e){const e=r.charCodeAt(0);0===e||65533===e||this._is_control(r)||(/^\s$/.test(r)?t.push(" "):t.push(r))}return t.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),!1!==this.config.strip_accents&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class G extends o.Callable{static fromConfig(e){if(null===e)return null;switch(e.type){case"BertPreTokenizer":return new U(e);case"Sequence":return new fe(e);case"Whitespace":return new me(e);case"WhitespaceSplit":return new ge(e);case"Metaspace":return new ue(e);case"ByteLevel":return new q(e);case"Split":return new W(e);case"Punctuation":return new H(e);case"Digits":return new X(e);case"Replace":return new be(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,t){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,t){return(Array.isArray(e)?e.map(e=>this.pre_tokenize_text(e,t)):this.pre_tokenize_text(e,t)).flat()}_call(e,t){return this.pre_tokenize(e,t)}}class U extends G{constructor(e){super(),this.pattern=new RegExp(`[^\\s${b}]+|[${b}]`,"gu")}pre_tokenize_text(e,t){return e.trim().match(this.pattern)||[]}}class q extends G{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=/'s|'t|'re|'ve|'m|'ll|'d| ?\p{L}+| ?\p{N}+| ?[^\s\p{L}\p{N}]+|\s+(?!\S)|\s+/gu,this.byte_encoder=P,this.text_encoder=new TextEncoder}pre_tokenize_text(e,t){this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e);return(this.use_regex?e.match(this.pattern)||[]:[e]).map(e=>Array.from(this.text_encoder.encode(e),e=>this.byte_encoder[e]).join(""))}}class W extends G{constructor(e){super(),this.config=e,this.pattern=u(this.config.pattern,this.config.invert)}pre_tokenize_text(e,t){return null===this.pattern?[]:this.config.invert?e.match(this.pattern)||[]:"removed"===this.config.behavior?.toLowerCase()?e.split(this.pattern).filter(e=>e):function(e,t){const r=[];let o=0;for(const n of e.matchAll(t)){const t=n[0];o<n.index&&r.push(e.slice(o,n.index)),t.length>0&&r.push(t),o=n.index+t.length}return o<e.length&&r.push(e.slice(o)),r}(e,this.pattern)}}class H extends G{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${b}]+|[${b}]+`,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class X extends G{constructor(e){super(),this.config=e;const t="[^\\d]+|\\d"+(this.config.individual_digits?"":"+");this.pattern=new RegExp(t,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class Q extends o.Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(null===e)return null;switch(e.type){case"TemplateProcessing":return new Z(e);case"ByteLevel":return new K(e);case"RobertaProcessing":return new J(e);case"BertProcessing":return new Y(e);case"Sequence":return new ee(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...t){throw Error("post_process should be implemented in subclass.")}_call(e,...t){return this.post_process(e,...t)}}class Y extends Q{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,t=null,{add_special_tokens:r=!0}={}){r&&(e=(0,n.mergeArrays)([this.cls],e,[this.sep]));let o=new Array(e.length).fill(0);if(null!==t){const s=r&&this instanceof J?[this.sep]:[],a=r?[this.sep]:[];e=(0,n.mergeArrays)(e,s,t,a),o=(0,n.mergeArrays)(o,new Array(t.length+s.length+a.length).fill(1))}return{tokens:e,token_type_ids:o}}}class J extends Y{}class Z extends Q{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,t=null,{add_special_tokens:r=!0}={}){const o=null===t?this.single:this.pair;let s=[],a=[];for(const i of o)"SpecialToken"in i?r&&(s.push(i.SpecialToken.id),a.push(i.SpecialToken.type_id)):"Sequence"in i&&("A"===i.Sequence.id?(s=(0,n.mergeArrays)(s,e),a=(0,n.mergeArrays)(a,new Array(e.length).fill(i.Sequence.type_id))):"B"===i.Sequence.id&&(s=(0,n.mergeArrays)(s,t),a=(0,n.mergeArrays)(a,new Array(t.length).fill(i.Sequence.type_id))));return{tokens:s,token_type_ids:a}}}class K extends Q{post_process(e,t=null){return t&&(e=(0,n.mergeArrays)(e,t)),{tokens:e}}}class ee extends Q{constructor(e){super(e),this.processors=e.processors.map(e=>Q.fromConfig(e))}post_process(e,t=null,r={}){let o;for(const n of this.processors)if(n instanceof K){if(e=n.post_process(e).tokens,t){t=n.post_process(t).tokens}}else{const s=n.post_process(e,t,r);e=s.tokens,o=s.token_type_ids}return{tokens:e,token_type_ids:o}}}class te extends o.Callable{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(null===e)return null;switch(e.type){case"WordPiece":return new ae(e);case"Metaspace":return new de(e);case"ByteLevel":return new ie(e);case"Replace":return new re(e);case"ByteFallback":return new oe(e);case"Fuse":return new ne(e);case"Strip":return new se(e);case"Sequence":return new ce(e);case"CTC":return new le(e);case"BPEDecoder":return new _e(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class re extends te{decode_chain(e){const t=u(this.config.pattern);return null===t?e:e.map(e=>e.replaceAll(t,this.config.content))}}class oe extends te{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const t=[];let r=[];for(const o of e){let e=null;if(6===o.length&&o.startsWith("<0x")&&o.endsWith(">")){const t=parseInt(o.slice(3,5),16);isNaN(t)||(e=t)}if(null!==e)r.push(e);else{if(r.length>0){const e=this.text_decoder.decode(Uint8Array.from(r));t.push(e),r=[]}t.push(o)}}if(r.length>0){const e=this.text_decoder.decode(Uint8Array.from(r));t.push(e),r=[]}return t}}class ne extends te{decode_chain(e){return[e.join("")]}}class se extends te{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(e=>{let t=0;for(let r=0;r<this.start&&e[r]===this.content;++r)t=r+1;let r=e.length;for(let t=0;t<this.stop;++t){const o=e.length-t-1;if(e[o]!==this.content)break;r=o}return e.slice(t,r)})}}class ae extends te{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((e,t)=>(0!==t&&(e=e.startsWith(this.config.prefix)?e.replace(this.config.prefix,""):" "+e),this.cleanup&&(e=f(e)),e))}}class ie extends te{constructor(e){super(e),this.byte_decoder=S,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const t=e.join(""),r=new Uint8Array([...t].map(e=>this.byte_decoder[e]));return this.text_decoder.decode(r)}decode_chain(e){const t=[];let r=[];for(const o of e)void 0!==this.added_tokens.find(e=>e.content===o)?(r.length>0&&(t.push(this.convert_tokens_to_string(r)),r=[]),t.push(o)):r.push(o);return r.length>0&&t.push(this.convert_tokens_to_string(r)),t}}class le extends te{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(0===e.length)return"";const t=[e[0]];for(let r=1;r<e.length;++r)e[r]!==t.at(-1)&&t.push(e[r]);let r=t.filter(e=>e!==this.pad_token).join("");return this.cleanup&&(r=f(r).replaceAll(this.word_delimiter_token," ").trim()),r}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class ce extends te{constructor(e){super(e),this.decoders=e.decoders.map(e=>te.fromConfig(e))}decode_chain(e){return this.decoders.reduce((e,t)=>t.decode_chain(e),e)}}class _e extends te{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((t,r)=>t.replaceAll(this.suffix,r===e.length-1?"":" "))}}class pe extends te{decode_chain(e){let t="";for(let r=1;r<e.length;r+=2)t+=e[r];return[t]}}class ue extends G{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:t}={}){let r=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!r.startsWith(this.replacement)&&("always"===this.prepend_scheme||"first"===this.prepend_scheme&&0===t)&&(r=this.strRep+r),[r]}}class de extends te{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const t=[];for(let r=0;r<e.length;++r){let o=e[r].replaceAll(this.replacement," ");this.addPrefixSpace&&0==r&&o.startsWith(" ")&&(o=o.substring(1)),t.push(o)}return t}}class he extends E{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){if((e=(e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,"")).replace(/[\u0009\u000A\u000C\u000D\u00A0\u1680\u2000-\u200F\u2028\u2029\u202F\u205F\u2581\u3000\uFEFF\uFFFD]/gm," ")).includes("～")){const t=e.split("～");e=t.map(e=>e.normalize("NFKC")).join("～")}else e=e.normalize("NFKC");return e}}class fe extends G{constructor(e){super(),this.tokenizers=e.pretokenizers.map(e=>G.fromConfig(e))}pre_tokenize_text(e,t){return this.tokenizers.reduce((e,r)=>r.pre_tokenize(e,t),[e])}}class me extends G{constructor(e){super()}pre_tokenize_text(e,t){return e.match(/\w+|[^\w\s]+/g)||[]}}class ge extends G{constructor(e){super()}pre_tokenize_text(e,t){return function(e){return e.match(/\S+/g)||[]}(e)}}class be extends G{constructor(e){super(),this.config=e,this.pattern=u(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,t){return null===this.pattern?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const we=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function xe(e,t,r,o){for(const s of Object.keys(e)){const a=t-e[s].length,i=r(s),l=new Array(a).fill(i);e[s]="right"===o?(0,n.mergeArrays)(e[s],l):(0,n.mergeArrays)(l,e[s])}}function ye(e,t){for(const r of Object.keys(e))e[r].length=t}class Me extends o.Callable{return_token_type_ids=!1;padding_side="right";constructor(e,t){super(),this.config=t,this.normalizer=E.fromConfig(e.normalizer),this.pre_tokenizer=G.fromConfig(e.pre_tokenizer),this.model=T.fromConfig(e.model,t),this.post_processor=Q.fromConfig(e.post_processor),this.decoder=te.fromConfig(e.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const t of e.added_tokens){const e=new M(t);this.added_tokens.push(e),this.model.tokens_to_ids.set(e.content,e.id),this.model.vocab[e.id]=e.content,e.special&&(this.special_tokens.push(e.content),this.all_special_ids.push(e.id))}if(this.additional_special_tokens=t.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_splitter=new l.DictionarySplitter(this.added_tokens.map(e=>e.content)),this.added_tokens_map=new Map(this.added_tokens.map(e=>[e.content,e])),this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.bos_token=this.getToken("bos_token"),this.bos_token_id=this.model.tokens_to_ids.get(this.bos_token),this.eos_token=this.getToken("eos_token"),this.eos_token_id=this.model.tokens_to_ids.get(this.eos_token),this.model_max_length=t.model_max_length,this.remove_space=t.remove_space,this.clean_up_tokenization_spaces=t.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=t.do_lowercase_and_remove_accent??!1,t.padding_side&&(this.padding_side=t.padding_side),this.add_bos_token=t.add_bos_token,this.add_eos_token=t.add_eos_token,this.legacy=!1,this.chat_template=t.chat_template??null,Array.isArray(this.chat_template)){const e=Object.create(null);for(const{name:t,template:r}of this.chat_template){if("string"!=typeof t||"string"!=typeof r)throw new Error('Chat template must be a list of objects with "name" and "template" properties');e[t]=r}this.chat_template=e}this._compiled_template_cache=new Map}getToken(...e){for(const t of e){const e=this.config[t];if(e){if("object"==typeof e){if("AddedToken"===e.__type)return e.content;throw Error(`Unknown token: ${e}`)}return e}}return null}static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:o=null,local_files_only:n=!1,revision:s="main",legacy:a=null}={}){return new this(...await p(e,{progress_callback:t,config:r,cache_dir:o,local_files_only:n,revision:s,legacy:a}))}_call(e,{text_pair:t=null,add_special_tokens:r=!0,padding:o=!1,truncation:n=null,max_length:s=null,return_tensor:l=!0,return_token_type_ids:c=null}={}){const _=Array.isArray(e);let p;if(_){if(0===e.length)throw Error("text array must be non-empty");if(null!==t){if(!Array.isArray(t))throw Error("text_pair must also be an array");if(e.length!==t.length)throw Error("text and text_pair must have the same length");p=e.map((e,o)=>this._encode_plus(e,{text_pair:t[o],add_special_tokens:r,return_token_type_ids:c}))}else p=e.map(e=>this._encode_plus(e,{add_special_tokens:r,return_token_type_ids:c}))}else{if(null==e)throw Error("text may not be null or undefined");if(Array.isArray(t))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");p=[this._encode_plus(e,{text_pair:t,add_special_tokens:r,return_token_type_ids:c})]}if(null===s?s=this.model_max_length:null===n&&(!0===o?(console.warn("`max_length` is ignored when `padding: true` and there is no truncation strategy. To pad to max length, use `padding: 'max_length'`."),s=this.model_max_length):!1===o&&(console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation: true` to explicitly truncate examples to max length."),n=!0)),!0===o&&(s=Math.min((0,a.max)(p.map(e=>e.input_ids.length))[0],s??1/0)),s=Math.min(s,this.model_max_length??1/0),o||n)for(let e=0;e<p.length;++e)p[e].input_ids.length!==s&&(p[e].input_ids.length>s?n&&ye(p[e],s):o&&xe(p[e],s,e=>"input_ids"===e?this.pad_token_id:0,this.padding_side));const u={};if(l){if((!o||!n)&&p.some(e=>{for(const t of Object.keys(e))if(e[t].length!==p[0][t]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const e=[p.length,p[0].input_ids.length];for(const t of Object.keys(p[0]))u[t]=new i.Tensor("int64",BigInt64Array.from(p.flatMap(e=>e[t]).map(BigInt)),e)}else{for(const e of Object.keys(p[0]))u[e]=p.map(t=>t[e]);if(!_)for(const e of Object.keys(u))u[e]=u[e][0]}return u}_encode_text(e){if(null===e)return null;const t=this.added_tokens_splitter.split(e);for(let e=0;e<t.length;++e){const r=this.added_tokens_map.get(t[e]);r&&(r.lstrip&&e>0&&(t[e-1]=t[e-1].trimEnd()),r.rstrip&&e<t.length-1&&(t[e+1]=t[e+1].trimStart()))}const r=t.flatMap((e,t)=>{if(0===e.length)return[];if(this.added_tokens_map.has(e))return[e];if(!0===this.remove_space&&(e=e.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(e=function(e){return m(e.toLowerCase())}(e)),null!==this.normalizer&&(e=this.normalizer(e)),0===e.length)return[];const r=null!==this.pre_tokenizer?this.pre_tokenizer(e,{section_index:t}):[e];return this.model(r)});return r}_encode_plus(e,{text_pair:t=null,add_special_tokens:r=!0,return_token_type_ids:o=null}={}){const{tokens:n,token_type_ids:s}=this._tokenize_helper(e,{pair:t,add_special_tokens:r}),a=this.model.convert_tokens_to_ids(n),i={input_ids:a,attention_mask:new Array(a.length).fill(1)};return(o??this.return_token_type_ids)&&s&&(i.token_type_ids=s),i}_tokenize_helper(e,{pair:t=null,add_special_tokens:r=!1}={}){const o=this._encode_text(e),s=this._encode_text(t);return this.post_processor?this.post_processor(o,s,{add_special_tokens:r}):{tokens:(0,n.mergeArrays)(o??[],s??[])}}tokenize(e,{pair:t=null,add_special_tokens:r=!1}={}){return this._tokenize_helper(e,{pair:t,add_special_tokens:r}).tokens}encode(e,{text_pair:t=null,add_special_tokens:r=!0,return_token_type_ids:o=null}={}){return this._encode_plus(e,{text_pair:t,add_special_tokens:r,return_token_type_ids:o}).input_ids}batch_decode(e,t={}){return e instanceof i.Tensor&&(e=e.tolist()),e.map(e=>this.decode(e,t))}decode(e,t={}){if(e instanceof i.Tensor&&(e=h(e)),!Array.isArray(e)||0===e.length||!(0,n.isIntegralNumber)(e[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(e,t)}decode_single(e,{skip_special_tokens:t=!1,clean_up_tokenization_spaces:r=null}){let o=this.model.convert_ids_to_tokens(e);t&&(o=o.filter(e=>!this.special_tokens.includes(e)));let n=this.decoder?this.decoder(o):o.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(n=n.replaceAll(this.decoder.end_of_word_suffix," "),t&&(n=n.trim())),(r??this.clean_up_tokenization_spaces)&&(n=f(n)),n}get_chat_template({chat_template:e=null,tools:t=null}={}){if(this.chat_template&&"object"==typeof this.chat_template){const r=this.chat_template;if(null!==e&&Object.hasOwn(r,e))e=r[e];else if(null===e)if(null!==t&&"tool_use"in r)e=r.tool_use;else{if(!("default"in r))throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(r).sort()}.`);e=r.default}}else if(null===e){if(!this.chat_template)throw Error("Cannot use apply_chat_template() because tokenizer.chat_template is not set and no template argument was passed! For information about writing templates and setting the tokenizer.chat_template attribute, please see the documentation at https://huggingface.co/docs/transformers/main/en/chat_templating");e=this.chat_template}return e}apply_chat_template(e,{tools:t=null,documents:r=null,chat_template:o=null,add_generation_prompt:n=!1,tokenize:s=!0,padding:a=!1,truncation:i=!1,max_length:l=null,return_tensor:_=!0,return_dict:p=!1,tokenizer_kwargs:u={},...d}={}){if("string"!=typeof(o=this.get_chat_template({chat_template:o,tools:t})))throw Error("chat_template must be a string, but got "+typeof o);let h=this._compiled_template_cache.get(o);void 0===h&&(h=new c.Template(o),this._compiled_template_cache.set(o,h));const f=Object.create(null);for(const e of we){const t=this.getToken(e);t&&(f[e]=t)}const m=h.render({messages:e,add_generation_prompt:n,tools:t,documents:r,...f,...d});if(s){const e=this._call(m,{add_special_tokens:!1,padding:a,truncation:i,max_length:l,return_tensor:_,...u});return p?e:e.input_ids}return m}}class Te extends Me{return_token_type_ids=!0}class ke extends Me{return_token_type_ids=!0}class ve extends Me{return_token_type_ids=!0}class Pe extends Me{return_token_type_ids=!0}class Se extends Me{return_token_type_ids=!0}class Fe extends Me{return_token_type_ids=!0}class Ce extends Me{return_token_type_ids=!0}class Ee extends Me{return_token_type_ids=!0}class Ae extends Me{return_token_type_ids=!0}class Ie extends Me{}class Oe extends Me{}class Le extends Me{return_token_type_ids=!0;constructor(e,t){super(e,t),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class De extends Me{return_token_type_ids=!0}class Ne extends Me{}class Be extends Me{}class $e extends Me{}class Ve extends Me{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(e=>this.languageRegex.test(e)),this.lang_to_token=e=>e}_build_translation_inputs(e,t,r){return et(this,e,t,r)}}class je extends Ve{}class ze extends Me{}class Re extends Me{}const Ge="▁";class Ue extends Me{padding_side="left";constructor(e,t){super(e,t),this.legacy=t.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new ue({replacement:Ge,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(e){if(null===e)return null;if(this.legacy||0===e.length)return super._encode_text(e);let t=super._encode_text(Ge+e.replaceAll(Ge," "));return t.length>1&&t[0]===Ge&&this.special_tokens.includes(t[1])&&(t=t.slice(1)),t}}class qe extends Me{}class We extends Me{}class He extends Me{}class Xe extends Me{}class Qe extends Me{}class Ye extends Me{}class Je extends Me{}class Ze extends Me{}class Ke extends Me{}function et(e,t,r,o){if(!("language_codes"in e)||!Array.isArray(e.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in e&&e.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in e)||"function"!=typeof e.lang_to_token)throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const n=o.src_lang,s=o.tgt_lang;if(!e.language_codes.includes(s))throw new Error(`Target language code "${s}" is not valid. Must be one of: {${e.language_codes.join(", ")}}`);if(void 0!==n){if(!e.language_codes.includes(n))throw new Error(`Source language code "${n}" is not valid. Must be one of: {${e.language_codes.join(", ")}}`);for(const t of e.post_processor.config.single)if("SpecialToken"in t&&e.languageRegex.test(t.SpecialToken.id)){t.SpecialToken.id=e.lang_to_token(n);break}}return o.forced_bos_token_id=e.model.convert_tokens_to_ids([e.lang_to_token(s)])[0],e._call(t,r)}class tt extends Me{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(e=>this.languageRegex.test(e)),this.lang_to_token=e=>e}_build_translation_inputs(e,t,r){return et(this,e,t,r)}}class rt extends Me{constructor(e,t){super(e,t),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(e=>this.languageRegex.test(e)).map(e=>e.slice(2,-2)),this.lang_to_token=e=>`__${e}__`}_build_translation_inputs(e,t,r){return et(this,e,t,r)}}class ot extends Me{get timestamp_begin(){return this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1}_decode_asr(e,{return_timestamps:t=!1,return_language:r=!1,time_precision:o=null,force_full_sequences:n=!0}={}){if(null===o)throw Error("Must specify time_precision");let s=null;const i="word"===t;function l(){return{language:s,timestamp:[null,null],text:""}}const c=[];let p=l(),u=0;const d=this.timestamp_begin,h=d+1500;let f=[],m=[],g=!1,b=null;const x=new Set(this.all_special_ids);for(const r of e){const e=r.tokens,n=i?r.token_timestamps:null;let y=null,M=d;if("stride"in r){const[t,n,s]=r.stride;if(u-=n,b=t-s,n&&(M=n/o+d),s)for(let t=e.length-1;t>=0;--t){const r=Number(e[t]);if(r>=d){if(null!==y&&(r-d)*o<b)break;y=r}}}let T=[],k=[];for(let r=0;r<e.length;++r){const b=Number(e[r]);if(x.has(b)){const e=this.decode([b]),r=_.WHISPER_LANGUAGE_MAPPING.get(e.slice(2,-2));if(void 0!==r){if(null!==s&&r!==s&&!t){f.push(T);const e=this.findLongestCommonSequence(f)[0],t=this.decode(e);p.text=t,c.push(p),f=[],T=[],p=l()}s=p.language=r}}else if(b>=d&&b<=h){const e=(b-d)*o+u,t=(0,a.round)(e,2);if(null!==y&&b>=y)g=!0;else if(g||f.length>0&&b<M)g=!1;else if(null===p.timestamp[0])p.timestamp[0]=t;else if(t===p.timestamp[0]);else{p.timestamp[1]=t,f.push(T),i&&m.push(k);const[e,r]=this.findLongestCommonSequence(f,m),o=this.decode(e);p.text=o,i&&(p.words=this.collateWordTimestamps(e,r,s)),c.push(p),f=[],T=[],m=[],k=[],p=l()}}else if(T.push(b),i){let e,t=(0,a.round)(n[r]+u,2);if(r+1<n.length){e=(0,a.round)(n[r+1]+u,2);const s=this.decode([b]);w.test(s)&&(e=(0,a.round)(Math.min(t+o,e),2))}else e=null;k.push([t,e])}}if("stride"in r){const[e,t,o]=r.stride;u+=e-o}T.length>0?(f.push(T),i&&m.push(k)):f.every(e=>0===e.length)&&(p=l(),f=[],T=[],m=[],k=[])}if(f.length>0){if(n&&t)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[e,r]=this.findLongestCommonSequence(f,m),o=this.decode(e);p.text=o,i&&(p.words=this.collateWordTimestamps(e,r,s)),c.push(p)}let y=Object.create(null);const M=c.map(e=>e.text).join("");if(t||r){for(let e=0;e<c.length;++e){const o=c[e];t||delete o.timestamp,r||delete o.language}if(i){const e=[];for(const t of c)for(const r of t.words)e.push(r);y={chunks:e}}else y={chunks:c}}return[M,y]}findLongestCommonSequence(e,t=null){let r=e[0],o=r.length,n=[];const s=Array.isArray(t)&&t.length>0;let a=s?[]:null,i=s?t[0]:null;for(let l=1;l<e.length;++l){const c=e[l];let _=0,p=[o,o,0,0];const u=c.length;for(let e=1;e<o+u;++e){const n=Math.max(0,o-e),a=Math.min(o,o+u-e),d=r.slice(n,a),h=Math.max(0,e-o),f=Math.min(u,e),m=c.slice(h,f);if(d.length!==m.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let g;g=s?d.filter((e,r)=>e===m[r]&&i[n+r]<=t[l][h+r]).length:d.filter((e,t)=>e===m[t]).length;const b=g/e+e/1e4;g>1&&b>_&&(_=b,p=[n,a,h,f])}const[d,h,f,m]=p,g=Math.floor((h+d)/2),b=Math.floor((m+f)/2);n.push(...r.slice(0,g)),r=c.slice(b),o=r.length,s&&(a.push(...i.slice(0,g)),i=t[l].slice(b))}return n.push(...r),s?(a.push(...i),[n,a]):[n,[]]}collateWordTimestamps(e,t,r){const[o,n,s]=this.combineTokensIntoWords(e,r),a=[];for(let e=0;e<o.length;++e){const r=s[e];a.push({text:o[e],timestamp:[t[r.at(0)][0],t[r.at(-1)][1]]})}return a}combineTokensIntoWords(e,t,r="\"'“¡¿([{-",o="\"'.。,，!！?？:：”)]}、"){let n,s,a;return["chinese","japanese","thai","lao","myanmar"].includes(t=t??"english")?[n,s,a]=this.splitTokensOnUnicode(e):[n,s,a]=this.splitTokensOnSpaces(e),this.mergePunctuations(n,s,a,r,o)}decode(e,t){let r;return t?.decode_with_timestamps?(e instanceof i.Tensor&&(e=h(e)),r=this.decodeWithTimestamps(e,t)):r=super.decode(e,t),r}decodeWithTimestamps(e,t){const r=t?.time_precision??.02,o=Array.from(this.all_special_ids).at(-1)+1;let n=[[]];for(let t of e)if(t=Number(t),t>=o){const e=((t-o)*r).toFixed(2);n.push(`<|${e}|>`),n.push([])}else n[n.length-1].push(t);return n=n.map(e=>"string"==typeof e?e:super.decode(e,t)),n.join("")}splitTokensOnUnicode(e){const t=this.decode(e,{decode_with_timestamps:!0}),r=[],o=[],n=[];let s=[],a=[],i=0;for(let l=0;l<e.length;++l){const c=e[l];s.push(c),a.push(l);const _=this.decode(s,{decode_with_timestamps:!0});_.includes("�")&&"�"!==t[i+_.indexOf("�")]||(r.push(_),o.push(s),n.push(a),s=[],a=[],i+=_.length)}return[r,o,n]}splitTokensOnSpaces(e){const[t,r,o]=this.splitTokensOnUnicode(e),n=[],s=[],a=[],i=new RegExp(`^[${b}]$`,"gu");for(let e=0;e<t.length;++e){const l=t[e],c=r[e],_=o[e],p=c[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),u=l.startsWith(" "),d=l.trim(),h=i.test(d);if(p||u||h||0===n.length)n.push(l),s.push(c),a.push(_);else{const e=n.length-1;n[e]+=l,s[e].push(...c),a[e].push(..._)}}return[n,s,a]}mergePunctuations(e,t,r,o,s){const a=structuredClone(e),i=structuredClone(t),l=structuredClone(r);let c=a.length-2,_=a.length-1;for(;c>=0;)a[c].startsWith(" ")&&o.includes(a[c].trim())?(a[_]=a[c]+a[_],i[_]=(0,n.mergeArrays)(i[c],i[_]),l[_]=(0,n.mergeArrays)(l[c],l[_]),a[c]="",i[c]=[],l[c]=[]):_=c,--c;for(c=0,_=1;_<a.length;)!a[c].endsWith(" ")&&s.includes(a[_])?(a[c]+=a[_],i[c]=(0,n.mergeArrays)(i[c],i[_]),l[c]=(0,n.mergeArrays)(l[c],l[_]),a[_]="",i[_]=[],l[_]=[]):c=_,++_;return[a.filter(e=>e),i.filter(e=>e.length>0),l.filter(e=>e.length>0)]}}class nt extends Me{}class st extends Me{}class at extends Me{}class it extends Me{constructor(e,t){super(e,t),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(e=>this.languageRegex.test(e)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(null===e)return null;const[t,...r]=e.trim().split(this.languageRegex);if(0===r.length)return super._encode_text(t);if(2===r.length){const[e,t]=r;return this.supported_language_codes.includes(e)||console.warn(`Unsupported language code "${e}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),(0,n.mergeArrays)([e],super._encode_text(t))}}}class lt extends Me{}class ct extends Me{}class _t extends Me{}class pt extends Me{}class ut extends Me{}class dt extends Me{constructor(e,t){super(e,t),this.decoder=new pe({})}}class ht extends Me{}class ft extends Me{}class mt extends Me{}class gt{static TOKENIZER_CLASS_MAPPING={T5Tokenizer:Ne,DistilBertTokenizer:Ie,CamembertTokenizer:Oe,DebertaTokenizer:Se,DebertaV2Tokenizer:Fe,BertTokenizer:Te,HerbertTokenizer:Ce,ConvBertTokenizer:Ee,RoFormerTokenizer:Ae,XLMTokenizer:Le,ElectraTokenizer:De,MobileBertTokenizer:ve,SqueezeBertTokenizer:Pe,AlbertTokenizer:ke,GPT2Tokenizer:Be,BartTokenizer:$e,MBartTokenizer:Ve,MBart50Tokenizer:je,RobertaTokenizer:ze,WhisperTokenizer:ot,CodeGenTokenizer:nt,CLIPTokenizer:st,SiglipTokenizer:at,MarianTokenizer:it,BloomTokenizer:Re,NllbTokenizer:tt,M2M100Tokenizer:rt,LlamaTokenizer:Ue,CodeLlamaTokenizer:qe,XLMRobertaTokenizer:We,MPNetTokenizer:He,FalconTokenizer:Xe,GPTNeoXTokenizer:Qe,EsmTokenizer:Ye,Wav2Vec2CTCTokenizer:lt,BlenderbotTokenizer:ct,BlenderbotSmallTokenizer:_t,SpeechT5Tokenizer:pt,NougatTokenizer:ut,VitsTokenizer:dt,Qwen2Tokenizer:Je,GemmaTokenizer:Ze,Grok1Tokenizer:Ke,CohereTokenizer:ht,MgpstrTokenizer:ft,Ernie4_5_Tokenizer:mt,PreTrainedTokenizer:Me};static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:o=null,local_files_only:n=!1,revision:s="main",legacy:a=null}={}){const[i,l]=await p(e,{progress_callback:t,config:r,cache_dir:o,local_files_only:n,revision:s,legacy:a}),c=l.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let _=this.TOKENIZER_CLASS_MAPPING[c];return _||(console.warn(`Unknown tokenizer class "${c}", attempting to construct from base class.`),_=Me),new _(i,l)}}},"./src/utils/audio.js":(e,t,r)=>{r.r(t),r.d(t,{RawAudio:()=>M,hamming:()=>u,hanning:()=>p,mel_filter_bank:()=>g,read_audio:()=>c,spectrogram:()=>w,window_function:()=>x});var o=r("./src/utils/hub.js"),n=r("./src/utils/maths.js"),s=r("./src/utils/core.js"),a=r("./src/env.js"),i=r("./src/utils/tensor.js"),l=r("?7992");async function c(e,t){if("undefined"==typeof AudioContext)throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const r=await(await(0,o.getFile)(e)).arrayBuffer(),n=new AudioContext({sampleRate:t});void 0===t&&console.warn(`No sampling rate provided, using default of ${n.sampleRate}Hz.`);const s=await n.decodeAudioData(r);let a;if(2===s.numberOfChannels){const e=Math.sqrt(2),t=s.getChannelData(0),r=s.getChannelData(1);a=new Float32Array(t.length);for(let o=0;o<s.length;++o)a[o]=e*(t[o]+r[o])/2}else a=s.getChannelData(0);return a}function _(e,t){if(e<1)return new Float64Array;if(1===e)return new Float64Array([1]);const r=1-t,o=2*Math.PI/(e-1),n=new Float64Array(e);for(let s=0;s<e;++s)n[s]=t-r*Math.cos(s*o);return n}function p(e){return _(e,.5)}function u(e){return _(e,.54)}const d={htk:e=>2595*Math.log10(1+e/700),kaldi:e=>1127*Math.log(1+e/700),slaney:(e,t=1e3,r=15,o=27/Math.log(6.4))=>e>=t?r+Math.log(e/t)*o:3*e/200};function h(e,t="htk"){const r=d[t];if(!r)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return"number"==typeof e?r(e):e.map(e=>r(e))}const f={htk:e=>700*(10**(e/2595)-1),kaldi:e=>700*(Math.exp(e/1127)-1),slaney:(e,t=1e3,r=15,o=Math.log(6.4)/27)=>e>=r?t*Math.exp(o*(e-r)):200*e/3};function m(e,t,r){const o=(t-e)/(r-1);return Float64Array.from({length:r},(t,r)=>e+o*r)}function g(e,t,r,o,n,s=null,a="htk",i=!1){if(null!==s&&"slaney"!==s)throw new Error('norm must be one of null or "slaney"');if(e<2)throw new Error(`Require num_frequency_bins: ${e} >= 2`);if(r>o)throw new Error(`Require min_frequency: ${r} <= max_frequency: ${o}`);const l=m(h(r,a),h(o,a),t+2);let c,_=function(e,t="htk"){const r=f[t];if(!r)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return"number"==typeof e?r(e):e.map(e=>r(e))}(l,a);if(i){const t=n/(2*(e-1));c=h(Float64Array.from({length:e},(e,r)=>r*t),a),_=l}else c=m(0,Math.floor(n/2),e);const p=function(e,t){const r=Float64Array.from({length:t.length-1},(e,r)=>t[r+1]-t[r]),o=Array.from({length:e.length},()=>new Array(t.length));for(let r=0;r<e.length;++r){const n=o[r];for(let o=0;o<t.length;++o)n[o]=t[o]-e[r]}const n=t.length-2,s=Array.from({length:n},()=>new Array(e.length));for(let t=0;t<e.length;++t){const e=o[t];for(let o=0;o<n;++o){const n=-e[o]/r[o],a=e[o+2]/r[o+1];s[o][t]=Math.max(0,Math.min(n,a))}}return s}(c,_);if(null!==s&&"slaney"===s)for(let r=0;r<t;++r){const t=p[r],o=2/(_[r+2]-_[r]);for(let r=0;r<e;++r)t[r]*=o}return p}function b(e,t,r,o,s){if(r<=0)throw new Error("reference must be greater than zero");if(o<=0)throw new Error("min_value must be greater than zero");r=Math.max(o,r);const a=Math.log10(r);for(let r=0;r<e.length;++r)e[r]=t*Math.log10(Math.max(o,e[r])-a);if(null!==s){if(s<=0)throw new Error("db_range must be greater than zero");const t=(0,n.max)(e)[0]-s;for(let r=0;r<e.length;++r)e[r]=Math.max(e[r],t)}return e}async function w(e,t,r,o,{fft_length:a=null,power:l=1,center:c=!0,pad_mode:_="reflect",onesided:p=!0,preemphasis:u=null,preemphasis_htk_flavor:d=!0,mel_filters:h=null,mel_floor:f=1e-10,log_mel:m=null,reference:g=1,min_value:w=1e-10,db_range:x=null,remove_dc_offset:y=null,min_num_frames:M=null,max_num_frames:T=null,do_pad:k=!0,transpose:v=!1}={}){const P=t.length;if(null===a&&(a=r),r>a)throw Error(`frame_length (${r}) may not be larger than fft_length (${a})`);if(P!==r)throw new Error(`Length of the window (${P}) must equal frame_length (${r})`);if(o<=0)throw new Error("hop_length must be greater than zero");if(null===l&&null!==h)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(!d)throw new Error("`preemphasis_htk_flavor=false` is not currently supported.");if(c){if("reflect"!==_)throw new Error(`pad_mode="${_}" not implemented yet.`);const t=Math.floor((a-1)/2)+1;e=function(e,t,r){const o=new e.constructor(e.length+t+r),n=e.length-1;for(let r=0;r<e.length;++r)o[t+r]=e[r];for(let r=1;r<=t;++r)o[t-r]=e[(0,s.calculateReflectOffset)(r,n)];for(let a=1;a<=r;++a)o[n+t+a]=e[(0,s.calculateReflectOffset)(n-a,n)];return o}(e,t,t)}let S=Math.floor(1+Math.floor((e.length-r)/o));null!==M&&S<M&&(S=M);const F=p?Math.floor(a/2)+1:a;let C=S,E=S;null!==T&&(T>S?k&&(E=T):E=C=T);const A=new n.FFT(a),I=new Float64Array(a),O=new Float64Array(A.outputBufferSize),L=new Float32Array(F*E);for(let n=0;n<C;++n){const s=n*o,a=Math.min(e.length-s,r);a!==r&&I.fill(0,0,r);for(let t=0;t<a;++t)I[t]=e[s+t];if(y){let e=0;for(let t=0;t<a;++t)e+=I[t];const t=e/a;for(let e=0;e<a;++e)I[e]-=t}if(null!==u){for(let e=a-1;e>=1;--e)I[e]-=u*I[e-1];I[0]*=1-u}for(let e=0;e<t.length;++e)I[e]*=t[e];A.realTransform(O,I);for(let e=0;e<F;++e){const t=e<<1;L[e*E+n]=O[t]**2+O[t+1]**2}}if(null!==l&&2!==l){const e=l/2;for(let t=0;t<L.length;++t)L[t]**=e}const D=h.length;let N=await(0,i.matmul)(new i.Tensor("float32",h.flat(),[D,F]),new i.Tensor("float32",L,[F,E]));v&&(N=N.transpose(1,0));const B=N.data;for(let e=0;e<B.length;++e)B[e]=Math.max(f,B[e]);if(null!==l&&null!==m){const e=Math.min(B.length,C*D);switch(m){case"log":for(let t=0;t<e;++t)B[t]=Math.log(B[t]);break;case"log10":for(let t=0;t<e;++t)B[t]=Math.log10(B[t]);break;case"dB":if(1===l)!function(e,t=1,r=1e-5,o=null){b(e,20,t,r,o)}(B,g,w,x);else{if(2!==l)throw new Error(`Cannot use log_mel option '${m}' with power ${l}`);!function(e,t=1,r=1e-10,o=null){b(e,10,t,r,o)}(B,g,w,x)}break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${m}'`)}}return N}function x(e,t,{periodic:r=!0,frame_length:o=null,center:n=!0}={}){const s=r?e+1:e;let a;switch(t){case"boxcar":a=new Float64Array(s).fill(1);break;case"hann":case"hann_window":a=p(s);break;case"hamming":a=u(s);break;case"povey":a=p(s).map(e=>Math.pow(e,.85));break;default:throw new Error(`Unknown window type ${t}.`)}if(r&&(a=a.subarray(0,e)),null===o)return a;if(e>o)throw new Error(`Length of the window (${e}) may not be larger than frame_length (${o})`);return a}function y(e,t,r){for(let o=0;o<r.length;++o)e.setUint8(t+o,r.charCodeAt(o))}class M{constructor(e,t){this.audio=e,this.sampling_rate=t}toWav(){return function(e,t){let r=44;const o=new ArrayBuffer(r+4*e.length),n=new DataView(o);y(n,0,"RIFF"),n.setUint32(4,36+4*e.length,!0),y(n,8,"WAVE"),y(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,3,!0),n.setUint16(22,1,!0),n.setUint32(24,t,!0),n.setUint32(28,4*t,!0),n.setUint16(32,4,!0),n.setUint16(34,32,!0),y(n,36,"data"),n.setUint32(40,4*e.length,!0);for(let t=0;t<e.length;++t,r+=4)n.setFloat32(r,e[t],!0);return o}(this.audio,this.sampling_rate)}toBlob(){const e=this.toWav();return new Blob([e],{type:"audio/wav"})}async save(e){let t;if(a.apis.IS_BROWSER_ENV){if(a.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save a file from a Web Worker.");t=s.saveBlob}else{if(!a.apis.IS_FS_AVAILABLE)throw new Error("Unable to save because filesystem is disabled in this environment.");t=async(e,t)=>{let r=await t.arrayBuffer();l.writeFileSync(e,Buffer.from(r))}}await t(e,this.toBlob())}}},"./src/utils/constants.js":(e,t,r)=>{r.r(t),r.d(t,{CHAT_TEMPLATE_NAME:()=>l,CONFIG_NAME:()=>n,FEATURE_EXTRACTOR_NAME:()=>s,GENERATION_CONFIG_NAME:()=>c,GITHUB_ISSUE_URL:()=>o,IMAGE_PROCESSOR_NAME:()=>a,PROCESSOR_NAME:()=>i});const o="https://github.com/huggingface/transformers.js/issues/new/choose",n="config.json",s="preprocessor_config.json",a=s,i="processor_config.json",l="chat_template.jinja",c="generation_config.json"},"./src/utils/core.js":(e,t,r)=>{function o(e,t){e&&e(t)}function n(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[t,e]))}function s(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){return"TypedArray"===e?.prototype?.__proto__?.constructor?.name}function i(e){return Number.isInteger(e)||"bigint"==typeof e}function l(e){return null==e||-1===e}function c(e){const t=[];let r=e;for(;Array.isArray(r);)t.push(r.length),r=r[0];return t}function _(e,t,r=void 0){const o=e[t];if(void 0!==o)return delete e[t],o;if(void 0===r)throw Error(`Key ${t} does not exist in object.`);return r}function p(...e){return Array.prototype.concat.apply([],e)}function u(...e){return e.reduce((e,t)=>e.flatMap(e=>t.map(t=>[e,t])))}function d(e,t){return Math.abs((e+t)%(2*t)-t)}function h(e,t){const r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download=e,o.click(),o.remove(),URL.revokeObjectURL(r)}function f(e,t){return Object.assign({},...t.map(t=>{if(void 0!==e[t])return{[t]:e[t]}}))}function m(e){let t=0;for(const r of e)++t;return t}function g(e,t){let r=0;for(const o of e)o===t&&++r;return r}r.r(t),r.d(t,{calculateDimensions:()=>c,calculateReflectOffset:()=>d,count:()=>g,dispatchCallback:()=>o,escapeRegExp:()=>s,isIntegralNumber:()=>i,isNullishDimension:()=>l,isTypedArray:()=>a,len:()=>m,mergeArrays:()=>p,pick:()=>f,pop:()=>_,product:()=>u,reverseDictionary:()=>n,saveBlob:()=>h})},"./src/utils/data-structures.js":(e,t,r)=>{r.r(t),r.d(t,{CharTrie:()=>n,DictionarySplitter:()=>l,LRUCache:()=>c,PriorityQueue:()=>o,TokenLattice:()=>a});class o{constructor(e=(e,t)=>e>t,t=1/0){this._heap=[],this._comparator=e,this._maxSize=t}get size(){return this._heap.length}isEmpty(){return 0===this.size}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const t of e)if(this.size<this._maxSize)this._heap.push(t),this._siftUp();else{const e=this._smallest();this._comparator(t,this._heap[e])&&(this._heap[e]=t,this._siftUpFrom(e))}return this.size}pop(){const e=this.peek(),t=this.size-1;return t>0&&this._swap(0,t),this._heap.pop(),this._siftDown(),e}replace(e){const t=this.peek();return this._heap[0]=e,this._siftDown(),t}_parent(e){return(e+1>>>1)-1}_left(e){return 1+(e<<1)}_right(e){return e+1<<1}_greater(e,t){return this._comparator(this._heap[e],this._heap[t])}_swap(e,t){const r=this._heap[e];this._heap[e]=this._heap[t],this._heap[t]=r}_siftUp(){this._siftUpFrom(this.size-1)}_siftUpFrom(e){for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const t=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,t),e=t}}_smallest(){return 2**Math.floor(Math.log2(this.size))-1}}class n{constructor(){this.root=s.default()}extend(e){for(const t of e)this.push(t)}push(e){let t=this.root;for(const r of e){let e=t.children.get(r);void 0===e&&(e=s.default(),t.children.set(r,e)),t=e}t.isLeaf=!0}*commonPrefixSearch(e){let t=this.root;if(void 0===t)return;let r="";for(const o of e){if(r+=o,t=t.children.get(o),void 0===t)return;t.isLeaf&&(yield r)}}}class s{constructor(e,t){this.isLeaf=e,this.children=t}static default(){return new s(!1,new Map)}}class a{constructor(e,t,r){this.chars=Array.from(e),this.len=this.chars.length,this.bosTokenId=t,this.eosTokenId=r,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const o=new i(this.bosTokenId,0,0,0,0),n=new i(this.eosTokenId,1,this.len,0,0);this.nodes.push(o.clone()),this.nodes.push(n.clone()),this.beginNodes[this.len].push(n),this.endNodes[0].push(o)}insert(e,t,r,o){const n=this.nodes.length,s=new i(o,n,e,t,r);this.beginNodes[e].push(s),this.endNodes[e+t].push(s),this.nodes.push(s)}viterbi(){const e=this.len;let t=0;for(;t<=e;){if(0==this.beginNodes[t].length)return[];for(let e of this.beginNodes[t]){e.prev=null;let r=0,o=null;for(let n of this.endNodes[t]){const t=n.backtraceScore+e.score;(null===o||t>r)&&(o=n.clone(),r=t)}if(null===o)return[];e.prev=o,e.backtraceScore=r}++t}const r=[],o=this.beginNodes[e][0].prev;if(null===o)return[];let n=o.clone();for(;null!==n.prev;){r.push(n.clone());const e=n.clone();n=e.prev.clone()}return r.reverse(),r}piece(e){return this.chars.slice(e.pos,e.pos+e.length).join("")}tokens(){return this.viterbi().map(e=>this.piece(e))}tokenIds(){return this.viterbi().map(e=>e.tokenId)}}class i{constructor(e,t,r,o,n){this.tokenId=e,this.nodeId=t,this.pos=r,this.length=o,this.score=n,this.prev=null,this.backtraceScore=0}clone(){const e=new i(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}class l{constructor(e){this.trie=this._buildTrie(e)}_buildTrie(e){const t=Object.create(null);for(const r of e){let e=t;for(let t=0;t<r.length;++t)e=e[r[t]]??=Object.create(null);e.end=r}return t}split(e){const t=[],r=e.length;let o=0,n=0;for(;n<r;){let s=this.trie,a=null,i=n;for(;i<r&&(s=s[e[i]]);)s.end&&(a=s.end),++i;a?(n>o&&t.push(e.slice(o,n)),t.push(a),n+=a.length,o=n):++n}return o<r&&t.push(e.slice(o)),t}}class c{constructor(e){this.capacity=e,this.cache=new Map}get(e){if(!this.cache.has(e))return;const t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}put(e,t){this.cache.has(e)&&this.cache.delete(e),this.cache.set(e,t),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}clear(){this.cache.clear()}}},"./src/utils/devices.js":(e,t,r)=>{r.r(t),r.d(t,{DEVICE_TYPES:()=>o});const o=Object.freeze({auto:"auto",gpu:"gpu",cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:"webnn","webnn-npu":"webnn-npu","webnn-gpu":"webnn-gpu","webnn-cpu":"webnn-cpu"})},"./src/utils/dtypes.js":(e,t,r)=>{r.r(t),r.d(t,{DATA_TYPES:()=>a,DEFAULT_DEVICE_DTYPE_MAPPING:()=>i,DEFAULT_DTYPE_SUFFIX_MAPPING:()=>l,isWebGpuFp16Supported:()=>s});var o=r("./src/env.js"),n=r("./src/utils/devices.js");const s=function(){let e;return async function(){if(void 0===e)if(o.apis.IS_WEBGPU_AVAILABLE)try{const t=await navigator.gpu.requestAdapter();e=t.features.has("shader-f16")}catch(t){e=!1}else e=!1;return e}}(),a=Object.freeze({auto:"auto",fp32:"fp32",fp16:"fp16",q8:"q8",int8:"int8",uint8:"uint8",q4:"q4",bnb4:"bnb4",q4f16:"q4f16"}),i=Object.freeze({[n.DEVICE_TYPES.wasm]:a.q8}),l=Object.freeze({[a.fp32]:"",[a.fp16]:"_fp16",[a.int8]:"_int8",[a.uint8]:"_uint8",[a.q8]:"_quantized",[a.q4]:"_q4",[a.q4f16]:"_q4f16",[a.bnb4]:"_bnb4"})},"./src/utils/generic.js":(e,t,r)=>{r.r(t),r.d(t,{Callable:()=>o});const o=class{constructor(){let e=function(...t){return e._call(...t)};return Object.setPrototypeOf(e,new.target.prototype)}_call(...e){throw Error("Must implement _call method in subclass")}}},"./src/utils/hub.js":(e,t,r)=>{r.r(t),r.d(t,{MAX_EXTERNAL_DATA_CHUNKS:()=>i,getFile:()=>u,getModelFile:()=>f,getModelJSON:()=>g,getModelText:()=>m});var o=r("?7992"),n=r("?5af5"),s=r("./src/env.js"),a=r("./src/utils/core.js");const i=100,l={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};class c{constructor(e){if(this.filePath=e,this.headers=new Headers,this.exists=o.existsSync(e),this.exists){this.status=200,this.statusText="OK";let t=o.statSync(e);this.headers.set("content-length",t.size.toString()),this.updateContentType();const r=o.createReadStream(e);this.body=new ReadableStream({start(e){r.on("data",t=>e.enqueue(t)),r.on("end",()=>e.close()),r.on("error",t=>e.error(t))},cancel(){r.destroy()}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",l[e]??"application/octet-stream")}clone(){let e=new c(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await o.promises.readFile(this.filePath)).buffer}async blob(){const e=await o.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await o.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function _(e,t=null,r=null){let o;try{o=new URL(e)}catch(e){return!1}return!(t&&!t.includes(o.protocol))&&!(r&&!r.includes(o.hostname))}const p=/^(\b[\w\-.]+\b\/)?\b[\w\-.]{1,96}\b$/;async function u(e){if(s.env.useFS&&!_(e,["http:","https:","blob:"]))return new c(e instanceof URL?"file:"===e.protocol?e.pathname:e.toString():e);if("undefined"!=typeof process&&"node"===process?.release?.name){const t=!!process.env?.TESTING_REMOTELY,r=s.env.version,o=new Headers;o.set("User-Agent",`transformers.js/${r}; is_ci/${t};`);if(_(e,["http:","https:"],["huggingface.co","hf.co"])){const e=process.env?.HF_TOKEN??process.env?.HF_ACCESS_TOKEN;e&&o.set("Authorization",`Bearer ${e}`)}return fetch(e,{headers:o})}return fetch(e)}const d={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};class h{constructor(e){this.path=e}async match(e){let t=n.join(this.path,e),r=new c(t);return r.exists?r:void 0}async put(e,t,r=void 0){let s=n.join(this.path,e);try{const e=t.headers.get("Content-Length"),a=parseInt(e??"0");let i=0;await o.promises.mkdir(n.dirname(s),{recursive:!0});const l=o.createWriteStream(s),c=t.body.getReader();for(;;){const{done:e,value:t}=await c.read();if(e)break;await new Promise((e,r)=>{l.write(t,t=>{t?r(t):e()})}),i+=t.length;const o=a?i/a*100:0;r?.({progress:o,loaded:i,total:a})}l.close()}catch(e){try{await o.promises.unlink(s)}catch{}throw e}}}async function f(e,t,r=!0,o={},n=!1){if(!s.env.allowLocalModels){if(o.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!s.env.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}let i;if((0,a.dispatchCallback)(o.progress_callback,{status:"initiate",name:e,file:t}),!i&&s.env.useCustomCache){if(!s.env.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!s.env.customCache.match||!s.env.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");i=s.env.customCache}if(!i&&s.env.useBrowserCache){if("undefined"==typeof caches)throw Error("Browser cache is not available in this environment.");try{i=await caches.open("transformers-cache")}catch(e){console.warn("An error occurred while opening the browser cache:",e)}}if(!i&&s.env.useFSCache){if(!s.apis.IS_FS_AVAILABLE)throw Error("File System Cache is not available in this environment.");i=new h(o.cache_dir??s.env.cacheDir)}const l=o.revision??"main",f=b(e,t),m=(g=e,!(!p.test(g)||g.includes("..")||g.includes("--")||g.endsWith(".git")||g.endsWith(".ipynb")));var g;const w=m?b(s.env.localModelPath,f):f,x=b(s.env.remoteHost,s.env.remotePathTemplate.replaceAll("{model}",e).replaceAll("{revision}",encodeURIComponent(l)),t);let y;const M=i instanceof h?"main"===l?f:b(e,l,t):x;let T,k=!1;i&&(T=await async function(e,...t){for(let r of t)try{let t=await e.match(r);if(t)return t}catch(e){continue}}(i,w,M));const v=void 0!==T;if(void 0===T){if(s.env.allowLocalModels){if(_(f,["http:","https:"])){if(o.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${f}.`);if(!s.env.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${f}.`)}else try{T=await u(w),y=w}catch(e){console.warn(`Unable to load from local path "${w}": "${e}"`)}}if(void 0===T||404===T.status){if(o.local_files_only||!s.env.allowRemoteModels){if(r)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${w}".`);return null}if(!m)throw Error(`Local file missing at "${w}" and download aborted due to invalid model ID "${e}".`);if(T=await u(x),200!==T.status)return function(e,t,r){if(!r)return null;const o=d[e]??`Error (${e}) occurred while trying to load file`;throw Error(`${o}: "${t}".`)}(T.status,x,r);y=M}k=i&&"undefined"!=typeof Response&&T instanceof Response&&200===T.status}let P;if((0,a.dispatchCallback)(o.progress_callback,{status:"download",name:e,file:t}),!s.apis.IS_NODE_ENV||!n){let r;o.progress_callback?v&&"undefined"!=typeof navigator&&/firefox/i.test(navigator.userAgent)?(r=new Uint8Array(await T.arrayBuffer()),(0,a.dispatchCallback)(o.progress_callback,{status:"progress",name:e,file:t,progress:100,loaded:r.length,total:r.length})):r=await async function(e,t){const r=e.headers.get("Content-Length");null===r&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let o=parseInt(r??"0"),n=new Uint8Array(o),s=0;const a=e.body.getReader();async function i(){const{done:e,value:r}=await a.read();if(e)return;const l=s+r.length;if(l>o){o=l;const e=new Uint8Array(o);e.set(n),n=e}n.set(r,s),s=l;return t({progress:s/o*100,loaded:s,total:o}),i()}return await i(),n}(T,r=>{(0,a.dispatchCallback)(o.progress_callback,{status:"progress",name:e,file:t,...r})}):r=new Uint8Array(await T.arrayBuffer()),P=r}if(k&&y&&void 0===await i.match(y))if(P)await i.put(y,new Response(P,{headers:T.headers})).catch(e=>{console.warn(`Unable to add response to browser cache: ${e}.`)});else{const r=o.progress_callback?r=>(0,a.dispatchCallback)(o.progress_callback,{status:"progress",name:e,file:t,...r}):void 0;await i.put(y,T,r)}if((0,a.dispatchCallback)(o.progress_callback,{status:"done",name:e,file:t}),P){if(!s.apis.IS_NODE_ENV&&n)throw new Error("Cannot return path in a browser environment.");return P}if(T instanceof c)return T.filePath;const S=await(i?.match(y));if(S instanceof c)return S.filePath;if(S instanceof Response)return new Uint8Array(await S.arrayBuffer());if("string"==typeof S)return S;throw new Error("Unable to get model file path or buffer.")}async function m(e,t,r=!0,o={}){const n=await f(e,t,r,o,!1);if(null===n)return null;return new TextDecoder("utf-8").decode(n)}async function g(e,t,r=!0,o={}){const n=await m(e,t,r,o);return null===n?{}:JSON.parse(n)}function b(...e){return(e=e.map((t,r)=>(r&&(t=t.replace(new RegExp("^/"),"")),r!==e.length-1&&(t=t.replace(new RegExp("/$"),"")),t))).join("/")}},"./src/utils/image.js":(e,t,r)=>{r.r(t),r.d(t,{RawImage:()=>h,load_image:()=>f});var o=r("./src/utils/core.js"),n=r("./src/utils/hub.js"),s=r("./src/env.js"),a=r("./src/utils/tensor.js"),i=r("?2b25");let l,c,_;const p=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV;if(p)l=(e,t)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(e,t)},_=self.createImageBitmap,c=self.ImageData;else{if(!i)throw new Error("Unable to load image processing library.");_=async e=>{const t=(await e.metadata()).channels,{data:r,info:o}=await e.rotate().raw().toBuffer({resolveWithObject:!0}),n=new h(new Uint8ClampedArray(r),o.width,o.height,o.channels);return void 0!==t&&t!==o.channels&&n.convert(t),n}}const u={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},d=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class h{constructor(e,t,r,o){this.data=e,this.width=t,this.height=r,this.channels=o}get size(){return[this.width,this.height]}static async read(e){if(e instanceof h)return e;if("string"==typeof e||e instanceof URL)return await this.fromURL(e);if(e instanceof Blob)return await this.fromBlob(e);if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return this.fromCanvas(e);throw new Error("Unsupported input type: "+typeof e)}static fromCanvas(e){if(!p)throw new Error("fromCanvas() is only supported in browser environments.");const t=e.getContext("2d").getImageData(0,0,e.width,e.height).data;return new h(t,e.width,e.height,4)}static async fromURL(e){const t=await(0,n.getFile)(e);if(200!==t.status)throw new Error(`Unable to read image from "${e}" (${t.status} ${t.statusText})`);const r=await t.blob();return this.fromBlob(r)}static async fromBlob(e){if(p){const t=await _(e),r=l(t.width,t.height).getContext("2d");return r.drawImage(t,0,0),new this(r.getImageData(0,0,t.width,t.height).data,t.width,t.height,4)}{const t=i(await e.arrayBuffer());return await _(t)}}static fromTensor(e,t="CHW"){if(3!==e.dims.length)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if("CHW"===t)e=e.transpose(1,2,0);else if("HWC"!==t)throw new Error(`Unsupported channel format: ${t}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new h(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(1===this.channels)return this;const e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let t=0,r=0;t<this.data.length;t+=this.channels){const o=this.data[t],n=this.data[t+1],s=this.data[t+2];e[r++]=Math.round(.2989*o+.587*n+.114*s)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(3===this.channels)return this;const e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let t=0,r=0;t<this.data.length;++t)e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=this.data[t];break;case 4:for(let t=0,r=0;t<this.data.length;t+=4)e[r++]=this.data[t],e[r++]=this.data[t+1],e[r++]=this.data[t+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(4===this.channels)return this;const e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let t=0,r=0;t<this.data.length;++t)e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=255;break;case 3:for(let t=0,r=0;t<this.data.length;t+=3)e[r++]=this.data[t],e[r++]=this.data[t+1],e[r++]=this.data[t+2],e[r++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}putAlpha(e){if(e.width!==this.width||e.height!==this.height)throw new Error(`Expected mask size to be ${this.width}x${this.height}, but got ${e.width}x${e.height}`);if(1!==e.channels)throw new Error(`Expected mask to have 1 channel, but got ${e.channels}`);const t=this.data,r=e.data,o=this.width*this.height;if(3===this.channels){const e=new Uint8ClampedArray(4*o);for(let n=0,s=0,a=0;n<o;++n)e[a++]=t[s++],e[a++]=t[s++],e[a++]=t[s++],e[a++]=r[n];return this._update(e,this.width,this.height,4)}if(4===this.channels){for(let e=0;e<o;++e)t[4*e+3]=r[e];return this}throw new Error(`Expected image to have 3 or 4 channels, but got ${this.channels}`)}async resize(e,t,{resample:r=2}={}){if(this.width===e&&this.height===t)return this;let n=u[r]??r;const s=(0,o.isNullishDimension)(e),a=(0,o.isNullishDimension)(t);if(s&&a)return this;if(s?e=t/this.height*this.width:a&&(t=e/this.width*this.height),p){const r=this.channels,o=this.toCanvas(),n=l(e,t).getContext("2d");n.drawImage(o,0,0,e,t);return new h(n.getImageData(0,0,e,t).data,e,t,4).convert(r)}{let r=this.toSharp();switch(n){case"box":case"hamming":"box"!==n&&"hamming"!==n||(console.warn(`Resampling method ${n} is not yet supported. Using bilinear instead.`),n="bilinear");case"nearest":case"bilinear":case"bicubic":r=r.affine([e/this.width,0,0,t/this.height],{interpolator:n});break;case"lanczos":r=r.resize({width:e,height:t,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${n} is not supported.`)}return await _(r)}}async pad([e,t,r,o]){if(e=Math.max(e,0),t=Math.max(t,0),r=Math.max(r,0),o=Math.max(o,0),0===e&&0===t&&0===r&&0===o)return this;if(p){const n=this.channels,s=this.toCanvas(),a=this.width+e+t,i=this.height+r+o,c=l(a,i).getContext("2d");c.drawImage(s,0,0,this.width,this.height,e,r,this.width,this.height);return new h(c.getImageData(0,0,a,i).data,a,i,4).convert(n)}{const n=this.toSharp().extend({left:e,right:t,top:r,bottom:o});return await _(n)}}async crop([e,t,r,o]){if(e=Math.max(e,0),t=Math.max(t,0),r=Math.min(r,this.width-1),o=Math.min(o,this.height-1),0===e&&0===t&&r===this.width-1&&o===this.height-1)return this;const n=r-e+1,s=o-t+1;if(p){const r=this.channels,o=this.toCanvas(),a=l(n,s).getContext("2d");a.drawImage(o,e,t,n,s,0,0,n,s);return new h(a.getImageData(0,0,n,s).data,n,s,4).convert(r)}{const r=this.toSharp().extract({left:e,top:t,width:n,height:s});return await _(r)}}async center_crop(e,t){if(this.width===e&&this.height===t)return this;const r=(this.width-e)/2,o=(this.height-t)/2;if(p){const n=this.channels,s=this.toCanvas(),a=l(e,t).getContext("2d");let i=0,c=0,_=0,p=0;r>=0?i=r:_=-r,o>=0?c=o:p=-o,a.drawImage(s,i,c,e,t,_,p,e,t);return new h(a.getImageData(0,0,e,t).data,e,t,4).convert(n)}{let n=this.toSharp();if(r>=0&&o>=0)n=n.extract({left:Math.floor(r),top:Math.floor(o),width:e,height:t});else if(r<=0&&o<=0){const s=Math.floor(-o),a=Math.floor(-r);n=n.extend({top:s,left:a,right:e-this.width-a,bottom:t-this.height-s})}else{let s=[0,0],a=0;o<0?(s[0]=Math.floor(-o),s[1]=t-this.height-s[0]):a=Math.floor(o);let i=[0,0],l=0;r<0?(i[0]=Math.floor(-r),i[1]=e-this.width-i[0]):l=Math.floor(r),n=n.extend({top:s[0],bottom:s[1],left:i[0],right:i[1]}).extract({left:l,top:a,width:e,height:t})}return await _(n)}}async toBlob(e="image/png",t=1){if(!p)throw new Error("toBlob() is only supported in browser environments.");const r=this.toCanvas();return await r.convertToBlob({type:e,quality:t})}toTensor(e="CHW"){let t=new a.Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if("HWC"===e);else{if("CHW"!==e)throw new Error(`Unsupported channel format: ${e}`);t=t.permute(2,0,1)}return t}toCanvas(){if(!p)throw new Error("toCanvas() is only supported in browser environments.");const e=this.clone().rgba(),t=l(e.width,e.height),r=new c(e.data,e.width,e.height);return t.getContext("2d").putImageData(r,0,0),t}split(){const{data:e,width:t,height:r,channels:o}=this,n=e.constructor,s=e.length/o,a=Array.from({length:o},()=>new n(s));for(let t=0;t<s;++t){const r=o*t;for(let n=0;n<o;++n)a[n][t]=e[r+n]}return a.map(e=>new h(e,t,r,1))}_update(e,t,r,o=null){return this.data=e,this.width=t,this.height=r,null!==o&&(this.channels=o),this}clone(){return new h(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(!p){if(s.apis.IS_FS_AVAILABLE){const t=this.toSharp();return await t.toFile(e)}throw new Error("Unable to save the image because filesystem is disabled in this environment.")}{if(s.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const t=e.split(".").pop().toLowerCase(),r=d.get(t)??"image/png",n=await this.toBlob(r);(0,o.saveBlob)(e,n)}}toSharp(){if(p)throw new Error("toSharp() is only supported in server-side environments.");return i(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}const f=h.read.bind(h)},"./src/utils/maths.js":(e,t,r)=>{function o(e,[t,r,o],[n,s],a="bilinear",i=!1){const l=s/o,c=n/r,_=new e.constructor(n*s*t),p=r*o,u=n*s;for(let a=0;a<n;++a)for(let n=0;n<s;++n){const i=a*s+n,d=(n+.5)/l-.5,h=(a+.5)/c-.5;let f=Math.floor(d),m=Math.floor(h);const g=Math.min(f+1,o-1),b=Math.min(m+1,r-1);f=Math.max(f,0),m=Math.max(m,0);const w=d-f,x=h-m,y=(1-w)*(1-x),M=w*(1-x),T=(1-w)*x,k=w*x,v=m*o,P=b*o,S=v+f,F=v+g,C=P+f,E=P+g;for(let r=0;r<t;++r){const t=r*p;_[r*u+i]=y*e[t+S]+M*e[t+F]+T*e[t+C]+k*e[t+E]}}return _}function n(e,t,r){const o=new Array(r.length),n=new Array(r.length);for(let e=r.length-1,s=1;e>=0;--e)n[e]=s,o[e]=t[r[e]],s*=o[e];const s=r.map((e,t)=>n[r.indexOf(t)]),a=new e.constructor(e.length);for(let r=0;r<e.length;++r){let o=0;for(let e=t.length-1,n=r;e>=0;--e)o+=n%t[e]*s[e],n=Math.floor(n/t[e]);a[o]=e[r]}return[a,o]}function s(e){const t=p(e)[0],r=e.map(e=>Math.exp(e-t)),o=r.reduce((e,t)=>e+t,0);return r.map(e=>e/o)}function a(e){const t=p(e)[0];let r=0;for(let o=0;o<e.length;++o)r+=Math.exp(e[o]-t);const o=Math.log(r);return e.map(e=>e-t-o)}function i(e,t){let r=0;for(let o=0;o<e.length;++o)r+=e[o]*t[o];return r}function l(e,t){return i(e,t)/(c(e)*c(t))}function c(e){return Math.sqrt(e.reduce((e,t)=>e+t*t,0))}function _(e){if(0===e.length)throw Error("Array must not be empty");let t=e[0],r=0;for(let o=1;o<e.length;++o)e[o]<t&&(t=e[o],r=o);return[t,r]}function p(e){if(0===e.length)throw Error("Array must not be empty");let t=e[0],r=0;for(let o=1;o<e.length;++o)e[o]>t&&(t=e[o],r=o);return[t,r]}function u(e){return e>0&&!(e&e-1)}r.r(t),r.d(t,{FFT:()=>f,bankers_round:()=>b,cos_sim:()=>l,dot:()=>i,dynamic_time_warping:()=>w,interpolate_data:()=>o,log_softmax:()=>a,magnitude:()=>c,max:()=>p,medianFilter:()=>m,min:()=>_,permute_data:()=>n,round:()=>g,softmax:()=>s});class d{constructor(e){if(this.size=0|e,this.size<=1||!u(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(2*this.size);for(let e=0;e<this.table.length;e+=2){const t=Math.PI*e/this.size;this.table[e]=Math.cos(t),this.table[e+1]=-Math.sin(t)}let t=0;for(let e=1;this.size>e;e<<=1)++t;this._width=t%2==0?t-1:t,this._bitrev=new Int32Array(1<<this._width);for(let e=0;e<this._bitrev.length;++e){this._bitrev[e]=0;for(let t=0;t<this._width;t+=2){const r=this._width-t-2;this._bitrev[e]|=(e>>>t&3)<<r}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,t){const r=t||new Array(e.length>>>1);for(let t=0;t<e.length;t+=2)r[t>>>1]=e[t];return r}toComplexArray(e,t){const r=t||this.createComplexArray();for(let t=0;t<r.length;t+=2)r[t]=e[t>>>1],r[t+1]=0;return r}transform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,1)}realTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._realTransform4(e,t,1)}inverseTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,-1);for(let t=0;t<e.length;++t)e[t]/=this.size}_transform4(e,t,r){const o=this._csize;let n,s,a=1<<this._width,i=o/a<<1;const l=this._bitrev;if(4===i)for(n=0,s=0;n<o;n+=i,++s){const r=l[s];this._singleTransform2(t,e,n,r,a)}else for(n=0,s=0;n<o;n+=i,++s){const o=l[s];this._singleTransform4(t,e,n,o,a,r)}const c=this.table;for(a>>=2;a>=2;a>>=2){i=o/a<<1;const t=i>>>2;for(n=0;n<o;n+=i){const o=n+t-1;for(let s=n,i=0;s<o;s+=2,i+=a){const o=s,n=o+t,a=n+t,l=a+t,_=e[o],p=e[o+1],u=e[n],d=e[n+1],h=e[a],f=e[a+1],m=e[l],g=e[l+1],b=c[i],w=r*c[i+1],x=u*b-d*w,y=u*w+d*b,M=c[2*i],T=r*c[2*i+1],k=h*M-f*T,v=h*T+f*M,P=c[3*i],S=r*c[3*i+1],F=m*P-g*S,C=m*S+g*P,E=_+k,A=p+v,I=_-k,O=p-v,L=x+F,D=y+C,N=r*(x-F),B=r*(y-C);e[o]=E+L,e[o+1]=A+D,e[n]=I+B,e[n+1]=O-N,e[a]=E-L,e[a+1]=A-D,e[l]=I-B,e[l+1]=O+N}}}}_singleTransform2(e,t,r,o,n){const s=e[o],a=e[o+1],i=e[o+n],l=e[o+n+1];t[r]=s+i,t[r+1]=a+l,t[r+2]=s-i,t[r+3]=a-l}_singleTransform4(e,t,r,o,n,s){const a=2*n,i=3*n,l=e[o],c=e[o+1],_=e[o+n],p=e[o+n+1],u=e[o+a],d=e[o+a+1],h=e[o+i],f=e[o+i+1],m=l+u,g=c+d,b=l-u,w=c-d,x=_+h,y=p+f,M=s*(_-h),T=s*(p-f);t[r]=m+x,t[r+1]=g+y,t[r+2]=b+T,t[r+3]=w-M,t[r+4]=m-x,t[r+5]=g-y,t[r+6]=b-T,t[r+7]=w+M}_realTransform4(e,t,r){const o=this._csize;let n,s,a=1<<this._width,i=o/a<<1;const l=this._bitrev;if(4===i)for(n=0,s=0;n<o;n+=i,++s){const r=l[s];this._singleRealTransform2(t,e,n,r>>>1,a>>>1)}else for(n=0,s=0;n<o;n+=i,++s){const o=l[s];this._singleRealTransform4(t,e,n,o>>>1,a>>>1,r)}const c=this.table;for(a>>=2;a>=2;a>>=2){i=o/a<<1;const t=i>>>1,s=t>>>1,l=s>>>1;for(n=0;n<o;n+=i)for(let o=0,i=0;o<=l;o+=2,i+=a){const a=n+o,_=a+s,p=_+s,u=p+s,d=e[a],h=e[a+1],f=e[_],m=e[_+1],g=e[p],b=e[p+1],w=e[u],x=e[u+1],y=d,M=h,T=c[i],k=r*c[i+1],v=f*T-m*k,P=f*k+m*T,S=c[2*i],F=r*c[2*i+1],C=g*S-b*F,E=g*F+b*S,A=c[3*i],I=r*c[3*i+1],O=w*A-x*I,L=w*I+x*A,D=y+C,N=M+E,B=y-C,$=M-E,V=v+O,j=P+L,z=r*(v-O),R=r*(P-L);if(e[a]=D+V,e[a+1]=N+j,e[_]=B+R,e[_+1]=$-z,0===o){e[p]=D-V,e[p+1]=N-j;continue}if(o===l)continue;const G=n+s-o,U=n+t-o;e[G]=B-r*R,e[G+1]=-$-r*z,e[U]=D-r*V,e[U+1]=r*j-N}}const _=o>>>1;for(let t=2;t<_;t+=2)e[o-t]=e[t],e[o-t+1]=-e[t+1]}_singleRealTransform2(e,t,r,o,n){const s=e[o],a=e[o+n];t[r]=s+a,t[r+1]=0,t[r+2]=s-a,t[r+3]=0}_singleRealTransform4(e,t,r,o,n,s){const a=2*n,i=3*n,l=e[o],c=e[o+n],_=e[o+a],p=e[o+i],u=l+_,d=l-_,h=c+p,f=s*(c-p);t[r]=u+h,t[r+1]=0,t[r+2]=d,t[r+3]=-f,t[r+4]=u-h,t[r+5]=0,t[r+6]=d,t[r+7]=f}}class h{constructor(e){const t=2*(e-1),r=2*(2*e-1),o=2**Math.ceil(Math.log2(r));this.bufferSize=o,this._a=t;const n=new Float64Array(r),s=new Float64Array(o);this._chirpBuffer=new Float64Array(o),this._buffer1=new Float64Array(o),this._buffer2=new Float64Array(o),this._outBuffer1=new Float64Array(o),this._outBuffer2=new Float64Array(o);const a=-2*Math.PI/e,i=Math.cos(a),l=Math.sin(a);for(let t=0;t<r>>1;++t){const r=(t+1-e)**2/2,o=Math.sqrt(i**2+l**2)**r,a=r*Math.atan2(l,i),c=2*t;n[c]=o*Math.cos(a),n[c+1]=o*Math.sin(a),s[c]=n[c],s[c+1]=-n[c+1]}this._slicedChirpBuffer=n.subarray(t,r),this._f=new d(o>>1),this._f.transform(this._chirpBuffer,s)}_transform(e,t,r){const o=this._buffer1,n=this._buffer2,s=this._outBuffer1,a=this._outBuffer2,i=this._chirpBuffer,l=this._slicedChirpBuffer,c=this._a;if(r)for(let e=0;e<l.length;e+=2){const r=e+1,n=t[e>>1];o[e]=n*l[e],o[r]=n*l[r]}else for(let e=0;e<l.length;e+=2){const r=e+1;o[e]=t[e]*l[e]-t[r]*l[r],o[r]=t[e]*l[r]+t[r]*l[e]}this._f.transform(s,o);for(let e=0;e<i.length;e+=2){const t=e+1;n[e]=s[e]*i[e]-s[t]*i[t],n[t]=s[e]*i[t]+s[t]*i[e]}this._f.inverseTransform(a,n);for(let t=0;t<a.length;t+=2){const r=a[t+c],o=a[t+c+1],n=l[t],s=l[t+1];e[t]=r*n-o*s,e[t+1]=r*s+o*n}}transform(e,t){this._transform(e,t,!1)}realTransform(e,t){this._transform(e,t,!0)}}class f{constructor(e){this.fft_length=e,this.isPowerOfTwo=u(e),this.isPowerOfTwo?(this.fft=new d(e),this.outputBufferSize=2*e):(this.fft=new h(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,t){this.fft.realTransform(e,t)}transform(e,t){this.fft.transform(e,t)}}function m(e,t){if(t%2==0||t<=0)throw new Error("Window size must be a positive odd number");const r=new e.constructor(e.length),o=new e.constructor(t),n=Math.floor(t/2);for(let t=0;t<e.length;++t){let s=0;for(let r=-n;r<=n;++r){let n=t+r;n<0?n=Math.abs(n):n>=e.length&&(n=2*(e.length-1)-n),o[s++]=e[n]}o.sort(),r[t]=o[n]}return r}function g(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}function b(e){const t=Math.round(e);return Math.abs(e)%1==.5?t%2==0?t:t-1:t}function w(e){const t=e.length,r=e[0].length,o=[t+1,r+1],n=Array.from({length:o[0]},()=>Array(o[1]).fill(1/0));n[0][0]=0;const s=Array.from({length:o[0]},()=>Array(o[1]).fill(-1));for(let t=1;t<o[1];++t)for(let r=1;r<o[0];++r){const o=n[r-1][t-1],a=n[r-1][t],i=n[r][t-1];let l,c;o<a&&o<i?(l=o,c=0):a<o&&a<i?(l=a,c=1):(l=i,c=2),n[r][t]=e[r-1][t-1]+l,s[r][t]=c}for(let e=0;e<o[1];++e)s[0][e]=2;for(let e=0;e<o[0];++e)s[e][0]=1;let a=t,i=r,l=[],c=[];for(;a>0||i>0;)switch(l.push(a-1),c.push(i-1),s[a][i]){case 0:--a,--i;break;case 1:--a;break;case 2:--i;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${a}, ${i}]. Please file a bug report.`)}return l.reverse(),c.reverse(),[l,c]}},"./src/utils/tensor.js":(e,t,r)=>{r.r(t),r.d(t,{DataTypeMap:()=>a,Tensor:()=>i,cat:()=>y,full:()=>S,full_like:()=>F,interpolate:()=>c,interpolate_4d:()=>_,layer_norm:()=>g,matmul:()=>p,mean:()=>v,mean_pooling:()=>m,ones:()=>C,ones_like:()=>E,permute:()=>l,quantize_embeddings:()=>L,rand:()=>O,rfft:()=>u,slice:()=>f,stack:()=>M,std_mean:()=>k,topk:()=>d,zeros:()=>A,zeros_like:()=>I});var o=r("./src/utils/maths.js"),n=r("./src/backends/onnx.js"),s=r("./src/ops/registry.js");const a=Object.freeze({float32:Float32Array,float16:"undefined"!=typeof Float16Array?Float16Array:Uint16Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array,uint4:Uint8Array,int4:Int8Array});class i{get dims(){return this.ort_tensor.dims}set dims(e){this.ort_tensor.dims=e}get type(){return this.ort_tensor.type}get data(){return this.ort_tensor.data}get size(){return this.ort_tensor.size}get location(){return this.ort_tensor.location}ort_tensor;constructor(...e){return(0,n.isONNXTensor)(e[0])?this.ort_tensor=e[0]:this.ort_tensor=new n.Tensor(e[0],e[1],e[2]),new Proxy(this,{get:(e,t)=>{if("string"==typeof t){let r=Number(t);if(Number.isInteger(r))return e._getitem(r)}return e[t]},set:(e,t,r)=>e[t]=r})}dispose(){this.ort_tensor.dispose()}*[Symbol.iterator](){const[e,...t]=this.dims;if(t.length>0){const r=t.reduce((e,t)=>e*t);for(let o=0;o<e;++o)yield this._subarray(o,r,t)}else yield*this.data}_getitem(e){const[t,...r]=this.dims;if(e=x(e,t),r.length>0){const t=r.reduce((e,t)=>e*t);return this._subarray(e,t,r)}return new i(this.type,[this.data[e]],r)}indexOf(e){const t=this.data;for(let r=0;r<t.length;++r)if(t[r]==e)return r;return-1}_subarray(e,t,r){const o=e*t,n=(e+1)*t,s="subarray"in this.data?this.data.subarray(o,n):this.data.slice(o,n);return new i(this.type,s,r)}item(){const e=this.data;if(1!==e.length)throw new Error(`a Tensor with ${e.length} elements cannot be converted to Scalar`);return e[0]}tolist(){return function(e,t){const r=e.length,o=t.reduce((e,t)=>e*t);if(r!==o)throw Error(`cannot reshape array of size ${r} into shape (${t})`);let n=e;for(let e=t.length-1;e>=0;e--)n=n.reduce((r,o)=>{let n=r[r.length-1];return n.length<t[e]?n.push(o):r.push([o]),r},[[]]);return n[0]}(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){const e=this.data;for(let t=0;t<e.length;++t)e[t]=1/(1+Math.exp(-e[t]));return this}map(e){return this.clone().map_(e)}map_(e){const t=this.data;for(let r=0;r<t.length;++r)t[r]=e(t[r],r,t);return this}mul(e){return this.clone().mul_(e)}mul_(e){const t=this.data;for(let r=0;r<t.length;++r)t[r]*=e;return this}div(e){return this.clone().div_(e)}div_(e){const t=this.data;for(let r=0;r<t.length;++r)t[r]/=e;return this}add(e){return this.clone().add_(e)}add_(e){const t=this.data;for(let r=0;r<t.length;++r)t[r]+=e;return this}sub(e){return this.clone().sub_(e)}sub_(e){const t=this.data;for(let r=0;r<t.length;++r)t[r]-=e;return this}clone(){return new i(this.type,this.data.slice(),this.dims.slice())}slice(...e){const t=[],r=[];for(let o=0;o<this.dims.length;++o){let n=e[o];if(null==n)r.push([0,this.dims[o]]),t.push(this.dims[o]);else if("number"==typeof n)n=x(n,this.dims[o],o),r.push([n,n+1]);else{if(!Array.isArray(n)||2!==n.length)throw new Error(`Invalid slice: ${n}`);{let[e,s]=n;if(e=null===e?0:x(e,this.dims[o],o,!1),s=null===s?this.dims[o]:x(s,this.dims[o],o,!1),e>s)throw new Error(`Invalid slice: ${n}`);const a=[Math.max(e,0),Math.min(s,this.dims[o])];r.push(a),t.push(a[1]-a[0])}}}const o=r.map(([e,t])=>t-e),n=o.reduce((e,t)=>e*t),s=this.data,a=new s.constructor(n),l=this.stride();let c=!0;for(let e=1;e<o.length;++e)if(0!==r[e][0]||r[e][1]!==this.dims[e]){c=!1;break}if(c){const e=r[0][0]*l[0],t=r[0][1]*l[0];if(ArrayBuffer.isView(s))a.set(s.subarray(e,t));else{if(!Array.isArray(s))throw new Error("Unsupported data type for slicing");{const r=s.slice(e,t);for(let e=0;e<r.length;++e)a[e]=r[e]}}}else for(let e=0;e<n;++e){let t=0;for(let n=o.length-1,s=e;n>=0;--n){const e=o[n];t+=(s%e+r[n][0])*l[n],s=Math.floor(s/e)}a[e]=s[t]}return new i(this.type,a,t)}permute(...e){return l(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,t=!1){return this.norm(1,e,t)}norm(e="fro",t=null,r=!1){if("fro"===e)e=2;else if("string"==typeof e)throw Error(`Unsupported norm: ${e}`);const o=this.data,n=(t,r)=>t+r**e;if(null===t){const t=o.reduce(n,0)**(1/e);return new i(this.type,[t],[])}const[s,a,l]=T(n,this,t,r);if(1!==e)for(let t=0;t<a.length;++t)a[t]=a[t]**(1/e);return new i(s,a,l)}normalize_(e=2,t=1){t=x(t,this.dims.length);const r=this.norm(e,t,!0),o=this.data,n=r.data;for(let e=0;e<o.length;++e){let r=0;for(let o=this.dims.length-1,n=e,s=1;o>=0;--o){const e=this.dims[o];if(o!==t){r+=n%e*s,s*=this.dims[o]}n=Math.floor(n/e)}o[e]/=n[r]}return this}normalize(e=2,t=1){return this.clone().normalize_(e,t)}stride(){return function(e){const t=new Array(e.length);for(let r=e.length-1,o=1;r>=0;--r)t[r]=o,o*=e[r];return t}(this.dims)}squeeze(e=null){return new i(this.type,this.data,b(this.dims,e))}squeeze_(e=null){return this.dims=b(this.dims,e),this}unsqueeze(e=null){return new i(this.type,this.data,w(this.dims,e))}unsqueeze_(e=null){return this.dims=w(this.dims,e),this}flatten_(e=0,t=-1){t=(t+this.dims.length)%this.dims.length;let r=this.dims.slice(0,e),o=this.dims.slice(e,t+1),n=this.dims.slice(t+1);return this.dims=[...r,o.reduce((e,t)=>e*t,1),...n],this}flatten(e=0,t=-1){return this.clone().flatten_(e,t)}view(...e){let t=-1;for(let r=0;r<e.length;++r)if(-1===e[r]){if(-1!==t)throw new Error("Only one dimension can be inferred");t=r}const r=this.data;if(-1!==t){const o=e.reduce((e,r,o)=>o!==t?e*r:e,1);e[t]=r.length/o}return new i(this.type,r,e)}neg_(){const e=this.data;for(let t=0;t<e.length;++t)e[t]=-e[t];return this}neg(){return this.clone().neg_()}gt(e){const t=new Uint8Array(this.data.length),r=this.data;for(let o=0;o<r.length;++o)t[o]=r[o]>e?1:0;return new i("bool",t,this.dims)}lt(e){const t=new Uint8Array(this.data.length),r=this.data;for(let o=0;o<r.length;++o)t[o]=r[o]<e?1:0;return new i("bool",t,this.dims)}clamp_(e,t){const r=this.data;for(let o=0;o<r.length;++o)r[o]=Math.min(Math.max(r[o],e),t);return this}clamp(e,t){return this.clone().clamp_(e,t)}round_(){const e=this.data;for(let t=0;t<e.length;++t)e[t]=Math.round(e[t]);return this}round(){return this.clone().round_()}mean(e=null,t=!1){return v(this,e,t)}min(e=null,t=!1){if(null===e){const e=(0,o.min)(this.data)[0];return new i(this.type,[e],[])}const[r,n,s]=T((e,t)=>Math.min(e,t),this,e,t,1/0);return new i(r,n,s)}max(e=null,t=!1){if(null===e){const e=(0,o.max)(this.data)[0];return new i(this.type,[e],[])}const[r,n,s]=T((e,t)=>Math.max(e,t),this,e,t,-1/0);return new i(r,n,s)}argmin(e=null,t=!1){if(null!==e)throw new Error("`dim !== null` not yet implemented.");const r=(0,o.min)(this.data)[1];return new i("int64",[BigInt(r)],[])}argmax(e=null,t=!1){if(null!==e)throw new Error("`dim !== null` not yet implemented.");const r=(0,o.max)(this.data)[1];return new i("int64",[BigInt(r)],[])}to(e){if(this.type===e)return this;if(!a.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);let t;const r=["int64","uint64"].includes(this.type),o=["int64","uint64"].includes(e);return r&&!o?t=Number:!r&&o&&(t=BigInt),new i(e,a[e].from(this.data,t),this.dims)}}function l(e,t){const[r,n]=(0,o.permute_data)(e.data,e.dims,t);return new i(e.type,r,n)}function c(e,[t,r],n="bilinear",s=!1){const a=e.dims.at(-3)??1,l=e.dims.at(-2),c=e.dims.at(-1);let _=(0,o.interpolate_data)(e.data,[a,l,c],[t,r],n,s);return new i(e.type,_,[a,t,r])}async function _(e,{size:t=null,mode:r="bilinear"}={}){if(4!==e.dims.length)throw new Error("`interpolate_4d` currently only supports 4D input.");if(!t)throw new Error("`interpolate_4d` requires a `size` argument.");let o,n;if(2===t.length)o=[...e.dims.slice(0,2),...t];else if(3===t.length)o=[e.dims[0],...t];else{if(4!==t.length)throw new Error("`size` must be of length 2, 3, or 4.");o=t}if("nearest"===r)n=await s.TensorOpRegistry.nearest_interpolate_4d;else if("bilinear"===r)n=await s.TensorOpRegistry.bilinear_interpolate_4d;else{if("bicubic"!==r)throw new Error(`Unsupported mode: ${r}`);n=await s.TensorOpRegistry.bicubic_interpolate_4d}const a=new i("int64",new BigInt64Array(o.map(BigInt)),[o.length]);return await n({x:e,s:a})}async function p(e,t){const r=await s.TensorOpRegistry.matmul;return await r({a:e,b:t})}async function u(e,t){const r=await s.TensorOpRegistry.rfft;return await r({x:e,a:t})}async function d(e,t){const r=await s.TensorOpRegistry.top_k;return t=null==t?e.dims.at(-1):Math.min(t,e.dims.at(-1)),await r({x:e,k:new i("int64",[BigInt(t)],[1])})}const h=e=>new i("int64",e,[e.length]);async function f(e,t,r,o,n){const a=await s.TensorOpRegistry.slice;return await a({x:e,s:h(t),e:h(r),a:h(o),t:h(n??new Array(o.length).fill(1))})}function m(e,t){const r=e.data,o=t.data,n=[e.dims[0],e.dims[2]],s=new r.constructor(n[0]*n[1]),[a,l,c]=e.dims;let _=0;for(let e=0;e<a;++e){const t=e*c*l;for(let n=0;n<c;++n){let a=0,i=0;const p=e*l,u=t+n;for(let e=0;e<l;++e){const t=Number(o[p+e]);i+=t,a+=r[u+e*c]*t}const d=a/i;s[_++]=d}}return new i(e.type,s,n)}function g(e,t,{eps:r=1e-5}={}){if(2!==e.dims.length)throw new Error("`layer_norm` currently only supports 2D input.");const[o,n]=e.dims;if(1!==t.length&&t[0]!==n)throw new Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");const[s,a]=k(e,1,0,!0),l=s.data,c=a.data,_=e.data,p=new _.constructor(_.length);for(let e=0;e<o;++e){const t=e*n;for(let o=0;o<n;++o){const n=t+o;p[n]=(_[n]-c[e])/(l[e]+r)}}return new i(e.type,p,e.dims)}function b(e,t){return e=e.slice(),null===t?e=e.filter(e=>1!==e):"number"==typeof t?1===e[t]&&e.splice(t,1):Array.isArray(t)&&(e=e.filter((e,r)=>1!==e||!t.includes(r))),e}function w(e,t){return t=x(t,e.length+1),(e=e.slice()).splice(t,0,1),e}function x(e,t,r=null,o=!0){if(e<-t||e>=t){if(o)throw new Error(`IndexError: index ${e} is out of bounds for dimension${null===r?"":" "+r} with size ${t}`);return e<-t?0:t}return e<0&&(e=(e%t+t)%t),e}function y(e,t=0){t=x(t,e[0].dims.length);const r=e[0].dims.slice();r[t]=e.reduce((e,r)=>e+r.dims[t],0);const o=r.reduce((e,t)=>e*t,1),n=new e[0].data.constructor(o),s=e[0].type;if(0===t){let t=0;for(const r of e){const e=r.data;n.set(e,t),t+=e.length}}else{let o=0;for(let s=0;s<e.length;++s){const{data:a,dims:i}=e[s];for(let e=0;e<a.length;++e){let s=0;for(let n=i.length-1,a=e,l=1;n>=0;--n){const e=i[n];let c=a%e;n===t&&(c+=o),s+=c*l,l*=r[n],a=Math.floor(a/e)}n[s]=a[e]}o+=i[t]}}return new i(s,n,r)}function M(e,t=0){return y(e.map(e=>e.unsqueeze(t)),t)}function T(e,t,r=null,o=!1,n=null){const s=t.data,a=t.dims;r=x(r,a.length);const i=a.slice();i[r]=1;const l=new s.constructor(s.length/a[r]);null!==n&&l.fill(n);for(let t=0;t<s.length;++t){let o=0;for(let e=a.length-1,n=t,s=1;e>=0;--e){const t=a[e];if(e!==r){o+=n%t*s,s*=i[e]}n=Math.floor(n/t)}l[o]=e(l[o],s[t],t,o)}return o||i.splice(r,1),[t.type,l,i]}function k(e,t=null,r=1,o=!1){const n=e.data,s=e.dims;if(null===t){const t=n.reduce((e,t)=>e+t,0)/n.length,o=Math.sqrt(n.reduce((e,r)=>e+(r-t)**2,0)/(n.length-r)),s=new i(e.type,[t],[]);return[new i(e.type,[o],[]),s]}const a=v(e,t=x(t,s.length),o),l=a.data,[c,_,p]=T((e,t,r,o)=>e+(t-l[o])**2,e,t,o);for(let e=0;e<_.length;++e)_[e]=Math.sqrt(_[e]/(s[t]-r));return[new i(c,_,p),a]}function v(e,t=null,r=!1){const o=e.dims,n=e.data;if(null===t){const t=n.reduce((e,t)=>e+t,0);return new i(e.type,[t/n.length],[])}t=x(t,o.length);const[s,a,l]=T((e,t)=>e+t,e,t,r);if(1!==o[t])for(let e=0;e<a.length;++e)a[e]/=o[t];return new i(s,a,l)}function P(e,t,r,o){const n=e.reduce((e,t)=>e*t,1);return new i(r,new o(n).fill(t),e)}function S(e,t){let r,o;if("number"==typeof t)r="float32",o=Float32Array;else if("bigint"==typeof t)r="int64",o=BigInt64Array;else{if("boolean"!=typeof t)throw new Error("Unsupported data type: "+typeof t);r="bool",o=Uint8Array}return P(e,t,r,o)}function F(e,t){return S(e.dims,t)}function C(e){return P(e,1n,"int64",BigInt64Array)}function E(e){return C(e.dims)}function A(e){return P(e,0n,"int64",BigInt64Array)}function I(e){return A(e.dims)}function O(e){const t=e.reduce((e,t)=>e*t,1);return new i("float32",Float32Array.from({length:t},()=>Math.random()),e)}function L(e,t){if(2!==e.dims.length)throw new Error("The tensor must have 2 dimensions");if(e.dims.at(-1)%8!=0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(t))throw new Error("The precision must be either 'binary' or 'ubinary'");const r="binary"===t,o=r?"int8":"uint8",n=r?Int8Array:Uint8Array,s=e.data,a=new n(s.length/8);for(let e=0;e<s.length;++e){const t=s[e]>0?1:0,o=Math.floor(e/8),n=e%8;a[o]|=t<<7-n,r&&0===n&&(a[o]-=128)}return new i(o,a,[e.dims[0],e.dims[1]/8])}},"./src/utils/video.js":(e,t,r)=>{r.r(t),r.d(t,{RawVideo:()=>a,RawVideoFrame:()=>s,load_video:()=>i});var o=r("./src/utils/image.js"),n=r("./src/env.js");class s{constructor(e,t){this.image=e,this.timestamp=t}}class a{constructor(e,t){e.length>0&&e[0]instanceof o.RawImage&&(e=e.map((r,o)=>new s(r,(o+1)/(e.length+1)*t))),this.frames=e,this.duration=t}get width(){return this.frames[0].image.width}get height(){return this.frames[0].image.height}get fps(){return this.frames.length/this.duration}}async function i(e,{num_frames:t=null,fps:r=null}={}){if(!n.apis.IS_BROWSER_ENV)throw new Error("`load_video` is currently only supported in browser environments.");if(null==t&&null==r)throw new Error("Either num_frames or fps must be provided.");const i=[],l=document.createElement("video");if(l.crossOrigin="anonymous",l.muted=!0,"string"==typeof e)l.src=e;else if(e instanceof Blob)l.src=URL.createObjectURL(e);else{if(!(e instanceof HTMLVideoElement))throw new Error("Invalid URL or video element provided.");l.src=e.src}if(await new Promise(e=>l.onloadedmetadata=e),l.seekable.start(0)===l.seekable.end(0)){const e=await fetch(l.src),t=await e.blob();l.src=URL.createObjectURL(t),await new Promise(e=>l.onloadedmetadata=e)}const c=l.duration;let _,p;null!=t?(_=t,p=1===t?0:c/(t-1)):(p=1/r,_=Math.floor(c/p));let u=[];for(let e=0;e<_;++e)u.push(1===t?c/2:e*p);const d=document.createElement("canvas");d.width=l.videoWidth,d.height=l.videoHeight;const h=d.getContext("2d",{willReadFrequently:!0});for(const e of u){l.currentTime=e,await new Promise(e=>{l.onseeked=e}),h.drawImage(l,0,0,d.width,d.height);const t=h.getImageData(0,0,d.width,d.height),r=new o.RawImage(t.data,d.width,d.height,4),n=new s(r,e);i.push(n)}return l.remove(),new a(i,c)}},"?2b25":()=>{},"?2ce3":()=>{},"?383f":()=>{},"?5af5":()=>{},"?7992":()=>{},"?db59":()=>{},"?fa4b":()=>{}},__webpack_module_cache__={},leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);__webpack_require__.r(r);var o={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var n=2&t&&e;("object"==typeof n||"function"==typeof n)&&!~leafPrototypes.indexOf(n);n=getProto(n))Object.getOwnPropertyNames(n).forEach(t=>o[t]=()=>e[t]);return o.default=()=>e,__webpack_require__.d(r,o),r},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ASTFeatureExtractor:()=>p.ASTFeatureExtractor,ASTForAudioClassification:()=>r.ASTForAudioClassification,ASTModel:()=>r.ASTModel,ASTPreTrainedModel:()=>r.ASTPreTrainedModel,AlbertForMaskedLM:()=>r.AlbertForMaskedLM,AlbertForQuestionAnswering:()=>r.AlbertForQuestionAnswering,AlbertForSequenceClassification:()=>r.AlbertForSequenceClassification,AlbertModel:()=>r.AlbertModel,AlbertPreTrainedModel:()=>r.AlbertPreTrainedModel,AlbertTokenizer:()=>o.AlbertTokenizer,ArceeForCausalLM:()=>r.ArceeForCausalLM,ArceeModel:()=>r.ArceeModel,ArceePreTrainedModel:()=>r.ArceePreTrainedModel,AudioClassificationPipeline:()=>t.AudioClassificationPipeline,AutoConfig:()=>n.AutoConfig,AutoFeatureExtractor:()=>u.AutoFeatureExtractor,AutoImageProcessor:()=>f.AutoImageProcessor,AutoModel:()=>r.AutoModel,AutoModelForAudioClassification:()=>r.AutoModelForAudioClassification,AutoModelForAudioFrameClassification:()=>r.AutoModelForAudioFrameClassification,AutoModelForAudioTextToText:()=>r.AutoModelForAudioTextToText,AutoModelForCTC:()=>r.AutoModelForCTC,AutoModelForCausalLM:()=>r.AutoModelForCausalLM,AutoModelForDepthEstimation:()=>r.AutoModelForDepthEstimation,AutoModelForDocumentQuestionAnswering:()=>r.AutoModelForDocumentQuestionAnswering,AutoModelForImageClassification:()=>r.AutoModelForImageClassification,AutoModelForImageFeatureExtraction:()=>r.AutoModelForImageFeatureExtraction,AutoModelForImageMatting:()=>r.AutoModelForImageMatting,AutoModelForImageSegmentation:()=>r.AutoModelForImageSegmentation,AutoModelForImageTextToText:()=>r.AutoModelForImageTextToText,AutoModelForImageToImage:()=>r.AutoModelForImageToImage,AutoModelForMaskGeneration:()=>r.AutoModelForMaskGeneration,AutoModelForMaskedLM:()=>r.AutoModelForMaskedLM,AutoModelForNormalEstimation:()=>r.AutoModelForNormalEstimation,AutoModelForObjectDetection:()=>r.AutoModelForObjectDetection,AutoModelForPoseEstimation:()=>r.AutoModelForPoseEstimation,AutoModelForQuestionAnswering:()=>r.AutoModelForQuestionAnswering,AutoModelForSemanticSegmentation:()=>r.AutoModelForSemanticSegmentation,AutoModelForSeq2SeqLM:()=>r.AutoModelForSeq2SeqLM,AutoModelForSequenceClassification:()=>r.AutoModelForSequenceClassification,AutoModelForSpeechSeq2Seq:()=>r.AutoModelForSpeechSeq2Seq,AutoModelForTextToSpectrogram:()=>r.AutoModelForTextToSpectrogram,AutoModelForTextToWaveform:()=>r.AutoModelForTextToWaveform,AutoModelForTokenClassification:()=>r.AutoModelForTokenClassification,AutoModelForUniversalSegmentation:()=>r.AutoModelForUniversalSegmentation,AutoModelForVision2Seq:()=>r.AutoModelForVision2Seq,AutoModelForXVector:()=>r.AutoModelForXVector,AutoModelForZeroShotObjectDetection:()=>r.AutoModelForZeroShotObjectDetection,AutoProcessor:()=>b.AutoProcessor,AutoTokenizer:()=>o.AutoTokenizer,AutomaticSpeechRecognitionPipeline:()=>t.AutomaticSpeechRecognitionPipeline,BackgroundRemovalPipeline:()=>t.BackgroundRemovalPipeline,BartForConditionalGeneration:()=>r.BartForConditionalGeneration,BartForSequenceClassification:()=>r.BartForSequenceClassification,BartModel:()=>r.BartModel,BartPretrainedModel:()=>r.BartPretrainedModel,BartTokenizer:()=>o.BartTokenizer,BaseModelOutput:()=>r.BaseModelOutput,BaseStreamer:()=>w.BaseStreamer,BeitFeatureExtractor:()=>h.BeitFeatureExtractor,BeitForImageClassification:()=>r.BeitForImageClassification,BeitModel:()=>r.BeitModel,BeitPreTrainedModel:()=>r.BeitPreTrainedModel,BertForMaskedLM:()=>r.BertForMaskedLM,BertForQuestionAnswering:()=>r.BertForQuestionAnswering,BertForSequenceClassification:()=>r.BertForSequenceClassification,BertForTokenClassification:()=>r.BertForTokenClassification,BertModel:()=>r.BertModel,BertPreTrainedModel:()=>r.BertPreTrainedModel,BertTokenizer:()=>o.BertTokenizer,BitImageProcessor:()=>h.BitImageProcessor,BlenderbotForConditionalGeneration:()=>r.BlenderbotForConditionalGeneration,BlenderbotModel:()=>r.BlenderbotModel,BlenderbotPreTrainedModel:()=>r.BlenderbotPreTrainedModel,BlenderbotSmallForConditionalGeneration:()=>r.BlenderbotSmallForConditionalGeneration,BlenderbotSmallModel:()=>r.BlenderbotSmallModel,BlenderbotSmallPreTrainedModel:()=>r.BlenderbotSmallPreTrainedModel,BlenderbotSmallTokenizer:()=>o.BlenderbotSmallTokenizer,BlenderbotTokenizer:()=>o.BlenderbotTokenizer,BloomForCausalLM:()=>r.BloomForCausalLM,BloomModel:()=>r.BloomModel,BloomPreTrainedModel:()=>r.BloomPreTrainedModel,BloomTokenizer:()=>o.BloomTokenizer,CLIPFeatureExtractor:()=>h.CLIPFeatureExtractor,CLIPImageProcessor:()=>h.CLIPImageProcessor,CLIPModel:()=>r.CLIPModel,CLIPPreTrainedModel:()=>r.CLIPPreTrainedModel,CLIPSegForImageSegmentation:()=>r.CLIPSegForImageSegmentation,CLIPSegModel:()=>r.CLIPSegModel,CLIPSegPreTrainedModel:()=>r.CLIPSegPreTrainedModel,CLIPTextModel:()=>r.CLIPTextModel,CLIPTextModelWithProjection:()=>r.CLIPTextModelWithProjection,CLIPTokenizer:()=>o.CLIPTokenizer,CLIPVisionModel:()=>r.CLIPVisionModel,CLIPVisionModelWithProjection:()=>r.CLIPVisionModelWithProjection,CamembertForMaskedLM:()=>r.CamembertForMaskedLM,CamembertForQuestionAnswering:()=>r.CamembertForQuestionAnswering,CamembertForSequenceClassification:()=>r.CamembertForSequenceClassification,CamembertForTokenClassification:()=>r.CamembertForTokenClassification,CamembertModel:()=>r.CamembertModel,CamembertPreTrainedModel:()=>r.CamembertPreTrainedModel,CamembertTokenizer:()=>o.CamembertTokenizer,CausalLMOutput:()=>r.CausalLMOutput,CausalLMOutputWithPast:()=>r.CausalLMOutputWithPast,ChineseCLIPFeatureExtractor:()=>h.ChineseCLIPFeatureExtractor,ChineseCLIPModel:()=>r.ChineseCLIPModel,ChineseCLIPPreTrainedModel:()=>r.ChineseCLIPPreTrainedModel,ClapAudioModelWithProjection:()=>r.ClapAudioModelWithProjection,ClapFeatureExtractor:()=>p.ClapFeatureExtractor,ClapModel:()=>r.ClapModel,ClapPreTrainedModel:()=>r.ClapPreTrainedModel,ClapTextModelWithProjection:()=>r.ClapTextModelWithProjection,ClassifierFreeGuidanceLogitsProcessor:()=>y.ClassifierFreeGuidanceLogitsProcessor,CodeGenForCausalLM:()=>r.CodeGenForCausalLM,CodeGenModel:()=>r.CodeGenModel,CodeGenPreTrainedModel:()=>r.CodeGenPreTrainedModel,CodeGenTokenizer:()=>o.CodeGenTokenizer,CodeLlamaTokenizer:()=>o.CodeLlamaTokenizer,CohereForCausalLM:()=>r.CohereForCausalLM,CohereModel:()=>r.CohereModel,CoherePreTrainedModel:()=>r.CoherePreTrainedModel,CohereTokenizer:()=>o.CohereTokenizer,ConvBertForMaskedLM:()=>r.ConvBertForMaskedLM,ConvBertForQuestionAnswering:()=>r.ConvBertForQuestionAnswering,ConvBertForSequenceClassification:()=>r.ConvBertForSequenceClassification,ConvBertForTokenClassification:()=>r.ConvBertForTokenClassification,ConvBertModel:()=>r.ConvBertModel,ConvBertPreTrainedModel:()=>r.ConvBertPreTrainedModel,ConvBertTokenizer:()=>o.ConvBertTokenizer,ConvNextFeatureExtractor:()=>h.ConvNextFeatureExtractor,ConvNextForImageClassification:()=>r.ConvNextForImageClassification,ConvNextImageProcessor:()=>h.ConvNextImageProcessor,ConvNextModel:()=>r.ConvNextModel,ConvNextPreTrainedModel:()=>r.ConvNextPreTrainedModel,ConvNextV2ForImageClassification:()=>r.ConvNextV2ForImageClassification,ConvNextV2Model:()=>r.ConvNextV2Model,ConvNextV2PreTrainedModel:()=>r.ConvNextV2PreTrainedModel,DFineForObjectDetection:()=>r.DFineForObjectDetection,DFineModel:()=>r.DFineModel,DFinePreTrainedModel:()=>r.DFinePreTrainedModel,DINOv3ConvNextModel:()=>r.DINOv3ConvNextModel,DINOv3ConvNextPreTrainedModel:()=>r.DINOv3ConvNextPreTrainedModel,DINOv3ViTImageProcessor:()=>h.DINOv3ViTImageProcessor,DINOv3ViTModel:()=>r.DINOv3ViTModel,DINOv3ViTPreTrainedModel:()=>r.DINOv3ViTPreTrainedModel,DPTFeatureExtractor:()=>h.DPTFeatureExtractor,DPTForDepthEstimation:()=>r.DPTForDepthEstimation,DPTImageProcessor:()=>h.DPTImageProcessor,DPTModel:()=>r.DPTModel,DPTPreTrainedModel:()=>r.DPTPreTrainedModel,DacDecoderModel:()=>r.DacDecoderModel,DacDecoderOutput:()=>r.DacDecoderOutput,DacEncoderModel:()=>r.DacEncoderModel,DacEncoderOutput:()=>r.DacEncoderOutput,DacFeatureExtractor:()=>p.DacFeatureExtractor,DacModel:()=>r.DacModel,DacPreTrainedModel:()=>r.DacPreTrainedModel,DataTypeMap:()=>l.DataTypeMap,DebertaForMaskedLM:()=>r.DebertaForMaskedLM,DebertaForQuestionAnswering:()=>r.DebertaForQuestionAnswering,DebertaForSequenceClassification:()=>r.DebertaForSequenceClassification,DebertaForTokenClassification:()=>r.DebertaForTokenClassification,DebertaModel:()=>r.DebertaModel,DebertaPreTrainedModel:()=>r.DebertaPreTrainedModel,DebertaTokenizer:()=>o.DebertaTokenizer,DebertaV2ForMaskedLM:()=>r.DebertaV2ForMaskedLM,DebertaV2ForQuestionAnswering:()=>r.DebertaV2ForQuestionAnswering,DebertaV2ForSequenceClassification:()=>r.DebertaV2ForSequenceClassification,DebertaV2ForTokenClassification:()=>r.DebertaV2ForTokenClassification,DebertaV2Model:()=>r.DebertaV2Model,DebertaV2PreTrainedModel:()=>r.DebertaV2PreTrainedModel,DebertaV2Tokenizer:()=>o.DebertaV2Tokenizer,DecisionTransformerModel:()=>r.DecisionTransformerModel,DecisionTransformerPreTrainedModel:()=>r.DecisionTransformerPreTrainedModel,DeiTFeatureExtractor:()=>h.DeiTFeatureExtractor,DeiTForImageClassification:()=>r.DeiTForImageClassification,DeiTImageProcessor:()=>h.DeiTImageProcessor,DeiTModel:()=>r.DeiTModel,DeiTPreTrainedModel:()=>r.DeiTPreTrainedModel,DepthAnythingForDepthEstimation:()=>r.DepthAnythingForDepthEstimation,DepthAnythingPreTrainedModel:()=>r.DepthAnythingPreTrainedModel,DepthEstimationPipeline:()=>t.DepthEstimationPipeline,DepthProForDepthEstimation:()=>r.DepthProForDepthEstimation,DepthProPreTrainedModel:()=>r.DepthProPreTrainedModel,DetrFeatureExtractor:()=>h.DetrFeatureExtractor,DetrForObjectDetection:()=>r.DetrForObjectDetection,DetrForSegmentation:()=>r.DetrForSegmentation,DetrImageProcessor:()=>h.DetrImageProcessor,DetrModel:()=>r.DetrModel,DetrObjectDetectionOutput:()=>r.DetrObjectDetectionOutput,DetrPreTrainedModel:()=>r.DetrPreTrainedModel,DetrSegmentationOutput:()=>r.DetrSegmentationOutput,Dinov2ForImageClassification:()=>r.Dinov2ForImageClassification,Dinov2Model:()=>r.Dinov2Model,Dinov2PreTrainedModel:()=>r.Dinov2PreTrainedModel,Dinov2WithRegistersForImageClassification:()=>r.Dinov2WithRegistersForImageClassification,Dinov2WithRegistersModel:()=>r.Dinov2WithRegistersModel,Dinov2WithRegistersPreTrainedModel:()=>r.Dinov2WithRegistersPreTrainedModel,DistilBertForMaskedLM:()=>r.DistilBertForMaskedLM,DistilBertForQuestionAnswering:()=>r.DistilBertForQuestionAnswering,DistilBertForSequenceClassification:()=>r.DistilBertForSequenceClassification,DistilBertForTokenClassification:()=>r.DistilBertForTokenClassification,DistilBertModel:()=>r.DistilBertModel,DistilBertPreTrainedModel:()=>r.DistilBertPreTrainedModel,DistilBertTokenizer:()=>o.DistilBertTokenizer,DocumentQuestionAnsweringPipeline:()=>t.DocumentQuestionAnsweringPipeline,DonutFeatureExtractor:()=>h.DonutFeatureExtractor,DonutImageProcessor:()=>h.DonutImageProcessor,DonutSwinModel:()=>r.DonutSwinModel,DonutSwinPreTrainedModel:()=>r.DonutSwinPreTrainedModel,EfficientNetForImageClassification:()=>r.EfficientNetForImageClassification,EfficientNetImageProcessor:()=>h.EfficientNetImageProcessor,EfficientNetModel:()=>r.EfficientNetModel,EfficientNetPreTrainedModel:()=>r.EfficientNetPreTrainedModel,ElectraForMaskedLM:()=>r.ElectraForMaskedLM,ElectraForQuestionAnswering:()=>r.ElectraForQuestionAnswering,ElectraForSequenceClassification:()=>r.ElectraForSequenceClassification,ElectraForTokenClassification:()=>r.ElectraForTokenClassification,ElectraModel:()=>r.ElectraModel,ElectraPreTrainedModel:()=>r.ElectraPreTrainedModel,ElectraTokenizer:()=>o.ElectraTokenizer,EncodecFeatureExtractor:()=>p.EncodecFeatureExtractor,EosTokenCriteria:()=>x.EosTokenCriteria,Ernie4_5_ForCausalLM:()=>r.Ernie4_5_ForCausalLM,Ernie4_5_Model:()=>r.Ernie4_5_Model,Ernie4_5_PretrainedModel:()=>r.Ernie4_5_PretrainedModel,Ernie4_5_Tokenizer:()=>o.Ernie4_5_Tokenizer,EsmForMaskedLM:()=>r.EsmForMaskedLM,EsmForSequenceClassification:()=>r.EsmForSequenceClassification,EsmForTokenClassification:()=>r.EsmForTokenClassification,EsmModel:()=>r.EsmModel,EsmPreTrainedModel:()=>r.EsmPreTrainedModel,EsmTokenizer:()=>o.EsmTokenizer,ExaoneForCausalLM:()=>r.ExaoneForCausalLM,ExaoneModel:()=>r.ExaoneModel,ExaonePreTrainedModel:()=>r.ExaonePreTrainedModel,FFT:()=>c.FFT,FalconForCausalLM:()=>r.FalconForCausalLM,FalconModel:()=>r.FalconModel,FalconPreTrainedModel:()=>r.FalconPreTrainedModel,FalconTokenizer:()=>o.FalconTokenizer,FastViTForImageClassification:()=>r.FastViTForImageClassification,FastViTModel:()=>r.FastViTModel,FastViTPreTrainedModel:()=>r.FastViTPreTrainedModel,FeatureExtractionPipeline:()=>t.FeatureExtractionPipeline,FeatureExtractor:()=>_.FeatureExtractor,FillMaskPipeline:()=>t.FillMaskPipeline,Florence2ForConditionalGeneration:()=>r.Florence2ForConditionalGeneration,Florence2PreTrainedModel:()=>r.Florence2PreTrainedModel,Florence2Processor:()=>g.Florence2Processor,ForcedBOSTokenLogitsProcessor:()=>y.ForcedBOSTokenLogitsProcessor,ForcedEOSTokenLogitsProcessor:()=>y.ForcedEOSTokenLogitsProcessor,GLPNFeatureExtractor:()=>h.GLPNFeatureExtractor,GLPNForDepthEstimation:()=>r.GLPNForDepthEstimation,GLPNModel:()=>r.GLPNModel,GLPNPreTrainedModel:()=>r.GLPNPreTrainedModel,GPT2LMHeadModel:()=>r.GPT2LMHeadModel,GPT2Model:()=>r.GPT2Model,GPT2PreTrainedModel:()=>r.GPT2PreTrainedModel,GPT2Tokenizer:()=>o.GPT2Tokenizer,GPTBigCodeForCausalLM:()=>r.GPTBigCodeForCausalLM,GPTBigCodeModel:()=>r.GPTBigCodeModel,GPTBigCodePreTrainedModel:()=>r.GPTBigCodePreTrainedModel,GPTJForCausalLM:()=>r.GPTJForCausalLM,GPTJModel:()=>r.GPTJModel,GPTJPreTrainedModel:()=>r.GPTJPreTrainedModel,GPTNeoForCausalLM:()=>r.GPTNeoForCausalLM,GPTNeoModel:()=>r.GPTNeoModel,GPTNeoPreTrainedModel:()=>r.GPTNeoPreTrainedModel,GPTNeoXForCausalLM:()=>r.GPTNeoXForCausalLM,GPTNeoXModel:()=>r.GPTNeoXModel,GPTNeoXPreTrainedModel:()=>r.GPTNeoXPreTrainedModel,GPTNeoXTokenizer:()=>o.GPTNeoXTokenizer,Gemma2ForCausalLM:()=>r.Gemma2ForCausalLM,Gemma2Model:()=>r.Gemma2Model,Gemma2PreTrainedModel:()=>r.Gemma2PreTrainedModel,Gemma3ForCausalLM:()=>r.Gemma3ForCausalLM,Gemma3Model:()=>r.Gemma3Model,Gemma3PreTrainedModel:()=>r.Gemma3PreTrainedModel,Gemma3nAudioFeatureExtractor:()=>p.Gemma3nAudioFeatureExtractor,Gemma3nForConditionalGeneration:()=>r.Gemma3nForConditionalGeneration,Gemma3nPreTrainedModel:()=>r.Gemma3nPreTrainedModel,Gemma3nProcessor:()=>g.Gemma3nProcessor,GemmaForCausalLM:()=>r.GemmaForCausalLM,GemmaModel:()=>r.GemmaModel,GemmaPreTrainedModel:()=>r.GemmaPreTrainedModel,GemmaTokenizer:()=>o.GemmaTokenizer,GlmForCausalLM:()=>r.GlmForCausalLM,GlmModel:()=>r.GlmModel,GlmPreTrainedModel:()=>r.GlmPreTrainedModel,GraniteForCausalLM:()=>r.GraniteForCausalLM,GraniteModel:()=>r.GraniteModel,GraniteMoeHybridForCausalLM:()=>r.GraniteMoeHybridForCausalLM,GraniteMoeHybridModel:()=>r.GraniteMoeHybridModel,GraniteMoeHybridPreTrainedModel:()=>r.GraniteMoeHybridPreTrainedModel,GranitePreTrainedModel:()=>r.GranitePreTrainedModel,Grok1Tokenizer:()=>o.Grok1Tokenizer,GroundingDinoForObjectDetection:()=>r.GroundingDinoForObjectDetection,GroundingDinoImageProcessor:()=>h.GroundingDinoImageProcessor,GroundingDinoPreTrainedModel:()=>r.GroundingDinoPreTrainedModel,GroundingDinoProcessor:()=>g.GroundingDinoProcessor,GroupViTModel:()=>r.GroupViTModel,GroupViTPreTrainedModel:()=>r.GroupViTPreTrainedModel,HeliumForCausalLM:()=>r.HeliumForCausalLM,HeliumModel:()=>r.HeliumModel,HeliumPreTrainedModel:()=>r.HeliumPreTrainedModel,HerbertTokenizer:()=>o.HerbertTokenizer,HieraForImageClassification:()=>r.HieraForImageClassification,HieraModel:()=>r.HieraModel,HieraPreTrainedModel:()=>r.HieraPreTrainedModel,HubertForCTC:()=>r.HubertForCTC,HubertForSequenceClassification:()=>r.HubertForSequenceClassification,HubertModel:()=>r.HubertModel,HubertPreTrainedModel:()=>r.HubertPreTrainedModel,IJepaForImageClassification:()=>r.IJepaForImageClassification,IJepaModel:()=>r.IJepaModel,IJepaPreTrainedModel:()=>r.IJepaPreTrainedModel,Idefics3ForConditionalGeneration:()=>r.Idefics3ForConditionalGeneration,Idefics3ImageProcessor:()=>h.Idefics3ImageProcessor,Idefics3PreTrainedModel:()=>r.Idefics3PreTrainedModel,Idefics3Processor:()=>g.Idefics3Processor,ImageClassificationPipeline:()=>t.ImageClassificationPipeline,ImageFeatureExtractionPipeline:()=>t.ImageFeatureExtractionPipeline,ImageFeatureExtractor:()=>p.ImageFeatureExtractor,ImageMattingOutput:()=>r.ImageMattingOutput,ImageProcessor:()=>d.ImageProcessor,ImageSegmentationPipeline:()=>t.ImageSegmentationPipeline,ImageToImagePipeline:()=>t.ImageToImagePipeline,ImageToTextPipeline:()=>t.ImageToTextPipeline,InterruptableStoppingCriteria:()=>x.InterruptableStoppingCriteria,JAISLMHeadModel:()=>r.JAISLMHeadModel,JAISModel:()=>r.JAISModel,JAISPreTrainedModel:()=>r.JAISPreTrainedModel,JinaCLIPImageProcessor:()=>h.JinaCLIPImageProcessor,JinaCLIPModel:()=>r.JinaCLIPModel,JinaCLIPPreTrainedModel:()=>r.JinaCLIPPreTrainedModel,JinaCLIPProcessor:()=>g.JinaCLIPProcessor,JinaCLIPTextModel:()=>r.JinaCLIPTextModel,JinaCLIPVisionModel:()=>r.JinaCLIPVisionModel,Lfm2ForCausalLM:()=>r.Lfm2ForCausalLM,Lfm2Model:()=>r.Lfm2Model,Lfm2PreTrainedModel:()=>r.Lfm2PreTrainedModel,LiteWhisperForConditionalGeneration:()=>r.LiteWhisperForConditionalGeneration,Llama4ForCausalLM:()=>r.Llama4ForCausalLM,Llama4PreTrainedModel:()=>r.Llama4PreTrainedModel,LlamaForCausalLM:()=>r.LlamaForCausalLM,LlamaModel:()=>r.LlamaModel,LlamaPreTrainedModel:()=>r.LlamaPreTrainedModel,LlamaTokenizer:()=>o.LlamaTokenizer,LlavaForConditionalGeneration:()=>r.LlavaForConditionalGeneration,LlavaOnevisionForConditionalGeneration:()=>r.LlavaOnevisionForConditionalGeneration,LlavaOnevisionImageProcessor:()=>h.LlavaOnevisionImageProcessor,LlavaPreTrainedModel:()=>r.LlavaPreTrainedModel,LlavaProcessor:()=>g.LlavaProcessor,LlavaQwen2ForCausalLM:()=>r.LlavaQwen2ForCausalLM,LogitsProcessor:()=>y.LogitsProcessor,LogitsProcessorList:()=>y.LogitsProcessorList,LogitsWarper:()=>y.LogitsWarper,LongT5ForConditionalGeneration:()=>r.LongT5ForConditionalGeneration,LongT5Model:()=>r.LongT5Model,LongT5PreTrainedModel:()=>r.LongT5PreTrainedModel,M2M100ForConditionalGeneration:()=>r.M2M100ForConditionalGeneration,M2M100Model:()=>r.M2M100Model,M2M100PreTrainedModel:()=>r.M2M100PreTrainedModel,M2M100Tokenizer:()=>o.M2M100Tokenizer,MBart50Tokenizer:()=>o.MBart50Tokenizer,MBartForCausalLM:()=>r.MBartForCausalLM,MBartForConditionalGeneration:()=>r.MBartForConditionalGeneration,MBartForSequenceClassification:()=>r.MBartForSequenceClassification,MBartModel:()=>r.MBartModel,MBartPreTrainedModel:()=>r.MBartPreTrainedModel,MBartTokenizer:()=>o.MBartTokenizer,MPNetForMaskedLM:()=>r.MPNetForMaskedLM,MPNetForQuestionAnswering:()=>r.MPNetForQuestionAnswering,MPNetForSequenceClassification:()=>r.MPNetForSequenceClassification,MPNetForTokenClassification:()=>r.MPNetForTokenClassification,MPNetModel:()=>r.MPNetModel,MPNetPreTrainedModel:()=>r.MPNetPreTrainedModel,MPNetTokenizer:()=>o.MPNetTokenizer,MT5ForConditionalGeneration:()=>r.MT5ForConditionalGeneration,MT5Model:()=>r.MT5Model,MT5PreTrainedModel:()=>r.MT5PreTrainedModel,MarianMTModel:()=>r.MarianMTModel,MarianModel:()=>r.MarianModel,MarianPreTrainedModel:()=>r.MarianPreTrainedModel,MarianTokenizer:()=>o.MarianTokenizer,Mask2FormerImageProcessor:()=>h.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>h.MaskFormerFeatureExtractor,MaskFormerForInstanceSegmentation:()=>r.MaskFormerForInstanceSegmentation,MaskFormerImageProcessor:()=>h.MaskFormerImageProcessor,MaskFormerModel:()=>r.MaskFormerModel,MaskFormerPreTrainedModel:()=>r.MaskFormerPreTrainedModel,MaskedLMOutput:()=>r.MaskedLMOutput,MaxLengthCriteria:()=>x.MaxLengthCriteria,Metric3DForDepthEstimation:()=>r.Metric3DForDepthEstimation,Metric3DPreTrainedModel:()=>r.Metric3DPreTrainedModel,Metric3Dv2ForDepthEstimation:()=>r.Metric3Dv2ForDepthEstimation,Metric3Dv2PreTrainedModel:()=>r.Metric3Dv2PreTrainedModel,MgpstrForSceneTextRecognition:()=>r.MgpstrForSceneTextRecognition,MgpstrModelOutput:()=>r.MgpstrModelOutput,MgpstrPreTrainedModel:()=>r.MgpstrPreTrainedModel,MgpstrProcessor:()=>g.MgpstrProcessor,MgpstrTokenizer:()=>o.MgpstrTokenizer,MimiDecoderModel:()=>r.MimiDecoderModel,MimiDecoderOutput:()=>r.MimiDecoderOutput,MimiEncoderModel:()=>r.MimiEncoderModel,MimiEncoderOutput:()=>r.MimiEncoderOutput,MimiModel:()=>r.MimiModel,MimiPreTrainedModel:()=>r.MimiPreTrainedModel,MinLengthLogitsProcessor:()=>y.MinLengthLogitsProcessor,MinNewTokensLengthLogitsProcessor:()=>y.MinNewTokensLengthLogitsProcessor,MistralForCausalLM:()=>r.MistralForCausalLM,MistralModel:()=>r.MistralModel,MistralPreTrainedModel:()=>r.MistralPreTrainedModel,MobileBertForMaskedLM:()=>r.MobileBertForMaskedLM,MobileBertForQuestionAnswering:()=>r.MobileBertForQuestionAnswering,MobileBertForSequenceClassification:()=>r.MobileBertForSequenceClassification,MobileBertModel:()=>r.MobileBertModel,MobileBertPreTrainedModel:()=>r.MobileBertPreTrainedModel,MobileBertTokenizer:()=>o.MobileBertTokenizer,MobileLLMForCausalLM:()=>r.MobileLLMForCausalLM,MobileLLMModel:()=>r.MobileLLMModel,MobileLLMPreTrainedModel:()=>r.MobileLLMPreTrainedModel,MobileNetV1FeatureExtractor:()=>h.MobileNetV1FeatureExtractor,MobileNetV1ForImageClassification:()=>r.MobileNetV1ForImageClassification,MobileNetV1ForSemanticSegmentation:()=>r.MobileNetV1ForSemanticSegmentation,MobileNetV1ImageProcessor:()=>h.MobileNetV1ImageProcessor,MobileNetV1Model:()=>r.MobileNetV1Model,MobileNetV1PreTrainedModel:()=>r.MobileNetV1PreTrainedModel,MobileNetV2FeatureExtractor:()=>h.MobileNetV2FeatureExtractor,MobileNetV2ForImageClassification:()=>r.MobileNetV2ForImageClassification,MobileNetV2ForSemanticSegmentation:()=>r.MobileNetV2ForSemanticSegmentation,MobileNetV2ImageProcessor:()=>h.MobileNetV2ImageProcessor,MobileNetV2Model:()=>r.MobileNetV2Model,MobileNetV2PreTrainedModel:()=>r.MobileNetV2PreTrainedModel,MobileNetV3FeatureExtractor:()=>h.MobileNetV3FeatureExtractor,MobileNetV3ForImageClassification:()=>r.MobileNetV3ForImageClassification,MobileNetV3ForSemanticSegmentation:()=>r.MobileNetV3ForSemanticSegmentation,MobileNetV3ImageProcessor:()=>h.MobileNetV3ImageProcessor,MobileNetV3Model:()=>r.MobileNetV3Model,MobileNetV3PreTrainedModel:()=>r.MobileNetV3PreTrainedModel,MobileNetV4FeatureExtractor:()=>h.MobileNetV4FeatureExtractor,MobileNetV4ForImageClassification:()=>r.MobileNetV4ForImageClassification,MobileNetV4ForSemanticSegmentation:()=>r.MobileNetV4ForSemanticSegmentation,MobileNetV4ImageProcessor:()=>h.MobileNetV4ImageProcessor,MobileNetV4Model:()=>r.MobileNetV4Model,MobileNetV4PreTrainedModel:()=>r.MobileNetV4PreTrainedModel,MobileViTFeatureExtractor:()=>h.MobileViTFeatureExtractor,MobileViTForImageClassification:()=>r.MobileViTForImageClassification,MobileViTImageProcessor:()=>h.MobileViTImageProcessor,MobileViTModel:()=>r.MobileViTModel,MobileViTPreTrainedModel:()=>r.MobileViTPreTrainedModel,MobileViTV2ForImageClassification:()=>r.MobileViTV2ForImageClassification,MobileViTV2Model:()=>r.MobileViTV2Model,MobileViTV2PreTrainedModel:()=>r.MobileViTV2PreTrainedModel,ModelOutput:()=>r.ModelOutput,ModernBertDecoderForCausalLM:()=>r.ModernBertDecoderForCausalLM,ModernBertDecoderModel:()=>r.ModernBertDecoderModel,ModernBertDecoderPreTrainedModel:()=>r.ModernBertDecoderPreTrainedModel,ModernBertForMaskedLM:()=>r.ModernBertForMaskedLM,ModernBertForSequenceClassification:()=>r.ModernBertForSequenceClassification,ModernBertForTokenClassification:()=>r.ModernBertForTokenClassification,ModernBertModel:()=>r.ModernBertModel,ModernBertPreTrainedModel:()=>r.ModernBertPreTrainedModel,Moondream1ForConditionalGeneration:()=>r.Moondream1ForConditionalGeneration,MoonshineFeatureExtractor:()=>p.MoonshineFeatureExtractor,MoonshineForConditionalGeneration:()=>r.MoonshineForConditionalGeneration,MoonshineModel:()=>r.MoonshineModel,MoonshinePreTrainedModel:()=>r.MoonshinePreTrainedModel,MoonshineProcessor:()=>g.MoonshineProcessor,MptForCausalLM:()=>r.MptForCausalLM,MptModel:()=>r.MptModel,MptPreTrainedModel:()=>r.MptPreTrainedModel,MultiModalityCausalLM:()=>r.MultiModalityCausalLM,MultiModalityPreTrainedModel:()=>r.MultiModalityPreTrainedModel,MusicgenForCausalLM:()=>r.MusicgenForCausalLM,MusicgenForConditionalGeneration:()=>r.MusicgenForConditionalGeneration,MusicgenModel:()=>r.MusicgenModel,MusicgenPreTrainedModel:()=>r.MusicgenPreTrainedModel,NeoBertForMaskedLM:()=>r.NeoBertForMaskedLM,NeoBertForQuestionAnswering:()=>r.NeoBertForQuestionAnswering,NeoBertForSequenceClassification:()=>r.NeoBertForSequenceClassification,NeoBertForTokenClassification:()=>r.NeoBertForTokenClassification,NeoBertModel:()=>r.NeoBertModel,NeoBertPreTrainedModel:()=>r.NeoBertPreTrainedModel,NllbTokenizer:()=>o.NllbTokenizer,NoBadWordsLogitsProcessor:()=>y.NoBadWordsLogitsProcessor,NoRepeatNGramLogitsProcessor:()=>y.NoRepeatNGramLogitsProcessor,NomicBertModel:()=>r.NomicBertModel,NomicBertPreTrainedModel:()=>r.NomicBertPreTrainedModel,NougatImageProcessor:()=>h.NougatImageProcessor,NougatTokenizer:()=>o.NougatTokenizer,OPTForCausalLM:()=>r.OPTForCausalLM,OPTModel:()=>r.OPTModel,OPTPreTrainedModel:()=>r.OPTPreTrainedModel,ObjectDetectionPipeline:()=>t.ObjectDetectionPipeline,Olmo2ForCausalLM:()=>r.Olmo2ForCausalLM,Olmo2Model:()=>r.Olmo2Model,Olmo2PreTrainedModel:()=>r.Olmo2PreTrainedModel,OlmoForCausalLM:()=>r.OlmoForCausalLM,OlmoModel:()=>r.OlmoModel,OlmoPreTrainedModel:()=>r.OlmoPreTrainedModel,OpenELMForCausalLM:()=>r.OpenELMForCausalLM,OpenELMModel:()=>r.OpenELMModel,OpenELMPreTrainedModel:()=>r.OpenELMPreTrainedModel,OwlViTFeatureExtractor:()=>h.OwlViTFeatureExtractor,OwlViTForObjectDetection:()=>r.OwlViTForObjectDetection,OwlViTImageProcessor:()=>h.OwlViTImageProcessor,OwlViTModel:()=>r.OwlViTModel,OwlViTPreTrainedModel:()=>r.OwlViTPreTrainedModel,OwlViTProcessor:()=>g.OwlViTProcessor,Owlv2ForObjectDetection:()=>r.Owlv2ForObjectDetection,Owlv2ImageProcessor:()=>h.Owlv2ImageProcessor,Owlv2Model:()=>r.Owlv2Model,Owlv2PreTrainedModel:()=>r.Owlv2PreTrainedModel,PaliGemmaForConditionalGeneration:()=>r.PaliGemmaForConditionalGeneration,PaliGemmaPreTrainedModel:()=>r.PaliGemmaPreTrainedModel,PaliGemmaProcessor:()=>g.PaliGemmaProcessor,PatchTSMixerForPrediction:()=>r.PatchTSMixerForPrediction,PatchTSMixerModel:()=>r.PatchTSMixerModel,PatchTSMixerPreTrainedModel:()=>r.PatchTSMixerPreTrainedModel,PatchTSTForPrediction:()=>r.PatchTSTForPrediction,PatchTSTModel:()=>r.PatchTSTModel,PatchTSTPreTrainedModel:()=>r.PatchTSTPreTrainedModel,Phi3ForCausalLM:()=>r.Phi3ForCausalLM,Phi3Model:()=>r.Phi3Model,Phi3PreTrainedModel:()=>r.Phi3PreTrainedModel,Phi3VForCausalLM:()=>r.Phi3VForCausalLM,Phi3VImageProcessor:()=>h.Phi3VImageProcessor,Phi3VPreTrainedModel:()=>r.Phi3VPreTrainedModel,Phi3VProcessor:()=>g.Phi3VProcessor,PhiForCausalLM:()=>r.PhiForCausalLM,PhiModel:()=>r.PhiModel,PhiPreTrainedModel:()=>r.PhiPreTrainedModel,Pipeline:()=>t.Pipeline,PreTrainedModel:()=>r.PreTrainedModel,PreTrainedTokenizer:()=>o.PreTrainedTokenizer,PretrainedConfig:()=>n.PretrainedConfig,PretrainedMixin:()=>r.PretrainedMixin,Processor:()=>m.Processor,PvtForImageClassification:()=>r.PvtForImageClassification,PvtImageProcessor:()=>h.PvtImageProcessor,PvtModel:()=>r.PvtModel,PvtPreTrainedModel:()=>r.PvtPreTrainedModel,PyAnnoteFeatureExtractor:()=>p.PyAnnoteFeatureExtractor,PyAnnoteForAudioFrameClassification:()=>r.PyAnnoteForAudioFrameClassification,PyAnnoteModel:()=>r.PyAnnoteModel,PyAnnotePreTrainedModel:()=>r.PyAnnotePreTrainedModel,PyAnnoteProcessor:()=>g.PyAnnoteProcessor,QuestionAnsweringModelOutput:()=>r.QuestionAnsweringModelOutput,QuestionAnsweringPipeline:()=>t.QuestionAnsweringPipeline,Qwen2ForCausalLM:()=>r.Qwen2ForCausalLM,Qwen2Model:()=>r.Qwen2Model,Qwen2PreTrainedModel:()=>r.Qwen2PreTrainedModel,Qwen2Tokenizer:()=>o.Qwen2Tokenizer,Qwen2VLForConditionalGeneration:()=>r.Qwen2VLForConditionalGeneration,Qwen2VLImageProcessor:()=>h.Qwen2VLImageProcessor,Qwen2VLPreTrainedModel:()=>r.Qwen2VLPreTrainedModel,Qwen2VLProcessor:()=>g.Qwen2VLProcessor,Qwen3ForCausalLM:()=>r.Qwen3ForCausalLM,Qwen3Model:()=>r.Qwen3Model,Qwen3PreTrainedModel:()=>r.Qwen3PreTrainedModel,RFDetrForObjectDetection:()=>r.RFDetrForObjectDetection,RFDetrModel:()=>r.RFDetrModel,RFDetrObjectDetectionOutput:()=>r.RFDetrObjectDetectionOutput,RFDetrPreTrainedModel:()=>r.RFDetrPreTrainedModel,RTDetrForObjectDetection:()=>r.RTDetrForObjectDetection,RTDetrImageProcessor:()=>h.RTDetrImageProcessor,RTDetrModel:()=>r.RTDetrModel,RTDetrObjectDetectionOutput:()=>r.RTDetrObjectDetectionOutput,RTDetrPreTrainedModel:()=>r.RTDetrPreTrainedModel,RTDetrV2ForObjectDetection:()=>r.RTDetrV2ForObjectDetection,RTDetrV2Model:()=>r.RTDetrV2Model,RTDetrV2ObjectDetectionOutput:()=>r.RTDetrV2ObjectDetectionOutput,RTDetrV2PreTrainedModel:()=>r.RTDetrV2PreTrainedModel,RawAudio:()=>s.RawAudio,RawImage:()=>a.RawImage,RawVideo:()=>i.RawVideo,RawVideoFrame:()=>i.RawVideoFrame,RepetitionPenaltyLogitsProcessor:()=>y.RepetitionPenaltyLogitsProcessor,ResNetForImageClassification:()=>r.ResNetForImageClassification,ResNetModel:()=>r.ResNetModel,ResNetPreTrainedModel:()=>r.ResNetPreTrainedModel,RoFormerForMaskedLM:()=>r.RoFormerForMaskedLM,RoFormerForQuestionAnswering:()=>r.RoFormerForQuestionAnswering,RoFormerForSequenceClassification:()=>r.RoFormerForSequenceClassification,RoFormerForTokenClassification:()=>r.RoFormerForTokenClassification,RoFormerModel:()=>r.RoFormerModel,RoFormerPreTrainedModel:()=>r.RoFormerPreTrainedModel,RoFormerTokenizer:()=>o.RoFormerTokenizer,RobertaForMaskedLM:()=>r.RobertaForMaskedLM,RobertaForQuestionAnswering:()=>r.RobertaForQuestionAnswering,RobertaForSequenceClassification:()=>r.RobertaForSequenceClassification,RobertaForTokenClassification:()=>r.RobertaForTokenClassification,RobertaModel:()=>r.RobertaModel,RobertaPreTrainedModel:()=>r.RobertaPreTrainedModel,RobertaTokenizer:()=>o.RobertaTokenizer,SamImageProcessor:()=>h.SamImageProcessor,SamImageSegmentationOutput:()=>r.SamImageSegmentationOutput,SamModel:()=>r.SamModel,SamPreTrainedModel:()=>r.SamPreTrainedModel,SamProcessor:()=>g.SamProcessor,SapiensForDepthEstimation:()=>r.SapiensForDepthEstimation,SapiensForNormalEstimation:()=>r.SapiensForNormalEstimation,SapiensForSemanticSegmentation:()=>r.SapiensForSemanticSegmentation,SapiensPreTrainedModel:()=>r.SapiensPreTrainedModel,SeamlessM4TFeatureExtractor:()=>p.SeamlessM4TFeatureExtractor,SegformerFeatureExtractor:()=>h.SegformerFeatureExtractor,SegformerForImageClassification:()=>r.SegformerForImageClassification,SegformerForSemanticSegmentation:()=>r.SegformerForSemanticSegmentation,SegformerImageProcessor:()=>h.SegformerImageProcessor,SegformerModel:()=>r.SegformerModel,SegformerPreTrainedModel:()=>r.SegformerPreTrainedModel,Seq2SeqLMOutput:()=>r.Seq2SeqLMOutput,SequenceClassifierOutput:()=>r.SequenceClassifierOutput,SiglipImageProcessor:()=>h.SiglipImageProcessor,SiglipModel:()=>r.SiglipModel,SiglipPreTrainedModel:()=>r.SiglipPreTrainedModel,SiglipTextModel:()=>r.SiglipTextModel,SiglipTokenizer:()=>o.SiglipTokenizer,SiglipVisionModel:()=>r.SiglipVisionModel,SmolLM3ForCausalLM:()=>r.SmolLM3ForCausalLM,SmolLM3Model:()=>r.SmolLM3Model,SmolLM3PreTrainedModel:()=>r.SmolLM3PreTrainedModel,SmolVLMForConditionalGeneration:()=>r.SmolVLMForConditionalGeneration,SmolVLMImageProcessor:()=>h.SmolVLMImageProcessor,SmolVLMProcessor:()=>g.SmolVLMProcessor,SnacDecoderModel:()=>r.SnacDecoderModel,SnacEncoderModel:()=>r.SnacEncoderModel,SnacFeatureExtractor:()=>p.SnacFeatureExtractor,SnacModel:()=>r.SnacModel,SnacPreTrainedModel:()=>r.SnacPreTrainedModel,SpeechT5FeatureExtractor:()=>p.SpeechT5FeatureExtractor,SpeechT5ForSpeechToText:()=>r.SpeechT5ForSpeechToText,SpeechT5ForTextToSpeech:()=>r.SpeechT5ForTextToSpeech,SpeechT5HifiGan:()=>r.SpeechT5HifiGan,SpeechT5Model:()=>r.SpeechT5Model,SpeechT5PreTrainedModel:()=>r.SpeechT5PreTrainedModel,SpeechT5Processor:()=>g.SpeechT5Processor,SpeechT5Tokenizer:()=>o.SpeechT5Tokenizer,SqueezeBertForMaskedLM:()=>r.SqueezeBertForMaskedLM,SqueezeBertForQuestionAnswering:()=>r.SqueezeBertForQuestionAnswering,SqueezeBertForSequenceClassification:()=>r.SqueezeBertForSequenceClassification,SqueezeBertModel:()=>r.SqueezeBertModel,SqueezeBertPreTrainedModel:()=>r.SqueezeBertPreTrainedModel,SqueezeBertTokenizer:()=>o.SqueezeBertTokenizer,StableLmForCausalLM:()=>r.StableLmForCausalLM,StableLmModel:()=>r.StableLmModel,StableLmPreTrainedModel:()=>r.StableLmPreTrainedModel,Starcoder2ForCausalLM:()=>r.Starcoder2ForCausalLM,Starcoder2Model:()=>r.Starcoder2Model,Starcoder2PreTrainedModel:()=>r.Starcoder2PreTrainedModel,StoppingCriteria:()=>x.StoppingCriteria,StoppingCriteriaList:()=>x.StoppingCriteriaList,StyleTextToSpeech2Model:()=>r.StyleTextToSpeech2Model,StyleTextToSpeech2PreTrainedModel:()=>r.StyleTextToSpeech2PreTrainedModel,SummarizationPipeline:()=>t.SummarizationPipeline,SuppressTokensAtBeginLogitsProcessor:()=>y.SuppressTokensAtBeginLogitsProcessor,Swin2SRForImageSuperResolution:()=>r.Swin2SRForImageSuperResolution,Swin2SRImageProcessor:()=>h.Swin2SRImageProcessor,Swin2SRModel:()=>r.Swin2SRModel,Swin2SRPreTrainedModel:()=>r.Swin2SRPreTrainedModel,SwinForImageClassification:()=>r.SwinForImageClassification,SwinForSemanticSegmentation:()=>r.SwinForSemanticSegmentation,SwinModel:()=>r.SwinModel,SwinPreTrainedModel:()=>r.SwinPreTrainedModel,T5ForConditionalGeneration:()=>r.T5ForConditionalGeneration,T5Model:()=>r.T5Model,T5PreTrainedModel:()=>r.T5PreTrainedModel,T5Tokenizer:()=>o.T5Tokenizer,TableTransformerForObjectDetection:()=>r.TableTransformerForObjectDetection,TableTransformerModel:()=>r.TableTransformerModel,TableTransformerObjectDetectionOutput:()=>r.TableTransformerObjectDetectionOutput,TableTransformerPreTrainedModel:()=>r.TableTransformerPreTrainedModel,TemperatureLogitsWarper:()=>y.TemperatureLogitsWarper,Tensor:()=>l.Tensor,Text2TextGenerationPipeline:()=>t.Text2TextGenerationPipeline,TextClassificationPipeline:()=>t.TextClassificationPipeline,TextGenerationPipeline:()=>t.TextGenerationPipeline,TextStreamer:()=>w.TextStreamer,TextToAudioPipeline:()=>t.TextToAudioPipeline,TokenClassificationPipeline:()=>t.TokenClassificationPipeline,TokenClassifierOutput:()=>r.TokenClassifierOutput,TokenizerModel:()=>o.TokenizerModel,TopKLogitsWarper:()=>y.TopKLogitsWarper,TopPLogitsWarper:()=>y.TopPLogitsWarper,TrOCRForCausalLM:()=>r.TrOCRForCausalLM,TrOCRPreTrainedModel:()=>r.TrOCRPreTrainedModel,TranslationPipeline:()=>t.TranslationPipeline,UltravoxModel:()=>r.UltravoxModel,UltravoxPreTrainedModel:()=>r.UltravoxPreTrainedModel,UltravoxProcessor:()=>g.UltravoxProcessor,UniSpeechForCTC:()=>r.UniSpeechForCTC,UniSpeechForSequenceClassification:()=>r.UniSpeechForSequenceClassification,UniSpeechModel:()=>r.UniSpeechModel,UniSpeechPreTrainedModel:()=>r.UniSpeechPreTrainedModel,UniSpeechSatForAudioFrameClassification:()=>r.UniSpeechSatForAudioFrameClassification,UniSpeechSatForCTC:()=>r.UniSpeechSatForCTC,UniSpeechSatForSequenceClassification:()=>r.UniSpeechSatForSequenceClassification,UniSpeechSatModel:()=>r.UniSpeechSatModel,UniSpeechSatPreTrainedModel:()=>r.UniSpeechSatPreTrainedModel,VLChatProcessor:()=>g.VLChatProcessor,VLMImageProcessor:()=>h.VLMImageProcessor,VaultGemmaForCausalLM:()=>r.VaultGemmaForCausalLM,VaultGemmaModel:()=>r.VaultGemmaModel,VaultGemmaPreTrainedModel:()=>r.VaultGemmaPreTrainedModel,ViTFeatureExtractor:()=>h.ViTFeatureExtractor,ViTForImageClassification:()=>r.ViTForImageClassification,ViTImageProcessor:()=>h.ViTImageProcessor,ViTMAEModel:()=>r.ViTMAEModel,ViTMAEPreTrainedModel:()=>r.ViTMAEPreTrainedModel,ViTMSNForImageClassification:()=>r.ViTMSNForImageClassification,ViTMSNModel:()=>r.ViTMSNModel,ViTMSNPreTrainedModel:()=>r.ViTMSNPreTrainedModel,ViTModel:()=>r.ViTModel,ViTPreTrainedModel:()=>r.ViTPreTrainedModel,VisionEncoderDecoderModel:()=>r.VisionEncoderDecoderModel,VitMatteForImageMatting:()=>r.VitMatteForImageMatting,VitMatteImageProcessor:()=>h.VitMatteImageProcessor,VitMattePreTrainedModel:()=>r.VitMattePreTrainedModel,VitPoseForPoseEstimation:()=>r.VitPoseForPoseEstimation,VitPoseImageProcessor:()=>h.VitPoseImageProcessor,VitPosePreTrainedModel:()=>r.VitPosePreTrainedModel,VitsModel:()=>r.VitsModel,VitsModelOutput:()=>r.VitsModelOutput,VitsPreTrainedModel:()=>r.VitsPreTrainedModel,VitsTokenizer:()=>o.VitsTokenizer,VoxtralForConditionalGeneration:()=>r.VoxtralForConditionalGeneration,VoxtralProcessor:()=>g.VoxtralProcessor,Wav2Vec2BertForCTC:()=>r.Wav2Vec2BertForCTC,Wav2Vec2BertForSequenceClassification:()=>r.Wav2Vec2BertForSequenceClassification,Wav2Vec2BertModel:()=>r.Wav2Vec2BertModel,Wav2Vec2BertPreTrainedModel:()=>r.Wav2Vec2BertPreTrainedModel,Wav2Vec2CTCTokenizer:()=>o.Wav2Vec2CTCTokenizer,Wav2Vec2FeatureExtractor:()=>p.Wav2Vec2FeatureExtractor,Wav2Vec2ForAudioFrameClassification:()=>r.Wav2Vec2ForAudioFrameClassification,Wav2Vec2ForCTC:()=>r.Wav2Vec2ForCTC,Wav2Vec2ForSequenceClassification:()=>r.Wav2Vec2ForSequenceClassification,Wav2Vec2Model:()=>r.Wav2Vec2Model,Wav2Vec2PreTrainedModel:()=>r.Wav2Vec2PreTrainedModel,Wav2Vec2Processor:()=>g.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>g.Wav2Vec2ProcessorWithLM,WavLMForAudioFrameClassification:()=>r.WavLMForAudioFrameClassification,WavLMForCTC:()=>r.WavLMForCTC,WavLMForSequenceClassification:()=>r.WavLMForSequenceClassification,WavLMForXVector:()=>r.WavLMForXVector,WavLMModel:()=>r.WavLMModel,WavLMPreTrainedModel:()=>r.WavLMPreTrainedModel,WeSpeakerFeatureExtractor:()=>p.WeSpeakerFeatureExtractor,WeSpeakerResNetModel:()=>r.WeSpeakerResNetModel,WeSpeakerResNetPreTrainedModel:()=>r.WeSpeakerResNetPreTrainedModel,WhisperFeatureExtractor:()=>p.WhisperFeatureExtractor,WhisperForConditionalGeneration:()=>r.WhisperForConditionalGeneration,WhisperModel:()=>r.WhisperModel,WhisperPreTrainedModel:()=>r.WhisperPreTrainedModel,WhisperProcessor:()=>g.WhisperProcessor,WhisperTextStreamer:()=>w.WhisperTextStreamer,WhisperTimeStampLogitsProcessor:()=>y.WhisperTimeStampLogitsProcessor,WhisperTokenizer:()=>o.WhisperTokenizer,XLMForQuestionAnswering:()=>r.XLMForQuestionAnswering,XLMForSequenceClassification:()=>r.XLMForSequenceClassification,XLMForTokenClassification:()=>r.XLMForTokenClassification,XLMModel:()=>r.XLMModel,XLMPreTrainedModel:()=>r.XLMPreTrainedModel,XLMRobertaForMaskedLM:()=>r.XLMRobertaForMaskedLM,XLMRobertaForQuestionAnswering:()=>r.XLMRobertaForQuestionAnswering,XLMRobertaForSequenceClassification:()=>r.XLMRobertaForSequenceClassification,XLMRobertaForTokenClassification:()=>r.XLMRobertaForTokenClassification,XLMRobertaModel:()=>r.XLMRobertaModel,XLMRobertaPreTrainedModel:()=>r.XLMRobertaPreTrainedModel,XLMRobertaTokenizer:()=>o.XLMRobertaTokenizer,XLMTokenizer:()=>o.XLMTokenizer,XLMWithLMHeadModel:()=>r.XLMWithLMHeadModel,XVectorOutput:()=>r.XVectorOutput,YolosFeatureExtractor:()=>h.YolosFeatureExtractor,YolosForObjectDetection:()=>r.YolosForObjectDetection,YolosImageProcessor:()=>h.YolosImageProcessor,YolosModel:()=>r.YolosModel,YolosObjectDetectionOutput:()=>r.YolosObjectDetectionOutput,YolosPreTrainedModel:()=>r.YolosPreTrainedModel,ZeroShotAudioClassificationPipeline:()=>t.ZeroShotAudioClassificationPipeline,ZeroShotClassificationPipeline:()=>t.ZeroShotClassificationPipeline,ZeroShotImageClassificationPipeline:()=>t.ZeroShotImageClassificationPipeline,ZeroShotObjectDetectionPipeline:()=>t.ZeroShotObjectDetectionPipeline,bankers_round:()=>c.bankers_round,cat:()=>l.cat,cos_sim:()=>c.cos_sim,dot:()=>c.dot,dynamic_time_warping:()=>c.dynamic_time_warping,env:()=>e.env,full:()=>l.full,full_like:()=>l.full_like,getCacheShapes:()=>n.getCacheShapes,hamming:()=>s.hamming,hanning:()=>s.hanning,interpolate:()=>l.interpolate,interpolate_4d:()=>l.interpolate_4d,interpolate_data:()=>c.interpolate_data,is_chinese_char:()=>o.is_chinese_char,layer_norm:()=>l.layer_norm,load_image:()=>a.load_image,load_video:()=>i.load_video,log_softmax:()=>c.log_softmax,magnitude:()=>c.magnitude,matmul:()=>l.matmul,max:()=>c.max,mean:()=>l.mean,mean_pooling:()=>l.mean_pooling,medianFilter:()=>c.medianFilter,mel_filter_bank:()=>s.mel_filter_bank,min:()=>c.min,ones:()=>l.ones,ones_like:()=>l.ones_like,permute:()=>l.permute,permute_data:()=>c.permute_data,pipeline:()=>t.pipeline,quantize_embeddings:()=>l.quantize_embeddings,rand:()=>l.rand,read_audio:()=>s.read_audio,rfft:()=>l.rfft,round:()=>c.round,slice:()=>l.slice,softmax:()=>c.softmax,spectrogram:()=>s.spectrogram,stack:()=>l.stack,std_mean:()=>l.std_mean,topk:()=>l.topk,window_function:()=>s.window_function,zeros:()=>l.zeros,zeros_like:()=>l.zeros_like});var e=__webpack_require__("./src/env.js"),t=__webpack_require__("./src/pipelines.js"),r=__webpack_require__("./src/models.js"),o=__webpack_require__("./src/tokenizers.js"),n=__webpack_require__("./src/configs.js"),s=__webpack_require__("./src/utils/audio.js"),a=__webpack_require__("./src/utils/image.js"),i=__webpack_require__("./src/utils/video.js"),l=__webpack_require__("./src/utils/tensor.js"),c=__webpack_require__("./src/utils/maths.js"),_=__webpack_require__("./src/base/feature_extraction_utils.js"),p=__webpack_require__("./src/models/feature_extractors.js"),u=__webpack_require__("./src/models/auto/feature_extraction_auto.js"),d=__webpack_require__("./src/base/image_processors_utils.js"),h=__webpack_require__("./src/models/image_processors.js"),f=__webpack_require__("./src/models/auto/image_processing_auto.js"),m=__webpack_require__("./src/base/processing_utils.js"),g=__webpack_require__("./src/models/processors.js"),b=__webpack_require__("./src/models/auto/processing_auto.js"),w=__webpack_require__("./src/generation/streamers.js"),x=__webpack_require__("./src/generation/stopping_criteria.js"),y=__webpack_require__("./src/generation/logits_process.js")})();const __webpack_exports__ASTFeatureExtractor=__webpack_exports__.ASTFeatureExtractor,__webpack_exports__ASTForAudioClassification=__webpack_exports__.ASTForAudioClassification,__webpack_exports__ASTModel=__webpack_exports__.ASTModel,__webpack_exports__ASTPreTrainedModel=__webpack_exports__.ASTPreTrainedModel,__webpack_exports__AlbertForMaskedLM=__webpack_exports__.AlbertForMaskedLM,__webpack_exports__AlbertForQuestionAnswering=__webpack_exports__.AlbertForQuestionAnswering,__webpack_exports__AlbertForSequenceClassification=__webpack_exports__.AlbertForSequenceClassification,__webpack_exports__AlbertModel=__webpack_exports__.AlbertModel,__webpack_exports__AlbertPreTrainedModel=__webpack_exports__.AlbertPreTrainedModel,__webpack_exports__AlbertTokenizer=__webpack_exports__.AlbertTokenizer,__webpack_exports__ArceeForCausalLM=__webpack_exports__.ArceeForCausalLM,__webpack_exports__ArceeModel=__webpack_exports__.ArceeModel,__webpack_exports__ArceePreTrainedModel=__webpack_exports__.ArceePreTrainedModel,__webpack_exports__AudioClassificationPipeline=__webpack_exports__.AudioClassificationPipeline,__webpack_exports__AutoConfig=__webpack_exports__.AutoConfig,__webpack_exports__AutoFeatureExtractor=__webpack_exports__.AutoFeatureExtractor,__webpack_exports__AutoImageProcessor=__webpack_exports__.AutoImageProcessor,__webpack_exports__AutoModel=__webpack_exports__.AutoModel,__webpack_exports__AutoModelForAudioClassification=__webpack_exports__.AutoModelForAudioClassification,__webpack_exports__AutoModelForAudioFrameClassification=__webpack_exports__.AutoModelForAudioFrameClassification,__webpack_exports__AutoModelForAudioTextToText=__webpack_exports__.AutoModelForAudioTextToText,__webpack_exports__AutoModelForCTC=__webpack_exports__.AutoModelForCTC,__webpack_exports__AutoModelForCausalLM=__webpack_exports__.AutoModelForCausalLM,__webpack_exports__AutoModelForDepthEstimation=__webpack_exports__.AutoModelForDepthEstimation,__webpack_exports__AutoModelForDocumentQuestionAnswering=__webpack_exports__.AutoModelForDocumentQuestionAnswering,__webpack_exports__AutoModelForImageClassification=__webpack_exports__.AutoModelForImageClassification,__webpack_exports__AutoModelForImageFeatureExtraction=__webpack_exports__.AutoModelForImageFeatureExtraction,__webpack_exports__AutoModelForImageMatting=__webpack_exports__.AutoModelForImageMatting,__webpack_exports__AutoModelForImageSegmentation=__webpack_exports__.AutoModelForImageSegmentation,__webpack_exports__AutoModelForImageTextToText=__webpack_exports__.AutoModelForImageTextToText,__webpack_exports__AutoModelForImageToImage=__webpack_exports__.AutoModelForImageToImage,__webpack_exports__AutoModelForMaskGeneration=__webpack_exports__.AutoModelForMaskGeneration,__webpack_exports__AutoModelForMaskedLM=__webpack_exports__.AutoModelForMaskedLM,__webpack_exports__AutoModelForNormalEstimation=__webpack_exports__.AutoModelForNormalEstimation,__webpack_exports__AutoModelForObjectDetection=__webpack_exports__.AutoModelForObjectDetection,__webpack_exports__AutoModelForPoseEstimation=__webpack_exports__.AutoModelForPoseEstimation,__webpack_exports__AutoModelForQuestionAnswering=__webpack_exports__.AutoModelForQuestionAnswering,__webpack_exports__AutoModelForSemanticSegmentation=__webpack_exports__.AutoModelForSemanticSegmentation,__webpack_exports__AutoModelForSeq2SeqLM=__webpack_exports__.AutoModelForSeq2SeqLM,__webpack_exports__AutoModelForSequenceClassification=__webpack_exports__.AutoModelForSequenceClassification,__webpack_exports__AutoModelForSpeechSeq2Seq=__webpack_exports__.AutoModelForSpeechSeq2Seq,__webpack_exports__AutoModelForTextToSpectrogram=__webpack_exports__.AutoModelForTextToSpectrogram,__webpack_exports__AutoModelForTextToWaveform=__webpack_exports__.AutoModelForTextToWaveform,__webpack_exports__AutoModelForTokenClassification=__webpack_exports__.AutoModelForTokenClassification,__webpack_exports__AutoModelForUniversalSegmentation=__webpack_exports__.AutoModelForUniversalSegmentation,__webpack_exports__AutoModelForVision2Seq=__webpack_exports__.AutoModelForVision2Seq,__webpack_exports__AutoModelForXVector=__webpack_exports__.AutoModelForXVector,__webpack_exports__AutoModelForZeroShotObjectDetection=__webpack_exports__.AutoModelForZeroShotObjectDetection,__webpack_exports__AutoProcessor=__webpack_exports__.AutoProcessor,__webpack_exports__AutoTokenizer=__webpack_exports__.AutoTokenizer,__webpack_exports__AutomaticSpeechRecognitionPipeline=__webpack_exports__.AutomaticSpeechRecognitionPipeline,__webpack_exports__BackgroundRemovalPipeline=__webpack_exports__.BackgroundRemovalPipeline,__webpack_exports__BartForConditionalGeneration=__webpack_exports__.BartForConditionalGeneration,__webpack_exports__BartForSequenceClassification=__webpack_exports__.BartForSequenceClassification,__webpack_exports__BartModel=__webpack_exports__.BartModel,__webpack_exports__BartPretrainedModel=__webpack_exports__.BartPretrainedModel,__webpack_exports__BartTokenizer=__webpack_exports__.BartTokenizer,__webpack_exports__BaseModelOutput=__webpack_exports__.BaseModelOutput,__webpack_exports__BaseStreamer=__webpack_exports__.BaseStreamer,__webpack_exports__BeitFeatureExtractor=__webpack_exports__.BeitFeatureExtractor,__webpack_exports__BeitForImageClassification=__webpack_exports__.BeitForImageClassification,__webpack_exports__BeitModel=__webpack_exports__.BeitModel,__webpack_exports__BeitPreTrainedModel=__webpack_exports__.BeitPreTrainedModel,__webpack_exports__BertForMaskedLM=__webpack_exports__.BertForMaskedLM,__webpack_exports__BertForQuestionAnswering=__webpack_exports__.BertForQuestionAnswering,__webpack_exports__BertForSequenceClassification=__webpack_exports__.BertForSequenceClassification,__webpack_exports__BertForTokenClassification=__webpack_exports__.BertForTokenClassification,__webpack_exports__BertModel=__webpack_exports__.BertModel,__webpack_exports__BertPreTrainedModel=__webpack_exports__.BertPreTrainedModel,__webpack_exports__BertTokenizer=__webpack_exports__.BertTokenizer,__webpack_exports__BitImageProcessor=__webpack_exports__.BitImageProcessor,__webpack_exports__BlenderbotForConditionalGeneration=__webpack_exports__.BlenderbotForConditionalGeneration,__webpack_exports__BlenderbotModel=__webpack_exports__.BlenderbotModel,__webpack_exports__BlenderbotPreTrainedModel=__webpack_exports__.BlenderbotPreTrainedModel,__webpack_exports__BlenderbotSmallForConditionalGeneration=__webpack_exports__.BlenderbotSmallForConditionalGeneration,__webpack_exports__BlenderbotSmallModel=__webpack_exports__.BlenderbotSmallModel,__webpack_exports__BlenderbotSmallPreTrainedModel=__webpack_exports__.BlenderbotSmallPreTrainedModel,__webpack_exports__BlenderbotSmallTokenizer=__webpack_exports__.BlenderbotSmallTokenizer,__webpack_exports__BlenderbotTokenizer=__webpack_exports__.BlenderbotTokenizer,__webpack_exports__BloomForCausalLM=__webpack_exports__.BloomForCausalLM,__webpack_exports__BloomModel=__webpack_exports__.BloomModel,__webpack_exports__BloomPreTrainedModel=__webpack_exports__.BloomPreTrainedModel,__webpack_exports__BloomTokenizer=__webpack_exports__.BloomTokenizer,__webpack_exports__CLIPFeatureExtractor=__webpack_exports__.CLIPFeatureExtractor,__webpack_exports__CLIPImageProcessor=__webpack_exports__.CLIPImageProcessor,__webpack_exports__CLIPModel=__webpack_exports__.CLIPModel,__webpack_exports__CLIPPreTrainedModel=__webpack_exports__.CLIPPreTrainedModel,__webpack_exports__CLIPSegForImageSegmentation=__webpack_exports__.CLIPSegForImageSegmentation,__webpack_exports__CLIPSegModel=__webpack_exports__.CLIPSegModel,__webpack_exports__CLIPSegPreTrainedModel=__webpack_exports__.CLIPSegPreTrainedModel,__webpack_exports__CLIPTextModel=__webpack_exports__.CLIPTextModel,__webpack_exports__CLIPTextModelWithProjection=__webpack_exports__.CLIPTextModelWithProjection,__webpack_exports__CLIPTokenizer=__webpack_exports__.CLIPTokenizer,__webpack_exports__CLIPVisionModel=__webpack_exports__.CLIPVisionModel,__webpack_exports__CLIPVisionModelWithProjection=__webpack_exports__.CLIPVisionModelWithProjection,__webpack_exports__CamembertForMaskedLM=__webpack_exports__.CamembertForMaskedLM,__webpack_exports__CamembertForQuestionAnswering=__webpack_exports__.CamembertForQuestionAnswering,__webpack_exports__CamembertForSequenceClassification=__webpack_exports__.CamembertForSequenceClassification,__webpack_exports__CamembertForTokenClassification=__webpack_exports__.CamembertForTokenClassification,__webpack_exports__CamembertModel=__webpack_exports__.CamembertModel,__webpack_exports__CamembertPreTrainedModel=__webpack_exports__.CamembertPreTrainedModel,__webpack_exports__CamembertTokenizer=__webpack_exports__.CamembertTokenizer,__webpack_exports__CausalLMOutput=__webpack_exports__.CausalLMOutput,__webpack_exports__CausalLMOutputWithPast=__webpack_exports__.CausalLMOutputWithPast,__webpack_exports__ChineseCLIPFeatureExtractor=__webpack_exports__.ChineseCLIPFeatureExtractor,__webpack_exports__ChineseCLIPModel=__webpack_exports__.ChineseCLIPModel,__webpack_exports__ChineseCLIPPreTrainedModel=__webpack_exports__.ChineseCLIPPreTrainedModel,__webpack_exports__ClapAudioModelWithProjection=__webpack_exports__.ClapAudioModelWithProjection,__webpack_exports__ClapFeatureExtractor=__webpack_exports__.ClapFeatureExtractor,__webpack_exports__ClapModel=__webpack_exports__.ClapModel,__webpack_exports__ClapPreTrainedModel=__webpack_exports__.ClapPreTrainedModel,__webpack_exports__ClapTextModelWithProjection=__webpack_exports__.ClapTextModelWithProjection,__webpack_exports__ClassifierFreeGuidanceLogitsProcessor=__webpack_exports__.ClassifierFreeGuidanceLogitsProcessor,__webpack_exports__CodeGenForCausalLM=__webpack_exports__.CodeGenForCausalLM,__webpack_exports__CodeGenModel=__webpack_exports__.CodeGenModel,__webpack_exports__CodeGenPreTrainedModel=__webpack_exports__.CodeGenPreTrainedModel,__webpack_exports__CodeGenTokenizer=__webpack_exports__.CodeGenTokenizer,__webpack_exports__CodeLlamaTokenizer=__webpack_exports__.CodeLlamaTokenizer,__webpack_exports__CohereForCausalLM=__webpack_exports__.CohereForCausalLM,__webpack_exports__CohereModel=__webpack_exports__.CohereModel,__webpack_exports__CoherePreTrainedModel=__webpack_exports__.CoherePreTrainedModel,__webpack_exports__CohereTokenizer=__webpack_exports__.CohereTokenizer,__webpack_exports__ConvBertForMaskedLM=__webpack_exports__.ConvBertForMaskedLM,__webpack_exports__ConvBertForQuestionAnswering=__webpack_exports__.ConvBertForQuestionAnswering,__webpack_exports__ConvBertForSequenceClassification=__webpack_exports__.ConvBertForSequenceClassification,__webpack_exports__ConvBertForTokenClassification=__webpack_exports__.ConvBertForTokenClassification,__webpack_exports__ConvBertModel=__webpack_exports__.ConvBertModel,__webpack_exports__ConvBertPreTrainedModel=__webpack_exports__.ConvBertPreTrainedModel,__webpack_exports__ConvBertTokenizer=__webpack_exports__.ConvBertTokenizer,__webpack_exports__ConvNextFeatureExtractor=__webpack_exports__.ConvNextFeatureExtractor,__webpack_exports__ConvNextForImageClassification=__webpack_exports__.ConvNextForImageClassification,__webpack_exports__ConvNextImageProcessor=__webpack_exports__.ConvNextImageProcessor,__webpack_exports__ConvNextModel=__webpack_exports__.ConvNextModel,__webpack_exports__ConvNextPreTrainedModel=__webpack_exports__.ConvNextPreTrainedModel,__webpack_exports__ConvNextV2ForImageClassification=__webpack_exports__.ConvNextV2ForImageClassification,__webpack_exports__ConvNextV2Model=__webpack_exports__.ConvNextV2Model,__webpack_exports__ConvNextV2PreTrainedModel=__webpack_exports__.ConvNextV2PreTrainedModel,__webpack_exports__DFineForObjectDetection=__webpack_exports__.DFineForObjectDetection,__webpack_exports__DFineModel=__webpack_exports__.DFineModel,__webpack_exports__DFinePreTrainedModel=__webpack_exports__.DFinePreTrainedModel,__webpack_exports__DINOv3ConvNextModel=__webpack_exports__.DINOv3ConvNextModel,__webpack_exports__DINOv3ConvNextPreTrainedModel=__webpack_exports__.DINOv3ConvNextPreTrainedModel,__webpack_exports__DINOv3ViTImageProcessor=__webpack_exports__.DINOv3ViTImageProcessor,__webpack_exports__DINOv3ViTModel=__webpack_exports__.DINOv3ViTModel,__webpack_exports__DINOv3ViTPreTrainedModel=__webpack_exports__.DINOv3ViTPreTrainedModel,__webpack_exports__DPTFeatureExtractor=__webpack_exports__.DPTFeatureExtractor,__webpack_exports__DPTForDepthEstimation=__webpack_exports__.DPTForDepthEstimation,__webpack_exports__DPTImageProcessor=__webpack_exports__.DPTImageProcessor,__webpack_exports__DPTModel=__webpack_exports__.DPTModel,__webpack_exports__DPTPreTrainedModel=__webpack_exports__.DPTPreTrainedModel,__webpack_exports__DacDecoderModel=__webpack_exports__.DacDecoderModel,__webpack_exports__DacDecoderOutput=__webpack_exports__.DacDecoderOutput,__webpack_exports__DacEncoderModel=__webpack_exports__.DacEncoderModel,__webpack_exports__DacEncoderOutput=__webpack_exports__.DacEncoderOutput,__webpack_exports__DacFeatureExtractor=__webpack_exports__.DacFeatureExtractor,__webpack_exports__DacModel=__webpack_exports__.DacModel,__webpack_exports__DacPreTrainedModel=__webpack_exports__.DacPreTrainedModel,__webpack_exports__DataTypeMap=__webpack_exports__.DataTypeMap,__webpack_exports__DebertaForMaskedLM=__webpack_exports__.DebertaForMaskedLM,__webpack_exports__DebertaForQuestionAnswering=__webpack_exports__.DebertaForQuestionAnswering,__webpack_exports__DebertaForSequenceClassification=__webpack_exports__.DebertaForSequenceClassification,__webpack_exports__DebertaForTokenClassification=__webpack_exports__.DebertaForTokenClassification,__webpack_exports__DebertaModel=__webpack_exports__.DebertaModel,__webpack_exports__DebertaPreTrainedModel=__webpack_exports__.DebertaPreTrainedModel,__webpack_exports__DebertaTokenizer=__webpack_exports__.DebertaTokenizer,__webpack_exports__DebertaV2ForMaskedLM=__webpack_exports__.DebertaV2ForMaskedLM,__webpack_exports__DebertaV2ForQuestionAnswering=__webpack_exports__.DebertaV2ForQuestionAnswering,__webpack_exports__DebertaV2ForSequenceClassification=__webpack_exports__.DebertaV2ForSequenceClassification,__webpack_exports__DebertaV2ForTokenClassification=__webpack_exports__.DebertaV2ForTokenClassification,__webpack_exports__DebertaV2Model=__webpack_exports__.DebertaV2Model,__webpack_exports__DebertaV2PreTrainedModel=__webpack_exports__.DebertaV2PreTrainedModel,__webpack_exports__DebertaV2Tokenizer=__webpack_exports__.DebertaV2Tokenizer,__webpack_exports__DecisionTransformerModel=__webpack_exports__.DecisionTransformerModel,__webpack_exports__DecisionTransformerPreTrainedModel=__webpack_exports__.DecisionTransformerPreTrainedModel,__webpack_exports__DeiTFeatureExtractor=__webpack_exports__.DeiTFeatureExtractor,__webpack_exports__DeiTForImageClassification=__webpack_exports__.DeiTForImageClassification,__webpack_exports__DeiTImageProcessor=__webpack_exports__.DeiTImageProcessor,__webpack_exports__DeiTModel=__webpack_exports__.DeiTModel,__webpack_exports__DeiTPreTrainedModel=__webpack_exports__.DeiTPreTrainedModel,__webpack_exports__DepthAnythingForDepthEstimation=__webpack_exports__.DepthAnythingForDepthEstimation,__webpack_exports__DepthAnythingPreTrainedModel=__webpack_exports__.DepthAnythingPreTrainedModel,__webpack_exports__DepthEstimationPipeline=__webpack_exports__.DepthEstimationPipeline,__webpack_exports__DepthProForDepthEstimation=__webpack_exports__.DepthProForDepthEstimation,__webpack_exports__DepthProPreTrainedModel=__webpack_exports__.DepthProPreTrainedModel,__webpack_exports__DetrFeatureExtractor=__webpack_exports__.DetrFeatureExtractor,__webpack_exports__DetrForObjectDetection=__webpack_exports__.DetrForObjectDetection,__webpack_exports__DetrForSegmentation=__webpack_exports__.DetrForSegmentation,__webpack_exports__DetrImageProcessor=__webpack_exports__.DetrImageProcessor,__webpack_exports__DetrModel=__webpack_exports__.DetrModel,__webpack_exports__DetrObjectDetectionOutput=__webpack_exports__.DetrObjectDetectionOutput,__webpack_exports__DetrPreTrainedModel=__webpack_exports__.DetrPreTrainedModel,__webpack_exports__DetrSegmentationOutput=__webpack_exports__.DetrSegmentationOutput,__webpack_exports__Dinov2ForImageClassification=__webpack_exports__.Dinov2ForImageClassification,__webpack_exports__Dinov2Model=__webpack_exports__.Dinov2Model,__webpack_exports__Dinov2PreTrainedModel=__webpack_exports__.Dinov2PreTrainedModel,__webpack_exports__Dinov2WithRegistersForImageClassification=__webpack_exports__.Dinov2WithRegistersForImageClassification,__webpack_exports__Dinov2WithRegistersModel=__webpack_exports__.Dinov2WithRegistersModel,__webpack_exports__Dinov2WithRegistersPreTrainedModel=__webpack_exports__.Dinov2WithRegistersPreTrainedModel,__webpack_exports__DistilBertForMaskedLM=__webpack_exports__.DistilBertForMaskedLM,__webpack_exports__DistilBertForQuestionAnswering=__webpack_exports__.DistilBertForQuestionAnswering,__webpack_exports__DistilBertForSequenceClassification=__webpack_exports__.DistilBertForSequenceClassification,__webpack_exports__DistilBertForTokenClassification=__webpack_exports__.DistilBertForTokenClassification,__webpack_exports__DistilBertModel=__webpack_exports__.DistilBertModel,__webpack_exports__DistilBertPreTrainedModel=__webpack_exports__.DistilBertPreTrainedModel,__webpack_exports__DistilBertTokenizer=__webpack_exports__.DistilBertTokenizer,__webpack_exports__DocumentQuestionAnsweringPipeline=__webpack_exports__.DocumentQuestionAnsweringPipeline,__webpack_exports__DonutFeatureExtractor=__webpack_exports__.DonutFeatureExtractor,__webpack_exports__DonutImageProcessor=__webpack_exports__.DonutImageProcessor,__webpack_exports__DonutSwinModel=__webpack_exports__.DonutSwinModel,__webpack_exports__DonutSwinPreTrainedModel=__webpack_exports__.DonutSwinPreTrainedModel,__webpack_exports__EfficientNetForImageClassification=__webpack_exports__.EfficientNetForImageClassification,__webpack_exports__EfficientNetImageProcessor=__webpack_exports__.EfficientNetImageProcessor,__webpack_exports__EfficientNetModel=__webpack_exports__.EfficientNetModel,__webpack_exports__EfficientNetPreTrainedModel=__webpack_exports__.EfficientNetPreTrainedModel,__webpack_exports__ElectraForMaskedLM=__webpack_exports__.ElectraForMaskedLM,__webpack_exports__ElectraForQuestionAnswering=__webpack_exports__.ElectraForQuestionAnswering,__webpack_exports__ElectraForSequenceClassification=__webpack_exports__.ElectraForSequenceClassification,__webpack_exports__ElectraForTokenClassification=__webpack_exports__.ElectraForTokenClassification,__webpack_exports__ElectraModel=__webpack_exports__.ElectraModel,__webpack_exports__ElectraPreTrainedModel=__webpack_exports__.ElectraPreTrainedModel,__webpack_exports__ElectraTokenizer=__webpack_exports__.ElectraTokenizer,__webpack_exports__EncodecFeatureExtractor=__webpack_exports__.EncodecFeatureExtractor,__webpack_exports__EosTokenCriteria=__webpack_exports__.EosTokenCriteria,__webpack_exports__Ernie4_5_ForCausalLM=__webpack_exports__.Ernie4_5_ForCausalLM,__webpack_exports__Ernie4_5_Model=__webpack_exports__.Ernie4_5_Model,__webpack_exports__Ernie4_5_PretrainedModel=__webpack_exports__.Ernie4_5_PretrainedModel,__webpack_exports__Ernie4_5_Tokenizer=__webpack_exports__.Ernie4_5_Tokenizer,__webpack_exports__EsmForMaskedLM=__webpack_exports__.EsmForMaskedLM,__webpack_exports__EsmForSequenceClassification=__webpack_exports__.EsmForSequenceClassification,__webpack_exports__EsmForTokenClassification=__webpack_exports__.EsmForTokenClassification,__webpack_exports__EsmModel=__webpack_exports__.EsmModel,__webpack_exports__EsmPreTrainedModel=__webpack_exports__.EsmPreTrainedModel,__webpack_exports__EsmTokenizer=__webpack_exports__.EsmTokenizer,__webpack_exports__ExaoneForCausalLM=__webpack_exports__.ExaoneForCausalLM,__webpack_exports__ExaoneModel=__webpack_exports__.ExaoneModel,__webpack_exports__ExaonePreTrainedModel=__webpack_exports__.ExaonePreTrainedModel,__webpack_exports__FFT=__webpack_exports__.FFT,__webpack_exports__FalconForCausalLM=__webpack_exports__.FalconForCausalLM,__webpack_exports__FalconModel=__webpack_exports__.FalconModel,__webpack_exports__FalconPreTrainedModel=__webpack_exports__.FalconPreTrainedModel,__webpack_exports__FalconTokenizer=__webpack_exports__.FalconTokenizer,__webpack_exports__FastViTForImageClassification=__webpack_exports__.FastViTForImageClassification,__webpack_exports__FastViTModel=__webpack_exports__.FastViTModel,__webpack_exports__FastViTPreTrainedModel=__webpack_exports__.FastViTPreTrainedModel,__webpack_exports__FeatureExtractionPipeline=__webpack_exports__.FeatureExtractionPipeline,__webpack_exports__FeatureExtractor=__webpack_exports__.FeatureExtractor,__webpack_exports__FillMaskPipeline=__webpack_exports__.FillMaskPipeline,__webpack_exports__Florence2ForConditionalGeneration=__webpack_exports__.Florence2ForConditionalGeneration,__webpack_exports__Florence2PreTrainedModel=__webpack_exports__.Florence2PreTrainedModel,__webpack_exports__Florence2Processor=__webpack_exports__.Florence2Processor,__webpack_exports__ForcedBOSTokenLogitsProcessor=__webpack_exports__.ForcedBOSTokenLogitsProcessor,__webpack_exports__ForcedEOSTokenLogitsProcessor=__webpack_exports__.ForcedEOSTokenLogitsProcessor,__webpack_exports__GLPNFeatureExtractor=__webpack_exports__.GLPNFeatureExtractor,__webpack_exports__GLPNForDepthEstimation=__webpack_exports__.GLPNForDepthEstimation,__webpack_exports__GLPNModel=__webpack_exports__.GLPNModel,__webpack_exports__GLPNPreTrainedModel=__webpack_exports__.GLPNPreTrainedModel,__webpack_exports__GPT2LMHeadModel=__webpack_exports__.GPT2LMHeadModel,__webpack_exports__GPT2Model=__webpack_exports__.GPT2Model,__webpack_exports__GPT2PreTrainedModel=__webpack_exports__.GPT2PreTrainedModel,__webpack_exports__GPT2Tokenizer=__webpack_exports__.GPT2Tokenizer,__webpack_exports__GPTBigCodeForCausalLM=__webpack_exports__.GPTBigCodeForCausalLM,__webpack_exports__GPTBigCodeModel=__webpack_exports__.GPTBigCodeModel,__webpack_exports__GPTBigCodePreTrainedModel=__webpack_exports__.GPTBigCodePreTrainedModel,__webpack_exports__GPTJForCausalLM=__webpack_exports__.GPTJForCausalLM,__webpack_exports__GPTJModel=__webpack_exports__.GPTJModel,__webpack_exports__GPTJPreTrainedModel=__webpack_exports__.GPTJPreTrainedModel,__webpack_exports__GPTNeoForCausalLM=__webpack_exports__.GPTNeoForCausalLM,__webpack_exports__GPTNeoModel=__webpack_exports__.GPTNeoModel,__webpack_exports__GPTNeoPreTrainedModel=__webpack_exports__.GPTNeoPreTrainedModel,__webpack_exports__GPTNeoXForCausalLM=__webpack_exports__.GPTNeoXForCausalLM,__webpack_exports__GPTNeoXModel=__webpack_exports__.GPTNeoXModel,__webpack_exports__GPTNeoXPreTrainedModel=__webpack_exports__.GPTNeoXPreTrainedModel,__webpack_exports__GPTNeoXTokenizer=__webpack_exports__.GPTNeoXTokenizer,__webpack_exports__Gemma2ForCausalLM=__webpack_exports__.Gemma2ForCausalLM,__webpack_exports__Gemma2Model=__webpack_exports__.Gemma2Model,__webpack_exports__Gemma2PreTrainedModel=__webpack_exports__.Gemma2PreTrainedModel,__webpack_exports__Gemma3ForCausalLM=__webpack_exports__.Gemma3ForCausalLM,__webpack_exports__Gemma3Model=__webpack_exports__.Gemma3Model,__webpack_exports__Gemma3PreTrainedModel=__webpack_exports__.Gemma3PreTrainedModel,__webpack_exports__Gemma3nAudioFeatureExtractor=__webpack_exports__.Gemma3nAudioFeatureExtractor,__webpack_exports__Gemma3nForConditionalGeneration=__webpack_exports__.Gemma3nForConditionalGeneration,__webpack_exports__Gemma3nPreTrainedModel=__webpack_exports__.Gemma3nPreTrainedModel,__webpack_exports__Gemma3nProcessor=__webpack_exports__.Gemma3nProcessor,__webpack_exports__GemmaForCausalLM=__webpack_exports__.GemmaForCausalLM,__webpack_exports__GemmaModel=__webpack_exports__.GemmaModel,__webpack_exports__GemmaPreTrainedModel=__webpack_exports__.GemmaPreTrainedModel,__webpack_exports__GemmaTokenizer=__webpack_exports__.GemmaTokenizer,__webpack_exports__GlmForCausalLM=__webpack_exports__.GlmForCausalLM,__webpack_exports__GlmModel=__webpack_exports__.GlmModel,__webpack_exports__GlmPreTrainedModel=__webpack_exports__.GlmPreTrainedModel,__webpack_exports__GraniteForCausalLM=__webpack_exports__.GraniteForCausalLM,__webpack_exports__GraniteModel=__webpack_exports__.GraniteModel,__webpack_exports__GraniteMoeHybridForCausalLM=__webpack_exports__.GraniteMoeHybridForCausalLM,__webpack_exports__GraniteMoeHybridModel=__webpack_exports__.GraniteMoeHybridModel,__webpack_exports__GraniteMoeHybridPreTrainedModel=__webpack_exports__.GraniteMoeHybridPreTrainedModel,__webpack_exports__GranitePreTrainedModel=__webpack_exports__.GranitePreTrainedModel,__webpack_exports__Grok1Tokenizer=__webpack_exports__.Grok1Tokenizer,__webpack_exports__GroundingDinoForObjectDetection=__webpack_exports__.GroundingDinoForObjectDetection,__webpack_exports__GroundingDinoImageProcessor=__webpack_exports__.GroundingDinoImageProcessor,__webpack_exports__GroundingDinoPreTrainedModel=__webpack_exports__.GroundingDinoPreTrainedModel,__webpack_exports__GroundingDinoProcessor=__webpack_exports__.GroundingDinoProcessor,__webpack_exports__GroupViTModel=__webpack_exports__.GroupViTModel,__webpack_exports__GroupViTPreTrainedModel=__webpack_exports__.GroupViTPreTrainedModel,__webpack_exports__HeliumForCausalLM=__webpack_exports__.HeliumForCausalLM,__webpack_exports__HeliumModel=__webpack_exports__.HeliumModel,__webpack_exports__HeliumPreTrainedModel=__webpack_exports__.HeliumPreTrainedModel,__webpack_exports__HerbertTokenizer=__webpack_exports__.HerbertTokenizer,__webpack_exports__HieraForImageClassification=__webpack_exports__.HieraForImageClassification,__webpack_exports__HieraModel=__webpack_exports__.HieraModel,__webpack_exports__HieraPreTrainedModel=__webpack_exports__.HieraPreTrainedModel,__webpack_exports__HubertForCTC=__webpack_exports__.HubertForCTC,__webpack_exports__HubertForSequenceClassification=__webpack_exports__.HubertForSequenceClassification,__webpack_exports__HubertModel=__webpack_exports__.HubertModel,__webpack_exports__HubertPreTrainedModel=__webpack_exports__.HubertPreTrainedModel,__webpack_exports__IJepaForImageClassification=__webpack_exports__.IJepaForImageClassification,__webpack_exports__IJepaModel=__webpack_exports__.IJepaModel,__webpack_exports__IJepaPreTrainedModel=__webpack_exports__.IJepaPreTrainedModel,__webpack_exports__Idefics3ForConditionalGeneration=__webpack_exports__.Idefics3ForConditionalGeneration,__webpack_exports__Idefics3ImageProcessor=__webpack_exports__.Idefics3ImageProcessor,__webpack_exports__Idefics3PreTrainedModel=__webpack_exports__.Idefics3PreTrainedModel,__webpack_exports__Idefics3Processor=__webpack_exports__.Idefics3Processor,__webpack_exports__ImageClassificationPipeline=__webpack_exports__.ImageClassificationPipeline,__webpack_exports__ImageFeatureExtractionPipeline=__webpack_exports__.ImageFeatureExtractionPipeline,__webpack_exports__ImageFeatureExtractor=__webpack_exports__.ImageFeatureExtractor,__webpack_exports__ImageMattingOutput=__webpack_exports__.ImageMattingOutput,__webpack_exports__ImageProcessor=__webpack_exports__.ImageProcessor,__webpack_exports__ImageSegmentationPipeline=__webpack_exports__.ImageSegmentationPipeline,__webpack_exports__ImageToImagePipeline=__webpack_exports__.ImageToImagePipeline,__webpack_exports__ImageToTextPipeline=__webpack_exports__.ImageToTextPipeline,__webpack_exports__InterruptableStoppingCriteria=__webpack_exports__.InterruptableStoppingCriteria,__webpack_exports__JAISLMHeadModel=__webpack_exports__.JAISLMHeadModel,__webpack_exports__JAISModel=__webpack_exports__.JAISModel,__webpack_exports__JAISPreTrainedModel=__webpack_exports__.JAISPreTrainedModel,__webpack_exports__JinaCLIPImageProcessor=__webpack_exports__.JinaCLIPImageProcessor,__webpack_exports__JinaCLIPModel=__webpack_exports__.JinaCLIPModel,__webpack_exports__JinaCLIPPreTrainedModel=__webpack_exports__.JinaCLIPPreTrainedModel,__webpack_exports__JinaCLIPProcessor=__webpack_exports__.JinaCLIPProcessor,__webpack_exports__JinaCLIPTextModel=__webpack_exports__.JinaCLIPTextModel,__webpack_exports__JinaCLIPVisionModel=__webpack_exports__.JinaCLIPVisionModel,__webpack_exports__Lfm2ForCausalLM=__webpack_exports__.Lfm2ForCausalLM,__webpack_exports__Lfm2Model=__webpack_exports__.Lfm2Model,__webpack_exports__Lfm2PreTrainedModel=__webpack_exports__.Lfm2PreTrainedModel,__webpack_exports__LiteWhisperForConditionalGeneration=__webpack_exports__.LiteWhisperForConditionalGeneration,__webpack_exports__Llama4ForCausalLM=__webpack_exports__.Llama4ForCausalLM,__webpack_exports__Llama4PreTrainedModel=__webpack_exports__.Llama4PreTrainedModel,__webpack_exports__LlamaForCausalLM=__webpack_exports__.LlamaForCausalLM,__webpack_exports__LlamaModel=__webpack_exports__.LlamaModel,__webpack_exports__LlamaPreTrainedModel=__webpack_exports__.LlamaPreTrainedModel,__webpack_exports__LlamaTokenizer=__webpack_exports__.LlamaTokenizer,__webpack_exports__LlavaForConditionalGeneration=__webpack_exports__.LlavaForConditionalGeneration,__webpack_exports__LlavaOnevisionForConditionalGeneration=__webpack_exports__.LlavaOnevisionForConditionalGeneration,__webpack_exports__LlavaOnevisionImageProcessor=__webpack_exports__.LlavaOnevisionImageProcessor,__webpack_exports__LlavaPreTrainedModel=__webpack_exports__.LlavaPreTrainedModel,__webpack_exports__LlavaProcessor=__webpack_exports__.LlavaProcessor,__webpack_exports__LlavaQwen2ForCausalLM=__webpack_exports__.LlavaQwen2ForCausalLM,__webpack_exports__LogitsProcessor=__webpack_exports__.LogitsProcessor,__webpack_exports__LogitsProcessorList=__webpack_exports__.LogitsProcessorList,__webpack_exports__LogitsWarper=__webpack_exports__.LogitsWarper,__webpack_exports__LongT5ForConditionalGeneration=__webpack_exports__.LongT5ForConditionalGeneration,__webpack_exports__LongT5Model=__webpack_exports__.LongT5Model,__webpack_exports__LongT5PreTrainedModel=__webpack_exports__.LongT5PreTrainedModel,__webpack_exports__M2M100ForConditionalGeneration=__webpack_exports__.M2M100ForConditionalGeneration,__webpack_exports__M2M100Model=__webpack_exports__.M2M100Model,__webpack_exports__M2M100PreTrainedModel=__webpack_exports__.M2M100PreTrainedModel,__webpack_exports__M2M100Tokenizer=__webpack_exports__.M2M100Tokenizer,__webpack_exports__MBart50Tokenizer=__webpack_exports__.MBart50Tokenizer,__webpack_exports__MBartForCausalLM=__webpack_exports__.MBartForCausalLM,__webpack_exports__MBartForConditionalGeneration=__webpack_exports__.MBartForConditionalGeneration,__webpack_exports__MBartForSequenceClassification=__webpack_exports__.MBartForSequenceClassification,__webpack_exports__MBartModel=__webpack_exports__.MBartModel,__webpack_exports__MBartPreTrainedModel=__webpack_exports__.MBartPreTrainedModel,__webpack_exports__MBartTokenizer=__webpack_exports__.MBartTokenizer,__webpack_exports__MPNetForMaskedLM=__webpack_exports__.MPNetForMaskedLM,__webpack_exports__MPNetForQuestionAnswering=__webpack_exports__.MPNetForQuestionAnswering,__webpack_exports__MPNetForSequenceClassification=__webpack_exports__.MPNetForSequenceClassification,__webpack_exports__MPNetForTokenClassification=__webpack_exports__.MPNetForTokenClassification,__webpack_exports__MPNetModel=__webpack_exports__.MPNetModel,__webpack_exports__MPNetPreTrainedModel=__webpack_exports__.MPNetPreTrainedModel,__webpack_exports__MPNetTokenizer=__webpack_exports__.MPNetTokenizer,__webpack_exports__MT5ForConditionalGeneration=__webpack_exports__.MT5ForConditionalGeneration,__webpack_exports__MT5Model=__webpack_exports__.MT5Model,__webpack_exports__MT5PreTrainedModel=__webpack_exports__.MT5PreTrainedModel,__webpack_exports__MarianMTModel=__webpack_exports__.MarianMTModel,__webpack_exports__MarianModel=__webpack_exports__.MarianModel,__webpack_exports__MarianPreTrainedModel=__webpack_exports__.MarianPreTrainedModel,__webpack_exports__MarianTokenizer=__webpack_exports__.MarianTokenizer,__webpack_exports__Mask2FormerImageProcessor=__webpack_exports__.Mask2FormerImageProcessor,__webpack_exports__MaskFormerFeatureExtractor=__webpack_exports__.MaskFormerFeatureExtractor,__webpack_exports__MaskFormerForInstanceSegmentation=__webpack_exports__.MaskFormerForInstanceSegmentation,__webpack_exports__MaskFormerImageProcessor=__webpack_exports__.MaskFormerImageProcessor,__webpack_exports__MaskFormerModel=__webpack_exports__.MaskFormerModel,__webpack_exports__MaskFormerPreTrainedModel=__webpack_exports__.MaskFormerPreTrainedModel,__webpack_exports__MaskedLMOutput=__webpack_exports__.MaskedLMOutput,__webpack_exports__MaxLengthCriteria=__webpack_exports__.MaxLengthCriteria,__webpack_exports__Metric3DForDepthEstimation=__webpack_exports__.Metric3DForDepthEstimation,__webpack_exports__Metric3DPreTrainedModel=__webpack_exports__.Metric3DPreTrainedModel,__webpack_exports__Metric3Dv2ForDepthEstimation=__webpack_exports__.Metric3Dv2ForDepthEstimation,__webpack_exports__Metric3Dv2PreTrainedModel=__webpack_exports__.Metric3Dv2PreTrainedModel,__webpack_exports__MgpstrForSceneTextRecognition=__webpack_exports__.MgpstrForSceneTextRecognition,__webpack_exports__MgpstrModelOutput=__webpack_exports__.MgpstrModelOutput,__webpack_exports__MgpstrPreTrainedModel=__webpack_exports__.MgpstrPreTrainedModel,__webpack_exports__MgpstrProcessor=__webpack_exports__.MgpstrProcessor,__webpack_exports__MgpstrTokenizer=__webpack_exports__.MgpstrTokenizer,__webpack_exports__MimiDecoderModel=__webpack_exports__.MimiDecoderModel,__webpack_exports__MimiDecoderOutput=__webpack_exports__.MimiDecoderOutput,__webpack_exports__MimiEncoderModel=__webpack_exports__.MimiEncoderModel,__webpack_exports__MimiEncoderOutput=__webpack_exports__.MimiEncoderOutput,__webpack_exports__MimiModel=__webpack_exports__.MimiModel,__webpack_exports__MimiPreTrainedModel=__webpack_exports__.MimiPreTrainedModel,__webpack_exports__MinLengthLogitsProcessor=__webpack_exports__.MinLengthLogitsProcessor,__webpack_exports__MinNewTokensLengthLogitsProcessor=__webpack_exports__.MinNewTokensLengthLogitsProcessor,__webpack_exports__MistralForCausalLM=__webpack_exports__.MistralForCausalLM,__webpack_exports__MistralModel=__webpack_exports__.MistralModel,__webpack_exports__MistralPreTrainedModel=__webpack_exports__.MistralPreTrainedModel,__webpack_exports__MobileBertForMaskedLM=__webpack_exports__.MobileBertForMaskedLM,__webpack_exports__MobileBertForQuestionAnswering=__webpack_exports__.MobileBertForQuestionAnswering,__webpack_exports__MobileBertForSequenceClassification=__webpack_exports__.MobileBertForSequenceClassification,__webpack_exports__MobileBertModel=__webpack_exports__.MobileBertModel,__webpack_exports__MobileBertPreTrainedModel=__webpack_exports__.MobileBertPreTrainedModel,__webpack_exports__MobileBertTokenizer=__webpack_exports__.MobileBertTokenizer,__webpack_exports__MobileLLMForCausalLM=__webpack_exports__.MobileLLMForCausalLM,__webpack_exports__MobileLLMModel=__webpack_exports__.MobileLLMModel,__webpack_exports__MobileLLMPreTrainedModel=__webpack_exports__.MobileLLMPreTrainedModel,__webpack_exports__MobileNetV1FeatureExtractor=__webpack_exports__.MobileNetV1FeatureExtractor,__webpack_exports__MobileNetV1ForImageClassification=__webpack_exports__.MobileNetV1ForImageClassification,__webpack_exports__MobileNetV1ForSemanticSegmentation=__webpack_exports__.MobileNetV1ForSemanticSegmentation,__webpack_exports__MobileNetV1ImageProcessor=__webpack_exports__.MobileNetV1ImageProcessor,__webpack_exports__MobileNetV1Model=__webpack_exports__.MobileNetV1Model,__webpack_exports__MobileNetV1PreTrainedModel=__webpack_exports__.MobileNetV1PreTrainedModel,__webpack_exports__MobileNetV2FeatureExtractor=__webpack_exports__.MobileNetV2FeatureExtractor,__webpack_exports__MobileNetV2ForImageClassification=__webpack_exports__.MobileNetV2ForImageClassification,__webpack_exports__MobileNetV2ForSemanticSegmentation=__webpack_exports__.MobileNetV2ForSemanticSegmentation,__webpack_exports__MobileNetV2ImageProcessor=__webpack_exports__.MobileNetV2ImageProcessor,__webpack_exports__MobileNetV2Model=__webpack_exports__.MobileNetV2Model,__webpack_exports__MobileNetV2PreTrainedModel=__webpack_exports__.MobileNetV2PreTrainedModel,__webpack_exports__MobileNetV3FeatureExtractor=__webpack_exports__.MobileNetV3FeatureExtractor,__webpack_exports__MobileNetV3ForImageClassification=__webpack_exports__.MobileNetV3ForImageClassification,__webpack_exports__MobileNetV3ForSemanticSegmentation=__webpack_exports__.MobileNetV3ForSemanticSegmentation,__webpack_exports__MobileNetV3ImageProcessor=__webpack_exports__.MobileNetV3ImageProcessor,__webpack_exports__MobileNetV3Model=__webpack_exports__.MobileNetV3Model,__webpack_exports__MobileNetV3PreTrainedModel=__webpack_exports__.MobileNetV3PreTrainedModel,__webpack_exports__MobileNetV4FeatureExtractor=__webpack_exports__.MobileNetV4FeatureExtractor,__webpack_exports__MobileNetV4ForImageClassification=__webpack_exports__.MobileNetV4ForImageClassification,__webpack_exports__MobileNetV4ForSemanticSegmentation=__webpack_exports__.MobileNetV4ForSemanticSegmentation,__webpack_exports__MobileNetV4ImageProcessor=__webpack_exports__.MobileNetV4ImageProcessor,__webpack_exports__MobileNetV4Model=__webpack_exports__.MobileNetV4Model,__webpack_exports__MobileNetV4PreTrainedModel=__webpack_exports__.MobileNetV4PreTrainedModel,__webpack_exports__MobileViTFeatureExtractor=__webpack_exports__.MobileViTFeatureExtractor,__webpack_exports__MobileViTForImageClassification=__webpack_exports__.MobileViTForImageClassification,__webpack_exports__MobileViTImageProcessor=__webpack_exports__.MobileViTImageProcessor,__webpack_exports__MobileViTModel=__webpack_exports__.MobileViTModel,__webpack_exports__MobileViTPreTrainedModel=__webpack_exports__.MobileViTPreTrainedModel,__webpack_exports__MobileViTV2ForImageClassification=__webpack_exports__.MobileViTV2ForImageClassification,__webpack_exports__MobileViTV2Model=__webpack_exports__.MobileViTV2Model,__webpack_exports__MobileViTV2PreTrainedModel=__webpack_exports__.MobileViTV2PreTrainedModel,__webpack_exports__ModelOutput=__webpack_exports__.ModelOutput,__webpack_exports__ModernBertDecoderForCausalLM=__webpack_exports__.ModernBertDecoderForCausalLM,__webpack_exports__ModernBertDecoderModel=__webpack_exports__.ModernBertDecoderModel,__webpack_exports__ModernBertDecoderPreTrainedModel=__webpack_exports__.ModernBertDecoderPreTrainedModel,__webpack_exports__ModernBertForMaskedLM=__webpack_exports__.ModernBertForMaskedLM,__webpack_exports__ModernBertForSequenceClassification=__webpack_exports__.ModernBertForSequenceClassification,__webpack_exports__ModernBertForTokenClassification=__webpack_exports__.ModernBertForTokenClassification,__webpack_exports__ModernBertModel=__webpack_exports__.ModernBertModel,__webpack_exports__ModernBertPreTrainedModel=__webpack_exports__.ModernBertPreTrainedModel,__webpack_exports__Moondream1ForConditionalGeneration=__webpack_exports__.Moondream1ForConditionalGeneration,__webpack_exports__MoonshineFeatureExtractor=__webpack_exports__.MoonshineFeatureExtractor,__webpack_exports__MoonshineForConditionalGeneration=__webpack_exports__.MoonshineForConditionalGeneration,__webpack_exports__MoonshineModel=__webpack_exports__.MoonshineModel,__webpack_exports__MoonshinePreTrainedModel=__webpack_exports__.MoonshinePreTrainedModel,__webpack_exports__MoonshineProcessor=__webpack_exports__.MoonshineProcessor,__webpack_exports__MptForCausalLM=__webpack_exports__.MptForCausalLM,__webpack_exports__MptModel=__webpack_exports__.MptModel,__webpack_exports__MptPreTrainedModel=__webpack_exports__.MptPreTrainedModel,__webpack_exports__MultiModalityCausalLM=__webpack_exports__.MultiModalityCausalLM,__webpack_exports__MultiModalityPreTrainedModel=__webpack_exports__.MultiModalityPreTrainedModel,__webpack_exports__MusicgenForCausalLM=__webpack_exports__.MusicgenForCausalLM,__webpack_exports__MusicgenForConditionalGeneration=__webpack_exports__.MusicgenForConditionalGeneration,__webpack_exports__MusicgenModel=__webpack_exports__.MusicgenModel,__webpack_exports__MusicgenPreTrainedModel=__webpack_exports__.MusicgenPreTrainedModel,__webpack_exports__NeoBertForMaskedLM=__webpack_exports__.NeoBertForMaskedLM,__webpack_exports__NeoBertForQuestionAnswering=__webpack_exports__.NeoBertForQuestionAnswering,__webpack_exports__NeoBertForSequenceClassification=__webpack_exports__.NeoBertForSequenceClassification,__webpack_exports__NeoBertForTokenClassification=__webpack_exports__.NeoBertForTokenClassification,__webpack_exports__NeoBertModel=__webpack_exports__.NeoBertModel,__webpack_exports__NeoBertPreTrainedModel=__webpack_exports__.NeoBertPreTrainedModel,__webpack_exports__NllbTokenizer=__webpack_exports__.NllbTokenizer,__webpack_exports__NoBadWordsLogitsProcessor=__webpack_exports__.NoBadWordsLogitsProcessor,__webpack_exports__NoRepeatNGramLogitsProcessor=__webpack_exports__.NoRepeatNGramLogitsProcessor,__webpack_exports__NomicBertModel=__webpack_exports__.NomicBertModel,__webpack_exports__NomicBertPreTrainedModel=__webpack_exports__.NomicBertPreTrainedModel,__webpack_exports__NougatImageProcessor=__webpack_exports__.NougatImageProcessor,__webpack_exports__NougatTokenizer=__webpack_exports__.NougatTokenizer,__webpack_exports__OPTForCausalLM=__webpack_exports__.OPTForCausalLM,__webpack_exports__OPTModel=__webpack_exports__.OPTModel,__webpack_exports__OPTPreTrainedModel=__webpack_exports__.OPTPreTrainedModel,__webpack_exports__ObjectDetectionPipeline=__webpack_exports__.ObjectDetectionPipeline,__webpack_exports__Olmo2ForCausalLM=__webpack_exports__.Olmo2ForCausalLM,__webpack_exports__Olmo2Model=__webpack_exports__.Olmo2Model,__webpack_exports__Olmo2PreTrainedModel=__webpack_exports__.Olmo2PreTrainedModel,__webpack_exports__OlmoForCausalLM=__webpack_exports__.OlmoForCausalLM,__webpack_exports__OlmoModel=__webpack_exports__.OlmoModel,__webpack_exports__OlmoPreTrainedModel=__webpack_exports__.OlmoPreTrainedModel,__webpack_exports__OpenELMForCausalLM=__webpack_exports__.OpenELMForCausalLM,__webpack_exports__OpenELMModel=__webpack_exports__.OpenELMModel,__webpack_exports__OpenELMPreTrainedModel=__webpack_exports__.OpenELMPreTrainedModel,__webpack_exports__OwlViTFeatureExtractor=__webpack_exports__.OwlViTFeatureExtractor,__webpack_exports__OwlViTForObjectDetection=__webpack_exports__.OwlViTForObjectDetection,__webpack_exports__OwlViTImageProcessor=__webpack_exports__.OwlViTImageProcessor,__webpack_exports__OwlViTModel=__webpack_exports__.OwlViTModel,__webpack_exports__OwlViTPreTrainedModel=__webpack_exports__.OwlViTPreTrainedModel,__webpack_exports__OwlViTProcessor=__webpack_exports__.OwlViTProcessor,__webpack_exports__Owlv2ForObjectDetection=__webpack_exports__.Owlv2ForObjectDetection,__webpack_exports__Owlv2ImageProcessor=__webpack_exports__.Owlv2ImageProcessor,__webpack_exports__Owlv2Model=__webpack_exports__.Owlv2Model,__webpack_exports__Owlv2PreTrainedModel=__webpack_exports__.Owlv2PreTrainedModel,__webpack_exports__PaliGemmaForConditionalGeneration=__webpack_exports__.PaliGemmaForConditionalGeneration,__webpack_exports__PaliGemmaPreTrainedModel=__webpack_exports__.PaliGemmaPreTrainedModel,__webpack_exports__PaliGemmaProcessor=__webpack_exports__.PaliGemmaProcessor,__webpack_exports__PatchTSMixerForPrediction=__webpack_exports__.PatchTSMixerForPrediction,__webpack_exports__PatchTSMixerModel=__webpack_exports__.PatchTSMixerModel,__webpack_exports__PatchTSMixerPreTrainedModel=__webpack_exports__.PatchTSMixerPreTrainedModel,__webpack_exports__PatchTSTForPrediction=__webpack_exports__.PatchTSTForPrediction,__webpack_exports__PatchTSTModel=__webpack_exports__.PatchTSTModel,__webpack_exports__PatchTSTPreTrainedModel=__webpack_exports__.PatchTSTPreTrainedModel,__webpack_exports__Phi3ForCausalLM=__webpack_exports__.Phi3ForCausalLM,__webpack_exports__Phi3Model=__webpack_exports__.Phi3Model,__webpack_exports__Phi3PreTrainedModel=__webpack_exports__.Phi3PreTrainedModel,__webpack_exports__Phi3VForCausalLM=__webpack_exports__.Phi3VForCausalLM,__webpack_exports__Phi3VImageProcessor=__webpack_exports__.Phi3VImageProcessor,__webpack_exports__Phi3VPreTrainedModel=__webpack_exports__.Phi3VPreTrainedModel,__webpack_exports__Phi3VProcessor=__webpack_exports__.Phi3VProcessor,__webpack_exports__PhiForCausalLM=__webpack_exports__.PhiForCausalLM,__webpack_exports__PhiModel=__webpack_exports__.PhiModel,__webpack_exports__PhiPreTrainedModel=__webpack_exports__.PhiPreTrainedModel,__webpack_exports__Pipeline=__webpack_exports__.Pipeline,__webpack_exports__PreTrainedModel=__webpack_exports__.PreTrainedModel,__webpack_exports__PreTrainedTokenizer=__webpack_exports__.PreTrainedTokenizer,__webpack_exports__PretrainedConfig=__webpack_exports__.PretrainedConfig,__webpack_exports__PretrainedMixin=__webpack_exports__.PretrainedMixin,__webpack_exports__Processor=__webpack_exports__.Processor,__webpack_exports__PvtForImageClassification=__webpack_exports__.PvtForImageClassification,__webpack_exports__PvtImageProcessor=__webpack_exports__.PvtImageProcessor,__webpack_exports__PvtModel=__webpack_exports__.PvtModel,__webpack_exports__PvtPreTrainedModel=__webpack_exports__.PvtPreTrainedModel,__webpack_exports__PyAnnoteFeatureExtractor=__webpack_exports__.PyAnnoteFeatureExtractor,__webpack_exports__PyAnnoteForAudioFrameClassification=__webpack_exports__.PyAnnoteForAudioFrameClassification,__webpack_exports__PyAnnoteModel=__webpack_exports__.PyAnnoteModel,__webpack_exports__PyAnnotePreTrainedModel=__webpack_exports__.PyAnnotePreTrainedModel,__webpack_exports__PyAnnoteProcessor=__webpack_exports__.PyAnnoteProcessor,__webpack_exports__QuestionAnsweringModelOutput=__webpack_exports__.QuestionAnsweringModelOutput,__webpack_exports__QuestionAnsweringPipeline=__webpack_exports__.QuestionAnsweringPipeline,__webpack_exports__Qwen2ForCausalLM=__webpack_exports__.Qwen2ForCausalLM,__webpack_exports__Qwen2Model=__webpack_exports__.Qwen2Model,__webpack_exports__Qwen2PreTrainedModel=__webpack_exports__.Qwen2PreTrainedModel,__webpack_exports__Qwen2Tokenizer=__webpack_exports__.Qwen2Tokenizer,__webpack_exports__Qwen2VLForConditionalGeneration=__webpack_exports__.Qwen2VLForConditionalGeneration,__webpack_exports__Qwen2VLImageProcessor=__webpack_exports__.Qwen2VLImageProcessor,__webpack_exports__Qwen2VLPreTrainedModel=__webpack_exports__.Qwen2VLPreTrainedModel,__webpack_exports__Qwen2VLProcessor=__webpack_exports__.Qwen2VLProcessor,__webpack_exports__Qwen3ForCausalLM=__webpack_exports__.Qwen3ForCausalLM,__webpack_exports__Qwen3Model=__webpack_exports__.Qwen3Model,__webpack_exports__Qwen3PreTrainedModel=__webpack_exports__.Qwen3PreTrainedModel,__webpack_exports__RFDetrForObjectDetection=__webpack_exports__.RFDetrForObjectDetection,__webpack_exports__RFDetrModel=__webpack_exports__.RFDetrModel,__webpack_exports__RFDetrObjectDetectionOutput=__webpack_exports__.RFDetrObjectDetectionOutput,__webpack_exports__RFDetrPreTrainedModel=__webpack_exports__.RFDetrPreTrainedModel,__webpack_exports__RTDetrForObjectDetection=__webpack_exports__.RTDetrForObjectDetection,__webpack_exports__RTDetrImageProcessor=__webpack_exports__.RTDetrImageProcessor,__webpack_exports__RTDetrModel=__webpack_exports__.RTDetrModel,__webpack_exports__RTDetrObjectDetectionOutput=__webpack_exports__.RTDetrObjectDetectionOutput,__webpack_exports__RTDetrPreTrainedModel=__webpack_exports__.RTDetrPreTrainedModel,__webpack_exports__RTDetrV2ForObjectDetection=__webpack_exports__.RTDetrV2ForObjectDetection,__webpack_exports__RTDetrV2Model=__webpack_exports__.RTDetrV2Model,__webpack_exports__RTDetrV2ObjectDetectionOutput=__webpack_exports__.RTDetrV2ObjectDetectionOutput,__webpack_exports__RTDetrV2PreTrainedModel=__webpack_exports__.RTDetrV2PreTrainedModel,__webpack_exports__RawAudio=__webpack_exports__.RawAudio,__webpack_exports__RawImage=__webpack_exports__.RawImage,__webpack_exports__RawVideo=__webpack_exports__.RawVideo,__webpack_exports__RawVideoFrame=__webpack_exports__.RawVideoFrame,__webpack_exports__RepetitionPenaltyLogitsProcessor=__webpack_exports__.RepetitionPenaltyLogitsProcessor,__webpack_exports__ResNetForImageClassification=__webpack_exports__.ResNetForImageClassification,__webpack_exports__ResNetModel=__webpack_exports__.ResNetModel,__webpack_exports__ResNetPreTrainedModel=__webpack_exports__.ResNetPreTrainedModel,__webpack_exports__RoFormerForMaskedLM=__webpack_exports__.RoFormerForMaskedLM,__webpack_exports__RoFormerForQuestionAnswering=__webpack_exports__.RoFormerForQuestionAnswering,__webpack_exports__RoFormerForSequenceClassification=__webpack_exports__.RoFormerForSequenceClassification,__webpack_exports__RoFormerForTokenClassification=__webpack_exports__.RoFormerForTokenClassification,__webpack_exports__RoFormerModel=__webpack_exports__.RoFormerModel,__webpack_exports__RoFormerPreTrainedModel=__webpack_exports__.RoFormerPreTrainedModel,__webpack_exports__RoFormerTokenizer=__webpack_exports__.RoFormerTokenizer,__webpack_exports__RobertaForMaskedLM=__webpack_exports__.RobertaForMaskedLM,__webpack_exports__RobertaForQuestionAnswering=__webpack_exports__.RobertaForQuestionAnswering,__webpack_exports__RobertaForSequenceClassification=__webpack_exports__.RobertaForSequenceClassification,__webpack_exports__RobertaForTokenClassification=__webpack_exports__.RobertaForTokenClassification,__webpack_exports__RobertaModel=__webpack_exports__.RobertaModel,__webpack_exports__RobertaPreTrainedModel=__webpack_exports__.RobertaPreTrainedModel,__webpack_exports__RobertaTokenizer=__webpack_exports__.RobertaTokenizer,__webpack_exports__SamImageProcessor=__webpack_exports__.SamImageProcessor,__webpack_exports__SamImageSegmentationOutput=__webpack_exports__.SamImageSegmentationOutput,__webpack_exports__SamModel=__webpack_exports__.SamModel,__webpack_exports__SamPreTrainedModel=__webpack_exports__.SamPreTrainedModel,__webpack_exports__SamProcessor=__webpack_exports__.SamProcessor,__webpack_exports__SapiensForDepthEstimation=__webpack_exports__.SapiensForDepthEstimation,__webpack_exports__SapiensForNormalEstimation=__webpack_exports__.SapiensForNormalEstimation,__webpack_exports__SapiensForSemanticSegmentation=__webpack_exports__.SapiensForSemanticSegmentation,__webpack_exports__SapiensPreTrainedModel=__webpack_exports__.SapiensPreTrainedModel,__webpack_exports__SeamlessM4TFeatureExtractor=__webpack_exports__.SeamlessM4TFeatureExtractor,__webpack_exports__SegformerFeatureExtractor=__webpack_exports__.SegformerFeatureExtractor,__webpack_exports__SegformerForImageClassification=__webpack_exports__.SegformerForImageClassification,__webpack_exports__SegformerForSemanticSegmentation=__webpack_exports__.SegformerForSemanticSegmentation,__webpack_exports__SegformerImageProcessor=__webpack_exports__.SegformerImageProcessor,__webpack_exports__SegformerModel=__webpack_exports__.SegformerModel,__webpack_exports__SegformerPreTrainedModel=__webpack_exports__.SegformerPreTrainedModel,__webpack_exports__Seq2SeqLMOutput=__webpack_exports__.Seq2SeqLMOutput,__webpack_exports__SequenceClassifierOutput=__webpack_exports__.SequenceClassifierOutput,__webpack_exports__SiglipImageProcessor=__webpack_exports__.SiglipImageProcessor,__webpack_exports__SiglipModel=__webpack_exports__.SiglipModel,__webpack_exports__SiglipPreTrainedModel=__webpack_exports__.SiglipPreTrainedModel,__webpack_exports__SiglipTextModel=__webpack_exports__.SiglipTextModel,__webpack_exports__SiglipTokenizer=__webpack_exports__.SiglipTokenizer,__webpack_exports__SiglipVisionModel=__webpack_exports__.SiglipVisionModel,__webpack_exports__SmolLM3ForCausalLM=__webpack_exports__.SmolLM3ForCausalLM,__webpack_exports__SmolLM3Model=__webpack_exports__.SmolLM3Model,__webpack_exports__SmolLM3PreTrainedModel=__webpack_exports__.SmolLM3PreTrainedModel,__webpack_exports__SmolVLMForConditionalGeneration=__webpack_exports__.SmolVLMForConditionalGeneration,__webpack_exports__SmolVLMImageProcessor=__webpack_exports__.SmolVLMImageProcessor,__webpack_exports__SmolVLMProcessor=__webpack_exports__.SmolVLMProcessor,__webpack_exports__SnacDecoderModel=__webpack_exports__.SnacDecoderModel,__webpack_exports__SnacEncoderModel=__webpack_exports__.SnacEncoderModel,__webpack_exports__SnacFeatureExtractor=__webpack_exports__.SnacFeatureExtractor,__webpack_exports__SnacModel=__webpack_exports__.SnacModel,__webpack_exports__SnacPreTrainedModel=__webpack_exports__.SnacPreTrainedModel,__webpack_exports__SpeechT5FeatureExtractor=__webpack_exports__.SpeechT5FeatureExtractor,__webpack_exports__SpeechT5ForSpeechToText=__webpack_exports__.SpeechT5ForSpeechToText,__webpack_exports__SpeechT5ForTextToSpeech=__webpack_exports__.SpeechT5ForTextToSpeech,__webpack_exports__SpeechT5HifiGan=__webpack_exports__.SpeechT5HifiGan,__webpack_exports__SpeechT5Model=__webpack_exports__.SpeechT5Model,__webpack_exports__SpeechT5PreTrainedModel=__webpack_exports__.SpeechT5PreTrainedModel,__webpack_exports__SpeechT5Processor=__webpack_exports__.SpeechT5Processor,__webpack_exports__SpeechT5Tokenizer=__webpack_exports__.SpeechT5Tokenizer,__webpack_exports__SqueezeBertForMaskedLM=__webpack_exports__.SqueezeBertForMaskedLM,__webpack_exports__SqueezeBertForQuestionAnswering=__webpack_exports__.SqueezeBertForQuestionAnswering,__webpack_exports__SqueezeBertForSequenceClassification=__webpack_exports__.SqueezeBertForSequenceClassification,__webpack_exports__SqueezeBertModel=__webpack_exports__.SqueezeBertModel,__webpack_exports__SqueezeBertPreTrainedModel=__webpack_exports__.SqueezeBertPreTrainedModel,__webpack_exports__SqueezeBertTokenizer=__webpack_exports__.SqueezeBertTokenizer,__webpack_exports__StableLmForCausalLM=__webpack_exports__.StableLmForCausalLM,__webpack_exports__StableLmModel=__webpack_exports__.StableLmModel,__webpack_exports__StableLmPreTrainedModel=__webpack_exports__.StableLmPreTrainedModel,__webpack_exports__Starcoder2ForCausalLM=__webpack_exports__.Starcoder2ForCausalLM,__webpack_exports__Starcoder2Model=__webpack_exports__.Starcoder2Model,__webpack_exports__Starcoder2PreTrainedModel=__webpack_exports__.Starcoder2PreTrainedModel,__webpack_exports__StoppingCriteria=__webpack_exports__.StoppingCriteria,__webpack_exports__StoppingCriteriaList=__webpack_exports__.StoppingCriteriaList,__webpack_exports__StyleTextToSpeech2Model=__webpack_exports__.StyleTextToSpeech2Model,__webpack_exports__StyleTextToSpeech2PreTrainedModel=__webpack_exports__.StyleTextToSpeech2PreTrainedModel,__webpack_exports__SummarizationPipeline=__webpack_exports__.SummarizationPipeline,__webpack_exports__SuppressTokensAtBeginLogitsProcessor=__webpack_exports__.SuppressTokensAtBeginLogitsProcessor,__webpack_exports__Swin2SRForImageSuperResolution=__webpack_exports__.Swin2SRForImageSuperResolution,__webpack_exports__Swin2SRImageProcessor=__webpack_exports__.Swin2SRImageProcessor,__webpack_exports__Swin2SRModel=__webpack_exports__.Swin2SRModel,__webpack_exports__Swin2SRPreTrainedModel=__webpack_exports__.Swin2SRPreTrainedModel,__webpack_exports__SwinForImageClassification=__webpack_exports__.SwinForImageClassification,__webpack_exports__SwinForSemanticSegmentation=__webpack_exports__.SwinForSemanticSegmentation,__webpack_exports__SwinModel=__webpack_exports__.SwinModel,__webpack_exports__SwinPreTrainedModel=__webpack_exports__.SwinPreTrainedModel,__webpack_exports__T5ForConditionalGeneration=__webpack_exports__.T5ForConditionalGeneration,__webpack_exports__T5Model=__webpack_exports__.T5Model,__webpack_exports__T5PreTrainedModel=__webpack_exports__.T5PreTrainedModel,__webpack_exports__T5Tokenizer=__webpack_exports__.T5Tokenizer,__webpack_exports__TableTransformerForObjectDetection=__webpack_exports__.TableTransformerForObjectDetection,__webpack_exports__TableTransformerModel=__webpack_exports__.TableTransformerModel,__webpack_exports__TableTransformerObjectDetectionOutput=__webpack_exports__.TableTransformerObjectDetectionOutput,__webpack_exports__TableTransformerPreTrainedModel=__webpack_exports__.TableTransformerPreTrainedModel,__webpack_exports__TemperatureLogitsWarper=__webpack_exports__.TemperatureLogitsWarper,__webpack_exports__Tensor=__webpack_exports__.Tensor,__webpack_exports__Text2TextGenerationPipeline=__webpack_exports__.Text2TextGenerationPipeline,__webpack_exports__TextClassificationPipeline=__webpack_exports__.TextClassificationPipeline,__webpack_exports__TextGenerationPipeline=__webpack_exports__.TextGenerationPipeline,__webpack_exports__TextStreamer=__webpack_exports__.TextStreamer,__webpack_exports__TextToAudioPipeline=__webpack_exports__.TextToAudioPipeline,__webpack_exports__TokenClassificationPipeline=__webpack_exports__.TokenClassificationPipeline,__webpack_exports__TokenClassifierOutput=__webpack_exports__.TokenClassifierOutput,__webpack_exports__TokenizerModel=__webpack_exports__.TokenizerModel,__webpack_exports__TopKLogitsWarper=__webpack_exports__.TopKLogitsWarper,__webpack_exports__TopPLogitsWarper=__webpack_exports__.TopPLogitsWarper,__webpack_exports__TrOCRForCausalLM=__webpack_exports__.TrOCRForCausalLM,__webpack_exports__TrOCRPreTrainedModel=__webpack_exports__.TrOCRPreTrainedModel,__webpack_exports__TranslationPipeline=__webpack_exports__.TranslationPipeline,__webpack_exports__UltravoxModel=__webpack_exports__.UltravoxModel,__webpack_exports__UltravoxPreTrainedModel=__webpack_exports__.UltravoxPreTrainedModel,__webpack_exports__UltravoxProcessor=__webpack_exports__.UltravoxProcessor,__webpack_exports__UniSpeechForCTC=__webpack_exports__.UniSpeechForCTC,__webpack_exports__UniSpeechForSequenceClassification=__webpack_exports__.UniSpeechForSequenceClassification,__webpack_exports__UniSpeechModel=__webpack_exports__.UniSpeechModel,__webpack_exports__UniSpeechPreTrainedModel=__webpack_exports__.UniSpeechPreTrainedModel,__webpack_exports__UniSpeechSatForAudioFrameClassification=__webpack_exports__.UniSpeechSatForAudioFrameClassification,__webpack_exports__UniSpeechSatForCTC=__webpack_exports__.UniSpeechSatForCTC,__webpack_exports__UniSpeechSatForSequenceClassification=__webpack_exports__.UniSpeechSatForSequenceClassification,__webpack_exports__UniSpeechSatModel=__webpack_exports__.UniSpeechSatModel,__webpack_exports__UniSpeechSatPreTrainedModel=__webpack_exports__.UniSpeechSatPreTrainedModel,__webpack_exports__VLChatProcessor=__webpack_exports__.VLChatProcessor,__webpack_exports__VLMImageProcessor=__webpack_exports__.VLMImageProcessor,__webpack_exports__VaultGemmaForCausalLM=__webpack_exports__.VaultGemmaForCausalLM,__webpack_exports__VaultGemmaModel=__webpack_exports__.VaultGemmaModel,__webpack_exports__VaultGemmaPreTrainedModel=__webpack_exports__.VaultGemmaPreTrainedModel,__webpack_exports__ViTFeatureExtractor=__webpack_exports__.ViTFeatureExtractor,__webpack_exports__ViTForImageClassification=__webpack_exports__.ViTForImageClassification,__webpack_exports__ViTImageProcessor=__webpack_exports__.ViTImageProcessor,__webpack_exports__ViTMAEModel=__webpack_exports__.ViTMAEModel,__webpack_exports__ViTMAEPreTrainedModel=__webpack_exports__.ViTMAEPreTrainedModel,__webpack_exports__ViTMSNForImageClassification=__webpack_exports__.ViTMSNForImageClassification,__webpack_exports__ViTMSNModel=__webpack_exports__.ViTMSNModel,__webpack_exports__ViTMSNPreTrainedModel=__webpack_exports__.ViTMSNPreTrainedModel,__webpack_exports__ViTModel=__webpack_exports__.ViTModel,__webpack_exports__ViTPreTrainedModel=__webpack_exports__.ViTPreTrainedModel,__webpack_exports__VisionEncoderDecoderModel=__webpack_exports__.VisionEncoderDecoderModel,__webpack_exports__VitMatteForImageMatting=__webpack_exports__.VitMatteForImageMatting,__webpack_exports__VitMatteImageProcessor=__webpack_exports__.VitMatteImageProcessor,__webpack_exports__VitMattePreTrainedModel=__webpack_exports__.VitMattePreTrainedModel,__webpack_exports__VitPoseForPoseEstimation=__webpack_exports__.VitPoseForPoseEstimation,__webpack_exports__VitPoseImageProcessor=__webpack_exports__.VitPoseImageProcessor,__webpack_exports__VitPosePreTrainedModel=__webpack_exports__.VitPosePreTrainedModel,__webpack_exports__VitsModel=__webpack_exports__.VitsModel,__webpack_exports__VitsModelOutput=__webpack_exports__.VitsModelOutput,__webpack_exports__VitsPreTrainedModel=__webpack_exports__.VitsPreTrainedModel,__webpack_exports__VitsTokenizer=__webpack_exports__.VitsTokenizer,__webpack_exports__VoxtralForConditionalGeneration=__webpack_exports__.VoxtralForConditionalGeneration,__webpack_exports__VoxtralProcessor=__webpack_exports__.VoxtralProcessor,__webpack_exports__Wav2Vec2BertForCTC=__webpack_exports__.Wav2Vec2BertForCTC,__webpack_exports__Wav2Vec2BertForSequenceClassification=__webpack_exports__.Wav2Vec2BertForSequenceClassification,__webpack_exports__Wav2Vec2BertModel=__webpack_exports__.Wav2Vec2BertModel,__webpack_exports__Wav2Vec2BertPreTrainedModel=__webpack_exports__.Wav2Vec2BertPreTrainedModel,__webpack_exports__Wav2Vec2CTCTokenizer=__webpack_exports__.Wav2Vec2CTCTokenizer,__webpack_exports__Wav2Vec2FeatureExtractor=__webpack_exports__.Wav2Vec2FeatureExtractor,__webpack_exports__Wav2Vec2ForAudioFrameClassification=__webpack_exports__.Wav2Vec2ForAudioFrameClassification,__webpack_exports__Wav2Vec2ForCTC=__webpack_exports__.Wav2Vec2ForCTC,__webpack_exports__Wav2Vec2ForSequenceClassification=__webpack_exports__.Wav2Vec2ForSequenceClassification,__webpack_exports__Wav2Vec2Model=__webpack_exports__.Wav2Vec2Model,__webpack_exports__Wav2Vec2PreTrainedModel=__webpack_exports__.Wav2Vec2PreTrainedModel,__webpack_exports__Wav2Vec2Processor=__webpack_exports__.Wav2Vec2Processor,__webpack_exports__Wav2Vec2ProcessorWithLM=__webpack_exports__.Wav2Vec2ProcessorWithLM,__webpack_exports__WavLMForAudioFrameClassification=__webpack_exports__.WavLMForAudioFrameClassification,__webpack_exports__WavLMForCTC=__webpack_exports__.WavLMForCTC,__webpack_exports__WavLMForSequenceClassification=__webpack_exports__.WavLMForSequenceClassification,__webpack_exports__WavLMForXVector=__webpack_exports__.WavLMForXVector,__webpack_exports__WavLMModel=__webpack_exports__.WavLMModel,__webpack_exports__WavLMPreTrainedModel=__webpack_exports__.WavLMPreTrainedModel,__webpack_exports__WeSpeakerFeatureExtractor=__webpack_exports__.WeSpeakerFeatureExtractor,__webpack_exports__WeSpeakerResNetModel=__webpack_exports__.WeSpeakerResNetModel,__webpack_exports__WeSpeakerResNetPreTrainedModel=__webpack_exports__.WeSpeakerResNetPreTrainedModel,__webpack_exports__WhisperFeatureExtractor=__webpack_exports__.WhisperFeatureExtractor,__webpack_exports__WhisperForConditionalGeneration=__webpack_exports__.WhisperForConditionalGeneration,__webpack_exports__WhisperModel=__webpack_exports__.WhisperModel,__webpack_exports__WhisperPreTrainedModel=__webpack_exports__.WhisperPreTrainedModel,__webpack_exports__WhisperProcessor=__webpack_exports__.WhisperProcessor,__webpack_exports__WhisperTextStreamer=__webpack_exports__.WhisperTextStreamer,__webpack_exports__WhisperTimeStampLogitsProcessor=__webpack_exports__.WhisperTimeStampLogitsProcessor,__webpack_exports__WhisperTokenizer=__webpack_exports__.WhisperTokenizer,__webpack_exports__XLMForQuestionAnswering=__webpack_exports__.XLMForQuestionAnswering,__webpack_exports__XLMForSequenceClassification=__webpack_exports__.XLMForSequenceClassification,__webpack_exports__XLMForTokenClassification=__webpack_exports__.XLMForTokenClassification,__webpack_exports__XLMModel=__webpack_exports__.XLMModel,__webpack_exports__XLMPreTrainedModel=__webpack_exports__.XLMPreTrainedModel,__webpack_exports__XLMRobertaForMaskedLM=__webpack_exports__.XLMRobertaForMaskedLM,__webpack_exports__XLMRobertaForQuestionAnswering=__webpack_exports__.XLMRobertaForQuestionAnswering,__webpack_exports__XLMRobertaForSequenceClassification=__webpack_exports__.XLMRobertaForSequenceClassification,__webpack_exports__XLMRobertaForTokenClassification=__webpack_exports__.XLMRobertaForTokenClassification,__webpack_exports__XLMRobertaModel=__webpack_exports__.XLMRobertaModel,__webpack_exports__XLMRobertaPreTrainedModel=__webpack_exports__.XLMRobertaPreTrainedModel,__webpack_exports__XLMRobertaTokenizer=__webpack_exports__.XLMRobertaTokenizer,__webpack_exports__XLMTokenizer=__webpack_exports__.XLMTokenizer,__webpack_exports__XLMWithLMHeadModel=__webpack_exports__.XLMWithLMHeadModel,__webpack_exports__XVectorOutput=__webpack_exports__.XVectorOutput,__webpack_exports__YolosFeatureExtractor=__webpack_exports__.YolosFeatureExtractor,__webpack_exports__YolosForObjectDetection=__webpack_exports__.YolosForObjectDetection,__webpack_exports__YolosImageProcessor=__webpack_exports__.YolosImageProcessor,__webpack_exports__YolosModel=__webpack_exports__.YolosModel,__webpack_exports__YolosObjectDetectionOutput=__webpack_exports__.YolosObjectDetectionOutput,__webpack_exports__YolosPreTrainedModel=__webpack_exports__.YolosPreTrainedModel,__webpack_exports__ZeroShotAudioClassificationPipeline=__webpack_exports__.ZeroShotAudioClassificationPipeline,__webpack_exports__ZeroShotClassificationPipeline=__webpack_exports__.ZeroShotClassificationPipeline,__webpack_exports__ZeroShotImageClassificationPipeline=__webpack_exports__.ZeroShotImageClassificationPipeline,__webpack_exports__ZeroShotObjectDetectionPipeline=__webpack_exports__.ZeroShotObjectDetectionPipeline,__webpack_exports__bankers_round=__webpack_exports__.bankers_round,__webpack_exports__cat=__webpack_exports__.cat,__webpack_exports__cos_sim=__webpack_exports__.cos_sim,__webpack_exports__dot=__webpack_exports__.dot,__webpack_exports__dynamic_time_warping=__webpack_exports__.dynamic_time_warping,__webpack_exports__env=__webpack_exports__.env,__webpack_exports__full=__webpack_exports__.full,__webpack_exports__full_like=__webpack_exports__.full_like,__webpack_exports__getCacheShapes=__webpack_exports__.getCacheShapes,__webpack_exports__hamming=__webpack_exports__.hamming,__webpack_exports__hanning=__webpack_exports__.hanning,__webpack_exports__interpolate=__webpack_exports__.interpolate,__webpack_exports__interpolate_4d=__webpack_exports__.interpolate_4d,__webpack_exports__interpolate_data=__webpack_exports__.interpolate_data,__webpack_exports__is_chinese_char=__webpack_exports__.is_chinese_char,__webpack_exports__layer_norm=__webpack_exports__.layer_norm,__webpack_exports__load_image=__webpack_exports__.load_image,__webpack_exports__load_video=__webpack_exports__.load_video,__webpack_exports__log_softmax=__webpack_exports__.log_softmax,__webpack_exports__magnitude=__webpack_exports__.magnitude,__webpack_exports__matmul=__webpack_exports__.matmul,__webpack_exports__max=__webpack_exports__.max,__webpack_exports__mean=__webpack_exports__.mean,__webpack_exports__mean_pooling=__webpack_exports__.mean_pooling,__webpack_exports__medianFilter=__webpack_exports__.medianFilter,__webpack_exports__mel_filter_bank=__webpack_exports__.mel_filter_bank,__webpack_exports__min=__webpack_exports__.min,__webpack_exports__ones=__webpack_exports__.ones,__webpack_exports__ones_like=__webpack_exports__.ones_like,__webpack_exports__permute=__webpack_exports__.permute,__webpack_exports__permute_data=__webpack_exports__.permute_data,__webpack_exports__pipeline=__webpack_exports__.pipeline,__webpack_exports__quantize_embeddings=__webpack_exports__.quantize_embeddings,__webpack_exports__rand=__webpack_exports__.rand,__webpack_exports__read_audio=__webpack_exports__.read_audio,__webpack_exports__rfft=__webpack_exports__.rfft,__webpack_exports__round=__webpack_exports__.round,__webpack_exports__slice=__webpack_exports__.slice,__webpack_exports__softmax=__webpack_exports__.softmax,__webpack_exports__spectrogram=__webpack_exports__.spectrogram,__webpack_exports__stack=__webpack_exports__.stack,__webpack_exports__std_mean=__webpack_exports__.std_mean,__webpack_exports__topk=__webpack_exports__.topk,__webpack_exports__window_function=__webpack_exports__.window_function,__webpack_exports__zeros=__webpack_exports__.zeros,__webpack_exports__zeros_like=__webpack_exports__.zeros_like;export{__webpack_exports__ASTFeatureExtractor as ASTFeatureExtractor,__webpack_exports__ASTForAudioClassification as ASTForAudioClassification,__webpack_exports__ASTModel as ASTModel,__webpack_exports__ASTPreTrainedModel as ASTPreTrainedModel,__webpack_exports__AlbertForMaskedLM as AlbertForMaskedLM,__webpack_exports__AlbertForQuestionAnswering as AlbertForQuestionAnswering,__webpack_exports__AlbertForSequenceClassification as AlbertForSequenceClassification,__webpack_exports__AlbertModel as AlbertModel,__webpack_exports__AlbertPreTrainedModel as AlbertPreTrainedModel,__webpack_exports__AlbertTokenizer as AlbertTokenizer,__webpack_exports__ArceeForCausalLM as ArceeForCausalLM,__webpack_exports__ArceeModel as ArceeModel,__webpack_exports__ArceePreTrainedModel as ArceePreTrainedModel,__webpack_exports__AudioClassificationPipeline as AudioClassificationPipeline,__webpack_exports__AutoConfig as AutoConfig,__webpack_exports__AutoFeatureExtractor as AutoFeatureExtractor,__webpack_exports__AutoImageProcessor as AutoImageProcessor,__webpack_exports__AutoModel as AutoModel,__webpack_exports__AutoModelForAudioClassification as AutoModelForAudioClassification,__webpack_exports__AutoModelForAudioFrameClassification as AutoModelForAudioFrameClassification,__webpack_exports__AutoModelForAudioTextToText as AutoModelForAudioTextToText,__webpack_exports__AutoModelForCTC as AutoModelForCTC,__webpack_exports__AutoModelForCausalLM as AutoModelForCausalLM,__webpack_exports__AutoModelForDepthEstimation as AutoModelForDepthEstimation,__webpack_exports__AutoModelForDocumentQuestionAnswering as AutoModelForDocumentQuestionAnswering,__webpack_exports__AutoModelForImageClassification as AutoModelForImageClassification,__webpack_exports__AutoModelForImageFeatureExtraction as AutoModelForImageFeatureExtraction,__webpack_exports__AutoModelForImageMatting as AutoModelForImageMatting,__webpack_exports__AutoModelForImageSegmentation as AutoModelForImageSegmentation,__webpack_exports__AutoModelForImageTextToText as AutoModelForImageTextToText,__webpack_exports__AutoModelForImageToImage as AutoModelForImageToImage,__webpack_exports__AutoModelForMaskGeneration as AutoModelForMaskGeneration,__webpack_exports__AutoModelForMaskedLM as AutoModelForMaskedLM,__webpack_exports__AutoModelForNormalEstimation as AutoModelForNormalEstimation,__webpack_exports__AutoModelForObjectDetection as AutoModelForObjectDetection,__webpack_exports__AutoModelForPoseEstimation as AutoModelForPoseEstimation,__webpack_exports__AutoModelForQuestionAnswering as AutoModelForQuestionAnswering,__webpack_exports__AutoModelForSemanticSegmentation as AutoModelForSemanticSegmentation,__webpack_exports__AutoModelForSeq2SeqLM as AutoModelForSeq2SeqLM,__webpack_exports__AutoModelForSequenceClassification as AutoModelForSequenceClassification,__webpack_exports__AutoModelForSpeechSeq2Seq as AutoModelForSpeechSeq2Seq,__webpack_exports__AutoModelForTextToSpectrogram as AutoModelForTextToSpectrogram,__webpack_exports__AutoModelForTextToWaveform as AutoModelForTextToWaveform,__webpack_exports__AutoModelForTokenClassification as AutoModelForTokenClassification,__webpack_exports__AutoModelForUniversalSegmentation as AutoModelForUniversalSegmentation,__webpack_exports__AutoModelForVision2Seq as AutoModelForVision2Seq,__webpack_exports__AutoModelForXVector as AutoModelForXVector,__webpack_exports__AutoModelForZeroShotObjectDetection as AutoModelForZeroShotObjectDetection,__webpack_exports__AutoProcessor as AutoProcessor,__webpack_exports__AutoTokenizer as AutoTokenizer,__webpack_exports__AutomaticSpeechRecognitionPipeline as AutomaticSpeechRecognitionPipeline,__webpack_exports__BackgroundRemovalPipeline as BackgroundRemovalPipeline,__webpack_exports__BartForConditionalGeneration as BartForConditionalGeneration,__webpack_exports__BartForSequenceClassification as BartForSequenceClassification,__webpack_exports__BartModel as BartModel,__webpack_exports__BartPretrainedModel as BartPretrainedModel,__webpack_exports__BartTokenizer as BartTokenizer,__webpack_exports__BaseModelOutput as BaseModelOutput,__webpack_exports__BaseStreamer as BaseStreamer,__webpack_exports__BeitFeatureExtractor as BeitFeatureExtractor,__webpack_exports__BeitForImageClassification as BeitForImageClassification,__webpack_exports__BeitModel as BeitModel,__webpack_exports__BeitPreTrainedModel as BeitPreTrainedModel,__webpack_exports__BertForMaskedLM as BertForMaskedLM,__webpack_exports__BertForQuestionAnswering as BertForQuestionAnswering,__webpack_exports__BertForSequenceClassification as BertForSequenceClassification,__webpack_exports__BertForTokenClassification as BertForTokenClassification,__webpack_exports__BertModel as BertModel,__webpack_exports__BertPreTrainedModel as BertPreTrainedModel,__webpack_exports__BertTokenizer as BertTokenizer,__webpack_exports__BitImageProcessor as BitImageProcessor,__webpack_exports__BlenderbotForConditionalGeneration as BlenderbotForConditionalGeneration,__webpack_exports__BlenderbotModel as BlenderbotModel,__webpack_exports__BlenderbotPreTrainedModel as BlenderbotPreTrainedModel,__webpack_exports__BlenderbotSmallForConditionalGeneration as BlenderbotSmallForConditionalGeneration,__webpack_exports__BlenderbotSmallModel as BlenderbotSmallModel,__webpack_exports__BlenderbotSmallPreTrainedModel as BlenderbotSmallPreTrainedModel,__webpack_exports__BlenderbotSmallTokenizer as BlenderbotSmallTokenizer,__webpack_exports__BlenderbotTokenizer as BlenderbotTokenizer,__webpack_exports__BloomForCausalLM as BloomForCausalLM,__webpack_exports__BloomModel as BloomModel,__webpack_exports__BloomPreTrainedModel as BloomPreTrainedModel,__webpack_exports__BloomTokenizer as BloomTokenizer,__webpack_exports__CLIPFeatureExtractor as CLIPFeatureExtractor,__webpack_exports__CLIPImageProcessor as CLIPImageProcessor,__webpack_exports__CLIPModel as CLIPModel,__webpack_exports__CLIPPreTrainedModel as CLIPPreTrainedModel,__webpack_exports__CLIPSegForImageSegmentation as CLIPSegForImageSegmentation,__webpack_exports__CLIPSegModel as CLIPSegModel,__webpack_exports__CLIPSegPreTrainedModel as CLIPSegPreTrainedModel,__webpack_exports__CLIPTextModel as CLIPTextModel,__webpack_exports__CLIPTextModelWithProjection as CLIPTextModelWithProjection,__webpack_exports__CLIPTokenizer as CLIPTokenizer,__webpack_exports__CLIPVisionModel as CLIPVisionModel,__webpack_exports__CLIPVisionModelWithProjection as CLIPVisionModelWithProjection,__webpack_exports__CamembertForMaskedLM as CamembertForMaskedLM,__webpack_exports__CamembertForQuestionAnswering as CamembertForQuestionAnswering,__webpack_exports__CamembertForSequenceClassification as CamembertForSequenceClassification,__webpack_exports__CamembertForTokenClassification as CamembertForTokenClassification,__webpack_exports__CamembertModel as CamembertModel,__webpack_exports__CamembertPreTrainedModel as CamembertPreTrainedModel,__webpack_exports__CamembertTokenizer as CamembertTokenizer,__webpack_exports__CausalLMOutput as CausalLMOutput,__webpack_exports__CausalLMOutputWithPast as CausalLMOutputWithPast,__webpack_exports__ChineseCLIPFeatureExtractor as ChineseCLIPFeatureExtractor,__webpack_exports__ChineseCLIPModel as ChineseCLIPModel,__webpack_exports__ChineseCLIPPreTrainedModel as ChineseCLIPPreTrainedModel,__webpack_exports__ClapAudioModelWithProjection as ClapAudioModelWithProjection,__webpack_exports__ClapFeatureExtractor as ClapFeatureExtractor,__webpack_exports__ClapModel as ClapModel,__webpack_exports__ClapPreTrainedModel as ClapPreTrainedModel,__webpack_exports__ClapTextModelWithProjection as ClapTextModelWithProjection,__webpack_exports__ClassifierFreeGuidanceLogitsProcessor as ClassifierFreeGuidanceLogitsProcessor,__webpack_exports__CodeGenForCausalLM as CodeGenForCausalLM,__webpack_exports__CodeGenModel as CodeGenModel,__webpack_exports__CodeGenPreTrainedModel as CodeGenPreTrainedModel,__webpack_exports__CodeGenTokenizer as CodeGenTokenizer,__webpack_exports__CodeLlamaTokenizer as CodeLlamaTokenizer,__webpack_exports__CohereForCausalLM as CohereForCausalLM,__webpack_exports__CohereModel as CohereModel,__webpack_exports__CoherePreTrainedModel as CoherePreTrainedModel,__webpack_exports__CohereTokenizer as CohereTokenizer,__webpack_exports__ConvBertForMaskedLM as ConvBertForMaskedLM,__webpack_exports__ConvBertForQuestionAnswering as ConvBertForQuestionAnswering,__webpack_exports__ConvBertForSequenceClassification as ConvBertForSequenceClassification,__webpack_exports__ConvBertForTokenClassification as ConvBertForTokenClassification,__webpack_exports__ConvBertModel as ConvBertModel,__webpack_exports__ConvBertPreTrainedModel as ConvBertPreTrainedModel,__webpack_exports__ConvBertTokenizer as ConvBertTokenizer,__webpack_exports__ConvNextFeatureExtractor as ConvNextFeatureExtractor,__webpack_exports__ConvNextForImageClassification as ConvNextForImageClassification,__webpack_exports__ConvNextImageProcessor as ConvNextImageProcessor,__webpack_exports__ConvNextModel as ConvNextModel,__webpack_exports__ConvNextPreTrainedModel as ConvNextPreTrainedModel,__webpack_exports__ConvNextV2ForImageClassification as ConvNextV2ForImageClassification,__webpack_exports__ConvNextV2Model as ConvNextV2Model,__webpack_exports__ConvNextV2PreTrainedModel as ConvNextV2PreTrainedModel,__webpack_exports__DFineForObjectDetection as DFineForObjectDetection,__webpack_exports__DFineModel as DFineModel,__webpack_exports__DFinePreTrainedModel as DFinePreTrainedModel,__webpack_exports__DINOv3ConvNextModel as DINOv3ConvNextModel,__webpack_exports__DINOv3ConvNextPreTrainedModel as DINOv3ConvNextPreTrainedModel,__webpack_exports__DINOv3ViTImageProcessor as DINOv3ViTImageProcessor,__webpack_exports__DINOv3ViTModel as DINOv3ViTModel,__webpack_exports__DINOv3ViTPreTrainedModel as DINOv3ViTPreTrainedModel,__webpack_exports__DPTFeatureExtractor as DPTFeatureExtractor,__webpack_exports__DPTForDepthEstimation as DPTForDepthEstimation,__webpack_exports__DPTImageProcessor as DPTImageProcessor,__webpack_exports__DPTModel as DPTModel,__webpack_exports__DPTPreTrainedModel as DPTPreTrainedModel,__webpack_exports__DacDecoderModel as DacDecoderModel,__webpack_exports__DacDecoderOutput as DacDecoderOutput,__webpack_exports__DacEncoderModel as DacEncoderModel,__webpack_exports__DacEncoderOutput as DacEncoderOutput,__webpack_exports__DacFeatureExtractor as DacFeatureExtractor,__webpack_exports__DacModel as DacModel,__webpack_exports__DacPreTrainedModel as DacPreTrainedModel,__webpack_exports__DataTypeMap as DataTypeMap,__webpack_exports__DebertaForMaskedLM as DebertaForMaskedLM,__webpack_exports__DebertaForQuestionAnswering as DebertaForQuestionAnswering,__webpack_exports__DebertaForSequenceClassification as DebertaForSequenceClassification,__webpack_exports__DebertaForTokenClassification as DebertaForTokenClassification,__webpack_exports__DebertaModel as DebertaModel,__webpack_exports__DebertaPreTrainedModel as DebertaPreTrainedModel,__webpack_exports__DebertaTokenizer as DebertaTokenizer,__webpack_exports__DebertaV2ForMaskedLM as DebertaV2ForMaskedLM,__webpack_exports__DebertaV2ForQuestionAnswering as DebertaV2ForQuestionAnswering,__webpack_exports__DebertaV2ForSequenceClassification as DebertaV2ForSequenceClassification,__webpack_exports__DebertaV2ForTokenClassification as DebertaV2ForTokenClassification,__webpack_exports__DebertaV2Model as DebertaV2Model,__webpack_exports__DebertaV2PreTrainedModel as DebertaV2PreTrainedModel,__webpack_exports__DebertaV2Tokenizer as DebertaV2Tokenizer,__webpack_exports__DecisionTransformerModel as DecisionTransformerModel,__webpack_exports__DecisionTransformerPreTrainedModel as DecisionTransformerPreTrainedModel,__webpack_exports__DeiTFeatureExtractor as DeiTFeatureExtractor,__webpack_exports__DeiTForImageClassification as DeiTForImageClassification,__webpack_exports__DeiTImageProcessor as DeiTImageProcessor,__webpack_exports__DeiTModel as DeiTModel,__webpack_exports__DeiTPreTrainedModel as DeiTPreTrainedModel,__webpack_exports__DepthAnythingForDepthEstimation as DepthAnythingForDepthEstimation,__webpack_exports__DepthAnythingPreTrainedModel as DepthAnythingPreTrainedModel,__webpack_exports__DepthEstimationPipeline as DepthEstimationPipeline,__webpack_exports__DepthProForDepthEstimation as DepthProForDepthEstimation,__webpack_exports__DepthProPreTrainedModel as DepthProPreTrainedModel,__webpack_exports__DetrFeatureExtractor as DetrFeatureExtractor,__webpack_exports__DetrForObjectDetection as DetrForObjectDetection,__webpack_exports__DetrForSegmentation as DetrForSegmentation,__webpack_exports__DetrImageProcessor as DetrImageProcessor,__webpack_exports__DetrModel as DetrModel,__webpack_exports__DetrObjectDetectionOutput as DetrObjectDetectionOutput,__webpack_exports__DetrPreTrainedModel as DetrPreTrainedModel,__webpack_exports__DetrSegmentationOutput as DetrSegmentationOutput,__webpack_exports__Dinov2ForImageClassification as Dinov2ForImageClassification,__webpack_exports__Dinov2Model as Dinov2Model,__webpack_exports__Dinov2PreTrainedModel as Dinov2PreTrainedModel,__webpack_exports__Dinov2WithRegistersForImageClassification as Dinov2WithRegistersForImageClassification,__webpack_exports__Dinov2WithRegistersModel as Dinov2WithRegistersModel,__webpack_exports__Dinov2WithRegistersPreTrainedModel as Dinov2WithRegistersPreTrainedModel,__webpack_exports__DistilBertForMaskedLM as DistilBertForMaskedLM,__webpack_exports__DistilBertForQuestionAnswering as DistilBertForQuestionAnswering,__webpack_exports__DistilBertForSequenceClassification as DistilBertForSequenceClassification,__webpack_exports__DistilBertForTokenClassification as DistilBertForTokenClassification,__webpack_exports__DistilBertModel as DistilBertModel,__webpack_exports__DistilBertPreTrainedModel as DistilBertPreTrainedModel,__webpack_exports__DistilBertTokenizer as DistilBertTokenizer,__webpack_exports__DocumentQuestionAnsweringPipeline as DocumentQuestionAnsweringPipeline,__webpack_exports__DonutFeatureExtractor as DonutFeatureExtractor,__webpack_exports__DonutImageProcessor as DonutImageProcessor,__webpack_exports__DonutSwinModel as DonutSwinModel,__webpack_exports__DonutSwinPreTrainedModel as DonutSwinPreTrainedModel,__webpack_exports__EfficientNetForImageClassification as EfficientNetForImageClassification,__webpack_exports__EfficientNetImageProcessor as EfficientNetImageProcessor,__webpack_exports__EfficientNetModel as EfficientNetModel,__webpack_exports__EfficientNetPreTrainedModel as EfficientNetPreTrainedModel,__webpack_exports__ElectraForMaskedLM as ElectraForMaskedLM,__webpack_exports__ElectraForQuestionAnswering as ElectraForQuestionAnswering,__webpack_exports__ElectraForSequenceClassification as ElectraForSequenceClassification,__webpack_exports__ElectraForTokenClassification as ElectraForTokenClassification,__webpack_exports__ElectraModel as ElectraModel,__webpack_exports__ElectraPreTrainedModel as ElectraPreTrainedModel,__webpack_exports__ElectraTokenizer as ElectraTokenizer,__webpack_exports__EncodecFeatureExtractor as EncodecFeatureExtractor,__webpack_exports__EosTokenCriteria as EosTokenCriteria,__webpack_exports__Ernie4_5_ForCausalLM as Ernie4_5_ForCausalLM,__webpack_exports__Ernie4_5_Model as Ernie4_5_Model,__webpack_exports__Ernie4_5_PretrainedModel as Ernie4_5_PretrainedModel,__webpack_exports__Ernie4_5_Tokenizer as Ernie4_5_Tokenizer,__webpack_exports__EsmForMaskedLM as EsmForMaskedLM,__webpack_exports__EsmForSequenceClassification as EsmForSequenceClassification,__webpack_exports__EsmForTokenClassification as EsmForTokenClassification,__webpack_exports__EsmModel as EsmModel,__webpack_exports__EsmPreTrainedModel as EsmPreTrainedModel,__webpack_exports__EsmTokenizer as EsmTokenizer,__webpack_exports__ExaoneForCausalLM as ExaoneForCausalLM,__webpack_exports__ExaoneModel as ExaoneModel,__webpack_exports__ExaonePreTrainedModel as ExaonePreTrainedModel,__webpack_exports__FFT as FFT,__webpack_exports__FalconForCausalLM as FalconForCausalLM,__webpack_exports__FalconModel as FalconModel,__webpack_exports__FalconPreTrainedModel as FalconPreTrainedModel,__webpack_exports__FalconTokenizer as FalconTokenizer,__webpack_exports__FastViTForImageClassification as FastViTForImageClassification,__webpack_exports__FastViTModel as FastViTModel,__webpack_exports__FastViTPreTrainedModel as FastViTPreTrainedModel,__webpack_exports__FeatureExtractionPipeline as FeatureExtractionPipeline,__webpack_exports__FeatureExtractor as FeatureExtractor,__webpack_exports__FillMaskPipeline as FillMaskPipeline,__webpack_exports__Florence2ForConditionalGeneration as Florence2ForConditionalGeneration,__webpack_exports__Florence2PreTrainedModel as Florence2PreTrainedModel,__webpack_exports__Florence2Processor as Florence2Processor,__webpack_exports__ForcedBOSTokenLogitsProcessor as ForcedBOSTokenLogitsProcessor,__webpack_exports__ForcedEOSTokenLogitsProcessor as ForcedEOSTokenLogitsProcessor,__webpack_exports__GLPNFeatureExtractor as GLPNFeatureExtractor,__webpack_exports__GLPNForDepthEstimation as GLPNForDepthEstimation,__webpack_exports__GLPNModel as GLPNModel,__webpack_exports__GLPNPreTrainedModel as GLPNPreTrainedModel,__webpack_exports__GPT2LMHeadModel as GPT2LMHeadModel,__webpack_exports__GPT2Model as GPT2Model,__webpack_exports__GPT2PreTrainedModel as GPT2PreTrainedModel,__webpack_exports__GPT2Tokenizer as GPT2Tokenizer,__webpack_exports__GPTBigCodeForCausalLM as GPTBigCodeForCausalLM,__webpack_exports__GPTBigCodeModel as GPTBigCodeModel,__webpack_exports__GPTBigCodePreTrainedModel as GPTBigCodePreTrainedModel,__webpack_exports__GPTJForCausalLM as GPTJForCausalLM,__webpack_exports__GPTJModel as GPTJModel,__webpack_exports__GPTJPreTrainedModel as GPTJPreTrainedModel,__webpack_exports__GPTNeoForCausalLM as GPTNeoForCausalLM,__webpack_exports__GPTNeoModel as GPTNeoModel,__webpack_exports__GPTNeoPreTrainedModel as GPTNeoPreTrainedModel,__webpack_exports__GPTNeoXForCausalLM as GPTNeoXForCausalLM,__webpack_exports__GPTNeoXModel as GPTNeoXModel,__webpack_exports__GPTNeoXPreTrainedModel as GPTNeoXPreTrainedModel,__webpack_exports__GPTNeoXTokenizer as GPTNeoXTokenizer,__webpack_exports__Gemma2ForCausalLM as Gemma2ForCausalLM,__webpack_exports__Gemma2Model as Gemma2Model,__webpack_exports__Gemma2PreTrainedModel as Gemma2PreTrainedModel,__webpack_exports__Gemma3ForCausalLM as Gemma3ForCausalLM,__webpack_exports__Gemma3Model as Gemma3Model,__webpack_exports__Gemma3PreTrainedModel as Gemma3PreTrainedModel,__webpack_exports__Gemma3nAudioFeatureExtractor as Gemma3nAudioFeatureExtractor,__webpack_exports__Gemma3nForConditionalGeneration as Gemma3nForConditionalGeneration,__webpack_exports__Gemma3nPreTrainedModel as Gemma3nPreTrainedModel,__webpack_exports__Gemma3nProcessor as Gemma3nProcessor,__webpack_exports__GemmaForCausalLM as GemmaForCausalLM,__webpack_exports__GemmaModel as GemmaModel,__webpack_exports__GemmaPreTrainedModel as GemmaPreTrainedModel,__webpack_exports__GemmaTokenizer as GemmaTokenizer,__webpack_exports__GlmForCausalLM as GlmForCausalLM,__webpack_exports__GlmModel as GlmModel,__webpack_exports__GlmPreTrainedModel as GlmPreTrainedModel,__webpack_exports__GraniteForCausalLM as GraniteForCausalLM,__webpack_exports__GraniteModel as GraniteModel,__webpack_exports__GraniteMoeHybridForCausalLM as GraniteMoeHybridForCausalLM,__webpack_exports__GraniteMoeHybridModel as GraniteMoeHybridModel,__webpack_exports__GraniteMoeHybridPreTrainedModel as GraniteMoeHybridPreTrainedModel,__webpack_exports__GranitePreTrainedModel as GranitePreTrainedModel,__webpack_exports__Grok1Tokenizer as Grok1Tokenizer,__webpack_exports__GroundingDinoForObjectDetection as GroundingDinoForObjectDetection,__webpack_exports__GroundingDinoImageProcessor as GroundingDinoImageProcessor,__webpack_exports__GroundingDinoPreTrainedModel as GroundingDinoPreTrainedModel,__webpack_exports__GroundingDinoProcessor as GroundingDinoProcessor,__webpack_exports__GroupViTModel as GroupViTModel,__webpack_exports__GroupViTPreTrainedModel as GroupViTPreTrainedModel,__webpack_exports__HeliumForCausalLM as HeliumForCausalLM,__webpack_exports__HeliumModel as HeliumModel,__webpack_exports__HeliumPreTrainedModel as HeliumPreTrainedModel,__webpack_exports__HerbertTokenizer as HerbertTokenizer,__webpack_exports__HieraForImageClassification as HieraForImageClassification,__webpack_exports__HieraModel as HieraModel,__webpack_exports__HieraPreTrainedModel as HieraPreTrainedModel,__webpack_exports__HubertForCTC as HubertForCTC,__webpack_exports__HubertForSequenceClassification as HubertForSequenceClassification,__webpack_exports__HubertModel as HubertModel,__webpack_exports__HubertPreTrainedModel as HubertPreTrainedModel,__webpack_exports__IJepaForImageClassification as IJepaForImageClassification,__webpack_exports__IJepaModel as IJepaModel,__webpack_exports__IJepaPreTrainedModel as IJepaPreTrainedModel,__webpack_exports__Idefics3ForConditionalGeneration as Idefics3ForConditionalGeneration,__webpack_exports__Idefics3ImageProcessor as Idefics3ImageProcessor,__webpack_exports__Idefics3PreTrainedModel as Idefics3PreTrainedModel,__webpack_exports__Idefics3Processor as Idefics3Processor,__webpack_exports__ImageClassificationPipeline as ImageClassificationPipeline,__webpack_exports__ImageFeatureExtractionPipeline as ImageFeatureExtractionPipeline,__webpack_exports__ImageFeatureExtractor as ImageFeatureExtractor,__webpack_exports__ImageMattingOutput as ImageMattingOutput,__webpack_exports__ImageProcessor as ImageProcessor,__webpack_exports__ImageSegmentationPipeline as ImageSegmentationPipeline,__webpack_exports__ImageToImagePipeline as ImageToImagePipeline,__webpack_exports__ImageToTextPipeline as ImageToTextPipeline,__webpack_exports__InterruptableStoppingCriteria as InterruptableStoppingCriteria,__webpack_exports__JAISLMHeadModel as JAISLMHeadModel,__webpack_exports__JAISModel as JAISModel,__webpack_exports__JAISPreTrainedModel as JAISPreTrainedModel,__webpack_exports__JinaCLIPImageProcessor as JinaCLIPImageProcessor,__webpack_exports__JinaCLIPModel as JinaCLIPModel,__webpack_exports__JinaCLIPPreTrainedModel as JinaCLIPPreTrainedModel,__webpack_exports__JinaCLIPProcessor as JinaCLIPProcessor,__webpack_exports__JinaCLIPTextModel as JinaCLIPTextModel,__webpack_exports__JinaCLIPVisionModel as JinaCLIPVisionModel,__webpack_exports__Lfm2ForCausalLM as Lfm2ForCausalLM,__webpack_exports__Lfm2Model as Lfm2Model,__webpack_exports__Lfm2PreTrainedModel as Lfm2PreTrainedModel,__webpack_exports__LiteWhisperForConditionalGeneration as LiteWhisperForConditionalGeneration,__webpack_exports__Llama4ForCausalLM as Llama4ForCausalLM,__webpack_exports__Llama4PreTrainedModel as Llama4PreTrainedModel,__webpack_exports__LlamaForCausalLM as LlamaForCausalLM,__webpack_exports__LlamaModel as LlamaModel,__webpack_exports__LlamaPreTrainedModel as LlamaPreTrainedModel,__webpack_exports__LlamaTokenizer as LlamaTokenizer,__webpack_exports__LlavaForConditionalGeneration as LlavaForConditionalGeneration,__webpack_exports__LlavaOnevisionForConditionalGeneration as LlavaOnevisionForConditionalGeneration,__webpack_exports__LlavaOnevisionImageProcessor as LlavaOnevisionImageProcessor,__webpack_exports__LlavaPreTrainedModel as LlavaPreTrainedModel,__webpack_exports__LlavaProcessor as LlavaProcessor,__webpack_exports__LlavaQwen2ForCausalLM as LlavaQwen2ForCausalLM,__webpack_exports__LogitsProcessor as LogitsProcessor,__webpack_exports__LogitsProcessorList as LogitsProcessorList,__webpack_exports__LogitsWarper as LogitsWarper,__webpack_exports__LongT5ForConditionalGeneration as LongT5ForConditionalGeneration,__webpack_exports__LongT5Model as LongT5Model,__webpack_exports__LongT5PreTrainedModel as LongT5PreTrainedModel,__webpack_exports__M2M100ForConditionalGeneration as M2M100ForConditionalGeneration,__webpack_exports__M2M100Model as M2M100Model,__webpack_exports__M2M100PreTrainedModel as M2M100PreTrainedModel,__webpack_exports__M2M100Tokenizer as M2M100Tokenizer,__webpack_exports__MBart50Tokenizer as MBart50Tokenizer,__webpack_exports__MBartForCausalLM as MBartForCausalLM,__webpack_exports__MBartForConditionalGeneration as MBartForConditionalGeneration,__webpack_exports__MBartForSequenceClassification as MBartForSequenceClassification,__webpack_exports__MBartModel as MBartModel,__webpack_exports__MBartPreTrainedModel as MBartPreTrainedModel,__webpack_exports__MBartTokenizer as MBartTokenizer,__webpack_exports__MPNetForMaskedLM as MPNetForMaskedLM,__webpack_exports__MPNetForQuestionAnswering as MPNetForQuestionAnswering,__webpack_exports__MPNetForSequenceClassification as MPNetForSequenceClassification,__webpack_exports__MPNetForTokenClassification as MPNetForTokenClassification,__webpack_exports__MPNetModel as MPNetModel,__webpack_exports__MPNetPreTrainedModel as MPNetPreTrainedModel,__webpack_exports__MPNetTokenizer as MPNetTokenizer,__webpack_exports__MT5ForConditionalGeneration as MT5ForConditionalGeneration,__webpack_exports__MT5Model as MT5Model,__webpack_exports__MT5PreTrainedModel as MT5PreTrainedModel,__webpack_exports__MarianMTModel as MarianMTModel,__webpack_exports__MarianModel as MarianModel,__webpack_exports__MarianPreTrainedModel as MarianPreTrainedModel,__webpack_exports__MarianTokenizer as MarianTokenizer,__webpack_exports__Mask2FormerImageProcessor as Mask2FormerImageProcessor,__webpack_exports__MaskFormerFeatureExtractor as MaskFormerFeatureExtractor,__webpack_exports__MaskFormerForInstanceSegmentation as MaskFormerForInstanceSegmentation,__webpack_exports__MaskFormerImageProcessor as MaskFormerImageProcessor,__webpack_exports__MaskFormerModel as MaskFormerModel,__webpack_exports__MaskFormerPreTrainedModel as MaskFormerPreTrainedModel,__webpack_exports__MaskedLMOutput as MaskedLMOutput,__webpack_exports__MaxLengthCriteria as MaxLengthCriteria,__webpack_exports__Metric3DForDepthEstimation as Metric3DForDepthEstimation,__webpack_exports__Metric3DPreTrainedModel as Metric3DPreTrainedModel,__webpack_exports__Metric3Dv2ForDepthEstimation as Metric3Dv2ForDepthEstimation,__webpack_exports__Metric3Dv2PreTrainedModel as Metric3Dv2PreTrainedModel,__webpack_exports__MgpstrForSceneTextRecognition as MgpstrForSceneTextRecognition,__webpack_exports__MgpstrModelOutput as MgpstrModelOutput,__webpack_exports__MgpstrPreTrainedModel as MgpstrPreTrainedModel,__webpack_exports__MgpstrProcessor as MgpstrProcessor,__webpack_exports__MgpstrTokenizer as MgpstrTokenizer,__webpack_exports__MimiDecoderModel as MimiDecoderModel,__webpack_exports__MimiDecoderOutput as MimiDecoderOutput,__webpack_exports__MimiEncoderModel as MimiEncoderModel,__webpack_exports__MimiEncoderOutput as MimiEncoderOutput,__webpack_exports__MimiModel as MimiModel,__webpack_exports__MimiPreTrainedModel as MimiPreTrainedModel,__webpack_exports__MinLengthLogitsProcessor as MinLengthLogitsProcessor,__webpack_exports__MinNewTokensLengthLogitsProcessor as MinNewTokensLengthLogitsProcessor,__webpack_exports__MistralForCausalLM as MistralForCausalLM,__webpack_exports__MistralModel as MistralModel,__webpack_exports__MistralPreTrainedModel as MistralPreTrainedModel,__webpack_exports__MobileBertForMaskedLM as MobileBertForMaskedLM,__webpack_exports__MobileBertForQuestionAnswering as MobileBertForQuestionAnswering,__webpack_exports__MobileBertForSequenceClassification as MobileBertForSequenceClassification,__webpack_exports__MobileBertModel as MobileBertModel,__webpack_exports__MobileBertPreTrainedModel as MobileBertPreTrainedModel,__webpack_exports__MobileBertTokenizer as MobileBertTokenizer,__webpack_exports__MobileLLMForCausalLM as MobileLLMForCausalLM,__webpack_exports__MobileLLMModel as MobileLLMModel,__webpack_exports__MobileLLMPreTrainedModel as MobileLLMPreTrainedModel,__webpack_exports__MobileNetV1FeatureExtractor as MobileNetV1FeatureExtractor,__webpack_exports__MobileNetV1ForImageClassification as MobileNetV1ForImageClassification,__webpack_exports__MobileNetV1ForSemanticSegmentation as MobileNetV1ForSemanticSegmentation,__webpack_exports__MobileNetV1ImageProcessor as MobileNetV1ImageProcessor,__webpack_exports__MobileNetV1Model as MobileNetV1Model,__webpack_exports__MobileNetV1PreTrainedModel as MobileNetV1PreTrainedModel,__webpack_exports__MobileNetV2FeatureExtractor as MobileNetV2FeatureExtractor,__webpack_exports__MobileNetV2ForImageClassification as MobileNetV2ForImageClassification,__webpack_exports__MobileNetV2ForSemanticSegmentation as MobileNetV2ForSemanticSegmentation,__webpack_exports__MobileNetV2ImageProcessor as MobileNetV2ImageProcessor,__webpack_exports__MobileNetV2Model as MobileNetV2Model,__webpack_exports__MobileNetV2PreTrainedModel as MobileNetV2PreTrainedModel,__webpack_exports__MobileNetV3FeatureExtractor as MobileNetV3FeatureExtractor,__webpack_exports__MobileNetV3ForImageClassification as MobileNetV3ForImageClassification,__webpack_exports__MobileNetV3ForSemanticSegmentation as MobileNetV3ForSemanticSegmentation,__webpack_exports__MobileNetV3ImageProcessor as MobileNetV3ImageProcessor,__webpack_exports__MobileNetV3Model as MobileNetV3Model,__webpack_exports__MobileNetV3PreTrainedModel as MobileNetV3PreTrainedModel,__webpack_exports__MobileNetV4FeatureExtractor as MobileNetV4FeatureExtractor,__webpack_exports__MobileNetV4ForImageClassification as MobileNetV4ForImageClassification,__webpack_exports__MobileNetV4ForSemanticSegmentation as MobileNetV4ForSemanticSegmentation,__webpack_exports__MobileNetV4ImageProcessor as MobileNetV4ImageProcessor,__webpack_exports__MobileNetV4Model as MobileNetV4Model,__webpack_exports__MobileNetV4PreTrainedModel as MobileNetV4PreTrainedModel,__webpack_exports__MobileViTFeatureExtractor as MobileViTFeatureExtractor,__webpack_exports__MobileViTForImageClassification as MobileViTForImageClassification,__webpack_exports__MobileViTImageProcessor as MobileViTImageProcessor,__webpack_exports__MobileViTModel as MobileViTModel,__webpack_exports__MobileViTPreTrainedModel as MobileViTPreTrainedModel,__webpack_exports__MobileViTV2ForImageClassification as MobileViTV2ForImageClassification,__webpack_exports__MobileViTV2Model as MobileViTV2Model,__webpack_exports__MobileViTV2PreTrainedModel as MobileViTV2PreTrainedModel,__webpack_exports__ModelOutput as ModelOutput,__webpack_exports__ModernBertDecoderForCausalLM as ModernBertDecoderForCausalLM,__webpack_exports__ModernBertDecoderModel as ModernBertDecoderModel,__webpack_exports__ModernBertDecoderPreTrainedModel as ModernBertDecoderPreTrainedModel,__webpack_exports__ModernBertForMaskedLM as ModernBertForMaskedLM,__webpack_exports__ModernBertForSequenceClassification as ModernBertForSequenceClassification,__webpack_exports__ModernBertForTokenClassification as ModernBertForTokenClassification,__webpack_exports__ModernBertModel as ModernBertModel,__webpack_exports__ModernBertPreTrainedModel as ModernBertPreTrainedModel,__webpack_exports__Moondream1ForConditionalGeneration as Moondream1ForConditionalGeneration,__webpack_exports__MoonshineFeatureExtractor as MoonshineFeatureExtractor,__webpack_exports__MoonshineForConditionalGeneration as MoonshineForConditionalGeneration,__webpack_exports__MoonshineModel as MoonshineModel,__webpack_exports__MoonshinePreTrainedModel as MoonshinePreTrainedModel,__webpack_exports__MoonshineProcessor as MoonshineProcessor,__webpack_exports__MptForCausalLM as MptForCausalLM,__webpack_exports__MptModel as MptModel,__webpack_exports__MptPreTrainedModel as MptPreTrainedModel,__webpack_exports__MultiModalityCausalLM as MultiModalityCausalLM,__webpack_exports__MultiModalityPreTrainedModel as MultiModalityPreTrainedModel,__webpack_exports__MusicgenForCausalLM as MusicgenForCausalLM,__webpack_exports__MusicgenForConditionalGeneration as MusicgenForConditionalGeneration,__webpack_exports__MusicgenModel as MusicgenModel,__webpack_exports__MusicgenPreTrainedModel as MusicgenPreTrainedModel,__webpack_exports__NeoBertForMaskedLM as NeoBertForMaskedLM,__webpack_exports__NeoBertForQuestionAnswering as NeoBertForQuestionAnswering,__webpack_exports__NeoBertForSequenceClassification as NeoBertForSequenceClassification,__webpack_exports__NeoBertForTokenClassification as NeoBertForTokenClassification,__webpack_exports__NeoBertModel as NeoBertModel,__webpack_exports__NeoBertPreTrainedModel as NeoBertPreTrainedModel,__webpack_exports__NllbTokenizer as NllbTokenizer,__webpack_exports__NoBadWordsLogitsProcessor as NoBadWordsLogitsProcessor,__webpack_exports__NoRepeatNGramLogitsProcessor as NoRepeatNGramLogitsProcessor,__webpack_exports__NomicBertModel as NomicBertModel,__webpack_exports__NomicBertPreTrainedModel as NomicBertPreTrainedModel,__webpack_exports__NougatImageProcessor as NougatImageProcessor,__webpack_exports__NougatTokenizer as NougatTokenizer,__webpack_exports__OPTForCausalLM as OPTForCausalLM,__webpack_exports__OPTModel as OPTModel,__webpack_exports__OPTPreTrainedModel as OPTPreTrainedModel,__webpack_exports__ObjectDetectionPipeline as ObjectDetectionPipeline,__webpack_exports__Olmo2ForCausalLM as Olmo2ForCausalLM,__webpack_exports__Olmo2Model as Olmo2Model,__webpack_exports__Olmo2PreTrainedModel as Olmo2PreTrainedModel,__webpack_exports__OlmoForCausalLM as OlmoForCausalLM,__webpack_exports__OlmoModel as OlmoModel,__webpack_exports__OlmoPreTrainedModel as OlmoPreTrainedModel,__webpack_exports__OpenELMForCausalLM as OpenELMForCausalLM,__webpack_exports__OpenELMModel as OpenELMModel,__webpack_exports__OpenELMPreTrainedModel as OpenELMPreTrainedModel,__webpack_exports__OwlViTFeatureExtractor as OwlViTFeatureExtractor,__webpack_exports__OwlViTForObjectDetection as OwlViTForObjectDetection,__webpack_exports__OwlViTImageProcessor as OwlViTImageProcessor,__webpack_exports__OwlViTModel as OwlViTModel,__webpack_exports__OwlViTPreTrainedModel as OwlViTPreTrainedModel,__webpack_exports__OwlViTProcessor as OwlViTProcessor,__webpack_exports__Owlv2ForObjectDetection as Owlv2ForObjectDetection,__webpack_exports__Owlv2ImageProcessor as Owlv2ImageProcessor,__webpack_exports__Owlv2Model as Owlv2Model,__webpack_exports__Owlv2PreTrainedModel as Owlv2PreTrainedModel,__webpack_exports__PaliGemmaForConditionalGeneration as PaliGemmaForConditionalGeneration,__webpack_exports__PaliGemmaPreTrainedModel as PaliGemmaPreTrainedModel,__webpack_exports__PaliGemmaProcessor as PaliGemmaProcessor,__webpack_exports__PatchTSMixerForPrediction as PatchTSMixerForPrediction,__webpack_exports__PatchTSMixerModel as PatchTSMixerModel,__webpack_exports__PatchTSMixerPreTrainedModel as PatchTSMixerPreTrainedModel,__webpack_exports__PatchTSTForPrediction as PatchTSTForPrediction,__webpack_exports__PatchTSTModel as PatchTSTModel,__webpack_exports__PatchTSTPreTrainedModel as PatchTSTPreTrainedModel,__webpack_exports__Phi3ForCausalLM as Phi3ForCausalLM,__webpack_exports__Phi3Model as Phi3Model,__webpack_exports__Phi3PreTrainedModel as Phi3PreTrainedModel,__webpack_exports__Phi3VForCausalLM as Phi3VForCausalLM,__webpack_exports__Phi3VImageProcessor as Phi3VImageProcessor,__webpack_exports__Phi3VPreTrainedModel as Phi3VPreTrainedModel,__webpack_exports__Phi3VProcessor as Phi3VProcessor,__webpack_exports__PhiForCausalLM as PhiForCausalLM,__webpack_exports__PhiModel as PhiModel,__webpack_exports__PhiPreTrainedModel as PhiPreTrainedModel,__webpack_exports__Pipeline as Pipeline,__webpack_exports__PreTrainedModel as PreTrainedModel,__webpack_exports__PreTrainedTokenizer as PreTrainedTokenizer,__webpack_exports__PretrainedConfig as PretrainedConfig,__webpack_exports__PretrainedMixin as PretrainedMixin,__webpack_exports__Processor as Processor,__webpack_exports__PvtForImageClassification as PvtForImageClassification,__webpack_exports__PvtImageProcessor as PvtImageProcessor,__webpack_exports__PvtModel as PvtModel,__webpack_exports__PvtPreTrainedModel as PvtPreTrainedModel,__webpack_exports__PyAnnoteFeatureExtractor as PyAnnoteFeatureExtractor,__webpack_exports__PyAnnoteForAudioFrameClassification as PyAnnoteForAudioFrameClassification,__webpack_exports__PyAnnoteModel as PyAnnoteModel,__webpack_exports__PyAnnotePreTrainedModel as PyAnnotePreTrainedModel,__webpack_exports__PyAnnoteProcessor as PyAnnoteProcessor,__webpack_exports__QuestionAnsweringModelOutput as QuestionAnsweringModelOutput,__webpack_exports__QuestionAnsweringPipeline as QuestionAnsweringPipeline,__webpack_exports__Qwen2ForCausalLM as Qwen2ForCausalLM,__webpack_exports__Qwen2Model as Qwen2Model,__webpack_exports__Qwen2PreTrainedModel as Qwen2PreTrainedModel,__webpack_exports__Qwen2Tokenizer as Qwen2Tokenizer,__webpack_exports__Qwen2VLForConditionalGeneration as Qwen2VLForConditionalGeneration,__webpack_exports__Qwen2VLImageProcessor as Qwen2VLImageProcessor,__webpack_exports__Qwen2VLPreTrainedModel as Qwen2VLPreTrainedModel,__webpack_exports__Qwen2VLProcessor as Qwen2VLProcessor,__webpack_exports__Qwen3ForCausalLM as Qwen3ForCausalLM,__webpack_exports__Qwen3Model as Qwen3Model,__webpack_exports__Qwen3PreTrainedModel as Qwen3PreTrainedModel,__webpack_exports__RFDetrForObjectDetection as RFDetrForObjectDetection,__webpack_exports__RFDetrModel as RFDetrModel,__webpack_exports__RFDetrObjectDetectionOutput as RFDetrObjectDetectionOutput,__webpack_exports__RFDetrPreTrainedModel as RFDetrPreTrainedModel,__webpack_exports__RTDetrForObjectDetection as RTDetrForObjectDetection,__webpack_exports__RTDetrImageProcessor as RTDetrImageProcessor,__webpack_exports__RTDetrModel as RTDetrModel,__webpack_exports__RTDetrObjectDetectionOutput as RTDetrObjectDetectionOutput,__webpack_exports__RTDetrPreTrainedModel as RTDetrPreTrainedModel,__webpack_exports__RTDetrV2ForObjectDetection as RTDetrV2ForObjectDetection,__webpack_exports__RTDetrV2Model as RTDetrV2Model,__webpack_exports__RTDetrV2ObjectDetectionOutput as RTDetrV2ObjectDetectionOutput,__webpack_exports__RTDetrV2PreTrainedModel as RTDetrV2PreTrainedModel,__webpack_exports__RawAudio as RawAudio,__webpack_exports__RawImage as RawImage,__webpack_exports__RawVideo as RawVideo,__webpack_exports__RawVideoFrame as RawVideoFrame,__webpack_exports__RepetitionPenaltyLogitsProcessor as RepetitionPenaltyLogitsProcessor,__webpack_exports__ResNetForImageClassification as ResNetForImageClassification,__webpack_exports__ResNetModel as ResNetModel,__webpack_exports__ResNetPreTrainedModel as ResNetPreTrainedModel,__webpack_exports__RoFormerForMaskedLM as RoFormerForMaskedLM,__webpack_exports__RoFormerForQuestionAnswering as RoFormerForQuestionAnswering,__webpack_exports__RoFormerForSequenceClassification as RoFormerForSequenceClassification,__webpack_exports__RoFormerForTokenClassification as RoFormerForTokenClassification,__webpack_exports__RoFormerModel as RoFormerModel,__webpack_exports__RoFormerPreTrainedModel as RoFormerPreTrainedModel,__webpack_exports__RoFormerTokenizer as RoFormerTokenizer,__webpack_exports__RobertaForMaskedLM as RobertaForMaskedLM,__webpack_exports__RobertaForQuestionAnswering as RobertaForQuestionAnswering,__webpack_exports__RobertaForSequenceClassification as RobertaForSequenceClassification,__webpack_exports__RobertaForTokenClassification as RobertaForTokenClassification,__webpack_exports__RobertaModel as RobertaModel,__webpack_exports__RobertaPreTrainedModel as RobertaPreTrainedModel,__webpack_exports__RobertaTokenizer as RobertaTokenizer,__webpack_exports__SamImageProcessor as SamImageProcessor,__webpack_exports__SamImageSegmentationOutput as SamImageSegmentationOutput,__webpack_exports__SamModel as SamModel,__webpack_exports__SamPreTrainedModel as SamPreTrainedModel,__webpack_exports__SamProcessor as SamProcessor,__webpack_exports__SapiensForDepthEstimation as SapiensForDepthEstimation,__webpack_exports__SapiensForNormalEstimation as SapiensForNormalEstimation,__webpack_exports__SapiensForSemanticSegmentation as SapiensForSemanticSegmentation,__webpack_exports__SapiensPreTrainedModel as SapiensPreTrainedModel,__webpack_exports__SeamlessM4TFeatureExtractor as SeamlessM4TFeatureExtractor,__webpack_exports__SegformerFeatureExtractor as SegformerFeatureExtractor,__webpack_exports__SegformerForImageClassification as SegformerForImageClassification,__webpack_exports__SegformerForSemanticSegmentation as SegformerForSemanticSegmentation,__webpack_exports__SegformerImageProcessor as SegformerImageProcessor,__webpack_exports__SegformerModel as SegformerModel,__webpack_exports__SegformerPreTrainedModel as SegformerPreTrainedModel,__webpack_exports__Seq2SeqLMOutput as Seq2SeqLMOutput,__webpack_exports__SequenceClassifierOutput as SequenceClassifierOutput,__webpack_exports__SiglipImageProcessor as SiglipImageProcessor,__webpack_exports__SiglipModel as SiglipModel,__webpack_exports__SiglipPreTrainedModel as SiglipPreTrainedModel,__webpack_exports__SiglipTextModel as SiglipTextModel,__webpack_exports__SiglipTokenizer as SiglipTokenizer,__webpack_exports__SiglipVisionModel as SiglipVisionModel,__webpack_exports__SmolLM3ForCausalLM as SmolLM3ForCausalLM,__webpack_exports__SmolLM3Model as SmolLM3Model,__webpack_exports__SmolLM3PreTrainedModel as SmolLM3PreTrainedModel,__webpack_exports__SmolVLMForConditionalGeneration as SmolVLMForConditionalGeneration,__webpack_exports__SmolVLMImageProcessor as SmolVLMImageProcessor,__webpack_exports__SmolVLMProcessor as SmolVLMProcessor,__webpack_exports__SnacDecoderModel as SnacDecoderModel,__webpack_exports__SnacEncoderModel as SnacEncoderModel,__webpack_exports__SnacFeatureExtractor as SnacFeatureExtractor,__webpack_exports__SnacModel as SnacModel,__webpack_exports__SnacPreTrainedModel as SnacPreTrainedModel,__webpack_exports__SpeechT5FeatureExtractor as SpeechT5FeatureExtractor,__webpack_exports__SpeechT5ForSpeechToText as SpeechT5ForSpeechToText,__webpack_exports__SpeechT5ForTextToSpeech as SpeechT5ForTextToSpeech,__webpack_exports__SpeechT5HifiGan as SpeechT5HifiGan,__webpack_exports__SpeechT5Model as SpeechT5Model,__webpack_exports__SpeechT5PreTrainedModel as SpeechT5PreTrainedModel,__webpack_exports__SpeechT5Processor as SpeechT5Processor,__webpack_exports__SpeechT5Tokenizer as SpeechT5Tokenizer,__webpack_exports__SqueezeBertForMaskedLM as SqueezeBertForMaskedLM,__webpack_exports__SqueezeBertForQuestionAnswering as SqueezeBertForQuestionAnswering,__webpack_exports__SqueezeBertForSequenceClassification as SqueezeBertForSequenceClassification,__webpack_exports__SqueezeBertModel as SqueezeBertModel,__webpack_exports__SqueezeBertPreTrainedModel as SqueezeBertPreTrainedModel,__webpack_exports__SqueezeBertTokenizer as SqueezeBertTokenizer,__webpack_exports__StableLmForCausalLM as StableLmForCausalLM,__webpack_exports__StableLmModel as StableLmModel,__webpack_exports__StableLmPreTrainedModel as StableLmPreTrainedModel,__webpack_exports__Starcoder2ForCausalLM as Starcoder2ForCausalLM,__webpack_exports__Starcoder2Model as Starcoder2Model,__webpack_exports__Starcoder2PreTrainedModel as Starcoder2PreTrainedModel,__webpack_exports__StoppingCriteria as StoppingCriteria,__webpack_exports__StoppingCriteriaList as StoppingCriteriaList,__webpack_exports__StyleTextToSpeech2Model as StyleTextToSpeech2Model,__webpack_exports__StyleTextToSpeech2PreTrainedModel as StyleTextToSpeech2PreTrainedModel,__webpack_exports__SummarizationPipeline as SummarizationPipeline,__webpack_exports__SuppressTokensAtBeginLogitsProcessor as SuppressTokensAtBeginLogitsProcessor,__webpack_exports__Swin2SRForImageSuperResolution as Swin2SRForImageSuperResolution,__webpack_exports__Swin2SRImageProcessor as Swin2SRImageProcessor,__webpack_exports__Swin2SRModel as Swin2SRModel,__webpack_exports__Swin2SRPreTrainedModel as Swin2SRPreTrainedModel,__webpack_exports__SwinForImageClassification as SwinForImageClassification,__webpack_exports__SwinForSemanticSegmentation as SwinForSemanticSegmentation,__webpack_exports__SwinModel as SwinModel,__webpack_exports__SwinPreTrainedModel as SwinPreTrainedModel,__webpack_exports__T5ForConditionalGeneration as T5ForConditionalGeneration,__webpack_exports__T5Model as T5Model,__webpack_exports__T5PreTrainedModel as T5PreTrainedModel,__webpack_exports__T5Tokenizer as T5Tokenizer,__webpack_exports__TableTransformerForObjectDetection as TableTransformerForObjectDetection,__webpack_exports__TableTransformerModel as TableTransformerModel,__webpack_exports__TableTransformerObjectDetectionOutput as TableTransformerObjectDetectionOutput,__webpack_exports__TableTransformerPreTrainedModel as TableTransformerPreTrainedModel,__webpack_exports__TemperatureLogitsWarper as TemperatureLogitsWarper,__webpack_exports__Tensor as Tensor,__webpack_exports__Text2TextGenerationPipeline as Text2TextGenerationPipeline,__webpack_exports__TextClassificationPipeline as TextClassificationPipeline,__webpack_exports__TextGenerationPipeline as TextGenerationPipeline,__webpack_exports__TextStreamer as TextStreamer,__webpack_exports__TextToAudioPipeline as TextToAudioPipeline,__webpack_exports__TokenClassificationPipeline as TokenClassificationPipeline,__webpack_exports__TokenClassifierOutput as TokenClassifierOutput,__webpack_exports__TokenizerModel as TokenizerModel,__webpack_exports__TopKLogitsWarper as TopKLogitsWarper,__webpack_exports__TopPLogitsWarper as TopPLogitsWarper,__webpack_exports__TrOCRForCausalLM as TrOCRForCausalLM,__webpack_exports__TrOCRPreTrainedModel as TrOCRPreTrainedModel,__webpack_exports__TranslationPipeline as TranslationPipeline,__webpack_exports__UltravoxModel as UltravoxModel,__webpack_exports__UltravoxPreTrainedModel as UltravoxPreTrainedModel,__webpack_exports__UltravoxProcessor as UltravoxProcessor,__webpack_exports__UniSpeechForCTC as UniSpeechForCTC,__webpack_exports__UniSpeechForSequenceClassification as UniSpeechForSequenceClassification,__webpack_exports__UniSpeechModel as UniSpeechModel,__webpack_exports__UniSpeechPreTrainedModel as UniSpeechPreTrainedModel,__webpack_exports__UniSpeechSatForAudioFrameClassification as UniSpeechSatForAudioFrameClassification,__webpack_exports__UniSpeechSatForCTC as UniSpeechSatForCTC,__webpack_exports__UniSpeechSatForSequenceClassification as UniSpeechSatForSequenceClassification,__webpack_exports__UniSpeechSatModel as UniSpeechSatModel,__webpack_exports__UniSpeechSatPreTrainedModel as UniSpeechSatPreTrainedModel,__webpack_exports__VLChatProcessor as VLChatProcessor,__webpack_exports__VLMImageProcessor as VLMImageProcessor,__webpack_exports__VaultGemmaForCausalLM as VaultGemmaForCausalLM,__webpack_exports__VaultGemmaModel as VaultGemmaModel,__webpack_exports__VaultGemmaPreTrainedModel as VaultGemmaPreTrainedModel,__webpack_exports__ViTFeatureExtractor as ViTFeatureExtractor,__webpack_exports__ViTForImageClassification as ViTForImageClassification,__webpack_exports__ViTImageProcessor as ViTImageProcessor,__webpack_exports__ViTMAEModel as ViTMAEModel,__webpack_exports__ViTMAEPreTrainedModel as ViTMAEPreTrainedModel,__webpack_exports__ViTMSNForImageClassification as ViTMSNForImageClassification,__webpack_exports__ViTMSNModel as ViTMSNModel,__webpack_exports__ViTMSNPreTrainedModel as ViTMSNPreTrainedModel,__webpack_exports__ViTModel as ViTModel,__webpack_exports__ViTPreTrainedModel as ViTPreTrainedModel,__webpack_exports__VisionEncoderDecoderModel as VisionEncoderDecoderModel,__webpack_exports__VitMatteForImageMatting as VitMatteForImageMatting,__webpack_exports__VitMatteImageProcessor as VitMatteImageProcessor,__webpack_exports__VitMattePreTrainedModel as VitMattePreTrainedModel,__webpack_exports__VitPoseForPoseEstimation as VitPoseForPoseEstimation,__webpack_exports__VitPoseImageProcessor as VitPoseImageProcessor,__webpack_exports__VitPosePreTrainedModel as VitPosePreTrainedModel,__webpack_exports__VitsModel as VitsModel,__webpack_exports__VitsModelOutput as VitsModelOutput,__webpack_exports__VitsPreTrainedModel as VitsPreTrainedModel,__webpack_exports__VitsTokenizer as VitsTokenizer,__webpack_exports__VoxtralForConditionalGeneration as VoxtralForConditionalGeneration,__webpack_exports__VoxtralProcessor as VoxtralProcessor,__webpack_exports__Wav2Vec2BertForCTC as Wav2Vec2BertForCTC,__webpack_exports__Wav2Vec2BertForSequenceClassification as Wav2Vec2BertForSequenceClassification,__webpack_exports__Wav2Vec2BertModel as Wav2Vec2BertModel,__webpack_exports__Wav2Vec2BertPreTrainedModel as Wav2Vec2BertPreTrainedModel,__webpack_exports__Wav2Vec2CTCTokenizer as Wav2Vec2CTCTokenizer,__webpack_exports__Wav2Vec2FeatureExtractor as Wav2Vec2FeatureExtractor,__webpack_exports__Wav2Vec2ForAudioFrameClassification as Wav2Vec2ForAudioFrameClassification,__webpack_exports__Wav2Vec2ForCTC as Wav2Vec2ForCTC,__webpack_exports__Wav2Vec2ForSequenceClassification as Wav2Vec2ForSequenceClassification,__webpack_exports__Wav2Vec2Model as Wav2Vec2Model,__webpack_exports__Wav2Vec2PreTrainedModel as Wav2Vec2PreTrainedModel,__webpack_exports__Wav2Vec2Processor as Wav2Vec2Processor,__webpack_exports__Wav2Vec2ProcessorWithLM as Wav2Vec2ProcessorWithLM,__webpack_exports__WavLMForAudioFrameClassification as WavLMForAudioFrameClassification,__webpack_exports__WavLMForCTC as WavLMForCTC,__webpack_exports__WavLMForSequenceClassification as WavLMForSequenceClassification,__webpack_exports__WavLMForXVector as WavLMForXVector,__webpack_exports__WavLMModel as WavLMModel,__webpack_exports__WavLMPreTrainedModel as WavLMPreTrainedModel,__webpack_exports__WeSpeakerFeatureExtractor as WeSpeakerFeatureExtractor,__webpack_exports__WeSpeakerResNetModel as WeSpeakerResNetModel,__webpack_exports__WeSpeakerResNetPreTrainedModel as WeSpeakerResNetPreTrainedModel,__webpack_exports__WhisperFeatureExtractor as WhisperFeatureExtractor,__webpack_exports__WhisperForConditionalGeneration as WhisperForConditionalGeneration,__webpack_exports__WhisperModel as WhisperModel,__webpack_exports__WhisperPreTrainedModel as WhisperPreTrainedModel,__webpack_exports__WhisperProcessor as WhisperProcessor,__webpack_exports__WhisperTextStreamer as WhisperTextStreamer,__webpack_exports__WhisperTimeStampLogitsProcessor as WhisperTimeStampLogitsProcessor,__webpack_exports__WhisperTokenizer as WhisperTokenizer,__webpack_exports__XLMForQuestionAnswering as XLMForQuestionAnswering,__webpack_exports__XLMForSequenceClassification as XLMForSequenceClassification,__webpack_exports__XLMForTokenClassification as XLMForTokenClassification,__webpack_exports__XLMModel as XLMModel,__webpack_exports__XLMPreTrainedModel as XLMPreTrainedModel,__webpack_exports__XLMRobertaForMaskedLM as XLMRobertaForMaskedLM,__webpack_exports__XLMRobertaForQuestionAnswering as XLMRobertaForQuestionAnswering,__webpack_exports__XLMRobertaForSequenceClassification as XLMRobertaForSequenceClassification,__webpack_exports__XLMRobertaForTokenClassification as XLMRobertaForTokenClassification,__webpack_exports__XLMRobertaModel as XLMRobertaModel,__webpack_exports__XLMRobertaPreTrainedModel as XLMRobertaPreTrainedModel,__webpack_exports__XLMRobertaTokenizer as XLMRobertaTokenizer,__webpack_exports__XLMTokenizer as XLMTokenizer,__webpack_exports__XLMWithLMHeadModel as XLMWithLMHeadModel,__webpack_exports__XVectorOutput as XVectorOutput,__webpack_exports__YolosFeatureExtractor as YolosFeatureExtractor,__webpack_exports__YolosForObjectDetection as YolosForObjectDetection,__webpack_exports__YolosImageProcessor as YolosImageProcessor,__webpack_exports__YolosModel as YolosModel,__webpack_exports__YolosObjectDetectionOutput as YolosObjectDetectionOutput,__webpack_exports__YolosPreTrainedModel as YolosPreTrainedModel,__webpack_exports__ZeroShotAudioClassificationPipeline as ZeroShotAudioClassificationPipeline,__webpack_exports__ZeroShotClassificationPipeline as ZeroShotClassificationPipeline,__webpack_exports__ZeroShotImageClassificationPipeline as ZeroShotImageClassificationPipeline,__webpack_exports__ZeroShotObjectDetectionPipeline as ZeroShotObjectDetectionPipeline,__webpack_exports__bankers_round as bankers_round,__webpack_exports__cat as cat,__webpack_exports__cos_sim as cos_sim,__webpack_exports__dot as dot,__webpack_exports__dynamic_time_warping as dynamic_time_warping,__webpack_exports__env as env,__webpack_exports__full as full,__webpack_exports__full_like as full_like,__webpack_exports__getCacheShapes as getCacheShapes,__webpack_exports__hamming as hamming,__webpack_exports__hanning as hanning,__webpack_exports__interpolate as interpolate,__webpack_exports__interpolate_4d as interpolate_4d,__webpack_exports__interpolate_data as interpolate_data,__webpack_exports__is_chinese_char as is_chinese_char,__webpack_exports__layer_norm as layer_norm,__webpack_exports__load_image as load_image,__webpack_exports__load_video as load_video,__webpack_exports__log_softmax as log_softmax,__webpack_exports__magnitude as magnitude,__webpack_exports__matmul as matmul,__webpack_exports__max as max,__webpack_exports__mean as mean,__webpack_exports__mean_pooling as mean_pooling,__webpack_exports__medianFilter as medianFilter,__webpack_exports__mel_filter_bank as mel_filter_bank,__webpack_exports__min as min,__webpack_exports__ones as ones,__webpack_exports__ones_like as ones_like,__webpack_exports__permute as permute,__webpack_exports__permute_data as permute_data,__webpack_exports__pipeline as pipeline,__webpack_exports__quantize_embeddings as quantize_embeddings,__webpack_exports__rand as rand,__webpack_exports__read_audio as read_audio,__webpack_exports__rfft as rfft,__webpack_exports__round as round,__webpack_exports__slice as slice,__webpack_exports__softmax as softmax,__webpack_exports__spectrogram as spectrogram,__webpack_exports__stack as stack,__webpack_exports__std_mean as std_mean,__webpack_exports__topk as topk,__webpack_exports__window_function as window_function,__webpack_exports__zeros as zeros,__webpack_exports__zeros_like as zeros_like};
//# sourceMappingURL=transformers.min.js.map